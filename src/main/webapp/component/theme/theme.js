import { __assign, __makeTemplateObject } from "tslib";
import * as React from 'react';
import { createTheme, ThemeProvider, StyledEngineProvider, darken, lighten, alpha, } from '@mui/material/styles';
import { ThemeContext } from 'styled-components';
import { createGlobalStyle } from 'styled-components';
import { meetsContrastGuidelines } from 'polished';
import { useRemoveFocusStyle } from '../app/blueprint.adjust';
// // octo colors
// export const dark: Theme = {
//   background: '#F38832',
//   navbar: '#2B3A49',
//   panels: '#3A4A54',
//   overlays: '#475A66',
//   paper: '#213137',
//   primary: '#589dd5',
//   secondary: '#589dd5',
// }
export var dark = {
    background: '#0B1821',
    navbar: darken('#365160', 0.2),
    panels: '#243540',
    overlays: darken('#365160', 0.1),
    paper: darken('#365160', 0.2),
    tabs: darken('#243540', 0.3),
    primary: '#69E1E8',
    secondary: '#2196f3',
};
export var light = {
    primary: '#3c6dd5',
    secondary: '#2196f3',
    background: '#E5E5E5',
    navbar: '#fafbfc',
    panels: '#FCFCFC',
    tabs: darken('#FCFCFC', 0.05),
    overlays: '#FCFCFC',
    paper: '#FCFCFC',
};
export var Elevations = {
    navbar: 8,
    background: 0,
    paper: 2,
    panels: 6,
    overlays: 16,
};
export var MuiOutlinedInputBorderClasses = 'px-[14px] py-[8.5px] border rounded dark:border-white/20 border-black/20 dark:hover:border-white hover:border-black';
var GlobalStyles = createGlobalStyle(templateObject_1 || (templateObject_1 = __makeTemplateObject(["\n      .ol-overlaycontainer-stopevent {\n        display: none;\n      }\n      a {\n        color: inherit !important;\n      }\n      *.outline-none, a.outline-none, a, button{\n        outline: none !important; \n      }\n      span.highlight {\n        background-color: rgba(66, 110, 203, 0.40);\n      }\n      .MuiToolbar-root a,\n      .MuiToolbar-root .MuiBreadcrumbs-separator {\n        color: ", ";\n      }\n      .MuiDrawer-root a {\n        color: ", ";\n      }\n      .MuiTooltip-tooltip {\n        max-width: 50vw;\n        padding: 0px;\n        background-color: none;\n      }\n      .MuiFormControlLabel-labelPlacementStart {\n        margin-left: 0px;\n      }\n      @media (min-width: 600px) {\n        .MuiListItemIcon-root {\n          margin-left: 8px;\n        }\n      }\n      .lm_goldenlayout, .lm_content {\n        background: inherit;\n      }\n      .lm_splitter  {\n        background: ", ";\n        opacity: 1;\n      }\n      .lm_splitter:hover  {\n        background: ", " !important;\n      }\n      .lm_stack{\n        box-shadow: 0px 2px 1px -1px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 1px 3px 0px rgba(0,0,0,0.12);\n        background: ", " !important;\n        border-radius: 4px;\n        transition: box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n      }\n      .lm_header {\n        z-index: 0 !important;\n        background: ", " !important;\n      }\n      .lm_tab.lm_active {\n        background: ", " !important;\n            box-shadow: 0px 2px 1px -1px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 1px 3px 0px rgba(0,0,0,0.12) !important;\n      }\n      .lm_tab, lm_tabs {\n        border-radius: 4px !important;\n        border-bottom-left-radius: 0px !important;\n        border-bottom-right-radius: 0px !important;\n      }\n      .lm_tab:not(.lm_active) {\n        color: ", " !important;\n        background: ", " !important;\n        button {\n          visibility: hidden;\n        }\n      }\n      .lm_tabs .lm_tab {\n        border: 1px solid fade(@contrastColor, 10%);\n        margin-right: 8px !important;\n        box-shadow: none !important;\n        padding: 0px !important;\n        height: 44px !important;\n        minWidth: 44px !important;\n      }\n      .lm_tabs .lm_tab:hover {\n        color: ", " !important;\n      }\n      .lm_header,\n      .lm_tabs .lm_tab,\n      .lm_tabdropdown:before {\n        color: ", " !important;\n      }\n      .is-drawing [role=\"tooltip\"], .is-drawing .MuiPopover-root {\n        display: none!important;\n      }\n      [role=\"tooltip\"] {\n        z-index: 101 !important;\n        pointer-events: all !important;\n      }\n      .bp3-portal {\n        z-index: 101 !important;\n      }\n      .bp3-popover-wrapper,.bp3-popover-target, .bp3-control-group {\n        width: 100%;\n      }\n      .bp3-control-group {\n        flex-wrap: wrap;\n      }\n      .bp3-control-group > div:first-of-type::after {\n        content: 'and';\n        display:block;\n        position: absolute;\n        left: 14px;\n        bottom: -25px;\n      }\n      .bp3-control-group > div:nth-of-type(2) {\n        margin-top: 30px;\n      }\n      .bp3-input-group input {\n        background: transparent !important; \n        box-shadow: none !important;\n        font-size: 1.1428571428571428rem !important;\n        padding: 0px !important;\n        height: 1.3125rem !important;\n        line-height: 1.15 !important;\n      }\n      .bp3-popover .bp3-popover-content, .bp3-popover .bp3-popover-content, .bp3-datepicker, .bp3-menu{\n        background: ", " !important;\n      }\n      .bp3-popover-arrow {\n        display: none !important;\n      }\n      .bp3-datepicker .DayPicker-Day.DayPicker-Day--selected, .bp3-active {\n        background-color: ", " !important;\n      }\n      .bp3-table-quadrant, .bp3-table-cell-client, .bp3-table-row-headers {\n        background: inherit !important;\n      }\n      // for whatever reason they have a height of 0 sometimes, maybe MUI will fix this in v5\n      textarea.MuiInputBase-input {\n        min-height: 21px;\n      }\n      .MuiPaper-box-shadow {\n        box-shadow: 0px 3px 5px -1px rgba(0,0,0,0.2), 0px 6px 10px 0px rgba(0,0,0,0.14), 0px 1px 18px 0px rgba(0,0,0,0.12);\n      }\n      .MuiPaper-elevation0 {\n        background-color: ", ";\n      }\n      .MuiPaper-elevation8 {\n        background-color: ", ";\n      }\n      .MuiPaper-elevation6 {\n        background-color: ", ";\n      }\n      .MuiPaper-elevation16 {\n        background-color: ", ";\n      }\n      .MuiPaper-elevation2 {\n        border-width: 1px;\n        border-style: solid;\n        border-color: ", ";\n          background-color: ", ";\n      }\n      [data-behavior-dropdown] {\n        background-color: ", ";\n      }\n      .font-awesome-span {\n        && {\n          font-size: 1.4rem;\n          font-family: 'Open Sans', arial, sans-serif;\n        }\n        /* stylelint-disable */\n        &::before {\n          font-family: 'FontAwesome';\n          margin-left: 2px;\n          margin-right: 5px;\n        }\n      }\n      ::-webkit-scrollbar {\n        width: 8px;\n        height: 8px;\n      }\n      ::-webkit-scrollbar-track {\n        background: ", ";\n      }\n      ::-webkit-scrollbar-thumb {\n        background: ", ";\n            border-radius: 4px;\n      }\n      // fix an issue where focus is applied because of blueprint to popover papers\n      .MuiPaper-root:focus { \n        outline: none;\n      }\n      // Fix Mui styles \n      .MuiButton-endIcon {\n        margin-left: 0px;\n        margin-right: 0px;\n      }\n      .MuiButton-iconSizeSmall > svg {\n        font-size: 18px;\n        margin-top: 1px;\n      }\n      // Mui tailwind style\n      .Mui-icon-size-small {\n        font-size: 18px;\n      }\n      [disabled] .Mui-text-text-primary,\n      [disabled] .Mui-text-primary,\n      [disabled] .Mui-text-secondary {\n        color: ", ";\n      }\n      .Mui-text-text-primary {\n        color: ", ";\n      }\n      .Mui-text-primary {\n        color: ", ";\n      }\n      .Mui-text-secondary {\n        color: ", ";\n      }\n      .Mui-text-warning {\n        color: ", ";\n      }\n      .Mui-text-error {\n        color: ", ";\n      }\n      .Mui-bg-default {\n        background-color: ", ";\n      }\n      .Mui-bg-primary {\n        background-color: ", ";\n      }\n      .Mui-bg-secondary {\n        background-color: ", ";\n      }\n      .Mui-bg-divider {\n        background-color: ", ";\n      }\n      .Mui-border-divider {\n        border-color: ", ";\n      }\n      .Mui-bg-button:hover,\n      .Mui-bg-button:focus-within {\n        background: ", ";\n      }\n      .theme-bg-overlays {\n        background: ", ";\n      }\n      .children-max-h-full {\n        > * {\n          max-height: 100%;\n        }\n      }\n      .children-h-full {\n        > * {\n          height: 100%;\n        }\n      }\n      .children-block {\n        > * {\n          display: block;\n        }\n      }\n      .children-p-0 {\n        > * {\n          padding: 0px;\n        }\n      }\n      // idea is to have this track with subtracting margin / padding\n      .max-w-full-1 {\n        max-width: calc(100% - 2*0.25rem);\n      }\n      .max-w-full-2 {\n        max-width: calc(100% - 2*0.5rem);\n      }\n      .max-w-full-3 {\n        max-width: calc(100% - 2*0.75rem);\n      }\n      .max-w-full-4 {\n        max-width: calc(100% - 2*1rem);\n      }\n      .min-w-32 {\n        min-width: 8rem;\n      }\n      .min-w-16\t{\n        min-width: 4rem;\n      }\n    "], ["\n      .ol-overlaycontainer-stopevent {\n        display: none;\n      }\n      a {\n        color: inherit !important;\n      }\n      *.outline-none, a.outline-none, a, button{\n        outline: none !important; \n      }\n      span.highlight {\n        background-color: rgba(66, 110, 203, 0.40);\n      }\n      .MuiToolbar-root a,\n      .MuiToolbar-root .MuiBreadcrumbs-separator {\n        color: ", ";\n      }\n      .MuiDrawer-root a {\n        color: ", ";\n      }\n      .MuiTooltip-tooltip {\n        max-width: 50vw;\n        padding: 0px;\n        background-color: none;\n      }\n      .MuiFormControlLabel-labelPlacementStart {\n        margin-left: 0px;\n      }\n      @media (min-width: 600px) {\n        .MuiListItemIcon-root {\n          margin-left: 8px;\n        }\n      }\n      .lm_goldenlayout, .lm_content {\n        background: inherit;\n      }\n      .lm_splitter  {\n        background: ", ";\n        opacity: 1;\n      }\n      .lm_splitter:hover  {\n        background: ", " !important;\n      }\n      .lm_stack{\n        box-shadow: 0px 2px 1px -1px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 1px 3px 0px rgba(0,0,0,0.12);\n        background: ", " !important;\n        border-radius: 4px;\n        transition: box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n      }\n      .lm_header {\n        z-index: 0 !important;\n        background: ", " !important;\n      }\n      .lm_tab.lm_active {\n        background: ", " !important;\n            box-shadow: 0px 2px 1px -1px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 1px 3px 0px rgba(0,0,0,0.12) !important;\n      }\n      .lm_tab, lm_tabs {\n        border-radius: 4px !important;\n        border-bottom-left-radius: 0px !important;\n        border-bottom-right-radius: 0px !important;\n      }\n      .lm_tab:not(.lm_active) {\n        color: ", " !important;\n        background: ", " !important;\n        button {\n          visibility: hidden;\n        }\n      }\n      .lm_tabs .lm_tab {\n        border: 1px solid fade(@contrastColor, 10%);\n        margin-right: 8px !important;\n        box-shadow: none !important;\n        padding: 0px !important;\n        height: 44px !important;\n        minWidth: 44px !important;\n      }\n      .lm_tabs .lm_tab:hover {\n        color: ", " !important;\n      }\n      .lm_header,\n      .lm_tabs .lm_tab,\n      .lm_tabdropdown:before {\n        color: ", " !important;\n      }\n      .is-drawing [role=\"tooltip\"], .is-drawing .MuiPopover-root {\n        display: none!important;\n      }\n      [role=\"tooltip\"] {\n        z-index: 101 !important;\n        pointer-events: all !important;\n      }\n      .bp3-portal {\n        z-index: 101 !important;\n      }\n      .bp3-popover-wrapper,.bp3-popover-target, .bp3-control-group {\n        width: 100%;\n      }\n      .bp3-control-group {\n        flex-wrap: wrap;\n      }\n      .bp3-control-group > div:first-of-type::after {\n        content: 'and';\n        display:block;\n        position: absolute;\n        left: 14px;\n        bottom: -25px;\n      }\n      .bp3-control-group > div:nth-of-type(2) {\n        margin-top: 30px;\n      }\n      .bp3-input-group input {\n        background: transparent !important; \n        box-shadow: none !important;\n        font-size: 1.1428571428571428rem !important;\n        padding: 0px !important;\n        height: 1.3125rem !important;\n        line-height: 1.15 !important;\n      }\n      .bp3-popover .bp3-popover-content, .bp3-popover .bp3-popover-content, .bp3-datepicker, .bp3-menu{\n        background: ", " !important;\n      }\n      .bp3-popover-arrow {\n        display: none !important;\n      }\n      .bp3-datepicker .DayPicker-Day.DayPicker-Day--selected, .bp3-active {\n        background-color: ", " !important;\n      }\n      .bp3-table-quadrant, .bp3-table-cell-client, .bp3-table-row-headers {\n        background: inherit !important;\n      }\n      // for whatever reason they have a height of 0 sometimes, maybe MUI will fix this in v5\n      textarea.MuiInputBase-input {\n        min-height: 21px;\n      }\n      .MuiPaper-box-shadow {\n        box-shadow: 0px 3px 5px -1px rgba(0,0,0,0.2), 0px 6px 10px 0px rgba(0,0,0,0.14), 0px 1px 18px 0px rgba(0,0,0,0.12);\n      }\n      .MuiPaper-elevation0 {\n        background-color: ", ";\n      }\n      .MuiPaper-elevation8 {\n        background-color: ", ";\n      }\n      .MuiPaper-elevation6 {\n        background-color: ", ";\n      }\n      .MuiPaper-elevation16 {\n        background-color: ", ";\n      }\n      .MuiPaper-elevation2 {\n        border-width: 1px;\n        border-style: solid;\n        border-color: ", ";\n          background-color: ", ";\n      }\n      [data-behavior-dropdown] {\n        background-color: ", ";\n      }\n      .font-awesome-span {\n        && {\n          font-size: 1.4rem;\n          font-family: 'Open Sans', arial, sans-serif;\n        }\n        /* stylelint-disable */\n        &::before {\n          font-family: 'FontAwesome';\n          margin-left: 2px;\n          margin-right: 5px;\n        }\n      }\n      ::-webkit-scrollbar {\n        width: 8px;\n        height: 8px;\n      }\n      ::-webkit-scrollbar-track {\n        background: ", ";\n      }\n      ::-webkit-scrollbar-thumb {\n        background: ", ";\n            border-radius: 4px;\n      }\n      // fix an issue where focus is applied because of blueprint to popover papers\n      .MuiPaper-root:focus { \n        outline: none;\n      }\n      // Fix Mui styles \n      .MuiButton-endIcon {\n        margin-left: 0px;\n        margin-right: 0px;\n      }\n      .MuiButton-iconSizeSmall > svg {\n        font-size: 18px;\n        margin-top: 1px;\n      }\n      // Mui tailwind style\n      .Mui-icon-size-small {\n        font-size: 18px;\n      }\n      [disabled] .Mui-text-text-primary,\n      [disabled] .Mui-text-primary,\n      [disabled] .Mui-text-secondary {\n        color: ", ";\n      }\n      .Mui-text-text-primary {\n        color: ", ";\n      }\n      .Mui-text-primary {\n        color: ", ";\n      }\n      .Mui-text-secondary {\n        color: ", ";\n      }\n      .Mui-text-warning {\n        color: ", ";\n      }\n      .Mui-text-error {\n        color: ", ";\n      }\n      .Mui-bg-default {\n        background-color: ", ";\n      }\n      .Mui-bg-primary {\n        background-color: ", ";\n      }\n      .Mui-bg-secondary {\n        background-color: ", ";\n      }\n      .Mui-bg-divider {\n        background-color: ", ";\n      }\n      .Mui-border-divider {\n        border-color: ", ";\n      }\n      .Mui-bg-button:hover,\n      .Mui-bg-button:focus-within {\n        background: ", ";\n      }\n      .theme-bg-overlays {\n        background: ", ";\n      }\n      .children-max-h-full {\n        > * {\n          max-height: 100%;\n        }\n      }\n      .children-h-full {\n        > * {\n          height: 100%;\n        }\n      }\n      .children-block {\n        > * {\n          display: block;\n        }\n      }\n      .children-p-0 {\n        > * {\n          padding: 0px;\n        }\n      }\n      // idea is to have this track with subtracting margin / padding\n      .max-w-full-1 {\n        max-width: calc(100% - 2*0.25rem);\n      }\n      .max-w-full-2 {\n        max-width: calc(100% - 2*0.5rem);\n      }\n      .max-w-full-3 {\n        max-width: calc(100% - 2*0.75rem);\n      }\n      .max-w-full-4 {\n        max-width: calc(100% - 2*1rem);\n      }\n      .min-w-32 {\n        min-width: 8rem;\n      }\n      .min-w-16\t{\n        min-width: 4rem;\n      }\n    "])), function (props) {
    return props.palette.getContrastText(props.palette.primary.main);
}, function (props) {
    return props.palette.getContrastText(props.palette.background.paper);
}, function (props) { return props.palette.background.default; }, function (props) { return props.palette.primary.main; }, function (props) {
    return props.palette.mode === 'dark'
        ? dark.panels
        : light.panels;
}, function (props) {
    return props.palette.mode === 'dark'
        ? dark.background
        : light.background;
}, function (props) {
    return props.palette.mode === 'dark'
        ? dark.panels
        : light.panels;
}, function (props) {
    return props.palette.mode === 'dark'
        ? props.palette.text.secondary
        : props.palette.text.secondary;
}, function (props) {
    return props.palette.mode === 'dark' ? dark.tabs : light.tabs;
}, function (props) { return props.palette.text.primary; }, function (props) { return props.palette.text.primary; }, function (props) { return props.palette.background.paper; }, function (props) { return props.palette.primary.dark; }, function (props) {
    return props.palette.mode === 'dark' ? dark.background : light.background;
}, function (props) {
    return props.palette.mode === 'dark' ? dark.navbar : light.navbar;
}, function (props) {
    return props.palette.mode === 'dark' ? dark.panels : light.panels;
}, function (props) {
    return props.palette.mode === 'dark' ? dark.overlays : light.overlays;
}, function (props) {
    return props.palette.mode === 'dark'
        ? props.palette.divider
        : props.palette.divider;
}, function (props) {
    return props.palette.mode === 'dark' ? dark.paper : light.paper;
}, function (props) {
    return props.palette.mode === 'dark' ? dark.overlays : light.overlays;
}, function (props) {
    return props.palette.mode === 'dark'
        ? 'rgb(30, 44, 53)'
        : 'rgb(229, 229, 229)';
}, function (props) {
    return props.palette.mode === 'dark'
        ? 'linear-gradient(-180deg, rgb(229, 229, 229) 0%, rgb(206, 206, 206) 100%)'
        : 'linear-gradient(-180deg, rgb(153, 153, 153) 0%, rgb(187, 187, 187) 100%)';
}, function (props) {
    return props.palette.mode === 'dark'
        ? 'rgba(255, 255, 255, 0.3)'
        : 'rgba(0, 0, 0, 0.26)';
}, function (props) { return props.palette.text.primary; }, function (props) { return props.palette.primary.main; }, function (props) { return props.palette.secondary.main; }, function (props) { return props.palette.warning.main; }, function (props) { return props.palette.error.main; }, function (props) { return props.palette.background.default; }, function (props) { return props.palette.primary.main; }, function (props) { return props.palette.secondary.main; }, function (props) { return props.palette.divider; }, function (props) { return props.palette.divider; }, function (props) {
    return props.palette.mode === 'dark'
        ? 'rgba(255, 255, 255, 0.08)'
        : 'rgba(0, 0, 0, 0.04)';
}, function (props) {
    return props.palette.mode === 'dark' ? dark.overlays : light.overlays;
});
var lightenUntilContrasting = function (color, background) {
    var passes = meetsContrastGuidelines(color, background);
    if (passes.AA) {
        return color;
    }
    return lightenUntilContrasting(lighten(color, 0.1), background);
};
var darkenUntilContrasting = function (color, background) {
    var passes = meetsContrastGuidelines(color, background);
    if (passes.AA) {
        return color;
    }
    return darkenUntilContrasting(darken(color, 0.1), background);
};
export var Provider = function (_a) {
    var children = _a.children;
    var styledTheme = React.useContext(ThemeContext);
    var darkMode = styledTheme.theme === 'dark';
    var paperColor = darkMode ? dark.paper : light.paper;
    var backgroundColor = darkMode ? dark.background : light.background;
    var customPalette = styledTheme.palette === 'custom' &&
        styledTheme.primary &&
        styledTheme.secondary;
    var primaryMain = customPalette
        ? styledTheme.primary
        : darkMode
            ? dark.primary
            : light.primary;
    var secondaryMain = customPalette
        ? styledTheme.secondary
        : darkMode
            ? dark.secondary
            : light.secondary;
    var primaryContrastScores = meetsContrastGuidelines(paperColor, primaryMain);
    var secondaryContrastScores = meetsContrastGuidelines(paperColor, secondaryMain);
    var failedContrastPrimaryReplacement = darkMode
        ? lightenUntilContrasting(primaryMain, paperColor)
        : darkenUntilContrasting(primaryMain, paperColor);
    var failedContrastSecondaryReplacement = darkMode
        ? lightenUntilContrasting(secondaryMain, paperColor)
        : darkenUntilContrasting(secondaryMain, paperColor);
    /**
     *  Specify theme settings that don't need variables from theme
     *
     *  We do things like the typography here because otherwise the defaults get applied to each individual typography component,
     *  meaning we'd have to specify overrides for each one.
     */
    var initialTheme = createTheme({
        palette: {
            mode: darkMode ? 'dark' : 'light',
            primary: {
                main: primaryMain,
            },
            secondary: {
                main: secondaryMain,
            },
            background: {
                default: backgroundColor,
                paper: paperColor,
            },
            grey: {
                // We do this to emulate v4 MUI behavior for default button color
                // @ts-ignore
                main: '#fff',
            },
        },
        // Typography must be set here to ensure all components use the same font
        typography: {
            fontFamily: "'Open Sans', arial, sans-serif",
            button: {
                textTransform: 'none',
            },
        },
        zIndex: {
            mobileStepper: 101,
            appBar: 101,
            drawer: 101,
            modal: 101,
            snackbar: 101,
            tooltip: 101,
            fab: 101,
            speedDial: 101,
        },
    });
    /**
     *  We split these out to so that we can access theme variables within our custom theme
     */
    var themeBasedTheme = {
        components: {
            MuiChip: {
                styleOverrides: {
                    root: {
                        fontSize: '1rem',
                    },
                },
            },
            MuiButton: {
                defaultProps: {
                    size: 'small',
                    color: 'grey',
                },
                variants: [
                    {
                        props: { variant: 'contained', color: 'grey' },
                        style: {
                            color: initialTheme.palette.getContrastText(initialTheme.palette.grey[300]),
                        },
                    },
                    {
                        props: { variant: 'outlined', color: 'grey' },
                        style: {
                            color: initialTheme.palette.text.primary,
                            borderColor: initialTheme.palette.mode === 'light'
                                ? 'rgba(0, 0, 0, 0.23)'
                                : 'rgba(255, 255, 255, 0.23)',
                            '&.Mui-disabled': {
                                border: "1px solid ".concat(initialTheme.palette.action.disabledBackground),
                            },
                            '&:hover': {
                                borderColor: initialTheme.palette.mode === 'light'
                                    ? 'rgba(0, 0, 0, 0.23)'
                                    : 'rgba(255, 255, 255, 0.23)',
                                backgroundColor: alpha(initialTheme.palette.text.primary, initialTheme.palette.action.hoverOpacity),
                            },
                        },
                    },
                    {
                        props: { color: 'grey', variant: 'text' },
                        style: {
                            color: initialTheme.palette.text.primary,
                            '&:hover': {
                                backgroundColor: alpha(initialTheme.palette.text.primary, initialTheme.palette.action.hoverOpacity),
                            },
                        },
                    },
                ],
                styleOverrides: __assign(__assign({ root: {
                        lineHeight: 'inherit',
                        minWidth: '0px', // usually more annoying than not
                    } }, (primaryContrastScores.AA
                    ? { textPrimary: {} } // weird requirement due to types, need textPrimary here but empty
                    : {
                        textPrimary: {
                            color: failedContrastPrimaryReplacement,
                            '&:hover': {
                                backgroundColor: alpha(failedContrastPrimaryReplacement, 0.1),
                                // Reset on touch devices, it doesn't add specificity
                                '@media (hover: none)': {
                                    backgroundColor: 'transparent',
                                },
                            },
                        },
                    })), (secondaryContrastScores.AA
                    ? { textSecondary: {} } // weird requirement due to types, need textPrimary here but empty
                    : {
                        textSecondary: {
                            color: failedContrastSecondaryReplacement,
                            '&:hover': {
                                backgroundColor: alpha(failedContrastSecondaryReplacement, 0.1),
                                // Reset on touch devices, it doesn't add specificity
                                '@media (hover: none)': {
                                    backgroundColor: 'transparent',
                                },
                            },
                        },
                    })),
            },
            MuiCardActionArea: {
                styleOverrides: {
                    root: {
                        height: 'auto',
                    },
                },
            },
            MuiCardHeader: {
                styleOverrides: {
                    content: {
                        minWidth: '0px',
                    },
                },
            },
            MuiPaper: {
                styleOverrides: {
                    root: { backgroundImage: 'unset' },
                },
            },
            MuiTooltip: {
                styleOverrides: {
                    tooltip: {
                        fontSize: '1rem',
                    },
                },
            },
        },
    };
    var theme = createTheme(initialTheme, themeBasedTheme);
    React.useEffect(function () {
        var htmlElement = document.querySelector('html');
        if (styledTheme.theme === 'dark') {
            htmlElement.classList.add('bp3-dark');
            htmlElement.classList.add('theme-dark');
            htmlElement.classList.add('dark');
        }
        else {
            htmlElement.classList.remove('bp3-dark');
            htmlElement.classList.remove('theme-dark');
            htmlElement.classList.remove('dark');
        }
    }, [styledTheme.theme]);
    useRemoveFocusStyle();
    return (React.createElement(React.Fragment, null,
        React.createElement(GlobalStyles, __assign({}, theme)),
        React.createElement(StyledEngineProvider, { injectFirst: true },
            React.createElement(ThemeProvider, { theme: theme }, children))));
};
var templateObject_1;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGhlbWUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9zcmMvbWFpbi93ZWJhcHAvY29tcG9uZW50L3RoZW1lL3RoZW1lLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxLQUFLLEtBQUssTUFBTSxPQUFPLENBQUE7QUFDOUIsT0FBTyxFQUNMLFdBQVcsRUFDWCxhQUFhLEVBQ2Isb0JBQW9CLEVBQ3BCLE1BQU0sRUFJTixPQUFPLEVBQ1AsS0FBSyxHQUVOLE1BQU0sc0JBQXNCLENBQUE7QUFDN0IsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLG1CQUFtQixDQUFBO0FBQ2hELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLG1CQUFtQixDQUFBO0FBQ3JELE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLFVBQVUsQ0FBQTtBQUNsRCxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQTtBQWE3RCxpQkFBaUI7QUFDakIsK0JBQStCO0FBQy9CLDJCQUEyQjtBQUMzQix1QkFBdUI7QUFDdkIsdUJBQXVCO0FBQ3ZCLHlCQUF5QjtBQUN6QixzQkFBc0I7QUFDdEIsd0JBQXdCO0FBQ3hCLDBCQUEwQjtBQUMxQixJQUFJO0FBRUosTUFBTSxDQUFDLElBQU0sSUFBSSxHQUFVO0lBQ3pCLFVBQVUsRUFBRSxTQUFTO0lBQ3JCLE1BQU0sRUFBRSxNQUFNLENBQUMsU0FBUyxFQUFFLEdBQUcsQ0FBQztJQUM5QixNQUFNLEVBQUUsU0FBUztJQUNqQixRQUFRLEVBQUUsTUFBTSxDQUFDLFNBQVMsRUFBRSxHQUFHLENBQUM7SUFDaEMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxTQUFTLEVBQUUsR0FBRyxDQUFDO0lBQzdCLElBQUksRUFBRSxNQUFNLENBQUMsU0FBUyxFQUFFLEdBQUcsQ0FBQztJQUM1QixPQUFPLEVBQUUsU0FBUztJQUNsQixTQUFTLEVBQUUsU0FBUztDQUNyQixDQUFBO0FBRUQsTUFBTSxD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e1xuICBjcmVhdGVUaGVtZSxcbiAgVGhlbWVQcm92aWRlcixcbiAgU3R5bGVkRW5naW5lUHJvdmlkZXIsXG4gIGRhcmtlbixcbiAgLy8gQHRzLWV4cGVjdC1lcnJvciB0cy1taWdyYXRlKDYxMzMpIEZJWE1FOiAnZ2V0Q29udHJhc3RSYXRpbycgaXMgZGVjbGFyZWQgYnV0IGl0cyB2YWx1ZSBpcyBuZS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gIGdldENvbnRyYXN0UmF0aW8sXG4gIFRoZW1lIGFzIFRoZW1lSW50ZXJmYWNlLFxuICBsaWdodGVuLFxuICBhbHBoYSxcbiAgVGhlbWVPcHRpb25zLFxufSBmcm9tICdAbXVpL21hdGVyaWFsL3N0eWxlcydcbmltcG9ydCB7IFRoZW1lQ29udGV4dCB9IGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJ1xuaW1wb3J0IHsgY3JlYXRlR2xvYmFsU3R5bGUgfSBmcm9tICdzdHlsZWQtY29tcG9uZW50cydcbmltcG9ydCB7IG1lZXRzQ29udHJhc3RHdWlkZWxpbmVzIH0gZnJvbSAncG9saXNoZWQnXG5pbXBvcnQgeyB1c2VSZW1vdmVGb2N1c1N0eWxlIH0gZnJvbSAnLi4vYXBwL2JsdWVwcmludC5hZGp1c3QnXG5cbnR5cGUgVGhlbWUgPSB7XG4gIHByaW1hcnk6IHN0cmluZ1xuICBzZWNvbmRhcnk6IHN0cmluZ1xuICBiYWNrZ3JvdW5kOiBzdHJpbmdcbiAgbmF2YmFyOiBzdHJpbmdcbiAgcGFuZWxzOiBzdHJpbmdcbiAgb3ZlcmxheXM6IHN0cmluZ1xuICBwYXBlcjogc3RyaW5nXG4gIHRhYnM6IHN0cmluZ1xufVxuXG4vLyAvLyBvY3RvIGNvbG9yc1xuLy8gZXhwb3J0IGNvbnN0IGRhcms6IFRoZW1lID0ge1xuLy8gICBiYWNrZ3JvdW5kOiAnI0YzODgzMicsXG4vLyAgIG5hdmJhcjogJyMyQjNBNDknLFxuLy8gICBwYW5lbHM6ICcjM0E0QTU0Jyxcbi8vICAgb3ZlcmxheXM6ICcjNDc1QTY2Jyxcbi8vICAgcGFwZXI6ICcjMjEzMTM3Jyxcbi8vICAgcHJpbWFyeTogJyM1ODlkZDUnLFxuLy8gICBzZWNvbmRhcnk6ICcjNTg5ZGQ1Jyxcbi8vIH1cblxuZXhwb3J0IGNvbnN0IGRhcms6IFRoZW1lID0ge1xuICBiYWNrZ3JvdW5kOiAnIzBCMTgyMScsXG4gIG5hdmJhcjogZGFya2VuKCcjMzY1MTYwJywgMC4yKSxcbiAgcGFuZWxzOiAnIzI0MzU0MCcsIC8vIDI0MzU0MFxuICBvdmVybGF5czogZGFya2VuKCcjMzY1MTYwJywgMC4xKSxcbiAgcGFwZXI6IGRhcmtlbignIzM2NTE2MCcsIDAuMiksXG4gIHRhYnM6IGRhcmtlbignIzI0MzU0MCcsIDAuMyksXG4gIHByaW1hcnk6ICcjNjlFMUU4JyxcbiAgc2Vjb25kYXJ5OiAnIzIxOTZmMycsXG59XG5cbmV4cG9ydCBjb25zdCBsaWdodDogVGhlbWUgPSB7XG4gIHByaW1hcnk6ICcjM2M2ZGQ1JyxcbiAgc2Vjb25kYXJ5OiAnIzIxOTZmMycsXG4gIGJhY2tncm91bmQ6ICcjRTVFNUU1JywgLy8gZWxldmF0aW9uIDBcbiAgbmF2YmFyOiAnI2ZhZmJmYycsIC8vIGVsZXZhdGlvbiA4XG4gIHBhbmVsczogJyNGQ0ZDRkMnLCAvLyBlbGV2YXRpb24gNlxuICB0YWJzOiBkYXJrZW4oJyNGQ0ZDRkMnLCAwLjA1KSxcbiAgb3ZlcmxheXM6ICcjRkNGQ0ZDJywgLy8gZWxldmF0aW9uIDE2XG4gIHBhcGVyOiAnI0ZDRkNGQycsXG59XG5cbmV4cG9ydCBjb25zdCBFbGV2YXRpb25zID0ge1xuICBuYXZiYXI6IDgsXG4gIGJhY2tncm91bmQ6IDAsXG4gIHBhcGVyOiAyLFxuICBwYW5lbHM6IDYsXG4gIG92ZXJsYXlzOiAxNixcbn1cblxuZXhwb3J0IGNvbnN0IE11aU91dGxpbmVkSW5wdXRCb3JkZXJDbGFzc2VzID1cbiAgJ3B4LVsxNHB4XSBweS1bOC41cHhdIGJvcmRlciByb3VuZGVkIGRhcms6Ym9yZGVyLXdoaXRlLzIwIGJvcmRlci1ibGFjay8yMCBkYXJrOmhvdmVyOmJvcmRlci13aGl0ZSBob3Zlcjpib3JkZXItYmxhY2snXG5cbmNvbnN0IEdsb2JhbFN0eWxlcyA9IGNyZWF0ZUdsb2JhbFN0eWxlPFRoZW1lSW50ZXJmYWNlPmBcbiAgICAgIC5vbC1vdmVybGF5Y29udGFpbmVyLXN0b3BldmVudCB7XG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICB9XG4gICAgICBhIHtcbiAgICAgICAgY29sb3I6IGluaGVyaXQgIWltcG9ydGFudDtcbiAgICAgIH1cbiAgICAgICoub3V0bGluZS1ub25lLCBhLm91dGxpbmUtbm9uZSwgYSwgYnV0dG9ue1xuICAgICAgICBvdXRsaW5lOiBub25lICFpbXBvcnRhbnQ7IFxuICAgICAgfVxuICAgICAgc3Bhbi5oaWdobGlnaHQge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDY2LCAxMTAsIDIwMywgMC40MCk7XG4gICAgICB9XG4gICAgICAuTXVpVG9vbGJhci1yb290IGEsXG4gICAgICAuTXVpVG9vbGJhci1yb290IC5NdWlCcmVhZGNydW1icy1zZXBhcmF0b3Ige1xuICAgICAgICBjb2xvcjogJHsocHJvcHMpID0+XG4gICAgICAgICAgcHJvcHMucGFsZXR0ZS5nZXRDb250cmFzdFRleHQocHJvcHMucGFsZXR0ZS5wcmltYXJ5Lm1haW4pfTtcbiAgICAgIH1cbiAgICAgIC5NdWlEcmF3ZXItcm9vdCBhIHtcbiAgICAgICAgY29sb3I6ICR7KHByb3BzKSA9PlxuICAgICAgICAgIHByb3BzLnBhbGV0dGUuZ2V0Q29udHJhc3RUZXh0KHByb3BzLnBhbGV0dGUuYmFja2dyb3VuZC5wYXBlcil9O1xuICAgICAgfVxuICAgICAgLk11aVRvb2x0aXAtdG9vbHRpcCB7XG4gICAgICAgIG1heC13aWR0aDogNTB2dztcbiAgICAgICAgcGFkZGluZzogMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBub25lO1xuICAgICAgfVxuICAgICAgLk11aUZvcm1Db250cm9sTGFiZWwtbGFiZWxQbGFjZW1lbnRTdGFydCB7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiAwcHg7XG4gICAgICB9XG4gICAgICBAbWVkaWEgKG1pbi13aWR0aDogNjAwcHgpIHtcbiAgICAgICAgLk11aUxpc3RJdGVtSWNvbi1yb290IHtcbiAgICAgICAgICBtYXJnaW4tbGVmdDogOHB4O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAubG1fZ29sZGVubGF5b3V0LCAubG1fY29udGVudCB7XG4gICAgICAgIGJhY2tncm91bmQ6IGluaGVyaXQ7XG4gICAgICB9XG4gICAgICAubG1fc3BsaXR0ZXIgIHtcbiAgICAgICAgYmFja2dyb3VuZDogJHsocHJvcHMpID0+IHByb3BzLnBhbGV0dGUuYmFja2dyb3VuZC5kZWZhdWx0fTtcbiAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgIH1cbiAgICAgIC5sbV9zcGxpdHRlcjpob3ZlciAge1xuICAgICAgICBiYWNrZ3JvdW5kOiAkeyhwcm9wcykgPT4gcHJvcHMucGFsZXR0ZS5wcmltYXJ5Lm1haW59ICFpbXBvcnRhbnQ7XG4gICAgICB9XG4gICAgICAubG1fc3RhY2t7XG4gICAgICAgIGJveC1zaGFkb3c6IDBweCAycHggMXB4IC0xcHggcmdiYSgwLDAsMCwwLjIpLCAwcHggMXB4IDFweCAwcHggcmdiYSgwLDAsMCwwLjE0KSwgMHB4IDFweCAzcHggMHB4IHJnYmEoMCwwLDAsMC4xMik7XG4gICAgICAgIGJhY2tncm91bmQ6ICR7KHByb3BzKSA9PlxuICAgICAgICAgIHByb3BzLnBhbGV0dGUubW9kZSA9PT0gJ2RhcmsnXG4gICAgICAgICAgICA/IGRhcmsucGFuZWxzXG4gICAgICAgICAgICA6IGxpZ2h0LnBhbmVsc30gIWltcG9ydGFudDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICB0cmFuc2l0aW9uOiBib3gtc2hhZG93IDMwMG1zIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSkgMG1zO1xuICAgICAgfVxuICAgICAgLmxtX2hlYWRlciB7XG4gICAgICAgIHotaW5kZXg6IDAgIWltcG9ydGFudDtcbiAgICAgICAgYmFja2dyb3VuZDogJHsocHJvcHMpID0+XG4gICAgICAgICAgcHJvcHMucGFsZXR0ZS5tb2RlID09PSAnZGFyaydcbiAgICAgICAgICAgID8gZGFyay5iYWNrZ3JvdW5kXG4gICAgICAgICAgICA6IGxpZ2h0LmJhY2tncm91bmR9ICFpbXBvcnRhbnQ7XG4gICAgICB9XG4gICAgICAubG1fdGFiLmxtX2FjdGl2ZSB7XG4gICAgICAgIGJhY2tncm91bmQ6ICR7KHByb3BzKSA9PlxuICAgICAgICAgIHByb3BzLnBhbGV0dGUubW9kZSA9PT0gJ2RhcmsnXG4gICAgICAgICAgICA/IGRhcmsucGFuZWxzXG4gICAgICAgICAgICA6IGxpZ2h0LnBhbmVsc30gIWltcG9ydGFudDtcbiAgICAgICAgICAgIGJveC1zaGFkb3c6IDBweCAycHggMXB4IC0xcHggcmdiYSgwLDAsMCwwLjIpLCAwcHggMXB4IDFweCAwcHggcmdiYSgwLDAsMCwwLjE0KSwgMHB4IDFweCAzcHggMHB4IHJnYmEoMCwwLDAsMC4xMikgIWltcG9ydGFudDtcbiAgICAgIH1cbiAgICAgIC5sbV90YWIsIGxtX3RhYnMge1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHggIWltcG9ydGFudDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAwcHggIWltcG9ydGFudDtcbiAgICAgIH1cbiAgICAgIC5sbV90YWI6bm90KC5sbV9hY3RpdmUpIHtcbiAgICAgICAgY29sb3I6ICR7KHByb3BzKSA9PlxuICAgICAgICAgIHByb3BzLnBhbGV0dGUubW9kZSA9PT0gJ2RhcmsnXG4gICAgICAgICAgICA/IHByb3BzLnBhbGV0dGUudGV4dC5zZWNvbmRhcnlcbiAgICAgICAgICAgIDogcHJvcHMucGFsZXR0ZS50ZXh0LnNlY29uZGFyeX0gIWltcG9ydGFudDtcbiAgICAgICAgYmFja2dyb3VuZDogJHsocHJvcHMpID0+XG4gICAgICAgICAgcHJvcHMucGFsZXR0ZS5tb2RlID09PSAnZGFyaycgPyBkYXJrLnRhYnMgOiBsaWdodC50YWJzfSAhaW1wb3J0YW50O1xuICAgICAgICBidXR0b24ge1xuICAgICAgICAgIHZpc2liaWxpdHk6IGhpZGRlbjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLmxtX3RhYnMgLmxtX3RhYiB7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIGZhZGUoQGNvbnRyYXN0Q29sb3IsIDEwJSk7XG4gICAgICAgIG1hcmdpbi1yaWdodDogOHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgIGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgICAgcGFkZGluZzogMHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgIGhlaWdodDogNDRweCAhaW1wb3J0YW50O1xuICAgICAgICBtaW5XaWR0aDogNDRweCAhaW1wb3J0YW50O1xuICAgICAgfVxuICAgICAgLmxtX3RhYnMgLmxtX3RhYjpob3ZlciB7XG4gICAgICAgIGNvbG9yOiAkeyhwcm9wcykgPT4gcHJvcHMucGFsZXR0ZS50ZXh0LnByaW1hcnl9ICFpbXBvcnRhbnQ7XG4gICAgICB9XG4gICAgICAubG1faGVhZGVyLFxuICAgICAgLmxtX3RhYnMgLmxtX3RhYixcbiAgICAgIC5sbV90YWJkcm9wZG93bjpiZWZvcmUge1xuICAgICAgICBjb2xvcjogJHsocHJvcHMpID0+IHByb3BzLnBhbGV0dGUudGV4dC5wcmltYXJ5fSAhaW1wb3J0YW50O1xuICAgICAgfVxuICAgICAgLmlzLWRyYXdpbmcgW3JvbGU9XCJ0b29sdGlwXCJdLCAuaXMtZHJhd2luZyAuTXVpUG9wb3Zlci1yb290IHtcbiAgICAgICAgZGlzcGxheTogbm9uZSFpbXBvcnRhbnQ7XG4gICAgICB9XG4gICAgICBbcm9sZT1cInRvb2x0aXBcIl0ge1xuICAgICAgICB6LWluZGV4OiAxMDEgIWltcG9ydGFudDtcbiAgICAgICAgcG9pbnRlci1ldmVudHM6IGFsbCAhaW1wb3J0YW50O1xuICAgICAgfVxuICAgICAgLmJwMy1wb3J0YWwge1xuICAgICAgICB6LWluZGV4OiAxMDEgIWltcG9ydGFudDtcbiAgICAgIH1cbiAgICAgIC5icDMtcG9wb3Zlci13cmFwcGVyLC5icDMtcG9wb3Zlci10YXJnZXQsIC5icDMtY29udHJvbC1ncm91cCB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgfVxuICAgICAgLmJwMy1jb250cm9sLWdyb3VwIHtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgfVxuICAgICAgLmJwMy1jb250cm9sLWdyb3VwID4gZGl2OmZpcnN0LW9mLXR5cGU6OmFmdGVyIHtcbiAgICAgICAgY29udGVudDogJ2FuZCc7XG4gICAgICAgIGRpc3BsYXk6YmxvY2s7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgbGVmdDogMTRweDtcbiAgICAgICAgYm90dG9tOiAtMjVweDtcbiAgICAgIH1cbiAgICAgIC5icDMtY29udHJvbC1ncm91cCA+IGRpdjpudGgtb2YtdHlwZSgyKSB7XG4gICAgICAgIG1hcmdpbi10b3A6IDMwcHg7XG4gICAgICB9XG4gICAgICAuYnAzLWlucHV0LWdyb3VwIGlucHV0IHtcbiAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsgXG4gICAgICAgIGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgICAgZm9udC1zaXplOiAxLjE0Mjg1NzE0Mjg1NzE0MjhyZW0gIWltcG9ydGFudDtcbiAgICAgICAgcGFkZGluZzogMHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgIGhlaWdodDogMS4zMTI1cmVtICFpbXBvcnRhbnQ7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjE1ICFpbXBvcnRhbnQ7XG4gICAgICB9XG4gICAgICAuYnAzLXBvcG92ZXIgLmJwMy1wb3BvdmVyLWNvbnRlbnQsIC5icDMtcG9wb3ZlciAuYnAzLXBvcG92ZXItY29udGVudCwgLmJwMy1kYXRlcGlja2VyLCAuYnAzLW1lbnV7XG4gICAgICAgIGJhY2tncm91bmQ6ICR7KHByb3BzKSA9PiBwcm9wcy5wYWxldHRlLmJhY2tncm91bmQucGFwZXJ9ICFpbXBvcnRhbnQ7XG4gICAgICB9XG4gICAgICAuYnAzLXBvcG92ZXItYXJyb3cge1xuICAgICAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG4gICAgICB9XG4gICAgICAuYnAzLWRhdGVwaWNrZXIgLkRheVBpY2tlci1EYXkuRGF5UGlja2VyLURheS0tc2VsZWN0ZWQsIC5icDMtYWN0aXZlIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHsocHJvcHMpID0+IHByb3BzLnBhbGV0dGUucHJpbWFyeS5kYXJrfSAhaW1wb3J0YW50O1xuICAgICAgfVxuICAgICAgLmJwMy10YWJsZS1xdWFkcmFudCwgLmJwMy10YWJsZS1jZWxsLWNsaWVudCwgLmJwMy10YWJsZS1yb3ctaGVhZGVycyB7XG4gICAgICAgIGJhY2tncm91bmQ6IGluaGVyaXQgIWltcG9ydGFudDtcbiAgICAgIH1cbiAgICAgIC8vIGZvciB3aGF0ZXZlciByZWFzb24gdGhleSBoYXZlIGEgaGVpZ2h0IG9mIDAgc29tZXRpbWVzLCBtYXliZSBNVUkgd2lsbCBmaXggdGhpcyBpbiB2NVxuICAgICAgdGV4dGFyZWEuTXVpSW5wdXRCYXNlLWlucHV0IHtcbiAgICAgICAgbWluLWhlaWdodDogMjFweDtcbiAgICAgIH1cbiAgICAgIC5NdWlQYXBlci1ib3gtc2hhZG93IHtcbiAgICAgICAgYm94LXNoYWRvdzogMHB4IDNweCA1cHggLTFweCByZ2JhKDAsMCwwLDAuMiksIDBweCA2cHggMTBweCAwcHggcmdiYSgwLDAsMCwwLjE0KSwgMHB4IDFweCAxOHB4IDBweCByZ2JhKDAsMCwwLDAuMTIpO1xuICAgICAgfVxuICAgICAgLk11aVBhcGVyLWVsZXZhdGlvbjAge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkeyhwcm9wcykgPT5cbiAgICAgICAgICBwcm9wcy5wYWxldHRlLm1vZGUgPT09ICdkYXJrJyA/IGRhcmsuYmFja2dyb3VuZCA6IGxpZ2h0LmJhY2tncm91bmR9O1xuICAgICAgfVxuICAgICAgLk11aVBhcGVyLWVsZXZhdGlvbjgge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkeyhwcm9wcykgPT5cbiAgICAgICAgICBwcm9wcy5wYWxldHRlLm1vZGUgPT09ICdkYXJrJyA/IGRhcmsubmF2YmFyIDogbGlnaHQubmF2YmFyfTtcbiAgICAgIH1cbiAgICAgIC5NdWlQYXBlci1lbGV2YXRpb242IHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHsocHJvcHMpID0+XG4gICAgICAgICAgcHJvcHMucGFsZXR0ZS5tb2RlID09PSAnZGFyaycgPyBkYXJrLnBhbmVscyA6IGxpZ2h0LnBhbmVsc307XG4gICAgICB9XG4gICAgICAuTXVpUGFwZXItZWxldmF0aW9uMTYge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkeyhwcm9wcykgPT5cbiAgICAgICAgICBwcm9wcy5wYWxldHRlLm1vZGUgPT09ICdkYXJrJyA/IGRhcmsub3ZlcmxheXMgOiBsaWdodC5vdmVybGF5c307XG4gICAgICB9XG4gICAgICAuTXVpUGFwZXItZWxldmF0aW9uMiB7XG4gICAgICAgIGJvcmRlci13aWR0aDogMXB4O1xuICAgICAgICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICAgICAgICBib3JkZXItY29sb3I6ICR7KHByb3BzKSA9PlxuICAgICAgICAgIHByb3BzLnBhbGV0dGUubW9kZSA9PT0gJ2RhcmsnXG4gICAgICAgICAgICA/IHByb3BzLnBhbGV0dGUuZGl2aWRlclxuICAgICAgICAgICAgOiBwcm9wcy5wYWxldHRlLmRpdmlkZXJ9O1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7KHByb3BzKSA9PlxuICAgICAgICAgICAgcHJvcHMucGFsZXR0ZS5tb2RlID09PSAnZGFyaycgPyBkYXJrLnBhcGVyIDogbGlnaHQucGFwZXJ9O1xuICAgICAgfVxuICAgICAgW2RhdGEtYmVoYXZpb3ItZHJvcGRvd25dIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHsocHJvcHMpID0+XG4gICAgICAgICAgcHJvcHMucGFsZXR0ZS5tb2RlID09PSAnZGFyaycgPyBkYXJrLm92ZXJsYXlzIDogbGlnaHQub3ZlcmxheXN9O1xuICAgICAgfVxuICAgICAgLmZvbnQtYXdlc29tZS1zcGFuIHtcbiAgICAgICAgJiYge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMS40cmVtO1xuICAgICAgICAgIGZvbnQtZmFtaWx5OiAnT3BlbiBTYW5zJywgYXJpYWwsIHNhbnMtc2VyaWY7XG4gICAgICAgIH1cbiAgICAgICAgLyogc3R5bGVsaW50LWRpc2FibGUgKi9cbiAgICAgICAgJjo6YmVmb3JlIHtcbiAgICAgICAgICBmb250LWZhbWlseTogJ0ZvbnRBd2Vzb21lJztcbiAgICAgICAgICBtYXJnaW4tbGVmdDogMnB4O1xuICAgICAgICAgIG1hcmdpbi1yaWdodDogNXB4O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICA6Oi13ZWJraXQtc2Nyb2xsYmFyIHtcbiAgICAgICAgd2lkdGg6IDhweDtcbiAgICAgICAgaGVpZ2h0OiA4cHg7XG4gICAgICB9XG4gICAgICA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHtcbiAgICAgICAgYmFja2dyb3VuZDogJHsocHJvcHMpID0+XG4gICAgICAgICAgcHJvcHMucGFsZXR0ZS5tb2RlID09PSAnZGFyaydcbiAgICAgICAgICAgID8gJ3JnYigzMCwgNDQsIDUzKSdcbiAgICAgICAgICAgIDogJ3JnYigyMjksIDIyOSwgMjI5KSd9O1xuICAgICAgfVxuICAgICAgOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7XG4gICAgICAgIGJhY2tncm91bmQ6ICR7KHByb3BzKSA9PlxuICAgICAgICAgIHByb3BzLnBhbGV0dGUubW9kZSA9PT0gJ2RhcmsnXG4gICAgICAgICAgICA/ICdsaW5lYXItZ3JhZGllbnQoLTE4MGRlZywgcmdiKDIyOSwgMjI5LCAyMjkpIDAlLCByZ2IoMjA2LCAyMDYsIDIwNikgMTAwJSknXG4gICAgICAgICAgICA6ICdsaW5lYXItZ3JhZGllbnQoLTE4MGRlZywgcmdiKDE1MywgMTUzLCAxNTMpIDAlLCByZ2IoMTg3LCAxODcsIDE4NykgMTAwJSknfTtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgIH1cbiAgICAgIC8vIGZpeCBhbiBpc3N1ZSB3aGVyZSBmb2N1cyBpcyBhcHBsaWVkIGJlY2F1c2Ugb2YgYmx1ZXByaW50IHRvIHBvcG92ZXIgcGFwZXJzXG4gICAgICAuTXVpUGFwZXItcm9vdDpmb2N1cyB7IFxuICAgICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgfVxuICAgICAgLy8gRml4IE11aSBzdHlsZXMgXG4gICAgICAuTXVpQnV0dG9uLWVuZEljb24ge1xuICAgICAgICBtYXJnaW4tbGVmdDogMHB4O1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IDBweDtcbiAgICAgIH1cbiAgICAgIC5NdWlCdXR0b24taWNvblNpemVTbWFsbCA+IHN2ZyB7XG4gICAgICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICAgICAgbWFyZ2luLXRvcDogMXB4O1xuICAgICAgfVxuICAgICAgLy8gTXVpIHRhaWx3aW5kIHN0eWxlXG4gICAgICAuTXVpLWljb24tc2l6ZS1zbWFsbCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICAgIH1cbiAgICAgIFtkaXNhYmxlZF0gLk11aS10ZXh0LXRleHQtcHJpbWFyeSxcbiAgICAgIFtkaXNhYmxlZF0gLk11aS10ZXh0LXByaW1hcnksXG4gICAgICBbZGlzYWJsZWRdIC5NdWktdGV4dC1zZWNvbmRhcnkge1xuICAgICAgICBjb2xvcjogJHsocHJvcHMpID0+XG4gICAgICAgICAgcHJvcHMucGFsZXR0ZS5tb2RlID09PSAnZGFyaydcbiAgICAgICAgICAgID8gJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC4zKSdcbiAgICAgICAgICAgIDogJ3JnYmEoMCwgMCwgMCwgMC4yNiknfTtcbiAgICAgIH1cbiAgICAgIC5NdWktdGV4dC10ZXh0LXByaW1hcnkge1xuICAgICAgICBjb2xvcjogJHsocHJvcHMpID0+IHByb3BzLnBhbGV0dGUudGV4dC5wcmltYXJ5fTtcbiAgICAgIH1cbiAgICAgIC5NdWktdGV4dC1wcmltYXJ5IHtcbiAgICAgICAgY29sb3I6ICR7KHByb3BzKSA9PiBwcm9wcy5wYWxldHRlLnByaW1hcnkubWFpbn07XG4gICAgICB9XG4gICAgICAuTXVpLXRleHQtc2Vjb25kYXJ5IHtcbiAgICAgICAgY29sb3I6ICR7KHByb3BzKSA9PiBwcm9wcy5wYWxldHRlLnNlY29uZGFyeS5tYWlufTtcbiAgICAgIH1cbiAgICAgIC5NdWktdGV4dC13YXJuaW5nIHtcbiAgICAgICAgY29sb3I6ICR7KHByb3BzKSA9PiBwcm9wcy5wYWxldHRlLndhcm5pbmcubWFpbn07XG4gICAgICB9XG4gICAgICAuTXVpLXRleHQtZXJyb3Ige1xuICAgICAgICBjb2xvcjogJHsocHJvcHMpID0+IHByb3BzLnBhbGV0dGUuZXJyb3IubWFpbn07XG4gICAgICB9XG4gICAgICAuTXVpLWJnLWRlZmF1bHQge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkeyhwcm9wcykgPT4gcHJvcHMucGFsZXR0ZS5iYWNrZ3JvdW5kLmRlZmF1bHR9O1xuICAgICAgfVxuICAgICAgLk11aS1iZy1wcmltYXJ5IHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHsocHJvcHMpID0+IHByb3BzLnBhbGV0dGUucHJpbWFyeS5tYWlufTtcbiAgICAgIH1cbiAgICAgIC5NdWktYmctc2Vjb25kYXJ5IHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHsocHJvcHMpID0+IHByb3BzLnBhbGV0dGUuc2Vjb25kYXJ5Lm1haW59O1xuICAgICAgfVxuICAgICAgLk11aS1iZy1kaXZpZGVyIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHsocHJvcHMpID0+IHByb3BzLnBhbGV0dGUuZGl2aWRlcn07XG4gICAgICB9XG4gICAgICAuTXVpLWJvcmRlci1kaXZpZGVyIHtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiAkeyhwcm9wcykgPT4gcHJvcHMucGFsZXR0ZS5kaXZpZGVyfTtcbiAgICAgIH1cbiAgICAgIC5NdWktYmctYnV0dG9uOmhvdmVyLFxuICAgICAgLk11aS1iZy1idXR0b246Zm9jdXMtd2l0aGluIHtcbiAgICAgICAgYmFja2dyb3VuZDogJHsocHJvcHMpID0+XG4gICAgICAgICAgcHJvcHMucGFsZXR0ZS5tb2RlID09PSAnZGFyaydcbiAgICAgICAgICAgID8gJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC4wOCknXG4gICAgICAgICAgICA6ICdyZ2JhKDAsIDAsIDAsIDAuMDQpJ307XG4gICAgICB9XG4gICAgICAudGhlbWUtYmctb3ZlcmxheXMge1xuICAgICAgICBiYWNrZ3JvdW5kOiAkeyhwcm9wcykgPT5cbiAgICAgICAgICBwcm9wcy5wYWxldHRlLm1vZGUgPT09ICdkYXJrJyA/IGRhcmsub3ZlcmxheXMgOiBsaWdodC5vdmVybGF5c307XG4gICAgICB9XG4gICAgICAuY2hpbGRyZW4tbWF4LWgtZnVsbCB7XG4gICAgICAgID4gKiB7XG4gICAgICAgICAgbWF4LWhlaWdodDogMTAwJTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLmNoaWxkcmVuLWgtZnVsbCB7XG4gICAgICAgID4gKiB7XG4gICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAuY2hpbGRyZW4tYmxvY2sge1xuICAgICAgICA+ICoge1xuICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAuY2hpbGRyZW4tcC0wIHtcbiAgICAgICAgPiAqIHtcbiAgICAgICAgICBwYWRkaW5nOiAwcHg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIGlkZWEgaXMgdG8gaGF2ZSB0aGlzIHRyYWNrIHdpdGggc3VidHJhY3RpbmcgbWFyZ2luIC8gcGFkZGluZ1xuICAgICAgLm1heC13LWZ1bGwtMSB7XG4gICAgICAgIG1heC13aWR0aDogY2FsYygxMDAlIC0gMiowLjI1cmVtKTtcbiAgICAgIH1cbiAgICAgIC5tYXgtdy1mdWxsLTIge1xuICAgICAgICBtYXgtd2lkdGg6IGNhbGMoMTAwJSAtIDIqMC41cmVtKTtcbiAgICAgIH1cbiAgICAgIC5tYXgtdy1mdWxsLTMge1xuICAgICAgICBtYXgtd2lkdGg6IGNhbGMoMTAwJSAtIDIqMC43NXJlbSk7XG4gICAgICB9XG4gICAgICAubWF4LXctZnVsbC00IHtcbiAgICAgICAgbWF4LXdpZHRoOiBjYWxjKDEwMCUgLSAyKjFyZW0pO1xuICAgICAgfVxuICAgICAgLm1pbi13LTMyIHtcbiAgICAgICAgbWluLXdpZHRoOiA4cmVtO1xuICAgICAgfVxuICAgICAgLm1pbi13LTE2XHR7XG4gICAgICAgIG1pbi13aWR0aDogNHJlbTtcbiAgICAgIH1cbiAgICBgXG5cbmNvbnN0IGxpZ2h0ZW5VbnRpbENvbnRyYXN0aW5nID0gKGNvbG9yOiBzdHJpbmcsIGJhY2tncm91bmQ6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIGNvbnN0IHBhc3NlcyA9IG1lZXRzQ29udHJhc3RHdWlkZWxpbmVzKGNvbG9yLCBiYWNrZ3JvdW5kKVxuICBpZiAocGFzc2VzLkFBKSB7XG4gICAgcmV0dXJuIGNvbG9yXG4gIH1cbiAgcmV0dXJuIGxpZ2h0ZW5VbnRpbENvbnRyYXN0aW5nKGxpZ2h0ZW4oY29sb3IsIDAuMSksIGJhY2tncm91bmQpXG59XG5cbmNvbnN0IGRhcmtlblVudGlsQ29udHJhc3RpbmcgPSAoY29sb3I6IHN0cmluZywgYmFja2dyb3VuZDogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgY29uc3QgcGFzc2VzID0gbWVldHNDb250cmFzdEd1aWRlbGluZXMoY29sb3IsIGJhY2tncm91bmQpXG4gIGlmIChwYXNzZXMuQUEpIHtcbiAgICByZXR1cm4gY29sb3JcbiAgfVxuICByZXR1cm4gZGFya2VuVW50aWxDb250cmFzdGluZyhkYXJrZW4oY29sb3IsIDAuMSksIGJhY2tncm91bmQpXG59XG5cbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzcyNzIwNTI0L3R5cGVzY3JpcHQtcmVhY3QtbXVpLXVzZS1jdXN0b20tY29sb3Itb24tYnV0dG9uLWNvbXBvbmVudFxuZGVjbGFyZSBtb2R1bGUgJ0BtdWkvbWF0ZXJpYWwnIHtcbiAgaW50ZXJmYWNlIEJ1dHRvblByb3BzQ29sb3JPdmVycmlkZXMge1xuICAgIGdyZXk6IHRydWVcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgUHJvdmlkZXIgPSAoeyBjaGlsZHJlbiB9OiB7IGNoaWxkcmVuOiBhbnkgfSkgPT4ge1xuICBjb25zdCBzdHlsZWRUaGVtZSA9IFJlYWN0LnVzZUNvbnRleHQoVGhlbWVDb250ZXh0KVxuICBjb25zdCBkYXJrTW9kZSA9IHN0eWxlZFRoZW1lLnRoZW1lID09PSAnZGFyaydcbiAgY29uc3QgcGFwZXJDb2xvciA9IGRhcmtNb2RlID8gZGFyay5wYXBlciA6IGxpZ2h0LnBhcGVyXG4gIGNvbnN0IGJhY2tncm91bmRDb2xvciA9IGRhcmtNb2RlID8gZGFyay5iYWNrZ3JvdW5kIDogbGlnaHQuYmFja2dyb3VuZFxuICBjb25zdCBjdXN0b21QYWxldHRlID1cbiAgICBzdHlsZWRUaGVtZS5wYWxldHRlID09PSAnY3VzdG9tJyAmJlxuICAgIHN0eWxlZFRoZW1lLnByaW1hcnkgJiZcbiAgICBzdHlsZWRUaGVtZS5zZWNvbmRhcnlcbiAgY29uc3QgcHJpbWFyeU1haW4gPSBjdXN0b21QYWxldHRlXG4gICAgPyBzdHlsZWRUaGVtZS5wcmltYXJ5XG4gICAgOiBkYXJrTW9kZVxuICAgID8gZGFyay5wcmltYXJ5XG4gICAgOiBsaWdodC5wcmltYXJ5XG4gIGNvbnN0IHNlY29uZGFyeU1haW4gPSBjdXN0b21QYWxldHRlXG4gICAgPyBzdHlsZWRUaGVtZS5zZWNvbmRhcnlcbiAgICA6IGRhcmtNb2RlXG4gICAgPyBkYXJrLnNlY29uZGFyeVxuICAgIDogbGlnaHQuc2Vjb25kYXJ5XG4gIGNvbnN0IHByaW1hcnlDb250cmFzdFNjb3JlcyA9IG1lZXRzQ29udHJhc3RHdWlkZWxpbmVzKFxuICAgIHBhcGVyQ29sb3IsXG4gICAgcHJpbWFyeU1haW4hXG4gIClcbiAgY29uc3Qgc2Vjb25kYXJ5Q29udHJhc3RTY29yZXMgPSBtZWV0c0NvbnRyYXN0R3VpZGVsaW5lcyhcbiAgICBwYXBlckNvbG9yLFxuICAgIHNlY29uZGFyeU1haW5cbiAgKVxuICBjb25zdCBmYWlsZWRDb250cmFzdFByaW1hcnlSZXBsYWNlbWVudCA9IGRhcmtNb2RlXG4gICAgPyBsaWdodGVuVW50aWxDb250cmFzdGluZyhwcmltYXJ5TWFpbiwgcGFwZXJDb2xvcilcbiAgICA6IGRhcmtlblVudGlsQ29udHJhc3RpbmcocHJpbWFyeU1haW4sIHBhcGVyQ29sb3IpXG4gIGNvbnN0IGZhaWxlZENvbnRyYXN0U2Vjb25kYXJ5UmVwbGFjZW1lbnQgPSBkYXJrTW9kZVxuICAgID8gbGlnaHRlblVudGlsQ29udHJhc3Rpbmcoc2Vjb25kYXJ5TWFpbiwgcGFwZXJDb2xvcilcbiAgICA6IGRhcmtlblVudGlsQ29udHJhc3Rpbmcoc2Vjb25kYXJ5TWFpbiwgcGFwZXJDb2xvcilcblxuICAvKipcbiAgICogIFNwZWNpZnkgdGhlbWUgc2V0dGluZ3MgdGhhdCBkb24ndCBuZWVkIHZhcmlhYmxlcyBmcm9tIHRoZW1lXG4gICAqXG4gICAqICBXZSBkbyB0aGluZ3MgbGlrZSB0aGUgdHlwb2dyYXBoeSBoZXJlIGJlY2F1c2Ugb3RoZXJ3aXNlIHRoZSBkZWZhdWx0cyBnZXQgYXBwbGllZCB0byBlYWNoIGluZGl2aWR1YWwgdHlwb2dyYXBoeSBjb21wb25lbnQsXG4gICAqICBtZWFuaW5nIHdlJ2QgaGF2ZSB0byBzcGVjaWZ5IG92ZXJyaWRlcyBmb3IgZWFjaCBvbmUuXG4gICAqL1xuICBjb25zdCBpbml0aWFsVGhlbWUgPSBjcmVhdGVUaGVtZSh7XG4gICAgcGFsZXR0ZToge1xuICAgICAgbW9kZTogZGFya01vZGUgPyAnZGFyaycgOiAnbGlnaHQnLFxuICAgICAgcHJpbWFyeToge1xuICAgICAgICBtYWluOiBwcmltYXJ5TWFpbixcbiAgICAgIH0sXG4gICAgICBzZWNvbmRhcnk6IHtcbiAgICAgICAgbWFpbjogc2Vjb25kYXJ5TWFpbixcbiAgICAgIH0sXG4gICAgICBiYWNrZ3JvdW5kOiB7XG4gICAgICAgIGRlZmF1bHQ6IGJhY2tncm91bmRDb2xvcixcbiAgICAgICAgcGFwZXI6IHBhcGVyQ29sb3IsXG4gICAgICB9LFxuICAgICAgZ3JleToge1xuICAgICAgICAvLyBXZSBkbyB0aGlzIHRvIGVtdWxhdGUgdjQgTVVJIGJlaGF2aW9yIGZvciBkZWZhdWx0IGJ1dHRvbiBjb2xvclxuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIG1haW46ICcjZmZmJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgICAvLyBUeXBvZ3JhcGh5IG11c3QgYmUgc2V0IGhlcmUgdG8gZW5zdXJlIGFsbCBjb21wb25lbnRzIHVzZSB0aGUgc2FtZSBmb250XG4gICAgdHlwb2dyYXBoeToge1xuICAgICAgZm9udEZhbWlseTogYCdPcGVuIFNhbnMnLCBhcmlhbCwgc2Fucy1zZXJpZmAsXG4gICAgICBidXR0b246IHtcbiAgICAgICAgdGV4dFRyYW5zZm9ybTogJ25vbmUnLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHpJbmRleDoge1xuICAgICAgbW9iaWxlU3RlcHBlcjogMTAxLFxuICAgICAgYXBwQmFyOiAxMDEsXG4gICAgICBkcmF3ZXI6IDEwMSxcbiAgICAgIG1vZGFsOiAxMDEsXG4gICAgICBzbmFja2JhcjogMTAxLFxuICAgICAgdG9vbHRpcDogMTAxLFxuICAgICAgZmFiOiAxMDEsXG4gICAgICBzcGVlZERpYWw6IDEwMSxcbiAgICB9LFxuICB9KVxuXG4gIC8qKlxuICAgKiAgV2Ugc3BsaXQgdGhlc2Ugb3V0IHRvIHNvIHRoYXQgd2UgY2FuIGFjY2VzcyB0aGVtZSB2YXJpYWJsZXMgd2l0aGluIG91ciBjdXN0b20gdGhlbWVcbiAgICovXG4gIGNvbnN0IHRoZW1lQmFzZWRUaGVtZTogVGhlbWVPcHRpb25zID0ge1xuICAgIGNvbXBvbmVudHM6IHtcbiAgICAgIE11aUNoaXA6IHtcbiAgICAgICAgc3R5bGVPdmVycmlkZXM6IHtcbiAgICAgICAgICByb290OiB7XG4gICAgICAgICAgICBmb250U2l6ZTogJzFyZW0nLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgTXVpQnV0dG9uOiB7XG4gICAgICAgIGRlZmF1bHRQcm9wczoge1xuICAgICAgICAgIHNpemU6ICdzbWFsbCcsXG4gICAgICAgICAgY29sb3I6ICdncmV5JyxcbiAgICAgICAgfSxcbiAgICAgICAgdmFyaWFudHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBwcm9wczogeyB2YXJpYW50OiAnY29udGFpbmVkJywgY29sb3I6ICdncmV5JyB9LFxuICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgY29sb3I6IGluaXRpYWxUaGVtZS5wYWxldHRlLmdldENvbnRyYXN0VGV4dChcbiAgICAgICAgICAgICAgICBpbml0aWFsVGhlbWUucGFsZXR0ZS5ncmV5WzMwMF1cbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBwcm9wczogeyB2YXJpYW50OiAnb3V0bGluZWQnLCBjb2xvcjogJ2dyZXknIH0sXG4gICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICBjb2xvcjogaW5pdGlhbFRoZW1lLnBhbGV0dGUudGV4dC5wcmltYXJ5LFxuICAgICAgICAgICAgICBib3JkZXJDb2xvcjpcbiAgICAgICAgICAgICAgICBpbml0aWFsVGhlbWUucGFsZXR0ZS5tb2RlID09PSAnbGlnaHQnXG4gICAgICAgICAgICAgICAgICA/ICdyZ2JhKDAsIDAsIDAsIDAuMjMpJ1xuICAgICAgICAgICAgICAgICAgOiAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIzKScsXG4gICAgICAgICAgICAgICcmLk11aS1kaXNhYmxlZCc6IHtcbiAgICAgICAgICAgICAgICBib3JkZXI6IGAxcHggc29saWQgJHtpbml0aWFsVGhlbWUucGFsZXR0ZS5hY3Rpb24uZGlzYWJsZWRCYWNrZ3JvdW5kfWAsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICcmOmhvdmVyJzoge1xuICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yOlxuICAgICAgICAgICAgICAgICAgaW5pdGlhbFRoZW1lLnBhbGV0dGUubW9kZSA9PT0gJ2xpZ2h0J1xuICAgICAgICAgICAgICAgICAgICA/ICdyZ2JhKDAsIDAsIDAsIDAuMjMpJ1xuICAgICAgICAgICAgICAgICAgICA6ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMjMpJyxcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGFscGhhKFxuICAgICAgICAgICAgICAgICAgaW5pdGlhbFRoZW1lLnBhbGV0dGUudGV4dC5wcmltYXJ5LFxuICAgICAgICAgICAgICAgICAgaW5pdGlhbFRoZW1lLnBhbGV0dGUuYWN0aW9uLmhvdmVyT3BhY2l0eVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgcHJvcHM6IHsgY29sb3I6ICdncmV5JywgdmFyaWFudDogJ3RleHQnIH0sXG4gICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICBjb2xvcjogaW5pdGlhbFRoZW1lLnBhbGV0dGUudGV4dC5wcmltYXJ5LFxuICAgICAgICAgICAgICAnJjpob3Zlcic6IHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGFscGhhKFxuICAgICAgICAgICAgICAgICAgaW5pdGlhbFRoZW1lLnBhbGV0dGUudGV4dC5wcmltYXJ5LFxuICAgICAgICAgICAgICAgICAgaW5pdGlhbFRoZW1lLnBhbGV0dGUuYWN0aW9uLmhvdmVyT3BhY2l0eVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHN0eWxlT3ZlcnJpZGVzOiB7XG4gICAgICAgICAgcm9vdDoge1xuICAgICAgICAgICAgbGluZUhlaWdodDogJ2luaGVyaXQnLCAvLyBtYXliZSBvcGVuIGEgdGlja2V0IG9uIE1VSSwgc2VlbXMgbGlrZSB0aGUgZGVmYXVsdCB0aGV5IHVzZSBkb2Vzbid0IGNlbnRlciB0ZXh0IHF1aXRlIHJpZ2h0IHdpdGggaWNvbnNcbiAgICAgICAgICAgIG1pbldpZHRoOiAnMHB4JywgLy8gdXN1YWxseSBtb3JlIGFubm95aW5nIHRoYW4gbm90XG4gICAgICAgICAgfSxcbiAgICAgICAgICAuLi4ocHJpbWFyeUNvbnRyYXN0U2NvcmVzLkFBXG4gICAgICAgICAgICA/IHsgdGV4dFByaW1hcnk6IHt9IH0gLy8gd2VpcmQgcmVxdWlyZW1lbnQgZHVlIHRvIHR5cGVzLCBuZWVkIHRleHRQcmltYXJ5IGhlcmUgYnV0IGVtcHR5XG4gICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICB0ZXh0UHJpbWFyeToge1xuICAgICAgICAgICAgICAgICAgY29sb3I6IGZhaWxlZENvbnRyYXN0UHJpbWFyeVJlcGxhY2VtZW50LFxuICAgICAgICAgICAgICAgICAgJyY6aG92ZXInOiB7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogYWxwaGEoXG4gICAgICAgICAgICAgICAgICAgICAgZmFpbGVkQ29udHJhc3RQcmltYXJ5UmVwbGFjZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgMC4xXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlc2V0IG9uIHRvdWNoIGRldmljZXMsIGl0IGRvZXNuJ3QgYWRkIHNwZWNpZmljaXR5XG4gICAgICAgICAgICAgICAgICAgICdAbWVkaWEgKGhvdmVyOiBub25lKSc6IHtcbiAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd0cmFuc3BhcmVudCcsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgIC4uLihzZWNvbmRhcnlDb250cmFzdFNjb3Jlcy5BQVxuICAgICAgICAgICAgPyB7IHRleHRTZWNvbmRhcnk6IHt9IH0gLy8gd2VpcmQgcmVxdWlyZW1lbnQgZHVlIHRvIHR5cGVzLCBuZWVkIHRleHRQcmltYXJ5IGhlcmUgYnV0IGVtcHR5XG4gICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICB0ZXh0U2Vjb25kYXJ5OiB7XG4gICAgICAgICAgICAgICAgICBjb2xvcjogZmFpbGVkQ29udHJhc3RTZWNvbmRhcnlSZXBsYWNlbWVudCxcbiAgICAgICAgICAgICAgICAgICcmOmhvdmVyJzoge1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGFscGhhKFxuICAgICAgICAgICAgICAgICAgICAgIGZhaWxlZENvbnRyYXN0U2Vjb25kYXJ5UmVwbGFjZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgMC4xXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlc2V0IG9uIHRvdWNoIGRldmljZXMsIGl0IGRvZXNuJ3QgYWRkIHNwZWNpZmljaXR5XG4gICAgICAgICAgICAgICAgICAgICdAbWVkaWEgKGhvdmVyOiBub25lKSc6IHtcbiAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd0cmFuc3BhcmVudCcsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIE11aUNhcmRBY3Rpb25BcmVhOiB7XG4gICAgICAgIHN0eWxlT3ZlcnJpZGVzOiB7XG4gICAgICAgICAgcm9vdDoge1xuICAgICAgICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBNdWlDYXJkSGVhZGVyOiB7XG4gICAgICAgIHN0eWxlT3ZlcnJpZGVzOiB7XG4gICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgbWluV2lkdGg6ICcwcHgnLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgTXVpUGFwZXI6IHtcbiAgICAgICAgc3R5bGVPdmVycmlkZXM6IHtcbiAgICAgICAgICByb290OiB7IGJhY2tncm91bmRJbWFnZTogJ3Vuc2V0JyB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIE11aVRvb2x0aXA6IHtcbiAgICAgICAgc3R5bGVPdmVycmlkZXM6IHtcbiAgICAgICAgICB0b29sdGlwOiB7XG4gICAgICAgICAgICBmb250U2l6ZTogJzFyZW0nLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH1cblxuICBjb25zdCB0aGVtZSA9IGNyZWF0ZVRoZW1lKGluaXRpYWxUaGVtZSwgdGhlbWVCYXNlZFRoZW1lKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaHRtbEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJykgYXMgSFRNTEVsZW1lbnRcbiAgICBpZiAoc3R5bGVkVGhlbWUudGhlbWUgPT09ICdkYXJrJykge1xuICAgICAgaHRtbEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYnAzLWRhcmsnKVxuICAgICAgaHRtbEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndGhlbWUtZGFyaycpXG4gICAgICBodG1sRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdkYXJrJylcbiAgICB9IGVsc2Uge1xuICAgICAgaHRtbEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYnAzLWRhcmsnKVxuICAgICAgaHRtbEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgndGhlbWUtZGFyaycpXG4gICAgICBodG1sRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdkYXJrJylcbiAgICB9XG4gIH0sIFtzdHlsZWRUaGVtZS50aGVtZV0pXG4gIHVzZVJlbW92ZUZvY3VzU3R5bGUoKVxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8R2xvYmFsU3R5bGVzIHsuLi50aGVtZX0gLz5cbiAgICAgIDxTdHlsZWRFbmdpbmVQcm92aWRlciBpbmplY3RGaXJzdD5cbiAgICAgICAgPFRoZW1lUHJvdmlkZXIgdGhlbWU9e3RoZW1lfT57Y2hpbGRyZW59PC9UaGVtZVByb3ZpZGVyPlxuICAgICAgPC9TdHlsZWRFbmdpbmVQcm92aWRlcj5cbiAgICA8Lz5cbiAgKVxufVxuIl19