import { __assign, __read } from "tslib";
import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
/**
 * Copyright (c) Codice Foundation
 *
 * This is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser
 * General Public License as published by the Free Software Foundation, either version 3 of the
 * License, or any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without
 * even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
 * Lesser General Public License for more details. A copy of the GNU Lesser General Public License
 * is distributed along with this program and can be found at
 * <http://www.gnu.org/licenses/lgpl.html>.
 *
 **/
import * as React from 'react';
import LazyMetacardInteractions from './lazy-metacard-interactions';
import IconHelper from '../../../js/IconHelper';
import user from '../../singletons/user-instance';
import Button from '@mui/material/Button';
import LinkIcon from '@mui/icons-material/Link';
import GetAppIcon from '@mui/icons-material/GetApp';
import Grid from '@mui/material/Grid';
import Paper from '@mui/material/Paper';
import Tooltip from '@mui/material/Tooltip';
import MoreIcon from '@mui/icons-material/MoreVert';
import WarningIcon from '@mui/icons-material/Warning';
import { useBackbone } from '../../selection-checkbox/useBackbone.hook';
import { useRerenderOnBackboneSync, useSelectionOfLazyResult, } from '../../../js/model/LazyQueryResult/hooks';
import Extensions from '../../../extension-points';
import CheckBoxOutlineBlankIcon from '@mui/icons-material/CheckBoxOutlineBlank';
import CheckIcon from '@mui/icons-material/Check';
import CheckBoxIcon from '@mui/icons-material/CheckBox';
import { Elevations } from '../../theme/theme';
import TouchRipple from '@mui/material/ButtonBase/TouchRipple';
import { clearSelection, hasSelection } from './result-item-row';
import { useLazyResultsSelectedResultsFromSelectionInterface } from '../../selection-interface/hooks';
import { TypedUserInstance } from '../../singletons/TypedUser';
import useCoordinateFormat from '../../tabs/metacard/useCoordinateFormat';
import EditIcon from '@mui/icons-material/Edit';
import { Link } from '../../link/link';
import { useMenuState } from '../../menu-state/menu-state';
import Popover from '@mui/material/Popover';
import Common from '../../../js/Common';
import ExtensionPoints from '../../../extension-points/extension-points';
import { StartupDataStore } from '../../../js/model/Startup/startup';
import { useMetacardDefinitions } from '../../../js/model/Startup/metacard-definitions.hooks';
import wreqr from '../../../js/wreqr';
import { useDialog } from '../../dialog';
import { useDownloadComponent } from '../../download/download';
import { LayoutContext } from '../../golden-layout/visual-settings.provider';
import { RESULTS_ATTRIBUTES_LIST, getDefaultResultsShownList, } from '../settings-helpers';
var PropertyComponent = function (props) {
    return (_jsx("div", __assign({}, props, { className: "overflow-auto", style: {
            marginTop: '10px',
            opacity: '.7',
            maxHeight: '200px',
            minHeight: '21px', // firefox will show scroll bars all the time unless we do this minHeight :S
        } })));
};
var showSource = function () {
    return (StartupDataStore.Configuration.getResultShow().find(function (additionalProperty) {
        return additionalProperty === 'source-id';
    }) !== undefined);
};
var showRelevanceScore = function (_a) {
    var lazyResult = _a.lazyResult;
    return (StartupDataStore.Configuration.getShowRelevanceScores() &&
        lazyResult.hasRelevance());
};
export var getIconClassName = function (_a) {
    var lazyResult = _a.lazyResult;
    if (lazyResult.isRevision()) {
        return 'fa fa-history';
    }
    else if (lazyResult.isResource()) {
        return IconHelper.getClassByMetacardObject(lazyResult.plain);
    }
    else if (lazyResult.isDeleted()) {
        return 'fa fa-trash';
    }
    return IconHelper.getClassByMetacardObject(lazyResult.plain);
};
// @ts-ignore
var MultiSelectActions = function (_a) {
    var selectionInterface = _a.selectionInterface;
    var selectedResults = useLazyResultsSelectedResultsFromSelectionInterface({
        selectionInterface: selectionInterface,
    });
    var selectedResultsArray = Object.values(selectedResults);
    var metacardInteractionMenuState = useMenuState();
    return (_jsxs(_Fragment, { children: [_jsxs(Button, { component: "div", className: selectedResultsArray.length === 0 ? 'relative' : 'relative', color: "primary", disabled: selectedResultsArray.length === 0, onClick: function (e) {
                    e.stopPropagation();
                    metacardInteractionMenuState.handleClick();
                }, ref: metacardInteractionMenuState.anchorRef, style: { height: '100%' }, size: "small", children: [selectedResultsArray.length, " selected", _jsx(MoreIcon, { className: "Mui-text-text-primary" })] }), _jsx(Popover, __assign({}, metacardInteractionMenuState.MuiPopoverProps, { children: _jsx(Paper, { children: _jsx(LazyMetacardInteractions, { lazyResults: selectedResultsArray, onClose: metacardInteractionMenuState.handleClose }) }) }))] }));
};
var dynamicActionClasses = 'h-full';
var DynamicActions = function (_a) {
    var lazyResult = _a.lazyResult;
    var setProps = useDialog().setProps;
    var metacardInteractionMenuState = useMenuState();
    var DownloadComponent = useDownloadComponent();
    return (_jsxs(Grid, { container: true, direction: "column", wrap: "nowrap", alignItems: "center", children: [_jsxs(Grid, { item: true, className: "h-full", children: [_jsx(Button, { component: "div", "data-id": "result-item-more-vert-button", onClick: function (e) {
                            e.stopPropagation();
                            metacardInteractionMenuState.handleClick();
                        }, style: { height: '100%' }, size: "small", ref: metacardInteractionMenuState.anchorRef, children: _jsx(MoreIcon, {}) }), _jsx(Popover, __assign({}, metacardInteractionMenuState.MuiPopoverProps, { keepMounted: true, children: _jsx(Paper, { children: _jsx(LazyMetacardInteractions, { lazyResults: [lazyResult], onClose: metacardInteractionMenuState.handleClose }) }) }))] }), _jsx(Grid, { item: true, className: dynamicActionClasses, children: lazyResult.hasErrors() ? (_jsx("div", { "data-id": "validation-errors-icon", className: "h-full", title: "Has validation errors.", "data-help": "Indicates the given result has a validation error.\n                     See the 'Quality' tab of the result for more details.", children: _jsx(WarningIcon, {}) })) : ('') }), _jsx(Grid, { item: true, className: dynamicActionClasses, children: !lazyResult.hasErrors() && lazyResult.hasWarnings() ? (_jsx("div", { "data-id": "validation-warnings-icon", className: "h-full", title: "Has validation warnings.", "data-help": "Indicates the given result has a validation warning.\n                     See the 'Quality' tab of the result for more details.", children: _jsx(WarningIcon, {}) })) : ('') }), _jsx(Grid, { item: true, className: dynamicActionClasses, children: lazyResult.plain.metacard.properties['ext.link'] ? (_jsx(Button, { component: "div", title: lazyResult.plain.metacard.properties['ext.link'], onClick: function (e) {
                        e.stopPropagation();
                        window.open(lazyResult.plain.metacard.properties['ext.link']);
                    }, style: { height: '100%' }, size: "small", children: _jsx(LinkIcon, {}) })) : null }), _jsx(Grid, { item: true, className: dynamicActionClasses, children: lazyResult.getDownloadUrl() ? (_jsx(Button, { component: "div", "data-id": "download-button", onClick: function (e) {
                        e.stopPropagation();
                        setProps({
                            open: true,
                            children: _jsx(DownloadComponent, { lazyResults: [lazyResult] }),
                        });
                    }, style: { height: '100%' }, size: "small", children: _jsx(GetAppIcon, {}) })) : null }), _jsx(Extensions.resultItemTitleAddOn, { lazyResult: lazyResult }), _jsx(Grid, { item: true, className: dynamicActionClasses, children: lazyResult.isSearch() ? (_jsx(Button, { component: Link, "data-id": "edit-button", to: "/search/".concat(lazyResult.plain.id), style: { height: '100%' }, size: "small", children: _jsx(EditIcon, {}) })) : null })] }));
};
export var SelectionBackground = function (_a) {
    var lazyResult = _a.lazyResult;
    var isSelected = useSelectionOfLazyResult({ lazyResult: lazyResult });
    return (_jsx("div", { className: "absolute left-0 top-0 z-0 w-full h-full Mui-bg-secondary", style: {
            opacity: isSelected ? 0.05 : 0,
        } }));
};
var IconButton = function (_a) {
    var lazyResult = _a.lazyResult, selectionInterface = _a.selectionInterface, itemContentRef = _a.itemContentRef;
    var MetacardDefinitions = useMetacardDefinitions();
    var isSelected = useSelectionOfLazyResult({ lazyResult: lazyResult });
    var ResultItemAction = ExtensionPoints.resultItemAction({
        lazyResult: lazyResult,
        selectionInterface: selectionInterface,
        itemContentRef: itemContentRef,
        className: 'scale-0 absolute z-10 left-0 -translate-x-full ml-[3px] group-hover:scale-100 transition pt-1',
    });
    var extraClasses = ResultItemAction
        ? 'group-hover:scale-50 group-hover:-translate-x-[85%]'
        : '';
    return (_jsxs(_Fragment, { children: [ResultItemAction && (_jsx(ResultItemAction, { lazyResult: lazyResult, selectionInterface: selectionInterface, itemContentRef: itemContentRef })), _jsxs(Button, { component: "div", "data-id": "select-checkbox", onClick: function (event) {
                    event.stopPropagation(); // this button takes precedence over the enclosing button, and is always additive / subtractive (no deselect of other results)
                    if (event.shiftKey) {
                        lazyResult.shiftSelect();
                    }
                    else {
                        lazyResult.controlSelect();
                    }
                }, focusVisibleClassName: "focus-visible", className: "relative p-2 min-w-0 outline-none h-full group/checkbox shrink-0", children: [(function () {
                        if (isSelected) {
                            return (_jsxs(_Fragment, { children: [_jsxs("div", { className: "".concat(extraClasses, " absolute w-full h-full left-0 top-0 opacity-0 transform transition duration-200 ease-in-out -translate-x-full group-hover/checkbox:scale-100"), children: [_jsx(CheckBoxIcon, { className: "group-hover/checkbox:block group-focus-visible/checkbox:block hidden" }), _jsx(CheckIcon, { className: "group-hover/checkbox:hidden group-focus-visible/checkbox:hidden block" })] }), _jsxs("div", { className: "".concat(extraClasses, " transform transition duration-200 ease-in-out -translate-x-full group-focus-visible/checkbox:!translate-x-0 group-hover/checkbox:!translate-x-0 group-hover/checkbox:scale-100"), children: [_jsx(CheckBoxIcon, { className: "group-hover/checkbox:block group-focus-visible/checkbox:block hidden" }), _jsx(CheckIcon, { className: "group-hover/checkbox:hidden group-focus-visible/checkbox:hidden block" })] })] }));
                        }
                        else if (!isSelected) {
                            return (_jsx("div", { className: "transform ", children: _jsx(CheckBoxOutlineBlankIcon, { className: "group-hover/checkbox:visible group-focus-visible/checkbox:visible invisible" }) }));
                        }
                        return null;
                    })(), _jsx("span", { className: "".concat(getIconClassName({
                            lazyResult: lazyResult,
                        }), " font-awesome-span group-focus-visible/checkbox:invisible group-hover/checkbox:invisible absolute z-0 left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2"), "data-help": MetacardDefinitions.getAlias('title'), title: "".concat(MetacardDefinitions.getAlias('title'), ": ").concat(lazyResult.plain.metacard.properties.title) })] })] }));
};
// factored out for easy debugging (can add bg-gray-400 to see trail)
var diagonalHoverClasses = 'absolute z-50 right-0 bottom-100 h-4 transform scale-0 group-hover:scale-100 transition-all absolute z-50 right-0 bottom-100';
// fake event to pass ripple.stop
var fakeEvent = {
    type: '',
};
export var ResultItem = function (_a) {
    var lazyResult = _a.lazyResult, originalMeasure = _a.measure, selectionInterface = _a.selectionInterface;
    var _b = React.useContext(LayoutContext), getValue = _b.getValue, onStateChanged = _b.onStateChanged;
    var MetacardDefinitions = useMetacardDefinitions();
    var rippleRef = React.useRef(null);
    var listenTo = useBackbone().listenTo;
    var convertToPrecision = function (value) {
        return value && decimalPrecision
            ? Number(value).toFixed(decimalPrecision)
            : value;
    };
    var convertToFormat = useCoordinateFormat();
    var _c = __read(React.useState(false), 2), renderExtras = _c[0], setRenderExtras = _c[1]; // dynamic actions are a significant part of rendering time, so delay until necessary
    var _d = __read(React.useState(TypedUserInstance.getDecimalPrecision()), 2), decimalPrecision = _d[0], setDecimalPrecision = _d[1];
    var _e = __read(React.useState(getValue(RESULTS_ATTRIBUTES_LIST, getDefaultResultsShownList())), 2), shownAttributes = _e[0], setShownAttributes = _e[1];
    useRerenderOnBackboneSync({ lazyResult: lazyResult });
    React.useEffect(function () {
        listenTo(user.get('user').get('preferences'), 'change:decimalPrecision', function () {
            setDecimalPrecision(TypedUserInstance.getDecimalPrecision());
        });
        onStateChanged(function () {
            var shownList = getValue(RESULTS_ATTRIBUTES_LIST, getDefaultResultsShownList());
            setShownAttributes(shownList);
        });
    }, []);
    /**
     * Unfocused (hidden) tab sets the container height to 0
     * Run the measure function when the height is 0 could cause items inside the tab to be unreadable
     */
    var measure = function () {
        var _a, _b;
        if (((_a = buttonRef.current) === null || _a === void 0 ? void 0 : _a.clientHeight) &&
            ((_b = buttonRef.current) === null || _b === void 0 ? void 0 : _b.clientHeight) > 0) {
            originalMeasure();
        }
    };
    React.useEffect(function () {
        measure();
    }, [shownAttributes, convertToFormat]);
    listenTo(wreqr.vent, 'activeContentItemChanged', function () {
        measure();
    });
    var thumbnail = lazyResult.plain.metacard.properties.thumbnail;
    var imgsrc = Common.getImageSrc(thumbnail);
    var buttonRef = React.useRef(null);
    var itemContentRef = React.useRef(null);
    var ResultItemAddOnInstance = Extensions.resultItemRowAddOn({
        lazyResult: lazyResult,
        isTableView: false,
    });
    var ResultTitleIconAddOnInstance = Extensions.resultTitleIconAddOn({
        lazyResult: lazyResult,
    });
    var shouldShowRelevance = showRelevanceScore({ lazyResult: lazyResult });
    var shouldShowSource = showSource();
    var extraHighlights = Object.keys(lazyResult.highlights).filter(function (attr) { return !shownAttributes.find(function (shownAttribute) { return shownAttribute === attr; }); });
    var getDisplayValue = function (_a) {
        var detail = _a.detail, lazyResult = _a.lazyResult;
        var value = lazyResult.plain.metacard.properties[detail];
        if (value && MetacardDefinitions.getAttributeMap()[detail]) {
            switch (MetacardDefinitions.getAttributeMap()[detail].type) {
                case 'DATE':
                    if (Array.isArray(value)) {
                        value = value.map(function (val) {
                            return TypedUserInstance.getMomentDate(val);
                        });
                    }
                    else {
                        value = TypedUserInstance.getMomentDate(value);
                    }
                    break;
                case 'GEOMETRY':
                    if (value.constructor === Array) {
                        value = value.map(function (val) { return convertToFormat(val); });
                    }
                    else {
                        value = convertToFormat(value);
                    }
                    break;
                case 'LONG':
                case 'DOUBLE':
                case 'FLOAT':
                    if (value.constructor === Array) {
                        value = value.map(function (val) { return convertToPrecision(val); });
                    }
                    else {
                        value = convertToPrecision(value);
                    }
                    break;
            }
        }
        if (Array.isArray(value)) {
            value = value.join(', ');
        }
        return value;
    };
    var detailsMap = shownAttributes
        .slice(1) // remove top one since that's special
        .map(function (detail) {
        return {
            attribute: detail,
            value: getDisplayValue({ detail: detail, lazyResult: lazyResult }),
        };
    })
        .filter(function (detail) {
        // this is special and is handled differently, see show source
        if (detail.attribute === 'source-id') {
            return false;
        }
        return detail.value;
    });
    return (_jsx("button", { "data-id": "result-item-container-button", onMouseDown: function (event) {
            /**
             * Shift key can cause selections since we set the class to allow text selection,
             * so the only scenario we want to prevent that in is when shift clicking
             */
            if (event.shiftKey) {
                clearSelection();
            }
            /**
             * Stop the ripple that starts on focus, that's only for navigating by keyboard
             */
            setTimeout(function () {
                if (rippleRef.current) {
                    rippleRef.current.stop(fakeEvent);
                }
            }, 0);
        }, onClick: function (event) {
            if (hasSelection()) {
                return;
            }
            if (event.shiftKey) {
                lazyResult.shiftSelect();
            }
            else if (event.ctrlKey || event.metaKey) {
                lazyResult.controlSelect();
            }
            else {
                lazyResult.select();
            }
            if (rippleRef.current) {
                rippleRef.current.start(event);
            }
            setTimeout(function () {
                if (rippleRef.current) {
                    rippleRef.current.stop(fakeEvent);
                }
            }, 200);
        }, onMouseLeave: function () {
            /**
             * This is to prevent weirdness with the dynamic actions, where clicking a menu option there adds focus,
             * thus making the dynamic actions stay visible when the user starts to mouse away.
             */
            try {
                if (document.activeElement &&
                    buttonRef.current &&
                    buttonRef.current.contains(document.activeElement)) {
                    ;
                    document.activeElement.blur();
                }
            }
            catch (err) {
                console.error(err);
            }
        }, onMouseEnter: function () {
            setRenderExtras(true);
        }, onFocus: function (e) {
            setRenderExtras(true);
            if (e.target === e.currentTarget && rippleRef.current) {
                rippleRef.current.pulsate();
            }
        }, onBlur: function (e) {
            if (rippleRef.current) {
                rippleRef.current.stop(e);
            }
        }, ref: buttonRef, className: "select-text outline-none px-6 pr-12 p-2 text-left break-words group w-full Mui-bg-button", children: _jsxs("div", { className: "w-full", children: [_jsx(TouchRipple, { ref: rippleRef }), _jsx(SelectionBackground, { lazyResult: lazyResult }), _jsxs("div", { className: "w-full relative z-0", ref: itemContentRef, children: [_jsxs("div", { className: "w-full flex items-start", children: [_jsx(IconButton, { lazyResult: lazyResult, selectionInterface: selectionInterface, itemContentRef: itemContentRef }), ResultTitleIconAddOnInstance && (_jsx("div", { className: "pt-2 pr-1", children: ResultTitleIconAddOnInstance })), _jsx("div", { "data-id": "result-item-".concat(shownAttributes[0], "-label"), title: "".concat(MetacardDefinitions.getAlias(shownAttributes[0])), className: "shrink-1 w-full overflow-auto self-center", style: { maxHeight: '200px', minHeight: '21px' }, children: shownAttributes[0] === 'thumbnail' && thumbnail ? (_jsx("img", { "data-id": "result-item-thumbnail", src: imgsrc, style: { maxWidth: '100%', maxHeight: '200px' }, onLoad: function () {
                                            measure();
                                        }, onError: function () {
                                            measure();
                                        } })) : lazyResult.highlights[shownAttributes[0]] ? (_jsx("span", { dangerouslySetInnerHTML: {
                                            __html: lazyResult.highlights[shownAttributes[0]][0].highlight,
                                        } })) : (getDisplayValue({ detail: shownAttributes[0], lazyResult: lazyResult })) })] }), _jsxs("div", { className: "pl-3 ".concat(ResultItemAddOnInstance !== null ||
                                detailsMap.length > 0 ||
                                extraHighlights.length > 0 ||
                                shouldShowRelevance ||
                                shouldShowSource
                                ? 'pb-2'
                                : ''), children: [_jsx("div", { children: ResultItemAddOnInstance }), _jsxs("div", { children: [detailsMap.map(function (detail) {
                                            if (detail.attribute === 'thumbnail') {
                                                return (_jsx("img", { "data-id": "result-item-thumbnail", src: imgsrc, style: {
                                                        marginTop: '10px',
                                                        maxWidth: '100%',
                                                        maxHeight: '200px',
                                                    }, onLoad: function () {
                                                        measure();
                                                    }, onError: function () {
                                                        measure();
                                                    } }, detail.attribute));
                                            }
                                            return (_jsx(PropertyComponent, { "data-help": MetacardDefinitions.getAlias(detail.attribute), title: "".concat(MetacardDefinitions.getAlias(detail.attribute), ": ").concat(detail.value), children: _jsx("span", { children: lazyResult.highlights[detail.attribute] ? (_jsx("span", { dangerouslySetInnerHTML: {
                                                            __html: lazyResult.highlights[detail.attribute][0]
                                                                .highlight,
                                                        } })) : (getDisplayValue({
                                                        detail: detail.attribute,
                                                        lazyResult: lazyResult,
                                                    })) }) }, detail.attribute));
                                        }), extraHighlights.map(function (extraHighlight) {
                                            var relevantHighlight = lazyResult.highlights[extraHighlight][0];
                                            return (_jsx(PropertyComponent, { "data-help": MetacardDefinitions.getAlias(relevantHighlight.attribute), children: _jsx(Tooltip, { title: MetacardDefinitions.getAlias(relevantHighlight.attribute), children: _jsx("span", { dangerouslySetInnerHTML: {
                                                            __html: relevantHighlight.highlight,
                                                        } }) }) }, relevantHighlight.attribute));
                                        }), shouldShowRelevance ? (_jsx(PropertyComponent, { "data-help": "Relevance: ".concat(lazyResult.plain.relevance), title: "Relevance: ".concat(lazyResult.plain.relevance), children: _jsx("span", { children: lazyResult.getRoundedRelevance() }) })) : (''), shouldShowSource ? (_jsx(PropertyComponent, { title: "".concat(MetacardDefinitions.getAlias('source-id'), ": ").concat(lazyResult.plain.metacard.properties['source-id']), "data-help": MetacardDefinitions.getAlias('source-id'), children: !lazyResult.isRemote() ? (_jsxs(React.Fragment, { children: [_jsx("span", { className: "fa fa-home" }), _jsx("span", { style: { marginLeft: '5px' }, children: "local" })] })) : (_jsxs(React.Fragment, { children: [_jsx("span", { className: "fa fa-cloud" }), _jsx("span", { style: { marginLeft: '5px' }, children: lazyResult.plain.metacard.properties['source-id'] })] })) })) : ('')] })] })] }), renderExtras ? (_jsxs(_Fragment, { children: [' ', _jsx("div", { className: "".concat(diagonalHoverClasses, " w-full transform translate-y-1") }), _jsx("div", { className: "".concat(diagonalHoverClasses, " w-9/12 transform translate-y-2 ") }), _jsx("div", { className: "".concat(diagonalHoverClasses, " w-6/12 transform translate-y-3") }), _jsx("div", { className: "".concat(diagonalHoverClasses, " w-5/12 transform translate-y-4") }), _jsx("div", { className: "".concat(diagonalHoverClasses, " w-4/12 transform translate-y-5") }), _jsx("div", { className: "".concat(diagonalHoverClasses, " w-3/12 transform translate-y-6") }), _jsx("div", { className: "".concat(diagonalHoverClasses, " w-2/12 transform translate-y-8") }), _jsx("div", { className: "absolute z-40 group-hover:z-50 focus-within:z-50 right-0 top-0 focus-within:opacity-100 group-hover:opacity-100 hover:opacity-100 opacity-0 cursor-auto transform focus-within:scale-100 transition-all hover:scale-100 ease-in-out duration-200 hover:translate-x-0 hover:scale-x-100", children: _jsx(Paper, { onClick: function (e) {
                                    e.stopPropagation();
                                }, elevation: Elevations.overlays, className: "p-2", children: _jsx(DynamicActions, { lazyResult: lazyResult }) }) })] })) : null] }) }));
};
export default ResultItem;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzdWx0LWl0ZW0uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9zcmMvbWFpbi93ZWJhcHAvY29tcG9uZW50L3Zpc3VhbGl6YXRpb24vcmVzdWx0cy12aXN1YWwvcmVzdWx0LWl0ZW0udHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7Ozs7Ozs7Ozs7SUFhSTtBQUNKLE9BQU8sS0FBSyxLQUFLLE1BQU0sT0FBTyxDQUFBO0FBQzlCLE9BQU8sd0JBQXdCLE1BQU0sOEJBQThCLENBQUE7QUFDbkUsT0FBTyxVQUFVLE1BQU0sd0JBQXdCLENBQUE7QUFDL0MsT0FBTyxJQUFJLE1BQU0sZ0NBQWdDLENBQUE7QUFDakQsT0FBTyxNQUFNLE1BQU0sc0JBQXNCLENBQUE7QUFDekMsT0FBTyxRQUFRLE1BQU0sMEJBQTBCLENBQUE7QUFDL0MsT0FBTyxVQUFVLE1BQU0sNEJBQTRCLENBQUE7QUFDbkQsT0FBTyxJQUFJLE1BQU0sb0JBQW9CLENBQUE7QUFFckMsT0FBTyxLQUFLLE1BQU0scUJBQXFCLENBQUE7QUFDdkMsT0FBTyxPQUFPLE1BQU0sdUJBQXVCLENBQUE7QUFDM0MsT0FBTyxRQUFRLE1BQU0sOEJBQThCLENBQUE7QUFDbkQsT0FBTyxXQUFXLE1BQU0sNkJBQTZCLENBQUE7QUFDckQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDJDQUEyQyxDQUFBO0FBRXZFLE9BQU8sRUFDTCx5QkFBeUIsRUFDekIsd0JBQXdCLEdBQ3pCLE1BQU0seUNBQXlDLENBQUE7QUFDaEQsT0FBTyxVQUFVLE1BQU0sMkJBQTJCLENBQUE7QUFDbEQsT0FBTyx3QkFBd0IsTUFBTSwwQ0FBMEMsQ0FBQTtBQUMvRSxPQUFPLFNBQVMsTUFBTSwyQkFBMkIsQ0FBQTtBQUNqRCxPQUFPLFlBQVksTUFBTSw4QkFBOEIsQ0FBQTtBQUN2RCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sbUJBQW1CLENBQUE7QUFDOUMsT0FBTyxXQUFXLE1BQU0sc0NBQXNDLENBQUE7QUFDOUQsT0FBTyxFQUFFLGNBQWMsRUFBRSxZQUFZLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQTtBQUNoRSxPQUFPLEVBQUUsbURBQW1ELEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQTtBQUNyRyxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQTtBQUM5RCxPQUFPLG1CQUFtQixNQUFNLHlDQUF5QyxDQUFBO0FBQ3pFLE9BQU8sUUFBUSxNQUFNLDBCQUEwQixDQUFBO0FBQy9DLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQTtBQUN0QyxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sNkJBQTZCLENBQUE7QUFDMUQsT0FBTyxPQUFPLE1BQU0sdUJBQXVCLENBQUE7QUFDM0MsT0FBTyxNQUFNLE1BQU0sb0JBQW9CLENBQUE7QUFDdkMsT0FBTyxlQUFlLE1BQU0sNENBQTRDLENBQUE7QUFDeEUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sbUNBQW1DLENBQUE7QUFDcEUsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sc0RBQXNELENBQUE7QUFDN0YsT0FBTyxLQUFLLE1BQU0sbUJBQW1CLENBQUE7QUFDckMsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGNBQWMsQ0FBQTtBQUN4QyxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQTtBQUM5RCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sOENBQThDLENBQUE7QUFDNUUsT0FBTyxFQUNMLHVCQUF1QixFQUN2QiwwQkFBMEIsR0FDM0IsTUFBTSxxQkFBcUIsQ0FBQTtBQUU1QixJQUFNLGlCQUFpQixHQUFHLFVBQUMsS0FBOEM7SUFDdkUsT0FBTyxDQUNMLHlCQUNNLEtBQUssSUFDVCxTQUFTLEVBQUMsZUFBZSxFQUN6QixLQUFLLEVBQUU7WUFDTCxTQUFTLEVBQUUsTUFBTTtZQUNqQixPQUFPLEVBQUUsSUFBSTtZQUNiLFNBQVMsRUFBRSxPQUFPO1lBQ2xCLFNBQVMsRUFBRSxNQUFNLEVBQUUsNEVBQTRFO1NBQ2hHLElBQ0QsQ0FDSCxDQUFBO0FBQ0gsQ0FBQyxDQUFBO0FBV0QsSUFBTSxVQUFVLEdBQUc7SUFDakIsT0FBTyxDQUNMLGdCQUFnQixDQUFDLGFBQWEsQ0FBQyxhQUFhLEVBQUUsQ0FBQyxJQUFJLENBQ2pELFVBQUMsa0JBQTBCO1FBQ3pCLE9BQU8sa0JBQWtCLEtBQUssV0FBVyxDQUFBO0lBQzNDLENBQUMsQ0FDRixLQUFLLFNBQVMsQ0FDaEIsQ0FBQTtBQUNILENBQUMsQ0FBQTtBQUNELElBQU0sa0JBQWtCLEdBQUcsVUFBQyxFQUkzQjtRQUhDLFVBQVUsZ0JBQUE7SUFJVixPQUFPLENBQ0wsZ0JBQWdCLENBQUMsYUFBYSxDQUFDLHNCQUFzQixFQUFFO1FBQ3ZELFVBQVUsQ0FBQyxZQUFZLEVBQUUsQ0FDMUIsQ0FBQTtBQUNILENBQUMsQ0FBQTtBQUNELE1BQU0sQ0FBQyxJQUFNLGdCQUFnQixHQUFHLFVBQUMsRUFJaEM7UUFIQyxVQUFVLGdCQUFBO0lBSVYsSUFBSSxVQUFVLENBQUMsVUFBVSxFQUFFLEVBQUUsQ0FBQztRQUM1QixPQUFPLGVBQWUsQ0FBQTtJQUN4QixDQUFDO1NBQU0sSUFBSSxVQUFVLENBQUMsVUFBVSxFQUFFLEVBQUUsQ0FBQztRQUNuQyxPQUFPLFVBQVUsQ0FBQyx3QkFBd0IsQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUE7SUFDOUQsQ0FBQztTQUFNLElBQUksVUFBVSxDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUM7UUFDbEMsT0FBTyxhQUFhLENBQUE7SUFDdEIsQ0FBQztJQUNELE9BQU8sVUFBVSxDQUFDLHdCQUF3QixDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQTtBQUM5RCxDQUFDLENBQUE7QUFDRCxhQUFhO0FBQ2IsSUFBTSxrQkFBa0IsR0FBRyxVQUFDLEVBSTNCO1FBSEMsa0JBQWtCLHdCQUFBO0lBSWxCLElBQU0sZUFBZSxHQUFHLG1EQUFtRCxDQUFDO1FBQzFFLGtCQUFrQixvQkFBQTtLQUNuQixDQUFDLENBQUE7SUFDRixJQUFNLG9CQUFvQixHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUE7SUFDM0QsSUFBTSw0QkFBNEIsR0FBRyxZQUFZLEVBQUUsQ0FBQTtJQUNuRCxPQUFPLENBQ0wsOEJBQ0UsTUFBQyxNQUFNLElBQ0wsU0FBUyxFQUFDLEtBQUssRUFDZixTQUFTLEVBQUUsb0JBQW9CLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxVQUFVLEVBQ3RFLEtBQUssRUFBQyxTQUFTLEVBQ2YsUUFBUSxFQUFFLG9CQUFvQixDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQzNDLE9BQU8sRUFBRSxVQUFDLENBQUM7b0JBQ1QsQ0FBQyxDQUFDLGVBQWUsRUFBRSxDQUFBO29CQUNuQiw0QkFBNEIsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtnQkFDNUMsQ0FBQyxFQUNELEdBQUcsRUFBRSw0QkFBNEIsQ0FBQyxTQUFTLEVBQzNDLEtBQUssRUFBRSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsRUFDekIsSUFBSSxFQUFDLE9BQU8sYUFFWCxvQkFBb0IsQ0FBQyxNQUFNLGVBQzVCLEtBQUMsUUFBUSxJQUFDLFNBQVMsRUFBQyx1QkFBdUIsR0FBRyxJQUN2QyxFQUNULEtBQUMsT0FBTyxlQUFLLDRCQUE0QixDQUFDLGVBQWUsY0FDdkQsS0FBQyxLQUFLLGNBQ0osS0FBQyx3QkFBd0IsSUFDdkIsV0FBVyxFQUFFLG9CQUFvQixFQUNqQyxPQUFPLEVBQUUsNEJBQTRCLENBQUMsV0FBVyxHQUNqRCxHQUNJLElBQ0EsSUFDVCxDQUNKLENBQUE7QUFDSCxDQUFDLENBQUE7QUFDRCxJQUFNLG9CQUFvQixHQUFHLFFBQVEsQ0FBQTtBQUNyQyxJQUFNLGNBQWMsR0FBRyxVQUFDLEVBQStDO1FBQTdDLFVBQVUsZ0JBQUE7SUFDMUIsSUFBQSxRQUFRLEdBQUssU0FBUyxFQUFFLFNBQWhCLENBQWdCO0lBQ2hDLElBQU0sNEJBQTRCLEdBQUcsWUFBWSxFQUFFLENBQUE7SUFDbkQsSUFBTSxpQkFBaUIsR0FBRyxvQkFBb0IsRUFBRSxDQUFBO0lBQ2hELE9BQU8sQ0FDTCxNQUFDLElBQUksSUFBQyxTQUFTLFFBQUMsU0FBUyxFQUFDLFFBQVEsRUFBQyxJQUFJLEVBQUMsUUFBUSxFQUFDLFVBQVUsRUFBQyxRQUFRLGFBQ2xFLE1BQUMsSUFBSSxJQUFDLElBQUksUUFBQyxTQUFTLEVBQUMsUUFBUSxhQUMzQixLQUFDLE1BQU0sSUFDTCxTQUFTLEVBQUMsS0FBSyxhQUNQLDhCQUE4QixFQUN0QyxPQUFPLEVBQUUsVUFBQyxDQUErQzs0QkFDdkQsQ0FBQyxDQUFDLGVBQWUsRUFBRSxDQUFBOzRCQUNuQiw0QkFBNEIsQ0FBQyxXQUFXLEVBQUUsQ0FBQTt3QkFDNUMsQ0FBQyxFQUNELEtBQUssRUFBRSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsRUFDekIsSUFBSSxFQUFDLE9BQU8sRUFDWixHQUFHLEVBQUUsNEJBQTRCLENBQUMsU0FBUyxZQUUzQyxLQUFDLFFBQVEsS0FBRyxHQUNMLEVBQ1QsS0FBQyxPQUFPLGVBQ0YsNEJBQTRCLENBQUMsZUFBZSxJQUNoRCxXQUFXLEVBQUUsSUFBSSxZQUVqQixLQUFDLEtBQUssY0FDSixLQUFDLHdCQUF3QixJQUN2QixXQUFXLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFDekIsT0FBTyxFQUFFLDRCQUE0QixDQUFDLFdBQVcsR0FDakQsR0FDSSxJQUNBLElBQ0wsRUFDUCxLQUFDLElBQUksSUFBQyxJQUFJLFFBQUMsU0FBUyxFQUFFLG9CQUFvQixZQUN2QyxVQUFVLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQ3hCLHlCQUNVLHdCQUF3QixFQUNoQyxTQUFTLEVBQUMsUUFBUSxFQUNsQixLQUFLLEVBQUMsd0JBQXdCLGVBQ3BCLGdJQUNxRCxZQUUvRCxLQUFDLFdBQVcsS0FBRyxHQUNYLENBQ1AsQ0FBQyxDQUFDLENBQUMsQ0FDRixFQUFFLENBQ0gsR0FDSSxFQUNQLEtBQUMsSUFBSSxJQUFDLElBQUksUUFBQyxTQUFTLEVBQUUsb0JBQW9CLFlBQ3ZDLENBQUMsVUFBVSxDQUFDLFNBQVMsRUFBRSxJQUFJLFVBQVUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FDckQseUJBQ1UsMEJBQTBCLEVBQ2xDLFNBQVMsRUFBQyxRQUFRLEVBQ2xCLEtBQUssRUFBQywwQkFBMEIsZUFDdEIsa0lBQ3FELFlBRS9ELEtBQUMsV0FBVyxLQUFHLEdBQ1gsQ0FDUCxDQUFDLENBQUMsQ0FBQyxDQUNGLEVBQUUsQ0FDSCxHQUNJLEVBQ1AsS0FBQyxJQUFJLElBQUMsSUFBSSxRQUFDLFNBQVMsRUFBRSxvQkFBb0IsWUFDdkMsVUFBVSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUNsRCxLQUFDLE1BQU0sSUFDTCxTQUFTLEVBQUMsS0FBSyxFQUNmLEtBQUssRUFBRSxVQUFVLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLEVBQ3ZELE9BQU8sRUFBRSxVQUFDLENBQStDO3dCQUN2RCxDQUFDLENBQUMsZUFBZSxFQUFFLENBQUE7d0JBQ25CLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUE7b0JBQy9ELENBQUMsRUFDRCxLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLEVBQ3pCLElBQUksRUFBQyxPQUFPLFlBRVosS0FBQyxRQUFRLEtBQUcsR0FDTCxDQUNWLENBQUMsQ0FBQyxDQUFDLElBQUksR0FDSCxFQUNQLEtBQUMsSUFBSSxJQUFDLElBQUksUUFBQyxTQUFTLEVBQUUsb0JBQW9CLFlBQ3ZDLFVBQVUsQ0FBQyxjQUFjLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FDN0IsS0FBQyxNQUFNLElBQ0wsU0FBUyxFQUFDLEtBQUssYUFDUCxpQkFBaUIsRUFDekIsT0FBTyxFQUFFLFVBQUMsQ0FBK0M7d0JBQ3ZELENBQUMsQ0FBQyxlQUFlLEVBQUUsQ0FBQTt3QkFDbkIsUUFBUSxDQUFDOzRCQUNQLElBQUksRUFBRSxJQUFJOzRCQUNWLFFBQVEsRUFBRSxLQUFDLGlCQUFpQixJQUFDLFdBQVcsRUFBRSxDQUFDLFVBQVUsQ0FBQyxHQUFJO3lCQUMzRCxDQUFDLENBQUE7b0JBQ0osQ0FBQyxFQUNELEtBQUssRUFBRSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsRUFDekIsSUFBSSxFQUFDLE9BQU8sWUFFWixLQUFDLFVBQVUsS0FBRyxHQUNQLENBQ1YsQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUNILEVBQ1AsS0FBQyxVQUFVLENBQUMsb0JBQW9CLElBQUMsVUFBVSxFQUFFLFVBQVUsR0FBSSxFQUMzRCxLQUFDLElBQUksSUFBQyxJQUFJLFFBQUMsU0FBUyxFQUFFLG9CQUFvQixZQUN2QyxVQUFVLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQ3ZCLEtBQUMsTUFBTSxJQUNMLFNBQVMsRUFBRSxJQUFJLGFBQ1AsYUFBYSxFQUNyQixFQUFFLEVBQUUsa0JBQVcsVUFBVSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUUsRUFDcEMsS0FBSyxFQUFFLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxFQUN6QixJQUFJLEVBQUMsT0FBTyxZQUVaLEtBQUMsUUFBUSxLQUFHLEdBQ0wsQ0FDVixDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQ0gsSUFnQkYsQ0FDUixDQUFBO0FBQ0gsQ0FBQyxDQUFBO0FBQ0QsTUFBTSxDQUFDLElBQU0sbUJBQW1CLEdBQUcsVUFBQyxFQUtuQztRQUpDLFVBQVUsZ0JBQUE7SUFLVixJQUFNLFVBQVUsR0FBRyx3QkFBd0IsQ0FBQyxFQUFFLFVBQVUsWUFBQSxFQUFFLENBQUMsQ0FBQTtJQUMzRCxPQUFPLENBQ0wsY0FDRSxTQUFTLEVBQUMsMERBQTBELEVBQ3BFLEtBQUssRUFBRTtZQUNMLE9BQU8sRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUMvQixHQUNELENBQ0gsQ0FBQTtBQUNILENBQUMsQ0FBQTtBQUNELElBQU0sVUFBVSxHQUFHLFVBQUMsRUFRbkI7UUFQQyxVQUFVLGdCQUFBLEVBQ1Ysa0JBQWtCLHdCQUFBLEVBQ2xCLGNBQWMsb0JBQUE7SUFNZCxJQUFNLG1CQUFtQixHQUFHLHNCQUFzQixFQUFFLENBQUE7SUFDcEQsSUFBTSxVQUFVLEdBQUcsd0JBQXdCLENBQUMsRUFBRSxVQUFVLFlBQUEsRUFBRSxDQUFDLENBQUE7SUFDM0QsSUFBTSxnQkFBZ0IsR0FBRyxlQUFlLENBQUMsZ0JBQWdCLENBQUM7UUFDeEQsVUFBVSxZQUFBO1FBQ1Ysa0JBQWtCLG9CQUFBO1FBQ2xCLGNBQWMsZ0JBQUE7UUFDZCxTQUFTLEVBQ1AsK0ZBQStGO0tBQ2xHLENBQUMsQ0FBQTtJQUNGLElBQU0sWUFBWSxHQUFHLGdCQUFnQjtRQUNuQyxDQUFDLENBQUMscURBQXFEO1FBQ3ZELENBQUMsQ0FBQyxFQUFFLENBQUE7SUFDTixPQUFPLENBQ0wsOEJBQ0csZ0JBQWdCLElBQUksQ0FDbkIsS0FBQyxnQkFBZ0IsSUFDZixVQUFVLEVBQUUsVUFBVSxFQUN0QixrQkFBa0IsRUFBRSxrQkFBa0IsRUFDdEMsY0FBYyxFQUFFLGNBQWMsR0FDOUIsQ0FDSCxFQUNELE1BQUMsTUFBTSxJQUNMLFNBQVMsRUFBQyxLQUFLLGFBQ1AsaUJBQWlCLEVBQ3pCLE9BQU8sRUFBRSxVQUFDLEtBQW1EO29CQUMzRCxLQUFLLENBQUMsZUFBZSxFQUFFLENBQUEsQ0FBQyw4SEFBOEg7b0JBQ3RKLElBQUksS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDO3dCQUNuQixVQUFVLENBQUMsV0FBVyxFQUFFLENBQUE7b0JBQzFCLENBQUM7eUJBQU0sQ0FBQzt3QkFDTixVQUFVLENBQUMsYUFBYSxFQUFFLENBQUE7b0JBQzVCLENBQUM7Z0JBQ0gsQ0FBQyxFQUNELHFCQUFxQixFQUFDLGVBQWUsRUFDckMsU0FBUyxFQUFDLGtFQUFrRSxhQUUzRSxDQUFDO3dCQUNBLElBQUksVUFBVSxFQUFFLENBQUM7NEJBQ2YsT0FBTyxDQUNMLDhCQUNFLGVBQ0UsU0FBUyxFQUFFLFVBQUcsWUFBWSxrSkFBK0ksYUFFekssS0FBQyxZQUFZLElBQUMsU0FBUyxFQUFDLHNFQUFzRSxHQUFHLEVBQ2pHLEtBQUMsU0FBUyxJQUFDLFNBQVMsRUFBQyx1RUFBdUUsR0FBRyxJQUMzRixFQUNOLGVBQ0UsU0FBUyxFQUFFLFVBQUcsWUFBWSxvTEFBaUwsYUFFM00sS0FBQyxZQUFZLElBQUMsU0FBUyxFQUFDLHNFQUFzRSxHQUFHLEVBQ2pHLEtBQUMsU0FBUyxJQUFDLFNBQVMsRUFBQyx1RUFBdUUsR0FBRyxJQUMzRixJQUNMLENBQ0osQ0FBQTt3QkFDSCxDQUFDOzZCQUFNLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQzs0QkFDdkIsT0FBTyxDQUNMLGNBQUssU0FBUyxFQUFDLFlBQVksWUFDekIsS0FBQyx3QkFBd0IsSUFDdkIsU0FBUyxFQUFFLDZFQUE2RSxHQUN4RixHQUNFLENBQ1AsQ0FBQTt3QkFDSCxDQUFDO3dCQUNELE9BQU8sSUFBSSxDQUFBO29CQUNiLENBQUMsQ0FBQyxFQUFFLEVBQ0osZUFDRSxTQUFTLEVBQUUsVUFBRyxnQkFBZ0IsQ0FBQzs0QkFDN0IsVUFBVSxZQUFBO3lCQUNYLENBQUMsdUtBQW9LLGVBQzNKLG1CQUFtQixDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsRUFDaEQsS0FBSyxFQUFFLFVBQUcsbUJBQW1CLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxlQUM3QyxVQUFVLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUMxQyxHQUNGLElBQ0ssSUFDUixDQUNKLENBQUE7QUFDSCxDQUFDLENBQUE7QUFDRCxxRUFBcUU7QUFDckUsSUFBTSxvQkFBb0IsR0FDeEIsOEhBQThILENBQUE7QUFDaEksaUNBQWlDO0FBQ2pDLElBQU0sU0FBUyxHQUFHO0lBQ2hCLElBQUksRUFBRSxFQUFFO0NBQ0YsQ0FBQTtBQUNSLE1BQU0sQ0FBQyxJQUFNLFVBQVUsR0FBRyxVQUFDLEVBSUw7UUFIcEIsVUFBVSxnQkFBQSxFQUNELGVBQWUsYUFBQSxFQUN4QixrQkFBa0Isd0JBQUE7SUFFWixJQUFBLEtBQStCLEtBQUssQ0FBQyxVQUFVLENBQUMsYUFBYSxDQUFDLEVBQTVELFFBQVEsY0FBQSxFQUFFLGNBQWMsb0JBQW9DLENBQUE7SUFDcEUsSUFBTSxtQkFBbUIsR0FBRyxzQkFBc0IsRUFBRSxDQUFBO0lBQ3BELElBQU0sU0FBUyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBSTNCLElBQUksQ0FBQyxDQUFBO0lBQ0EsSUFBQSxRQUFRLEdBQUssV0FBVyxFQUFFLFNBQWxCLENBQWtCO0lBQ2xDLElBQU0sa0JBQWtCLEdBQUcsVUFBQyxLQUFVO1FBQ3BDLE9BQU8sS0FBSyxJQUFJLGdCQUFnQjtZQUM5QixDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztZQUN6QyxDQUFDLENBQUMsS0FBSyxDQUFBO0lBQ1gsQ0FBQyxDQUFBO0lBQ0QsSUFBTSxlQUFlLEdBQUcsbUJBQW1CLEVBQUUsQ0FBQTtJQUN2QyxJQUFBLEtBQUEsT0FBa0MsS0FBSyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBQSxFQUF0RCxZQUFZLFFBQUEsRUFBRSxlQUFlLFFBQXlCLENBQUEsQ0FBQyxxRkFBcUY7SUFDN0ksSUFBQSxLQUFBLE9BQTBDLEtBQUssQ0FBQyxRQUFRLENBQzVELGlCQUFpQixDQUFDLG1CQUFtQixFQUFFLENBQ3hDLElBQUEsRUFGTSxnQkFBZ0IsUUFBQSxFQUFFLG1CQUFtQixRQUUzQyxDQUFBO0lBQ0ssSUFBQSxLQUFBLE9BQXdDLEtBQUssQ0FBQyxRQUFRLENBQzFELFFBQVEsQ0FBQyx1QkFBdUIsRUFBRSwwQkFBMEIsRUFBRSxDQUFhLENBQzVFLElBQUEsRUFGTSxlQUFlLFFBQUEsRUFBRSxrQkFBa0IsUUFFekMsQ0FBQTtJQUNELHlCQUF5QixDQUFDLEVBQUUsVUFBVSxZQUFBLEVBQUUsQ0FBQyxDQUFBO0lBRXpDLEtBQUssQ0FBQyxTQUFTLENBQUM7UUFDZCxRQUFRLENBQ04sSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLEVBQ25DLHlCQUF5QixFQUN6QjtZQUNFLG1CQUFtQixDQUFDLGlCQUFpQixDQUFDLG1CQUFtQixFQUFFLENBQUMsQ0FBQTtRQUM5RCxDQUFDLENBQ0YsQ0FBQTtRQUNELGNBQWMsQ0FBQztZQUNiLElBQU0sU0FBUyxHQUFHLFFBQVEsQ0FDeEIsdUJBQXVCLEVBQ3ZCLDBCQUEwQixFQUFFLENBQzdCLENBQUE7WUFDRCxrQkFBa0IsQ0FBQyxTQUFTLENBQUMsQ0FBQTtRQUMvQixDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQTtJQUVOOzs7T0FHRztJQUNILElBQU0sT0FBTyxHQUFHOztRQUNkLElBQ0UsQ0FBQSxNQUFBLFNBQVMsQ0FBQyxPQUFPLDBDQUFFLFlBQVk7WUFDL0IsQ0FBQSxNQUFBLFNBQVMsQ0FBQyxPQUFPLDBDQUFFLFlBQVksSUFBRyxDQUFDLEVBQ25DLENBQUM7WUFDRCxlQUFlLEVBQUUsQ0FBQTtRQUNuQixDQUFDO0lBQ0gsQ0FBQyxDQUFBO0lBQ0QsS0FBSyxDQUFDLFNBQVMsQ0FBQztRQUNkLE9BQU8sRUFBRSxDQUFBO0lBQ1gsQ0FBQyxFQUFFLENBQUMsZUFBZSxFQUFFLGVBQWUsQ0FBQyxDQUFDLENBQUE7SUFDdEMsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsMEJBQTBCLEVBQUU7UUFDL0MsT0FBTyxFQUFFLENBQUE7SUFDWCxDQUFDLENBQUMsQ0FBQTtJQUNGLElBQU0sU0FBUyxHQUFHLFVBQVUsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUE7SUFDaEUsSUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQTtJQUM1QyxJQUFNLFNBQVMsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFvQixJQUFJLENBQUMsQ0FBQTtJQUN2RCxJQUFNLGNBQWMsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFpQixJQUFJLENBQUMsQ0FBQTtJQUV6RCxJQUFNLHVCQUF1QixHQUFHLFVBQVUsQ0FBQyxrQkFBa0IsQ0FBQztRQUM1RCxVQUFVLFlBQUE7UUFDVixXQUFXLEVBQUUsS0FBSztLQUNuQixDQUFDLENBQUE7SUFDRixJQUFNLDRCQUE0QixHQUFHLFVBQVUsQ0FBQyxvQkFBb0IsQ0FBQztRQUNuRSxVQUFVLFlBQUE7S0FDWCxDQUFDLENBQUE7SUFFRixJQUFNLG1CQUFtQixHQUFHLGtCQUFrQixDQUFDLEVBQUUsVUFBVSxZQUFBLEVBQUUsQ0FBQyxDQUFBO0lBQzlELElBQU0sZ0JBQWdCLEdBQUcsVUFBVSxFQUFFLENBQUE7SUFDckMsSUFBTSxlQUFlLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsTUFBTSxDQUMvRCxVQUFDLElBQUksSUFBSyxPQUFBLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxVQUFDLGNBQWMsSUFBSyxPQUFBLGNBQWMsS0FBSyxJQUFJLEVBQXZCLENBQXVCLENBQUMsRUFBbEUsQ0FBa0UsQ0FDN0UsQ0FBQTtJQUNELElBQU0sZUFBZSxHQUFHLFVBQUMsRUFNeEI7WUFMQyxNQUFNLFlBQUEsRUFDTixVQUFVLGdCQUFBO1FBS1YsSUFBSSxLQUFLLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFBO1FBQ3hELElBQUksS0FBSyxJQUFJLG1CQUFtQixDQUFDLGVBQWUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUM7WUFDM0QsUUFBUSxtQkFBbUIsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztnQkFDM0QsS0FBSyxNQUFNO29CQUNULElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO3dCQUN6QixLQUFLLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxVQUFDLEdBQVE7NEJBQ3pCLE9BQUEsaUJBQWlCLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQzt3QkFBcEMsQ0FBb0MsQ0FDckMsQ0FBQTtvQkFDSCxDQUFDO3lCQUFNLENBQUM7d0JBQ04sS0FBSyxHQUFHLGlCQUFpQixDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQTtvQkFDaEQsQ0FBQztvQkFDRCxNQUFLO2dCQUNQLEtBQUssVUFBVTtvQkFDYixJQUFJLEtBQUssQ0FBQyxXQUFXLEtBQUssS0FBSyxFQUFFLENBQUM7d0JBQ2hDLEtBQUssR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLFVBQUMsR0FBUSxJQUFLLE9BQUEsZUFBZSxDQUFDLEdBQUcsQ0FBQyxFQUFwQixDQUFvQixDQUFDLENBQUE7b0JBQ3ZELENBQUM7eUJBQU0sQ0FBQzt3QkFDTixLQUFLLEdBQUcsZUFBZSxDQUFDLEtBQUssQ0FBQyxDQUFBO29CQUNoQyxDQUFDO29CQUNELE1BQUs7Z0JBQ1AsS0FBSyxNQUFNLENBQUM7Z0JBQ1osS0FBSyxRQUFRLENBQUM7Z0JBQ2QsS0FBSyxPQUFPO29CQUNWLElBQUksS0FBSyxDQUFDLFdBQVcsS0FBSyxLQUFLLEVBQUUsQ0FBQzt3QkFDaEMsS0FBSyxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsVUFBQyxHQUFRLElBQUssT0FBQSxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsRUFBdkIsQ0FBdUIsQ0FBQyxDQUFBO29CQUMxRCxDQUFDO3lCQUFNLENBQUM7d0JBQ04sS0FBSyxHQUFHLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxDQUFBO29CQUNuQyxDQUFDO29CQUNELE1BQUs7WUFDVCxDQUFDO1FBQ0gsQ0FBQztRQUNELElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO1lBQ3pCLEtBQUssR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO1FBQzFCLENBQUM7UUFDRCxPQUFPLEtBQUssQ0FBQTtJQUNkLENBQUMsQ0FBQTtJQUNELElBQU0sVUFBVSxHQUFHLGVBQWU7U0FDL0IsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLHNDQUFzQztTQUMvQyxHQUFHLENBQUMsVUFBQyxNQUFNO1FBQ1YsT0FBTztZQUNMLFNBQVMsRUFBRSxNQUFNO1lBQ2pCLEtBQUssRUFBRSxlQUFlLENBQUMsRUFBRSxNQUFNLFFBQUEsRUFBRSxVQUFVLFlBQUEsRUFBRSxDQUFDO1NBQy9DLENBQUE7SUFDSCxDQUFDLENBQUM7U0FDRCxNQUFNLENBQUMsVUFBQyxNQUFNO1FBQ2IsOERBQThEO1FBQzlELElBQUksTUFBTSxDQUFDLFNBQVMsS0FBSyxXQUFXLEVBQUUsQ0FBQztZQUNyQyxPQUFPLEtBQUssQ0FBQTtRQUNkLENBQUM7UUFDRCxPQUFPLE1BQU0sQ0FBQyxLQUFLLENBQUE7SUFDckIsQ0FBQyxDQUFDLENBQUE7SUFDSixPQUFPLENBQ0wsNEJBQ1UsOEJBQThCLEVBQ3RDLFdBQVcsRUFBRSxVQUFDLEtBQVU7WUFDdEI7OztlQUdHO1lBQ0gsSUFBSSxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUM7Z0JBQ25CLGNBQWMsRUFBRSxDQUFBO1lBQ2xCLENBQUM7WUFDRDs7ZUFFRztZQUNILFVBQVUsQ0FBQztnQkFDVCxJQUFJLFNBQVMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztvQkFDdEIsU0FBUyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUE7Z0JBQ25DLENBQUM7WUFDSCxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUE7UUFDUCxDQUFDLEVBQ0QsT0FBTyxFQUFFLFVBQUMsS0FBVTtZQUNsQixJQUFJLFlBQVksRUFBRSxFQUFFLENBQUM7Z0JBQ25CLE9BQU07WUFDUixDQUFDO1lBQ0QsSUFBSSxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUM7Z0JBQ25CLFVBQVUsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtZQUMxQixDQUFDO2lCQUFNLElBQUksS0FBSyxDQUFDLE9BQU8sSUFBSSxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQzFDLFVBQVUsQ0FBQyxhQUFhLEVBQUUsQ0FBQTtZQUM1QixDQUFDO2lCQUFNLENBQUM7Z0JBQ04sVUFBVSxDQUFDLE1BQU0sRUFBRSxDQUFBO1lBQ3JCLENBQUM7WUFDRCxJQUFJLFNBQVMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDdEIsU0FBUyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUE7WUFDaEMsQ0FBQztZQUNELFVBQVUsQ0FBQztnQkFDVCxJQUFJLFNBQVMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztvQkFDdEIsU0FBUyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUE7Z0JBQ25DLENBQUM7WUFDSCxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUE7UUFDVCxDQUFDLEVBQ0QsWUFBWSxFQUFFO1lBQ1o7OztlQUdHO1lBQ0gsSUFBSSxDQUFDO2dCQUNILElBQ0UsUUFBUSxDQUFDLGFBQWE7b0JBQ3RCLFNBQVMsQ0FBQyxPQUFPO29CQUNqQixTQUFTLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLEVBQ2xELENBQUM7b0JBQ0QsQ0FBQztvQkFBQyxRQUFRLENBQUMsYUFBcUIsQ0FBQyxJQUFJLEVBQUUsQ0FBQTtnQkFDekMsQ0FBQztZQUNILENBQUM7WUFBQyxPQUFPLEdBQUcsRUFBRSxDQUFDO2dCQUNiLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUE7WUFDcEIsQ0FBQztRQUNILENBQUMsRUFDRCxZQUFZLEVBQUU7WUFDWixlQUFlLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDdkIsQ0FBQyxFQUNELE9BQU8sRUFBRSxVQUFDLENBQU07WUFDZCxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUE7WUFDckIsSUFBSSxDQUFDLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxhQUFhLElBQUksU0FBUyxDQUFDLE9BQU8sRUFBRSxDQUFDO2dCQUN0RCxTQUFTLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFBO1lBQzdCLENBQUM7UUFDSCxDQUFDLEVBQ0QsTUFBTSxFQUFFLFVBQUMsQ0FBTTtZQUNiLElBQUksU0FBUyxDQUFDLE9BQU8sRUFBRSxDQUFDO2dCQUN0QixTQUFTLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtZQUMzQixDQUFDO1FBQ0gsQ0FBQyxFQUNELEdBQUcsRUFBRSxTQUFTLEVBQ2QsU0FBUyxFQUFFLDBGQUEwRixZQUVyRyxlQUFLLFNBQVMsRUFBQyxRQUFRLGFBQ3JCLEtBQUMsV0FBVyxJQUFDLEdBQUcsRUFBRSxTQUFTLEdBQUksRUFDL0IsS0FBQyxtQkFBbUIsSUFBQyxVQUFVLEVBQUUsVUFBVSxHQUFJLEVBQy9DLGVBQUssU0FBUyxFQUFDLHFCQUFxQixFQUFDLEdBQUcsRUFBRSxjQUFjLGFBQ3RELGVBQUssU0FBUyxFQUFDLHlCQUF5QixhQUN0QyxLQUFDLFVBQVUsSUFDVCxVQUFVLEVBQUUsVUFBVSxFQUN0QixrQkFBa0IsRUFBRSxrQkFBa0IsRUFDdEMsY0FBYyxFQUFFLGNBQWMsR0FDOUIsRUFDRCw0QkFBNEIsSUFBSSxDQUMvQixjQUFLLFNBQVMsRUFBQyxXQUFXLFlBQUUsNEJBQTRCLEdBQU8sQ0FDaEUsRUFDRCx5QkFDVyxzQkFBZSxlQUFlLENBQUMsQ0FBQyxDQUFDLFdBQVEsRUFDbEQsS0FBSyxFQUFFLFVBQUcsbUJBQW1CLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFFLEVBQzVELFNBQVMsRUFBQywyQ0FBMkMsRUFDckQsS0FBSyxFQUFFLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLFlBRS9DLGVBQWUsQ0FBQyxDQUFDLENBQUMsS0FBSyxXQUFXLElBQUksU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUNqRCx5QkFDVSx1QkFBdUIsRUFDL0IsR0FBRyxFQUFFLE1BQU0sRUFDWCxLQUFLLEVBQUUsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsRUFDL0MsTUFBTSxFQUFFOzRDQUNOLE9BQU8sRUFBRSxDQUFBO3dDQUNYLENBQUMsRUFDRCxPQUFPLEVBQUU7NENBQ1AsT0FBTyxFQUFFLENBQUE7d0NBQ1gsQ0FBQyxHQUNELENBQ0gsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FDOUMsZUFDRSx1QkFBdUIsRUFBRTs0Q0FDdkIsTUFBTSxFQUNKLFVBQVUsQ0FBQyxVQUFVLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUzt5Q0FDekQsR0FDRCxDQUNILENBQUMsQ0FBQyxDQUFDLENBQ0YsZUFBZSxDQUFDLEVBQUUsTUFBTSxFQUFFLGVBQWUsQ0FBQyxDQUFDLENBQUMsRUFBRSxVQUFVLFlBQUEsRUFBRSxDQUFDLENBQzVELEdBQ0csSUFDRixFQUNOLGVBQ0UsU0FBUyxFQUFFLGVBQ1QsdUJBQXVCLEtBQUssSUFBSTtnQ0FDaEMsVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDO2dDQUNyQixlQUFlLENBQUMsTUFBTSxHQUFHLENBQUM7Z0NBQzFCLG1CQUFtQjtnQ0FDbkIsZ0JBQWdCO2dDQUNkLENBQUMsQ0FBQyxNQUFNO2dDQUNSLENBQUMsQ0FBQyxFQUFFLENBQ04sYUFFRix3QkFBTSx1QkFBdUIsR0FBTyxFQUNwQywwQkFDRyxVQUFVLENBQUMsR0FBRyxDQUFDLFVBQUMsTUFBTTs0Q0FDckIsSUFBSSxNQUFNLENBQUMsU0FBUyxLQUFLLFdBQVcsRUFBRSxDQUFDO2dEQUNyQyxPQUFPLENBQ0wseUJBRVUsdUJBQXVCLEVBQy9CLEdBQUcsRUFBRSxNQUFNLEVBQ1gsS0FBSyxFQUFFO3dEQUNMLFNBQVMsRUFBRSxNQUFNO3dEQUNqQixRQUFRLEVBQUUsTUFBTTt3REFDaEIsU0FBUyxFQUFFLE9BQU87cURBQ25CLEVBQ0QsTUFBTSxFQUFFO3dEQUNOLE9BQU8sRUFBRSxDQUFBO29EQUNYLENBQUMsRUFDRCxPQUFPLEVBQUU7d0RBQ1AsT0FBTyxFQUFFLENBQUE7b0RBQ1gsQ0FBQyxJQWJJLE1BQU0sQ0FBQyxTQUFTLENBY3JCLENBQ0gsQ0FBQTs0Q0FDSCxDQUFDOzRDQUNELE9BQU8sQ0FDTCxLQUFDLGlCQUFpQixpQkFFTCxtQkFBbUIsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUN6RCxLQUFLLEVBQUUsVUFBRyxtQkFBbUIsQ0FBQyxRQUFRLENBQ3BDLE1BQU0sQ0FBQyxTQUFTLENBQ2pCLGVBQUssTUFBTSxDQUFDLEtBQUssQ0FBRSxZQUVwQix5QkFFRyxVQUFVLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FDekMsZUFDRSx1QkFBdUIsRUFBRTs0REFDdkIsTUFBTSxFQUNKLFVBQVUsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztpRUFDdkMsU0FBUzt5REFDZixHQUNELENBQ0gsQ0FBQyxDQUFDLENBQUMsQ0FDRixlQUFlLENBQUM7d0RBQ2QsTUFBTSxFQUFFLE1BQU0sQ0FBQyxTQUFTO3dEQUN4QixVQUFVLFlBQUE7cURBQ1gsQ0FBQyxDQUNILEdBQ0ksSUF0QkYsTUFBTSxDQUFDLFNBQVMsQ0F1QkgsQ0FDckIsQ0FBQTt3Q0FDSCxDQUFDLENBQUMsRUFDRCxlQUFlLENBQUMsR0FBRyxDQUFDLFVBQUMsY0FBYzs0Q0FDbEMsSUFBTSxpQkFBaUIsR0FDckIsVUFBVSxDQUFDLFVBQVUsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTs0Q0FDMUMsT0FBTyxDQUNMLEtBQUMsaUJBQWlCLGlCQUVMLG1CQUFtQixDQUFDLFFBQVEsQ0FDckMsaUJBQWlCLENBQUMsU0FBUyxDQUM1QixZQUVELEtBQUMsT0FBTyxJQUNOLEtBQUssRUFBRSxtQkFBbUIsQ0FBQyxRQUFRLENBQ2pDLGlCQUFpQixDQUFDLFNBQVMsQ0FDNUIsWUFFRCxlQUNFLHVCQUF1QixFQUFFOzREQUN2QixNQUFNLEVBQUUsaUJBQWlCLENBQUMsU0FBUzt5REFDcEMsR0FDRCxHQUNNLElBZkwsaUJBQWlCLENBQUMsU0FBUyxDQWdCZCxDQUNyQixDQUFBO3dDQUNILENBQUMsQ0FBQyxFQUNELG1CQUFtQixDQUFDLENBQUMsQ0FBQyxDQUNyQixLQUFDLGlCQUFpQixpQkFDTCxxQkFBYyxVQUFVLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBRSxFQUNyRCxLQUFLLEVBQUUscUJBQWMsVUFBVSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUUsWUFFakQseUJBQU8sVUFBVSxDQUFDLG1CQUFtQixFQUFFLEdBQVEsR0FDN0IsQ0FDckIsQ0FBQyxDQUFDLENBQUMsQ0FDRixFQUFFLENBQ0gsRUFDQSxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsQ0FDbEIsS0FBQyxpQkFBaUIsSUFDaEIsS0FBSyxFQUFFLFVBQUcsbUJBQW1CLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxlQUNqRCxVQUFVLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLENBQ2pELGVBQ1MsbUJBQW1CLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxZQUVuRCxDQUFDLFVBQVUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FDeEIsTUFBQyxLQUFLLENBQUMsUUFBUSxlQUNiLGVBQU0sU0FBUyxFQUFDLFlBQVksR0FBRyxFQUMvQixlQUFNLEtBQUssRUFBRSxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsc0JBQWMsSUFDakMsQ0FDbEIsQ0FBQyxDQUFDLENBQUMsQ0FDRixNQUFDLEtBQUssQ0FBQyxRQUFRLGVBQ2IsZUFBTSxTQUFTLEVBQUMsYUFBYSxHQUFHLEVBQ2hDLGVBQU0sS0FBSyxFQUFFLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRSxZQUMvQixVQUFVLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLEdBQzdDLElBQ1EsQ0FDbEIsR0FDaUIsQ0FDckIsQ0FBQyxDQUFDLENBQUMsQ0FDRixFQUFFLENBQ0gsSUFDRyxJQUNGLElBQ0YsRUFDTCxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQ2QsOEJBQ0csR0FBRyxFQUVKLGNBQ0UsU0FBUyxFQUFFLFVBQUcsb0JBQW9CLG9DQUFpQyxHQUNuRSxFQUNGLGNBQ0UsU0FBUyxFQUFFLFVBQUcsb0JBQW9CLHFDQUFrQyxHQUNwRSxFQUNGLGNBQ0UsU0FBUyxFQUFFLFVBQUcsb0JBQW9CLG9DQUFpQyxHQUNuRSxFQUNGLGNBQ0UsU0FBUyxFQUFFLFVBQUcsb0JBQW9CLG9DQUFpQyxHQUNuRSxFQUNGLGNBQ0UsU0FBUyxFQUFFLFVBQUcsb0JBQW9CLG9DQUFpQyxHQUNuRSxFQUNGLGNBQ0UsU0FBUyxFQUFFLFVBQUcsb0JBQW9CLG9DQUFpQyxHQUNuRSxFQUNGLGNBQ0UsU0FBUyxFQUFFLFVBQUcsb0JBQW9CLG9DQUFpQyxHQUNuRSxFQUNGLGNBQ0UsU0FBUyxFQUFFLHdSQUF3UixZQUVuUyxLQUFDLEtBQUssSUFDSixPQUFPLEVBQUUsVUFBQyxDQUFDO29DQUNULENBQUMsQ0FBQyxlQUFlLEVBQUUsQ0FBQTtnQ0FDckIsQ0FBQyxFQUNELFNBQVMsRUFBRSxVQUFVLENBQUMsUUFBUSxFQUM5QixTQUFTLEVBQUMsS0FBSyxZQUVmLEtBQUMsY0FBYyxJQUFDLFVBQVUsRUFBRSxVQUFVLEdBQUksR0FDcEMsR0FDSixJQUNMLENBQ0osQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUNKLEdBQ0MsQ0FDVixDQUFBO0FBQ0gsQ0FBQyxDQUFBO0FBQ0QsZUFBZSxVQUFVLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgQ29kaWNlIEZvdW5kYXRpb25cbiAqXG4gKiBUaGlzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgTGVzc2VyXG4gKiBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZVxuICogTGljZW5zZSwgb3IgYW55IGxhdGVyIHZlcnNpb24uXG4gKlxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dFxuICogZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGUgR05VXG4gKiBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLiBBIGNvcHkgb2YgdGhlIEdOVSBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICogaXMgZGlzdHJpYnV0ZWQgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0gYW5kIGNhbiBiZSBmb3VuZCBhdFxuICogPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9sZ3BsLmh0bWw+LlxuICpcbiAqKi9cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IExhenlNZXRhY2FyZEludGVyYWN0aW9ucyBmcm9tICcuL2xhenktbWV0YWNhcmQtaW50ZXJhY3Rpb25zJ1xuaW1wb3J0IEljb25IZWxwZXIgZnJvbSAnLi4vLi4vLi4vanMvSWNvbkhlbHBlcidcbmltcG9ydCB1c2VyIGZyb20gJy4uLy4uL3NpbmdsZXRvbnMvdXNlci1pbnN0YW5jZSdcbmltcG9ydCBCdXR0b24gZnJvbSAnQG11aS9tYXRlcmlhbC9CdXR0b24nXG5pbXBvcnQgTGlua0ljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9MaW5rJ1xuaW1wb3J0IEdldEFwcEljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9HZXRBcHAnXG5pbXBvcnQgR3JpZCBmcm9tICdAbXVpL21hdGVyaWFsL0dyaWQnXG5cbmltcG9ydCBQYXBlciBmcm9tICdAbXVpL21hdGVyaWFsL1BhcGVyJ1xuaW1wb3J0IFRvb2x0aXAgZnJvbSAnQG11aS9tYXRlcmlhbC9Ub29sdGlwJ1xuaW1wb3J0IE1vcmVJY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvTW9yZVZlcnQnXG5pbXBvcnQgV2FybmluZ0ljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9XYXJuaW5nJ1xuaW1wb3J0IHsgdXNlQmFja2JvbmUgfSBmcm9tICcuLi8uLi9zZWxlY3Rpb24tY2hlY2tib3gvdXNlQmFja2JvbmUuaG9vaydcbmltcG9ydCB7IExhenlRdWVyeVJlc3VsdCB9IGZyb20gJy4uLy4uLy4uL2pzL21vZGVsL0xhenlRdWVyeVJlc3VsdC9MYXp5UXVlcnlSZXN1bHQnXG5pbXBvcnQge1xuICB1c2VSZXJlbmRlck9uQmFja2JvbmVTeW5jLFxuICB1c2VTZWxlY3Rpb25PZkxhenlSZXN1bHQsXG59IGZyb20gJy4uLy4uLy4uL2pzL21vZGVsL0xhenlRdWVyeVJlc3VsdC9ob29rcydcbmltcG9ydCBFeHRlbnNpb25zIGZyb20gJy4uLy4uLy4uL2V4dGVuc2lvbi1wb2ludHMnXG5pbXBvcnQgQ2hlY2tCb3hPdXRsaW5lQmxhbmtJY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvQ2hlY2tCb3hPdXRsaW5lQmxhbmsnXG5pbXBvcnQgQ2hlY2tJY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvQ2hlY2snXG5pbXBvcnQgQ2hlY2tCb3hJY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvQ2hlY2tCb3gnXG5pbXBvcnQgeyBFbGV2YXRpb25zIH0gZnJvbSAnLi4vLi4vdGhlbWUvdGhlbWUnXG5pbXBvcnQgVG91Y2hSaXBwbGUgZnJvbSAnQG11aS9tYXRlcmlhbC9CdXR0b25CYXNlL1RvdWNoUmlwcGxlJ1xuaW1wb3J0IHsgY2xlYXJTZWxlY3Rpb24sIGhhc1NlbGVjdGlvbiB9IGZyb20gJy4vcmVzdWx0LWl0ZW0tcm93J1xuaW1wb3J0IHsgdXNlTGF6eVJlc3VsdHNTZWxlY3RlZFJlc3VsdHNGcm9tU2VsZWN0aW9uSW50ZXJmYWNlIH0gZnJvbSAnLi4vLi4vc2VsZWN0aW9uLWludGVyZmFjZS9ob29rcydcbmltcG9ydCB7IFR5cGVkVXNlckluc3RhbmNlIH0gZnJvbSAnLi4vLi4vc2luZ2xldG9ucy9UeXBlZFVzZXInXG5pbXBvcnQgdXNlQ29vcmRpbmF0ZUZvcm1hdCBmcm9tICcuLi8uLi90YWJzL21ldGFjYXJkL3VzZUNvb3JkaW5hdGVGb3JtYXQnXG5pbXBvcnQgRWRpdEljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9FZGl0J1xuaW1wb3J0IHsgTGluayB9IGZyb20gJy4uLy4uL2xpbmsvbGluaydcbmltcG9ydCB7IHVzZU1lbnVTdGF0ZSB9IGZyb20gJy4uLy4uL21lbnUtc3RhdGUvbWVudS1zdGF0ZSdcbmltcG9ydCBQb3BvdmVyIGZyb20gJ0BtdWkvbWF0ZXJpYWwvUG9wb3ZlcidcbmltcG9ydCBDb21tb24gZnJvbSAnLi4vLi4vLi4vanMvQ29tbW9uJ1xuaW1wb3J0IEV4dGVuc2lvblBvaW50cyBmcm9tICcuLi8uLi8uLi9leHRlbnNpb24tcG9pbnRzL2V4dGVuc2lvbi1wb2ludHMnXG5pbXBvcnQgeyBTdGFydHVwRGF0YVN0b3JlIH0gZnJvbSAnLi4vLi4vLi4vanMvbW9kZWwvU3RhcnR1cC9zdGFydHVwJ1xuaW1wb3J0IHsgdXNlTWV0YWNhcmREZWZpbml0aW9ucyB9IGZyb20gJy4uLy4uLy4uL2pzL21vZGVsL1N0YXJ0dXAvbWV0YWNhcmQtZGVmaW5pdGlvbnMuaG9va3MnXG5pbXBvcnQgd3JlcXIgZnJvbSAnLi4vLi4vLi4vanMvd3JlcXInXG5pbXBvcnQgeyB1c2VEaWFsb2cgfSBmcm9tICcuLi8uLi9kaWFsb2cnXG5pbXBvcnQgeyB1c2VEb3dubG9hZENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2Rvd25sb2FkL2Rvd25sb2FkJ1xuaW1wb3J0IHsgTGF5b3V0Q29udGV4dCB9IGZyb20gJy4uLy4uL2dvbGRlbi1sYXlvdXQvdmlzdWFsLXNldHRpbmdzLnByb3ZpZGVyJ1xuaW1wb3J0IHtcbiAgUkVTVUxUU19BVFRSSUJVVEVTX0xJU1QsXG4gIGdldERlZmF1bHRSZXN1bHRzU2hvd25MaXN0LFxufSBmcm9tICcuLi9zZXR0aW5ncy1oZWxwZXJzJ1xuXG5jb25zdCBQcm9wZXJ0eUNvbXBvbmVudCA9IChwcm9wczogUmVhY3QuQWxsSFRNTEF0dHJpYnV0ZXM8SFRNTERpdkVsZW1lbnQ+KSA9PiB7XG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgey4uLnByb3BzfVxuICAgICAgY2xhc3NOYW1lPVwib3ZlcmZsb3ctYXV0b1wiXG4gICAgICBzdHlsZT17e1xuICAgICAgICBtYXJnaW5Ub3A6ICcxMHB4JyxcbiAgICAgICAgb3BhY2l0eTogJy43JyxcbiAgICAgICAgbWF4SGVpZ2h0OiAnMjAwcHgnLFxuICAgICAgICBtaW5IZWlnaHQ6ICcyMXB4JywgLy8gZmlyZWZveCB3aWxsIHNob3cgc2Nyb2xsIGJhcnMgYWxsIHRoZSB0aW1lIHVubGVzcyB3ZSBkbyB0aGlzIG1pbkhlaWdodCA6U1xuICAgICAgfX1cbiAgICAvPlxuICApXG59XG50eXBlIFJlc3VsdEl0ZW1CYXNpY1Byb3BzID0ge1xuICBsYXp5UmVzdWx0czogTGF6eVF1ZXJ5UmVzdWx0W11cbiAgbGF6eVJlc3VsdDogTGF6eVF1ZXJ5UmVzdWx0XG4gIHNlbGVjdGlvbkludGVyZmFjZTogYW55XG59XG50eXBlIFJlc3VsdEl0ZW1GdWxsUHJvcHMgPSBSZXN1bHRJdGVtQmFzaWNQcm9wcyAmIHtcbiAgbWVhc3VyZTogKCkgPT4gdm9pZFxuICBpbmRleDogbnVtYmVyXG4gIHdpZHRoOiBudW1iZXJcbn1cbmNvbnN0IHNob3dTb3VyY2UgPSAoKSA9PiB7XG4gIHJldHVybiAoXG4gICAgU3RhcnR1cERhdGFTdG9yZS5Db25maWd1cmF0aW9uLmdldFJlc3VsdFNob3coKS5maW5kKFxuICAgICAgKGFkZGl0aW9uYWxQcm9wZXJ0eTogc3RyaW5nKSA9PiB7XG4gICAgICAgIHJldHVybiBhZGRpdGlvbmFsUHJvcGVydHkgPT09ICdzb3VyY2UtaWQnXG4gICAgICB9XG4gICAgKSAhPT0gdW5kZWZpbmVkXG4gIClcbn1cbmNvbnN0IHNob3dSZWxldmFuY2VTY29yZSA9ICh7XG4gIGxhenlSZXN1bHQsXG59OiB7XG4gIGxhenlSZXN1bHQ6IFJlc3VsdEl0ZW1CYXNpY1Byb3BzWydsYXp5UmVzdWx0J11cbn0pID0+IHtcbiAgcmV0dXJuIChcbiAgICBTdGFydHVwRGF0YVN0b3JlLkNvbmZpZ3VyYXRpb24uZ2V0U2hvd1JlbGV2YW5jZVNjb3JlcygpICYmXG4gICAgbGF6eVJlc3VsdC5oYXNSZWxldmFuY2UoKVxuICApXG59XG5leHBvcnQgY29uc3QgZ2V0SWNvbkNsYXNzTmFtZSA9ICh7XG4gIGxhenlSZXN1bHQsXG59OiB7XG4gIGxhenlSZXN1bHQ6IExhenlRdWVyeVJlc3VsdFxufSkgPT4ge1xuICBpZiAobGF6eVJlc3VsdC5pc1JldmlzaW9uKCkpIHtcbiAgICByZXR1cm4gJ2ZhIGZhLWhpc3RvcnknXG4gIH0gZWxzZSBpZiAobGF6eVJlc3VsdC5pc1Jlc291cmNlKCkpIHtcbiAgICByZXR1cm4gSWNvbkhlbHBlci5nZXRDbGFzc0J5TWV0YWNhcmRPYmplY3QobGF6eVJlc3VsdC5wbGFpbilcbiAgfSBlbHNlIGlmIChsYXp5UmVzdWx0LmlzRGVsZXRlZCgpKSB7XG4gICAgcmV0dXJuICdmYSBmYS10cmFzaCdcbiAgfVxuICByZXR1cm4gSWNvbkhlbHBlci5nZXRDbGFzc0J5TWV0YWNhcmRPYmplY3QobGF6eVJlc3VsdC5wbGFpbilcbn1cbi8vIEB0cy1pZ25vcmVcbmNvbnN0IE11bHRpU2VsZWN0QWN0aW9ucyA9ICh7XG4gIHNlbGVjdGlvbkludGVyZmFjZSxcbn06IHtcbiAgc2VsZWN0aW9uSW50ZXJmYWNlOiBhbnlcbn0pID0+IHtcbiAgY29uc3Qgc2VsZWN0ZWRSZXN1bHRzID0gdXNlTGF6eVJlc3VsdHNTZWxlY3RlZFJlc3VsdHNGcm9tU2VsZWN0aW9uSW50ZXJmYWNlKHtcbiAgICBzZWxlY3Rpb25JbnRlcmZhY2UsXG4gIH0pXG4gIGNvbnN0IHNlbGVjdGVkUmVzdWx0c0FycmF5ID0gT2JqZWN0LnZhbHVlcyhzZWxlY3RlZFJlc3VsdHMpXG4gIGNvbnN0IG1ldGFjYXJkSW50ZXJhY3Rpb25NZW51U3RhdGUgPSB1c2VNZW51U3RhdGUoKVxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8QnV0dG9uXG4gICAgICAgIGNvbXBvbmVudD1cImRpdlwiXG4gICAgICAgIGNsYXNzTmFtZT17c2VsZWN0ZWRSZXN1bHRzQXJyYXkubGVuZ3RoID09PSAwID8gJ3JlbGF0aXZlJyA6ICdyZWxhdGl2ZSd9XG4gICAgICAgIGNvbG9yPVwicHJpbWFyeVwiXG4gICAgICAgIGRpc2FibGVkPXtzZWxlY3RlZFJlc3VsdHNBcnJheS5sZW5ndGggPT09IDB9XG4gICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICAgIG1ldGFjYXJkSW50ZXJhY3Rpb25NZW51U3RhdGUuaGFuZGxlQ2xpY2soKVxuICAgICAgICB9fVxuICAgICAgICByZWY9e21ldGFjYXJkSW50ZXJhY3Rpb25NZW51U3RhdGUuYW5jaG9yUmVmfVxuICAgICAgICBzdHlsZT17eyBoZWlnaHQ6ICcxMDAlJyB9fVxuICAgICAgICBzaXplPVwic21hbGxcIlxuICAgICAgPlxuICAgICAgICB7c2VsZWN0ZWRSZXN1bHRzQXJyYXkubGVuZ3RofSBzZWxlY3RlZFxuICAgICAgICA8TW9yZUljb24gY2xhc3NOYW1lPVwiTXVpLXRleHQtdGV4dC1wcmltYXJ5XCIgLz5cbiAgICAgIDwvQnV0dG9uPlxuICAgICAgPFBvcG92ZXIgey4uLm1ldGFjYXJkSW50ZXJhY3Rpb25NZW51U3RhdGUuTXVpUG9wb3ZlclByb3BzfT5cbiAgICAgICAgPFBhcGVyPlxuICAgICAgICAgIDxMYXp5TWV0YWNhcmRJbnRlcmFjdGlvbnNcbiAgICAgICAgICAgIGxhenlSZXN1bHRzPXtzZWxlY3RlZFJlc3VsdHNBcnJheX1cbiAgICAgICAgICAgIG9uQ2xvc2U9e21ldGFjYXJkSW50ZXJhY3Rpb25NZW51U3RhdGUuaGFuZGxlQ2xvc2V9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9QYXBlcj5cbiAgICAgIDwvUG9wb3Zlcj5cbiAgICA8Lz5cbiAgKVxufVxuY29uc3QgZHluYW1pY0FjdGlvbkNsYXNzZXMgPSAnaC1mdWxsJ1xuY29uc3QgRHluYW1pY0FjdGlvbnMgPSAoeyBsYXp5UmVzdWx0IH06IHsgbGF6eVJlc3VsdDogTGF6eVF1ZXJ5UmVzdWx0IH0pID0+IHtcbiAgY29uc3QgeyBzZXRQcm9wcyB9ID0gdXNlRGlhbG9nKClcbiAgY29uc3QgbWV0YWNhcmRJbnRlcmFjdGlvbk1lbnVTdGF0ZSA9IHVzZU1lbnVTdGF0ZSgpXG4gIGNvbnN0IERvd25sb2FkQ29tcG9uZW50ID0gdXNlRG93bmxvYWRDb21wb25lbnQoKVxuICByZXR1cm4gKFxuICAgIDxHcmlkIGNvbnRhaW5lciBkaXJlY3Rpb249XCJjb2x1bW5cIiB3cmFwPVwibm93cmFwXCIgYWxpZ25JdGVtcz1cImNlbnRlclwiPlxuICAgICAgPEdyaWQgaXRlbSBjbGFzc05hbWU9XCJoLWZ1bGxcIj5cbiAgICAgICAgPEJ1dHRvblxuICAgICAgICAgIGNvbXBvbmVudD1cImRpdlwiXG4gICAgICAgICAgZGF0YS1pZD1cInJlc3VsdC1pdGVtLW1vcmUtdmVydC1idXR0b25cIlxuICAgICAgICAgIG9uQ2xpY2s9eyhlOiBSZWFjdC5Nb3VzZUV2ZW50PEhUTUxEaXZFbGVtZW50LCBNb3VzZUV2ZW50PikgPT4ge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICAgICAgbWV0YWNhcmRJbnRlcmFjdGlvbk1lbnVTdGF0ZS5oYW5kbGVDbGljaygpXG4gICAgICAgICAgfX1cbiAgICAgICAgICBzdHlsZT17eyBoZWlnaHQ6ICcxMDAlJyB9fVxuICAgICAgICAgIHNpemU9XCJzbWFsbFwiXG4gICAgICAgICAgcmVmPXttZXRhY2FyZEludGVyYWN0aW9uTWVudVN0YXRlLmFuY2hvclJlZn1cbiAgICAgICAgPlxuICAgICAgICAgIDxNb3JlSWNvbiAvPlxuICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgPFBvcG92ZXJcbiAgICAgICAgICB7Li4ubWV0YWNhcmRJbnRlcmFjdGlvbk1lbnVTdGF0ZS5NdWlQb3BvdmVyUHJvcHN9XG4gICAgICAgICAga2VlcE1vdW50ZWQ9e3RydWV9XG4gICAgICAgID5cbiAgICAgICAgICA8UGFwZXI+XG4gICAgICAgICAgICA8TGF6eU1ldGFjYXJkSW50ZXJhY3Rpb25zXG4gICAgICAgICAgICAgIGxhenlSZXN1bHRzPXtbbGF6eVJlc3VsdF19XG4gICAgICAgICAgICAgIG9uQ2xvc2U9e21ldGFjYXJkSW50ZXJhY3Rpb25NZW51U3RhdGUuaGFuZGxlQ2xvc2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvUGFwZXI+XG4gICAgICAgIDwvUG9wb3Zlcj5cbiAgICAgIDwvR3JpZD5cbiAgICAgIDxHcmlkIGl0ZW0gY2xhc3NOYW1lPXtkeW5hbWljQWN0aW9uQ2xhc3Nlc30+XG4gICAgICAgIHtsYXp5UmVzdWx0Lmhhc0Vycm9ycygpID8gKFxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGRhdGEtaWQ9XCJ2YWxpZGF0aW9uLWVycm9ycy1pY29uXCJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtZnVsbFwiXG4gICAgICAgICAgICB0aXRsZT1cIkhhcyB2YWxpZGF0aW9uIGVycm9ycy5cIlxuICAgICAgICAgICAgZGF0YS1oZWxwPVwiSW5kaWNhdGVzIHRoZSBnaXZlbiByZXN1bHQgaGFzIGEgdmFsaWRhdGlvbiBlcnJvci5cbiAgICAgICAgICAgICAgICAgICAgIFNlZSB0aGUgJ1F1YWxpdHknIHRhYiBvZiB0aGUgcmVzdWx0IGZvciBtb3JlIGRldGFpbHMuXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8V2FybmluZ0ljb24gLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKSA6IChcbiAgICAgICAgICAnJ1xuICAgICAgICApfVxuICAgICAgPC9HcmlkPlxuICAgICAgPEdyaWQgaXRlbSBjbGFzc05hbWU9e2R5bmFtaWNBY3Rpb25DbGFzc2VzfT5cbiAgICAgICAgeyFsYXp5UmVzdWx0Lmhhc0Vycm9ycygpICYmIGxhenlSZXN1bHQuaGFzV2FybmluZ3MoKSA/IChcbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBkYXRhLWlkPVwidmFsaWRhdGlvbi13YXJuaW5ncy1pY29uXCJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtZnVsbFwiXG4gICAgICAgICAgICB0aXRsZT1cIkhhcyB2YWxpZGF0aW9uIHdhcm5pbmdzLlwiXG4gICAgICAgICAgICBkYXRhLWhlbHA9XCJJbmRpY2F0ZXMgdGhlIGdpdmVuIHJlc3VsdCBoYXMgYSB2YWxpZGF0aW9uIHdhcm5pbmcuXG4gICAgICAgICAgICAgICAgICAgICBTZWUgdGhlICdRdWFsaXR5JyB0YWIgb2YgdGhlIHJlc3VsdCBmb3IgbW9yZSBkZXRhaWxzLlwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFdhcm5pbmdJY29uIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgJydcbiAgICAgICAgKX1cbiAgICAgIDwvR3JpZD5cbiAgICAgIDxHcmlkIGl0ZW0gY2xhc3NOYW1lPXtkeW5hbWljQWN0aW9uQ2xhc3Nlc30+XG4gICAgICAgIHtsYXp5UmVzdWx0LnBsYWluLm1ldGFjYXJkLnByb3BlcnRpZXNbJ2V4dC5saW5rJ10gPyAoXG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgY29tcG9uZW50PVwiZGl2XCJcbiAgICAgICAgICAgIHRpdGxlPXtsYXp5UmVzdWx0LnBsYWluLm1ldGFjYXJkLnByb3BlcnRpZXNbJ2V4dC5saW5rJ119XG4gICAgICAgICAgICBvbkNsaWNrPXsoZTogUmVhY3QuTW91c2VFdmVudDxIVE1MRGl2RWxlbWVudCwgTW91c2VFdmVudD4pID0+IHtcbiAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICAgICAgICB3aW5kb3cub3BlbihsYXp5UmVzdWx0LnBsYWluLm1ldGFjYXJkLnByb3BlcnRpZXNbJ2V4dC5saW5rJ10pXG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgc3R5bGU9e3sgaGVpZ2h0OiAnMTAwJScgfX1cbiAgICAgICAgICAgIHNpemU9XCJzbWFsbFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPExpbmtJY29uIC8+XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICkgOiBudWxsfVxuICAgICAgPC9HcmlkPlxuICAgICAgPEdyaWQgaXRlbSBjbGFzc05hbWU9e2R5bmFtaWNBY3Rpb25DbGFzc2VzfT5cbiAgICAgICAge2xhenlSZXN1bHQuZ2V0RG93bmxvYWRVcmwoKSA/IChcbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICBjb21wb25lbnQ9XCJkaXZcIlxuICAgICAgICAgICAgZGF0YS1pZD1cImRvd25sb2FkLWJ1dHRvblwiXG4gICAgICAgICAgICBvbkNsaWNrPXsoZTogUmVhY3QuTW91c2VFdmVudDxIVE1MRGl2RWxlbWVudCwgTW91c2VFdmVudD4pID0+IHtcbiAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICAgICAgICBzZXRQcm9wcyh7XG4gICAgICAgICAgICAgICAgb3BlbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogPERvd25sb2FkQ29tcG9uZW50IGxhenlSZXN1bHRzPXtbbGF6eVJlc3VsdF19IC8+LFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIHN0eWxlPXt7IGhlaWdodDogJzEwMCUnIH19XG4gICAgICAgICAgICBzaXplPVwic21hbGxcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxHZXRBcHBJY29uIC8+XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICkgOiBudWxsfVxuICAgICAgPC9HcmlkPlxuICAgICAgPEV4dGVuc2lvbnMucmVzdWx0SXRlbVRpdGxlQWRkT24gbGF6eVJlc3VsdD17bGF6eVJlc3VsdH0gLz5cbiAgICAgIDxHcmlkIGl0ZW0gY2xhc3NOYW1lPXtkeW5hbWljQWN0aW9uQ2xhc3Nlc30+XG4gICAgICAgIHtsYXp5UmVzdWx0LmlzU2VhcmNoKCkgPyAoXG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgY29tcG9uZW50PXtMaW5rfVxuICAgICAgICAgICAgZGF0YS1pZD1cImVkaXQtYnV0dG9uXCJcbiAgICAgICAgICAgIHRvPXtgL3NlYXJjaC8ke2xhenlSZXN1bHQucGxhaW4uaWR9YH1cbiAgICAgICAgICAgIHN0eWxlPXt7IGhlaWdodDogJzEwMCUnIH19XG4gICAgICAgICAgICBzaXplPVwic21hbGxcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxFZGl0SWNvbiAvPlxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICApIDogbnVsbH1cbiAgICAgIDwvR3JpZD5cbiAgICAgIHsvKiogYWRkIGlubGluZSBlZGl0aW5nIGxhdGVyICovfVxuICAgICAgey8qIDxHcmlkIGl0ZW0gY2xhc3NOYW1lPVwiaC1mdWxsXCI+XG4gICAgICAgICAgIHtsYXp5UmVzdWx0LmlzU2VhcmNoKCkgPyAoXG4gICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgZGF0YS1pZD1cImVkaXQtYnV0dG9uXCJcbiAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgIHNldEVkaXQobGF6eVJlc3VsdClcbiAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICBzdHlsZT17eyBoZWlnaHQ6ICcxMDAlJyB9fVxuICAgICAgICAgICAgICAgc2l6ZT1cInNtYWxsXCJcbiAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICA8RWRpdEljb24gLz5cbiAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICA8L0dyaWQ+ICovfVxuICAgIDwvR3JpZD5cbiAgKVxufVxuZXhwb3J0IGNvbnN0IFNlbGVjdGlvbkJhY2tncm91bmQgPSAoe1xuICBsYXp5UmVzdWx0LFxufToge1xuICBsYXp5UmVzdWx0OiBMYXp5UXVlcnlSZXN1bHRcbiAgc3R5bGU/OiBSZWFjdC5DU1NQcm9wZXJ0aWVzXG59KSA9PiB7XG4gIGNvbnN0IGlzU2VsZWN0ZWQgPSB1c2VTZWxlY3Rpb25PZkxhenlSZXN1bHQoeyBsYXp5UmVzdWx0IH0pXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgbGVmdC0wIHRvcC0wIHotMCB3LWZ1bGwgaC1mdWxsIE11aS1iZy1zZWNvbmRhcnlcIlxuICAgICAgc3R5bGU9e3tcbiAgICAgICAgb3BhY2l0eTogaXNTZWxlY3RlZCA/IDAuMDUgOiAwLFxuICAgICAgfX1cbiAgICAvPlxuICApXG59XG5jb25zdCBJY29uQnV0dG9uID0gKHtcbiAgbGF6eVJlc3VsdCxcbiAgc2VsZWN0aW9uSW50ZXJmYWNlLFxuICBpdGVtQ29udGVudFJlZixcbn06IHtcbiAgbGF6eVJlc3VsdDogTGF6eVF1ZXJ5UmVzdWx0XG4gIHNlbGVjdGlvbkludGVyZmFjZTogYW55XG4gIGl0ZW1Db250ZW50UmVmOiBSZWFjdC5SZWZPYmplY3Q8SFRNTEVsZW1lbnQgfCBudWxsPlxufSkgPT4ge1xuICBjb25zdCBNZXRhY2FyZERlZmluaXRpb25zID0gdXNlTWV0YWNhcmREZWZpbml0aW9ucygpXG4gIGNvbnN0IGlzU2VsZWN0ZWQgPSB1c2VTZWxlY3Rpb25PZkxhenlSZXN1bHQoeyBsYXp5UmVzdWx0IH0pXG4gIGNvbnN0IFJlc3VsdEl0ZW1BY3Rpb24gPSBFeHRlbnNpb25Qb2ludHMucmVzdWx0SXRlbUFjdGlvbih7XG4gICAgbGF6eVJlc3VsdCxcbiAgICBzZWxlY3Rpb25JbnRlcmZhY2UsXG4gICAgaXRlbUNvbnRlbnRSZWYsXG4gICAgY2xhc3NOYW1lOlxuICAgICAgJ3NjYWxlLTAgYWJzb2x1dGUgei0xMCBsZWZ0LTAgLXRyYW5zbGF0ZS14LWZ1bGwgbWwtWzNweF0gZ3JvdXAtaG92ZXI6c2NhbGUtMTAwIHRyYW5zaXRpb24gcHQtMScsXG4gIH0pXG4gIGNvbnN0IGV4dHJhQ2xhc3NlcyA9IFJlc3VsdEl0ZW1BY3Rpb25cbiAgICA/ICdncm91cC1ob3ZlcjpzY2FsZS01MCBncm91cC1ob3ZlcjotdHJhbnNsYXRlLXgtWzg1JV0nXG4gICAgOiAnJ1xuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICB7UmVzdWx0SXRlbUFjdGlvbiAmJiAoXG4gICAgICAgIDxSZXN1bHRJdGVtQWN0aW9uXG4gICAgICAgICAgbGF6eVJlc3VsdD17bGF6eVJlc3VsdH1cbiAgICAgICAgICBzZWxlY3Rpb25JbnRlcmZhY2U9e3NlbGVjdGlvbkludGVyZmFjZX1cbiAgICAgICAgICBpdGVtQ29udGVudFJlZj17aXRlbUNvbnRlbnRSZWZ9XG4gICAgICAgIC8+XG4gICAgICApfVxuICAgICAgPEJ1dHRvblxuICAgICAgICBjb21wb25lbnQ9XCJkaXZcIlxuICAgICAgICBkYXRhLWlkPVwic2VsZWN0LWNoZWNrYm94XCJcbiAgICAgICAgb25DbGljaz17KGV2ZW50OiBSZWFjdC5Nb3VzZUV2ZW50PEhUTUxEaXZFbGVtZW50LCBNb3VzZUV2ZW50PikgPT4ge1xuICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpIC8vIHRoaXMgYnV0dG9uIHRha2VzIHByZWNlZGVuY2Ugb3ZlciB0aGUgZW5jbG9zaW5nIGJ1dHRvbiwgYW5kIGlzIGFsd2F5cyBhZGRpdGl2ZSAvIHN1YnRyYWN0aXZlIChubyBkZXNlbGVjdCBvZiBvdGhlciByZXN1bHRzKVxuICAgICAgICAgIGlmIChldmVudC5zaGlmdEtleSkge1xuICAgICAgICAgICAgbGF6eVJlc3VsdC5zaGlmdFNlbGVjdCgpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxhenlSZXN1bHQuY29udHJvbFNlbGVjdCgpXG4gICAgICAgICAgfVxuICAgICAgICB9fVxuICAgICAgICBmb2N1c1Zpc2libGVDbGFzc05hbWU9XCJmb2N1cy12aXNpYmxlXCJcbiAgICAgICAgY2xhc3NOYW1lPVwicmVsYXRpdmUgcC0yIG1pbi13LTAgb3V0bGluZS1ub25lIGgtZnVsbCBncm91cC9jaGVja2JveCBzaHJpbmstMFwiXG4gICAgICA+XG4gICAgICAgIHsoKCkgPT4ge1xuICAgICAgICAgIGlmIChpc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7ZXh0cmFDbGFzc2VzfSBhYnNvbHV0ZSB3LWZ1bGwgaC1mdWxsIGxlZnQtMCB0b3AtMCBvcGFjaXR5LTAgdHJhbnNmb3JtIHRyYW5zaXRpb24gZHVyYXRpb24tMjAwIGVhc2UtaW4tb3V0IC10cmFuc2xhdGUteC1mdWxsIGdyb3VwLWhvdmVyL2NoZWNrYm94OnNjYWxlLTEwMGB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPENoZWNrQm94SWNvbiBjbGFzc05hbWU9XCJncm91cC1ob3Zlci9jaGVja2JveDpibG9jayBncm91cC1mb2N1cy12aXNpYmxlL2NoZWNrYm94OmJsb2NrIGhpZGRlblwiIC8+XG4gICAgICAgICAgICAgICAgICA8Q2hlY2tJY29uIGNsYXNzTmFtZT1cImdyb3VwLWhvdmVyL2NoZWNrYm94OmhpZGRlbiBncm91cC1mb2N1cy12aXNpYmxlL2NoZWNrYm94OmhpZGRlbiBibG9ja1wiIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtleHRyYUNsYXNzZXN9IHRyYW5zZm9ybSB0cmFuc2l0aW9uIGR1cmF0aW9uLTIwMCBlYXNlLWluLW91dCAtdHJhbnNsYXRlLXgtZnVsbCBncm91cC1mb2N1cy12aXNpYmxlL2NoZWNrYm94OiF0cmFuc2xhdGUteC0wIGdyb3VwLWhvdmVyL2NoZWNrYm94OiF0cmFuc2xhdGUteC0wIGdyb3VwLWhvdmVyL2NoZWNrYm94OnNjYWxlLTEwMGB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPENoZWNrQm94SWNvbiBjbGFzc05hbWU9XCJncm91cC1ob3Zlci9jaGVja2JveDpibG9jayBncm91cC1mb2N1cy12aXNpYmxlL2NoZWNrYm94OmJsb2NrIGhpZGRlblwiIC8+XG4gICAgICAgICAgICAgICAgICA8Q2hlY2tJY29uIGNsYXNzTmFtZT1cImdyb3VwLWhvdmVyL2NoZWNrYm94OmhpZGRlbiBncm91cC1mb2N1cy12aXNpYmxlL2NoZWNrYm94OmhpZGRlbiBibG9ja1wiIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0gZWxzZSBpZiAoIWlzU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidHJhbnNmb3JtIFwiPlxuICAgICAgICAgICAgICAgIDxDaGVja0JveE91dGxpbmVCbGFua0ljb25cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGdyb3VwLWhvdmVyL2NoZWNrYm94OnZpc2libGUgZ3JvdXAtZm9jdXMtdmlzaWJsZS9jaGVja2JveDp2aXNpYmxlIGludmlzaWJsZWB9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH0pKCl9XG4gICAgICAgIDxzcGFuXG4gICAgICAgICAgY2xhc3NOYW1lPXtgJHtnZXRJY29uQ2xhc3NOYW1lKHtcbiAgICAgICAgICAgIGxhenlSZXN1bHQsXG4gICAgICAgICAgfSl9IGZvbnQtYXdlc29tZS1zcGFuIGdyb3VwLWZvY3VzLXZpc2libGUvY2hlY2tib3g6aW52aXNpYmxlIGdyb3VwLWhvdmVyL2NoZWNrYm94OmludmlzaWJsZSBhYnNvbHV0ZSB6LTAgbGVmdC0xLzIgdG9wLTEvMiB0cmFuc2Zvcm0gLXRyYW5zbGF0ZS14LTEvMiAtdHJhbnNsYXRlLXktMS8yYH1cbiAgICAgICAgICBkYXRhLWhlbHA9e01ldGFjYXJkRGVmaW5pdGlvbnMuZ2V0QWxpYXMoJ3RpdGxlJyl9XG4gICAgICAgICAgdGl0bGU9e2Ake01ldGFjYXJkRGVmaW5pdGlvbnMuZ2V0QWxpYXMoJ3RpdGxlJyl9OiAke1xuICAgICAgICAgICAgbGF6eVJlc3VsdC5wbGFpbi5tZXRhY2FyZC5wcm9wZXJ0aWVzLnRpdGxlXG4gICAgICAgICAgfWB9XG4gICAgICAgIC8+XG4gICAgICA8L0J1dHRvbj5cbiAgICA8Lz5cbiAgKVxufVxuLy8gZmFjdG9yZWQgb3V0IGZvciBlYXN5IGRlYnVnZ2luZyAoY2FuIGFkZCBiZy1ncmF5LTQwMCB0byBzZWUgdHJhaWwpXG5jb25zdCBkaWFnb25hbEhvdmVyQ2xhc3NlcyA9XG4gICdhYnNvbHV0ZSB6LTUwIHJpZ2h0LTAgYm90dG9tLTEwMCBoLTQgdHJhbnNmb3JtIHNjYWxlLTAgZ3JvdXAtaG92ZXI6c2NhbGUtMTAwIHRyYW5zaXRpb24tYWxsIGFic29sdXRlIHotNTAgcmlnaHQtMCBib3R0b20tMTAwJ1xuLy8gZmFrZSBldmVudCB0byBwYXNzIHJpcHBsZS5zdG9wXG5jb25zdCBmYWtlRXZlbnQgPSB7XG4gIHR5cGU6ICcnLFxufSBhcyBhbnlcbmV4cG9ydCBjb25zdCBSZXN1bHRJdGVtID0gKHtcbiAgbGF6eVJlc3VsdCxcbiAgbWVhc3VyZTogb3JpZ2luYWxNZWFzdXJlLFxuICBzZWxlY3Rpb25JbnRlcmZhY2UsXG59OiBSZXN1bHRJdGVtRnVsbFByb3BzKSA9PiB7XG4gIGNvbnN0IHsgZ2V0VmFsdWUsIG9uU3RhdGVDaGFuZ2VkIH0gPSBSZWFjdC51c2VDb250ZXh0KExheW91dENvbnRleHQpXG4gIGNvbnN0IE1ldGFjYXJkRGVmaW5pdGlvbnMgPSB1c2VNZXRhY2FyZERlZmluaXRpb25zKClcbiAgY29uc3QgcmlwcGxlUmVmID0gUmVhY3QudXNlUmVmPHtcbiAgICBwdWxzYXRlOiAoKSA9PiB2b2lkXG4gICAgc3RvcDogKGU6IGFueSkgPT4gdm9pZFxuICAgIHN0YXJ0OiAoZTogYW55KSA9PiB2b2lkXG4gIH0+KG51bGwpXG4gIGNvbnN0IHsgbGlzdGVuVG8gfSA9IHVzZUJhY2tib25lKClcbiAgY29uc3QgY29udmVydFRvUHJlY2lzaW9uID0gKHZhbHVlOiBhbnkpID0+IHtcbiAgICByZXR1cm4gdmFsdWUgJiYgZGVjaW1hbFByZWNpc2lvblxuICAgICAgPyBOdW1iZXIodmFsdWUpLnRvRml4ZWQoZGVjaW1hbFByZWNpc2lvbilcbiAgICAgIDogdmFsdWVcbiAgfVxuICBjb25zdCBjb252ZXJ0VG9Gb3JtYXQgPSB1c2VDb29yZGluYXRlRm9ybWF0KClcbiAgY29uc3QgW3JlbmRlckV4dHJhcywgc2V0UmVuZGVyRXh0cmFzXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKSAvLyBkeW5hbWljIGFjdGlvbnMgYXJlIGEgc2lnbmlmaWNhbnQgcGFydCBvZiByZW5kZXJpbmcgdGltZSwgc28gZGVsYXkgdW50aWwgbmVjZXNzYXJ5XG4gIGNvbnN0IFtkZWNpbWFsUHJlY2lzaW9uLCBzZXREZWNpbWFsUHJlY2lzaW9uXSA9IFJlYWN0LnVzZVN0YXRlKFxuICAgIFR5cGVkVXNlckluc3RhbmNlLmdldERlY2ltYWxQcmVjaXNpb24oKVxuICApXG4gIGNvbnN0IFtzaG93bkF0dHJpYnV0ZXMsIHNldFNob3duQXR0cmlidXRlc10gPSBSZWFjdC51c2VTdGF0ZShcbiAgICBnZXRWYWx1ZShSRVNVTFRTX0FUVFJJQlVURVNfTElTVCwgZ2V0RGVmYXVsdFJlc3VsdHNTaG93bkxpc3QoKSkgYXMgc3RyaW5nW11cbiAgKVxuICB1c2VSZXJlbmRlck9uQmFja2JvbmVTeW5jKHsgbGF6eVJlc3VsdCB9KVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGlzdGVuVG8oXG4gICAgICB1c2VyLmdldCgndXNlcicpLmdldCgncHJlZmVyZW5jZXMnKSxcbiAgICAgICdjaGFuZ2U6ZGVjaW1hbFByZWNpc2lvbicsXG4gICAgICAoKSA9PiB7XG4gICAgICAgIHNldERlY2ltYWxQcmVjaXNpb24oVHlwZWRVc2VySW5zdGFuY2UuZ2V0RGVjaW1hbFByZWNpc2lvbigpKVxuICAgICAgfVxuICAgIClcbiAgICBvblN0YXRlQ2hhbmdlZCgoKSA9PiB7XG4gICAgICBjb25zdCBzaG93bkxpc3QgPSBnZXRWYWx1ZShcbiAgICAgICAgUkVTVUxUU19BVFRSSUJVVEVTX0xJU1QsXG4gICAgICAgIGdldERlZmF1bHRSZXN1bHRzU2hvd25MaXN0KClcbiAgICAgIClcbiAgICAgIHNldFNob3duQXR0cmlidXRlcyhzaG93bkxpc3QpXG4gICAgfSlcbiAgfSwgW10pXG5cbiAgLyoqXG4gICAqIFVuZm9jdXNlZCAoaGlkZGVuKSB0YWIgc2V0cyB0aGUgY29udGFpbmVyIGhlaWdodCB0byAwXG4gICAqIFJ1biB0aGUgbWVhc3VyZSBmdW5jdGlvbiB3aGVuIHRoZSBoZWlnaHQgaXMgMCBjb3VsZCBjYXVzZSBpdGVtcyBpbnNpZGUgdGhlIHRhYiB0byBiZSB1bnJlYWRhYmxlXG4gICAqL1xuICBjb25zdCBtZWFzdXJlID0gKCkgPT4ge1xuICAgIGlmIChcbiAgICAgIGJ1dHRvblJlZi5jdXJyZW50Py5jbGllbnRIZWlnaHQgJiZcbiAgICAgIGJ1dHRvblJlZi5jdXJyZW50Py5jbGllbnRIZWlnaHQgPiAwXG4gICAgKSB7XG4gICAgICBvcmlnaW5hbE1lYXN1cmUoKVxuICAgIH1cbiAgfVxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIG1lYXN1cmUoKVxuICB9LCBbc2hvd25BdHRyaWJ1dGVzLCBjb252ZXJ0VG9Gb3JtYXRdKVxuICBsaXN0ZW5Ubyh3cmVxci52ZW50LCAnYWN0aXZlQ29udGVudEl0ZW1DaGFuZ2VkJywgKCkgPT4ge1xuICAgIG1lYXN1cmUoKVxuICB9KVxuICBjb25zdCB0aHVtYm5haWwgPSBsYXp5UmVzdWx0LnBsYWluLm1ldGFjYXJkLnByb3BlcnRpZXMudGh1bWJuYWlsXG4gIGNvbnN0IGltZ3NyYyA9IENvbW1vbi5nZXRJbWFnZVNyYyh0aHVtYm5haWwpXG4gIGNvbnN0IGJ1dHRvblJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4obnVsbClcbiAgY29uc3QgaXRlbUNvbnRlbnRSZWYgPSBSZWFjdC51c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpXG5cbiAgY29uc3QgUmVzdWx0SXRlbUFkZE9uSW5zdGFuY2UgPSBFeHRlbnNpb25zLnJlc3VsdEl0ZW1Sb3dBZGRPbih7XG4gICAgbGF6eVJlc3VsdCxcbiAgICBpc1RhYmxlVmlldzogZmFsc2UsXG4gIH0pXG4gIGNvbnN0IFJlc3VsdFRpdGxlSWNvbkFkZE9uSW5zdGFuY2UgPSBFeHRlbnNpb25zLnJlc3VsdFRpdGxlSWNvbkFkZE9uKHtcbiAgICBsYXp5UmVzdWx0LFxuICB9KVxuXG4gIGNvbnN0IHNob3VsZFNob3dSZWxldmFuY2UgPSBzaG93UmVsZXZhbmNlU2NvcmUoeyBsYXp5UmVzdWx0IH0pXG4gIGNvbnN0IHNob3VsZFNob3dTb3VyY2UgPSBzaG93U291cmNlKClcbiAgY29uc3QgZXh0cmFIaWdobGlnaHRzID0gT2JqZWN0LmtleXMobGF6eVJlc3VsdC5oaWdobGlnaHRzKS5maWx0ZXIoXG4gICAgKGF0dHIpID0+ICFzaG93bkF0dHJpYnV0ZXMuZmluZCgoc2hvd25BdHRyaWJ1dGUpID0+IHNob3duQXR0cmlidXRlID09PSBhdHRyKVxuICApXG4gIGNvbnN0IGdldERpc3BsYXlWYWx1ZSA9ICh7XG4gICAgZGV0YWlsLFxuICAgIGxhenlSZXN1bHQsXG4gIH06IHtcbiAgICBkZXRhaWw6IHN0cmluZ1xuICAgIGxhenlSZXN1bHQ6IExhenlRdWVyeVJlc3VsdFxuICB9KSA9PiB7XG4gICAgbGV0IHZhbHVlID0gbGF6eVJlc3VsdC5wbGFpbi5tZXRhY2FyZC5wcm9wZXJ0aWVzW2RldGFpbF1cbiAgICBpZiAodmFsdWUgJiYgTWV0YWNhcmREZWZpbml0aW9ucy5nZXRBdHRyaWJ1dGVNYXAoKVtkZXRhaWxdKSB7XG4gICAgICBzd2l0Y2ggKE1ldGFjYXJkRGVmaW5pdGlvbnMuZ2V0QXR0cmlidXRlTWFwKClbZGV0YWlsXS50eXBlKSB7XG4gICAgICAgIGNhc2UgJ0RBVEUnOlxuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5tYXAoKHZhbDogYW55KSA9PlxuICAgICAgICAgICAgICBUeXBlZFVzZXJJbnN0YW5jZS5nZXRNb21lbnREYXRlKHZhbClcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsdWUgPSBUeXBlZFVzZXJJbnN0YW5jZS5nZXRNb21lbnREYXRlKHZhbHVlKVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdHRU9NRVRSWSc6XG4gICAgICAgICAgaWYgKHZhbHVlLmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5tYXAoKHZhbDogYW55KSA9PiBjb252ZXJ0VG9Gb3JtYXQodmFsKSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsdWUgPSBjb252ZXJ0VG9Gb3JtYXQodmFsdWUpXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ0xPTkcnOlxuICAgICAgICBjYXNlICdET1VCTEUnOlxuICAgICAgICBjYXNlICdGTE9BVCc6XG4gICAgICAgICAgaWYgKHZhbHVlLmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5tYXAoKHZhbDogYW55KSA9PiBjb252ZXJ0VG9QcmVjaXNpb24odmFsKSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsdWUgPSBjb252ZXJ0VG9QcmVjaXNpb24odmFsdWUpXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgdmFsdWUgPSB2YWx1ZS5qb2luKCcsICcpXG4gICAgfVxuICAgIHJldHVybiB2YWx1ZVxuICB9XG4gIGNvbnN0IGRldGFpbHNNYXAgPSBzaG93bkF0dHJpYnV0ZXNcbiAgICAuc2xpY2UoMSkgLy8gcmVtb3ZlIHRvcCBvbmUgc2luY2UgdGhhdCdzIHNwZWNpYWxcbiAgICAubWFwKChkZXRhaWwpID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGF0dHJpYnV0ZTogZGV0YWlsLFxuICAgICAgICB2YWx1ZTogZ2V0RGlzcGxheVZhbHVlKHsgZGV0YWlsLCBsYXp5UmVzdWx0IH0pLFxuICAgICAgfVxuICAgIH0pXG4gICAgLmZpbHRlcigoZGV0YWlsKSA9PiB7XG4gICAgICAvLyB0aGlzIGlzIHNwZWNpYWwgYW5kIGlzIGhhbmRsZWQgZGlmZmVyZW50bHksIHNlZSBzaG93IHNvdXJjZVxuICAgICAgaWYgKGRldGFpbC5hdHRyaWJ1dGUgPT09ICdzb3VyY2UtaWQnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgcmV0dXJuIGRldGFpbC52YWx1ZVxuICAgIH0pXG4gIHJldHVybiAoXG4gICAgPGJ1dHRvblxuICAgICAgZGF0YS1pZD1cInJlc3VsdC1pdGVtLWNvbnRhaW5lci1idXR0b25cIlxuICAgICAgb25Nb3VzZURvd249eyhldmVudDogYW55KSA9PiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaGlmdCBrZXkgY2FuIGNhdXNlIHNlbGVjdGlvbnMgc2luY2Ugd2Ugc2V0IHRoZSBjbGFzcyB0byBhbGxvdyB0ZXh0IHNlbGVjdGlvbixcbiAgICAgICAgICogc28gdGhlIG9ubHkgc2NlbmFyaW8gd2Ugd2FudCB0byBwcmV2ZW50IHRoYXQgaW4gaXMgd2hlbiBzaGlmdCBjbGlja2luZ1xuICAgICAgICAgKi9cbiAgICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgICAgY2xlYXJTZWxlY3Rpb24oKVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdG9wIHRoZSByaXBwbGUgdGhhdCBzdGFydHMgb24gZm9jdXMsIHRoYXQncyBvbmx5IGZvciBuYXZpZ2F0aW5nIGJ5IGtleWJvYXJkXG4gICAgICAgICAqL1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBpZiAocmlwcGxlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHJpcHBsZVJlZi5jdXJyZW50LnN0b3AoZmFrZUV2ZW50KVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgMClcbiAgICAgIH19XG4gICAgICBvbkNsaWNrPXsoZXZlbnQ6IGFueSkgPT4ge1xuICAgICAgICBpZiAoaGFzU2VsZWN0aW9uKCkpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgICAgICBsYXp5UmVzdWx0LnNoaWZ0U2VsZWN0KClcbiAgICAgICAgfSBlbHNlIGlmIChldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkpIHtcbiAgICAgICAgICBsYXp5UmVzdWx0LmNvbnRyb2xTZWxlY3QoKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxhenlSZXN1bHQuc2VsZWN0KClcbiAgICAgICAgfVxuICAgICAgICBpZiAocmlwcGxlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICByaXBwbGVSZWYuY3VycmVudC5zdGFydChldmVudClcbiAgICAgICAgfVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBpZiAocmlwcGxlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHJpcHBsZVJlZi5jdXJyZW50LnN0b3AoZmFrZUV2ZW50KVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgMjAwKVxuICAgICAgfX1cbiAgICAgIG9uTW91c2VMZWF2ZT17KCkgPT4ge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBpcyB0byBwcmV2ZW50IHdlaXJkbmVzcyB3aXRoIHRoZSBkeW5hbWljIGFjdGlvbnMsIHdoZXJlIGNsaWNraW5nIGEgbWVudSBvcHRpb24gdGhlcmUgYWRkcyBmb2N1cyxcbiAgICAgICAgICogdGh1cyBtYWtpbmcgdGhlIGR5bmFtaWMgYWN0aW9ucyBzdGF5IHZpc2libGUgd2hlbiB0aGUgdXNlciBzdGFydHMgdG8gbW91c2UgYXdheS5cbiAgICAgICAgICovXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJlxuICAgICAgICAgICAgYnV0dG9uUmVmLmN1cnJlbnQgJiZcbiAgICAgICAgICAgIGJ1dHRvblJlZi5jdXJyZW50LmNvbnRhaW5zKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICA7KGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgYXMgYW55KS5ibHVyKClcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKVxuICAgICAgICB9XG4gICAgICB9fVxuICAgICAgb25Nb3VzZUVudGVyPXsoKSA9PiB7XG4gICAgICAgIHNldFJlbmRlckV4dHJhcyh0cnVlKVxuICAgICAgfX1cbiAgICAgIG9uRm9jdXM9eyhlOiBhbnkpID0+IHtcbiAgICAgICAgc2V0UmVuZGVyRXh0cmFzKHRydWUpXG4gICAgICAgIGlmIChlLnRhcmdldCA9PT0gZS5jdXJyZW50VGFyZ2V0ICYmIHJpcHBsZVJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgcmlwcGxlUmVmLmN1cnJlbnQucHVsc2F0ZSgpXG4gICAgICAgIH1cbiAgICAgIH19XG4gICAgICBvbkJsdXI9eyhlOiBhbnkpID0+IHtcbiAgICAgICAgaWYgKHJpcHBsZVJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgcmlwcGxlUmVmLmN1cnJlbnQuc3RvcChlKVxuICAgICAgICB9XG4gICAgICB9fVxuICAgICAgcmVmPXtidXR0b25SZWZ9XG4gICAgICBjbGFzc05hbWU9e2BzZWxlY3QtdGV4dCBvdXRsaW5lLW5vbmUgcHgtNiBwci0xMiBwLTIgdGV4dC1sZWZ0IGJyZWFrLXdvcmRzIGdyb3VwIHctZnVsbCBNdWktYmctYnV0dG9uYH1cbiAgICA+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbFwiPlxuICAgICAgICA8VG91Y2hSaXBwbGUgcmVmPXtyaXBwbGVSZWZ9IC8+XG4gICAgICAgIDxTZWxlY3Rpb25CYWNrZ3JvdW5kIGxhenlSZXN1bHQ9e2xhenlSZXN1bHR9IC8+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIHJlbGF0aXZlIHotMFwiIHJlZj17aXRlbUNvbnRlbnRSZWZ9PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGZsZXggaXRlbXMtc3RhcnRcIj5cbiAgICAgICAgICAgIDxJY29uQnV0dG9uXG4gICAgICAgICAgICAgIGxhenlSZXN1bHQ9e2xhenlSZXN1bHR9XG4gICAgICAgICAgICAgIHNlbGVjdGlvbkludGVyZmFjZT17c2VsZWN0aW9uSW50ZXJmYWNlfVxuICAgICAgICAgICAgICBpdGVtQ29udGVudFJlZj17aXRlbUNvbnRlbnRSZWZ9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAge1Jlc3VsdFRpdGxlSWNvbkFkZE9uSW5zdGFuY2UgJiYgKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB0LTIgcHItMVwiPntSZXN1bHRUaXRsZUljb25BZGRPbkluc3RhbmNlfTwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgZGF0YS1pZD17YHJlc3VsdC1pdGVtLSR7c2hvd25BdHRyaWJ1dGVzWzBdfS1sYWJlbGB9XG4gICAgICAgICAgICAgIHRpdGxlPXtgJHtNZXRhY2FyZERlZmluaXRpb25zLmdldEFsaWFzKHNob3duQXR0cmlidXRlc1swXSl9YH1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hyaW5rLTEgdy1mdWxsIG92ZXJmbG93LWF1dG8gc2VsZi1jZW50ZXJcIlxuICAgICAgICAgICAgICBzdHlsZT17eyBtYXhIZWlnaHQ6ICcyMDBweCcsIG1pbkhlaWdodDogJzIxcHgnIH19IC8vIGZpcmVmb3ggd2lsbCBzaG93IHNjcm9sbGJhcnMgYWx3YXlzIHdpdGhvdXQgdGhpcyBtaW5IZWlnaHQgOlNcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge3Nob3duQXR0cmlidXRlc1swXSA9PT0gJ3RodW1ibmFpbCcgJiYgdGh1bWJuYWlsID8gKFxuICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgIGRhdGEtaWQ9XCJyZXN1bHQtaXRlbS10aHVtYm5haWxcIlxuICAgICAgICAgICAgICAgICAgc3JjPXtpbWdzcmN9XG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXhXaWR0aDogJzEwMCUnLCBtYXhIZWlnaHQ6ICcyMDBweCcgfX1cbiAgICAgICAgICAgICAgICAgIG9uTG9hZD17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBtZWFzdXJlKClcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBvbkVycm9yPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG1lYXN1cmUoKVxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICApIDogbGF6eVJlc3VsdC5oaWdobGlnaHRzW3Nob3duQXR0cmlidXRlc1swXV0gPyAoXG4gICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7XG4gICAgICAgICAgICAgICAgICAgIF9faHRtbDpcbiAgICAgICAgICAgICAgICAgICAgICBsYXp5UmVzdWx0LmhpZ2hsaWdodHNbc2hvd25BdHRyaWJ1dGVzWzBdXVswXS5oaWdobGlnaHQsXG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgZ2V0RGlzcGxheVZhbHVlKHsgZGV0YWlsOiBzaG93bkF0dHJpYnV0ZXNbMF0sIGxhenlSZXN1bHQgfSlcbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzTmFtZT17YHBsLTMgJHtcbiAgICAgICAgICAgICAgUmVzdWx0SXRlbUFkZE9uSW5zdGFuY2UgIT09IG51bGwgfHxcbiAgICAgICAgICAgICAgZGV0YWlsc01hcC5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgIGV4dHJhSGlnaGxpZ2h0cy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgIHNob3VsZFNob3dSZWxldmFuY2UgfHxcbiAgICAgICAgICAgICAgc2hvdWxkU2hvd1NvdXJjZVxuICAgICAgICAgICAgICAgID8gJ3BiLTInXG4gICAgICAgICAgICAgICAgOiAnJ1xuICAgICAgICAgICAgfWB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGRpdj57UmVzdWx0SXRlbUFkZE9uSW5zdGFuY2V9PC9kaXY+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICB7ZGV0YWlsc01hcC5tYXAoKGRldGFpbCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChkZXRhaWwuYXR0cmlidXRlID09PSAndGh1bWJuYWlsJykge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgICAgICAgIGtleT17ZGV0YWlsLmF0dHJpYnV0ZX1cbiAgICAgICAgICAgICAgICAgICAgICBkYXRhLWlkPVwicmVzdWx0LWl0ZW0tdGh1bWJuYWlsXCJcbiAgICAgICAgICAgICAgICAgICAgICBzcmM9e2ltZ3NyY31cbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luVG9wOiAnMTBweCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhXaWR0aDogJzEwMCUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4SGVpZ2h0OiAnMjAwcHgnLFxuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgb25Mb2FkPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZWFzdXJlKClcbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgIG9uRXJyb3I9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lYXN1cmUoKVxuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICA8UHJvcGVydHlDb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAga2V5PXtkZXRhaWwuYXR0cmlidXRlfVxuICAgICAgICAgICAgICAgICAgICBkYXRhLWhlbHA9e01ldGFjYXJkRGVmaW5pdGlvbnMuZ2V0QWxpYXMoZGV0YWlsLmF0dHJpYnV0ZSl9XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgJHtNZXRhY2FyZERlZmluaXRpb25zLmdldEFsaWFzKFxuICAgICAgICAgICAgICAgICAgICAgIGRldGFpbC5hdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICAgICAgKX06ICR7ZGV0YWlsLnZhbHVlfWB9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIHsvKiBJdCdzIG9rYXkgdG8gdXNlIHRoZSBmaXJzdCBvbmUgaGVyZSBzaW5jZSB3ZSBvbmx5IGV2ZXIgd2FudCB0byBkaXNwbGF5IG9uZSwgbm9ybWFsbHkgeW91J2Qgd2FudCB0byBtYXAgb3ZlciB0aGlzIGxpc3QgKi99XG4gICAgICAgICAgICAgICAgICAgICAge2xhenlSZXN1bHQuaGlnaGxpZ2h0c1tkZXRhaWwuYXR0cmlidXRlXSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX19odG1sOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF6eVJlc3VsdC5oaWdobGlnaHRzW2RldGFpbC5hdHRyaWJ1dGVdWzBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5oaWdobGlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXREaXNwbGF5VmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IGRldGFpbC5hdHRyaWJ1dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxhenlSZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDwvUHJvcGVydHlDb21wb25lbnQ+XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAge2V4dHJhSGlnaGxpZ2h0cy5tYXAoKGV4dHJhSGlnaGxpZ2h0KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVsZXZhbnRIaWdobGlnaHQgPVxuICAgICAgICAgICAgICAgICAgbGF6eVJlc3VsdC5oaWdobGlnaHRzW2V4dHJhSGlnaGxpZ2h0XVswXVxuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICA8UHJvcGVydHlDb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAga2V5PXtyZWxldmFudEhpZ2hsaWdodC5hdHRyaWJ1dGV9XG4gICAgICAgICAgICAgICAgICAgIGRhdGEtaGVscD17TWV0YWNhcmREZWZpbml0aW9ucy5nZXRBbGlhcyhcbiAgICAgICAgICAgICAgICAgICAgICByZWxldmFudEhpZ2hsaWdodC5hdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17TWV0YWNhcmREZWZpbml0aW9ucy5nZXRBbGlhcyhcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbGV2YW50SGlnaGxpZ2h0LmF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgX19odG1sOiByZWxldmFudEhpZ2hsaWdodC5oaWdobGlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICAgIDwvUHJvcGVydHlDb21wb25lbnQ+XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAge3Nob3VsZFNob3dSZWxldmFuY2UgPyAoXG4gICAgICAgICAgICAgICAgPFByb3BlcnR5Q29tcG9uZW50XG4gICAgICAgICAgICAgICAgICBkYXRhLWhlbHA9e2BSZWxldmFuY2U6ICR7bGF6eVJlc3VsdC5wbGFpbi5yZWxldmFuY2V9YH1cbiAgICAgICAgICAgICAgICAgIHRpdGxlPXtgUmVsZXZhbmNlOiAke2xhenlSZXN1bHQucGxhaW4ucmVsZXZhbmNlfWB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPHNwYW4+e2xhenlSZXN1bHQuZ2V0Um91bmRlZFJlbGV2YW5jZSgpfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L1Byb3BlcnR5Q29tcG9uZW50PlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICcnXG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIHtzaG91bGRTaG93U291cmNlID8gKFxuICAgICAgICAgICAgICAgIDxQcm9wZXJ0eUNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgdGl0bGU9e2Ake01ldGFjYXJkRGVmaW5pdGlvbnMuZ2V0QWxpYXMoJ3NvdXJjZS1pZCcpfTogJHtcbiAgICAgICAgICAgICAgICAgICAgbGF6eVJlc3VsdC5wbGFpbi5tZXRhY2FyZC5wcm9wZXJ0aWVzWydzb3VyY2UtaWQnXVxuICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICBkYXRhLWhlbHA9e01ldGFjYXJkRGVmaW5pdGlvbnMuZ2V0QWxpYXMoJ3NvdXJjZS1pZCcpfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIHshbGF6eVJlc3VsdC5pc1JlbW90ZSgpID8gKFxuICAgICAgICAgICAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZmEgZmEtaG9tZVwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgbWFyZ2luTGVmdDogJzVweCcgfX0+bG9jYWw8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZmEgZmEtY2xvdWRcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IG1hcmdpbkxlZnQ6ICc1cHgnIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAge2xhenlSZXN1bHQucGxhaW4ubWV0YWNhcmQucHJvcGVydGllc1snc291cmNlLWlkJ119XG4gICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L1Byb3BlcnR5Q29tcG9uZW50PlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICcnXG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHtyZW5kZXJFeHRyYXMgPyAoXG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIHsnICd9XG4gICAgICAgICAgICB7LyogdHJpY2sgdG8ga2VlcCB0aGUgZHJvcGRvd24gdmlzaWJsZSBvdmVyIGFuIGFyYyBvZiB0aGUgY3Vyc29yLCBzbyB1c2VycyBoYXZlIHNvbWUgbGVld2F5IGlmIGdvaW5nIGRpYWdvbmFsIHRvIHRoZSBhY3Rpb25zIGRyb3Bkb3ducyAqKi99XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7ZGlhZ29uYWxIb3ZlckNsYXNzZXN9IHctZnVsbCB0cmFuc2Zvcm0gdHJhbnNsYXRlLXktMWB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake2RpYWdvbmFsSG92ZXJDbGFzc2VzfSB3LTkvMTIgdHJhbnNmb3JtIHRyYW5zbGF0ZS15LTIgYH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7ZGlhZ29uYWxIb3ZlckNsYXNzZXN9IHctNi8xMiB0cmFuc2Zvcm0gdHJhbnNsYXRlLXktM2B9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake2RpYWdvbmFsSG92ZXJDbGFzc2VzfSB3LTUvMTIgdHJhbnNmb3JtIHRyYW5zbGF0ZS15LTRgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtkaWFnb25hbEhvdmVyQ2xhc3Nlc30gdy00LzEyIHRyYW5zZm9ybSB0cmFuc2xhdGUteS01YH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7ZGlhZ29uYWxIb3ZlckNsYXNzZXN9IHctMy8xMiB0cmFuc2Zvcm0gdHJhbnNsYXRlLXktNmB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake2RpYWdvbmFsSG92ZXJDbGFzc2VzfSB3LTIvMTIgdHJhbnNmb3JtIHRyYW5zbGF0ZS15LThgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgYWJzb2x1dGUgei00MCBncm91cC1ob3Zlcjp6LTUwIGZvY3VzLXdpdGhpbjp6LTUwIHJpZ2h0LTAgdG9wLTAgZm9jdXMtd2l0aGluOm9wYWNpdHktMTAwIGdyb3VwLWhvdmVyOm9wYWNpdHktMTAwIGhvdmVyOm9wYWNpdHktMTAwIG9wYWNpdHktMCBjdXJzb3ItYXV0byB0cmFuc2Zvcm0gZm9jdXMtd2l0aGluOnNjYWxlLTEwMCB0cmFuc2l0aW9uLWFsbCBob3ZlcjpzY2FsZS0xMDAgZWFzZS1pbi1vdXQgZHVyYXRpb24tMjAwIGhvdmVyOnRyYW5zbGF0ZS14LTAgaG92ZXI6c2NhbGUteC0xMDBgfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8UGFwZXJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgZWxldmF0aW9uPXtFbGV2YXRpb25zLm92ZXJsYXlzfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInAtMlwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8RHluYW1pY0FjdGlvbnMgbGF6eVJlc3VsdD17bGF6eVJlc3VsdH0gLz5cbiAgICAgICAgICAgICAgPC9QYXBlcj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvPlxuICAgICAgICApIDogbnVsbH1cbiAgICAgIDwvZGl2PlxuICAgIDwvYnV0dG9uPlxuICApXG59XG5leHBvcnQgZGVmYXVsdCBSZXN1bHRJdGVtXG4iXX0=