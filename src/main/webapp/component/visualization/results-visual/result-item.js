import { __assign, __read } from "tslib";
/**
 * Copyright (c) Codice Foundation
 *
 * This is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser
 * General Public License as published by the Free Software Foundation, either version 3 of the
 * License, or any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without
 * even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
 * Lesser General Public License for more details. A copy of the GNU Lesser General Public License
 * is distributed along with this program and can be found at
 * <http://www.gnu.org/licenses/lgpl.html>.
 *
 **/
import * as React from 'react';
import LazyMetacardInteractions from './lazy-metacard-interactions';
import IconHelper from '../../../js/IconHelper';
import user from '../../singletons/user-instance';
import Button from '@mui/material/Button';
import LinkIcon from '@mui/icons-material/Link';
import GetAppIcon from '@mui/icons-material/GetApp';
import Grid from '@mui/material/Grid';
import { hot } from 'react-hot-loader';
import Paper from '@mui/material/Paper';
import Tooltip from '@mui/material/Tooltip';
import MoreIcon from '@mui/icons-material/MoreVert';
import WarningIcon from '@mui/icons-material/Warning';
import { useBackbone } from '../../selection-checkbox/useBackbone.hook';
import { useRerenderOnBackboneSync, useSelectionOfLazyResult, } from '../../../js/model/LazyQueryResult/hooks';
import Extensions from '../../../extension-points';
import CheckBoxOutlineBlankIcon from '@mui/icons-material/CheckBoxOutlineBlank';
import CheckIcon from '@mui/icons-material/Check';
import CheckBoxIcon from '@mui/icons-material/CheckBox';
import { Elevations } from '../../theme/theme';
import TouchRipple from '@mui/material/ButtonBase/TouchRipple';
import { clearSelection, hasSelection } from './result-item-row';
import { useLazyResultsSelectedResultsFromSelectionInterface } from '../../selection-interface/hooks';
import { TypedUserInstance } from '../../singletons/TypedUser';
import useCoordinateFormat from '../../tabs/metacard/useCoordinateFormat';
import EditIcon from '@mui/icons-material/Edit';
import { Link } from '../../link/link';
import { useMenuState } from '../../menu-state/menu-state';
import Popover from '@mui/material/Popover';
import Common from '../../../js/Common';
import ExtensionPoints from '../../../extension-points/extension-points';
import { StartupDataStore } from '../../../js/model/Startup/startup';
import { useMetacardDefinitions } from '../../../js/model/Startup/metacard-definitions.hooks';
import wreqr from '../../../js/wreqr';
import { useDialog } from '../../dialog';
import { useDownloadComponent } from '../../download/download';
import { LayoutContext } from '../../golden-layout/visual-settings.provider';
import { RESULTS_ATTRIBUTES_LIST, getDefaultResultsShownList, } from '../settings-helpers';
var PropertyComponent = function (props) {
    return (React.createElement("div", __assign({}, props, { className: "overflow-auto", style: {
            marginTop: '10px',
            opacity: '.7',
            maxHeight: '200px',
            minHeight: '21px', // firefox will show scroll bars all the time unless we do this minHeight :S
        } })));
};
var showSource = function () {
    return (StartupDataStore.Configuration.getResultShow().find(function (additionalProperty) {
        return additionalProperty === 'source-id';
    }) !== undefined);
};
var showRelevanceScore = function (_a) {
    var lazyResult = _a.lazyResult;
    return (StartupDataStore.Configuration.getShowRelevanceScores() &&
        lazyResult.hasRelevance());
};
export var getIconClassName = function (_a) {
    var lazyResult = _a.lazyResult;
    if (lazyResult.isRevision()) {
        return 'fa fa-history';
    }
    else if (lazyResult.isResource()) {
        return IconHelper.getClassByMetacardObject(lazyResult.plain);
    }
    else if (lazyResult.isDeleted()) {
        return 'fa fa-trash';
    }
    return IconHelper.getClassByMetacardObject(lazyResult.plain);
};
// @ts-expect-error ts-migrate(6133) FIXME: 'MultiSelectActions' is declared but its value is ... Remove this comment to see the full error message
var MultiSelectActions = function (_a) {
    var selectionInterface = _a.selectionInterface;
    var selectedResults = useLazyResultsSelectedResultsFromSelectionInterface({
        selectionInterface: selectionInterface,
    });
    var selectedResultsArray = Object.values(selectedResults);
    var metacardInteractionMenuState = useMenuState();
    return (React.createElement(React.Fragment, null,
        React.createElement(Button, { component: "div", className: selectedResultsArray.length === 0 ? 'relative' : 'relative', color: "primary", disabled: selectedResultsArray.length === 0, onClick: function (e) {
                e.stopPropagation();
                metacardInteractionMenuState.handleClick();
            }, ref: metacardInteractionMenuState.anchorRef, style: { height: '100%' }, size: "small" },
            selectedResultsArray.length,
            " selected",
            React.createElement(MoreIcon, { className: "Mui-text-text-primary" })),
        React.createElement(Popover, __assign({}, metacardInteractionMenuState.MuiPopoverProps),
            React.createElement(Paper, null,
                React.createElement(LazyMetacardInteractions, { lazyResults: selectedResultsArray, onClose: metacardInteractionMenuState.handleClose })))));
};
var dynamicActionClasses = 'h-full';
var DynamicActions = function (_a) {
    var lazyResult = _a.lazyResult;
    var setProps = useDialog().setProps;
    var metacardInteractionMenuState = useMenuState();
    var DownloadComponent = useDownloadComponent();
    return (React.createElement(Grid, { container: true, direction: "column", wrap: "nowrap", alignItems: "center" },
        React.createElement(Grid, { item: true, className: "h-full" },
            React.createElement(Button, { component: "div", "data-id": "result-item-more-vert-button", onClick: function (e) {
                    e.stopPropagation();
                    metacardInteractionMenuState.handleClick();
                }, style: { height: '100%' }, size: "small", ref: metacardInteractionMenuState.anchorRef },
                React.createElement(MoreIcon, null)),
            React.createElement(Popover, __assign({}, metacardInteractionMenuState.MuiPopoverProps, { keepMounted: true }),
                React.createElement(Paper, null,
                    React.createElement(LazyMetacardInteractions, { lazyResults: [lazyResult], onClose: metacardInteractionMenuState.handleClose })))),
        React.createElement(Grid, { item: true, className: dynamicActionClasses }, lazyResult.hasErrors() ? (React.createElement("div", { "data-id": "validation-errors-icon", className: "h-full", title: "Has validation errors.", "data-help": "Indicates the given result has a validation error.\n                     See the 'Quality' tab of the result for more details." },
            React.createElement(WarningIcon, null))) : ('')),
        React.createElement(Grid, { item: true, className: dynamicActionClasses }, !lazyResult.hasErrors() && lazyResult.hasWarnings() ? (React.createElement("div", { "data-id": "validation-warnings-icon", className: "h-full", title: "Has validation warnings.", "data-help": "Indicates the given result has a validation warning.\n                     See the 'Quality' tab of the result for more details." },
            React.createElement(WarningIcon, null))) : ('')),
        React.createElement(Grid, { item: true, className: dynamicActionClasses }, lazyResult.plain.metacard.properties['ext.link'] ? (React.createElement(Button, { component: "div", title: lazyResult.plain.metacard.properties['ext.link'], onClick: function (e) {
                e.stopPropagation();
                window.open(lazyResult.plain.metacard.properties['ext.link']);
            }, style: { height: '100%' }, size: "small" },
            React.createElement(LinkIcon, null))) : null),
        React.createElement(Grid, { item: true, className: dynamicActionClasses }, lazyResult.getDownloadUrl() ? (React.createElement(Button, { component: "div", "data-id": "download-button", onClick: function (e) {
                e.stopPropagation();
                setProps({
                    open: true,
                    children: React.createElement(DownloadComponent, { lazyResults: [lazyResult] }),
                });
            }, style: { height: '100%' }, size: "small" },
            React.createElement(GetAppIcon, null))) : null),
        React.createElement(Extensions.resultItemTitleAddOn, { lazyResult: lazyResult }),
        React.createElement(Grid, { item: true, className: dynamicActionClasses }, lazyResult.isSearch() ? (React.createElement(Link, { component: Button, "data-id": "edit-button", to: "/search/".concat(lazyResult.plain.id), style: { height: '100%' } },
            React.createElement(EditIcon, null))) : null)));
};
export var SelectionBackground = function (_a) {
    var lazyResult = _a.lazyResult;
    var isSelected = useSelectionOfLazyResult({ lazyResult: lazyResult });
    return (React.createElement("div", { className: "absolute left-0 top-0 z-0 w-full h-full Mui-bg-secondary", style: {
            opacity: isSelected ? 0.05 : 0,
        } }));
};
var IconButton = function (_a) {
    var lazyResult = _a.lazyResult, selectionInterface = _a.selectionInterface, itemContentRef = _a.itemContentRef;
    var MetacardDefinitions = useMetacardDefinitions();
    var isSelected = useSelectionOfLazyResult({ lazyResult: lazyResult });
    var ResultItemAction = ExtensionPoints.resultItemAction({
        lazyResult: lazyResult,
        selectionInterface: selectionInterface,
        itemContentRef: itemContentRef,
        className: 'scale-0 absolute z-10 left-0 -translate-x-full ml-[3px] group-hover:scale-100 transition pt-1',
    });
    var extraClasses = ResultItemAction
        ? 'group-hover:scale-50 group-hover:-translate-x-[85%]'
        : '';
    return (React.createElement(React.Fragment, null,
        ResultItemAction && (React.createElement(ResultItemAction, { lazyResult: lazyResult, selectionInterface: selectionInterface, itemContentRef: itemContentRef })),
        React.createElement(Button, { component: "div", "data-id": "select-checkbox", onClick: function (event) {
                event.stopPropagation(); // this button takes precedence over the enclosing button, and is always additive / subtractive (no deselect of other results)
                if (event.shiftKey) {
                    lazyResult.shiftSelect();
                }
                else {
                    lazyResult.controlSelect();
                }
            }, focusVisibleClassName: "focus-visible", className: "relative p-2 min-w-0 outline-none h-full group/checkbox shrink-0" },
            (function () {
                if (isSelected) {
                    return (React.createElement(React.Fragment, null,
                        React.createElement("div", { className: "".concat(extraClasses, " absolute w-full h-full left-0 top-0 opacity-0 transform transition duration-200 ease-in-out -translate-x-full group-hover/checkbox:scale-100") },
                            React.createElement(CheckBoxIcon, { className: "group-hover/checkbox:block group-focus-visible/checkbox:block hidden" }),
                            React.createElement(CheckIcon, { className: "group-hover/checkbox:hidden group-focus-visible/checkbox:hidden block" })),
                        React.createElement("div", { className: "".concat(extraClasses, " transform transition duration-200 ease-in-out -translate-x-full group-focus-visible/checkbox:!translate-x-0 group-hover/checkbox:!translate-x-0 group-hover/checkbox:scale-100") },
                            React.createElement(CheckBoxIcon, { className: "group-hover/checkbox:block group-focus-visible/checkbox:block hidden" }),
                            React.createElement(CheckIcon, { className: "group-hover/checkbox:hidden group-focus-visible/checkbox:hidden block" }))));
                }
                else if (!isSelected) {
                    return (React.createElement("div", { className: "transform " },
                        React.createElement(CheckBoxOutlineBlankIcon, { className: "group-hover/checkbox:visible group-focus-visible/checkbox:visible invisible" })));
                }
                return null;
            })(),
            React.createElement("span", { className: "".concat(getIconClassName({
                    lazyResult: lazyResult,
                }), " font-awesome-span group-focus-visible/checkbox:invisible group-hover/checkbox:invisible absolute z-0 left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2"), "data-help": MetacardDefinitions.getAlias('title'), title: "".concat(MetacardDefinitions.getAlias('title'), ": ").concat(lazyResult.plain.metacard.properties.title) }))));
};
// factored out for easy debugging (can add bg-gray-400 to see trail)
var diagonalHoverClasses = 'absolute z-50 right-0 bottom-100 h-4 transform scale-0 group-hover:scale-100 transition-all absolute z-50 right-0 bottom-100';
// fake event to pass ripple.stop
var fakeEvent = {
    type: '',
};
export var ResultItem = function (_a) {
    var lazyResult = _a.lazyResult, originalMeasure = _a.measure, selectionInterface = _a.selectionInterface;
    var _b = React.useContext(LayoutContext), getValue = _b.getValue, onStateChanged = _b.onStateChanged;
    var MetacardDefinitions = useMetacardDefinitions();
    var rippleRef = React.useRef(null);
    var listenTo = useBackbone().listenTo;
    var convertToPrecision = function (value) {
        return value && decimalPrecision
            ? Number(value).toFixed(decimalPrecision)
            : value;
    };
    var convertToFormat = useCoordinateFormat();
    var _c = __read(React.useState(false), 2), renderExtras = _c[0], setRenderExtras = _c[1]; // dynamic actions are a significant part of rendering time, so delay until necessary
    var _d = __read(React.useState(TypedUserInstance.getDecimalPrecision()), 2), decimalPrecision = _d[0], setDecimalPrecision = _d[1];
    var _e = __read(React.useState(getValue(RESULTS_ATTRIBUTES_LIST, getDefaultResultsShownList())), 2), shownAttributes = _e[0], setShownAttributes = _e[1];
    useRerenderOnBackboneSync({ lazyResult: lazyResult });
    React.useEffect(function () {
        listenTo(user.get('user').get('preferences'), 'change:decimalPrecision', function () {
            setDecimalPrecision(TypedUserInstance.getDecimalPrecision());
        });
        onStateChanged(function () {
            var shownList = getValue(RESULTS_ATTRIBUTES_LIST, getDefaultResultsShownList());
            setShownAttributes(shownList);
        });
    }, []);
    /**
     * Unfocused (hidden) tab sets the container height to 0
     * Run the measure function when the height is 0 could cause items inside the tab to be unreadable
     */
    var measure = function () {
        var _a, _b;
        if (((_a = buttonRef.current) === null || _a === void 0 ? void 0 : _a.clientHeight) &&
            ((_b = buttonRef.current) === null || _b === void 0 ? void 0 : _b.clientHeight) > 0) {
            originalMeasure();
        }
    };
    React.useEffect(function () {
        measure();
    }, [shownAttributes, convertToFormat]);
    listenTo(wreqr.vent, 'activeContentItemChanged', function () {
        measure();
    });
    var thumbnail = lazyResult.plain.metacard.properties.thumbnail;
    var imgsrc = Common.getImageSrc(thumbnail);
    var buttonRef = React.useRef(null);
    var itemContentRef = React.useRef(null);
    var ResultItemAddOnInstance = Extensions.resultItemRowAddOn({
        lazyResult: lazyResult,
        isTableView: false,
    });
    var ResultTitleIconAddOnInstance = Extensions.resultTitleIconAddOn({
        lazyResult: lazyResult,
    });
    var shouldShowRelevance = showRelevanceScore({ lazyResult: lazyResult });
    var shouldShowSource = showSource();
    var extraHighlights = Object.keys(lazyResult.highlights).filter(function (attr) { return !shownAttributes.find(function (shownAttribute) { return shownAttribute === attr; }); });
    var getDisplayValue = function (_a) {
        var detail = _a.detail, lazyResult = _a.lazyResult;
        var value = lazyResult.plain.metacard.properties[detail];
        if (value && MetacardDefinitions.getAttributeMap()[detail]) {
            switch (MetacardDefinitions.getAttributeMap()[detail].type) {
                case 'DATE':
                    if (Array.isArray(value)) {
                        value = value.map(function (val) {
                            return TypedUserInstance.getMomentDate(val);
                        });
                    }
                    else {
                        value = TypedUserInstance.getMomentDate(value);
                    }
                    break;
                case 'GEOMETRY':
                    if (value.constructor === Array) {
                        value = value.map(function (val) { return convertToFormat(val); });
                    }
                    else {
                        value = convertToFormat(value);
                    }
                    break;
                case 'LONG':
                case 'DOUBLE':
                case 'FLOAT':
                    if (value.constructor === Array) {
                        value = value.map(function (val) { return convertToPrecision(val); });
                    }
                    else {
                        value = convertToPrecision(value);
                    }
                    break;
            }
        }
        if (Array.isArray(value)) {
            value = value.join(', ');
        }
        return value;
    };
    var detailsMap = shownAttributes
        .slice(1) // remove top one since that's special
        .map(function (detail) {
        return {
            attribute: detail,
            value: getDisplayValue({ detail: detail, lazyResult: lazyResult }),
        };
    })
        .filter(function (detail) {
        // this is special and is handled differently, see show source
        if (detail.attribute === 'source-id') {
            return false;
        }
        return detail.value;
    });
    return (React.createElement("button", { "data-id": "result-item-container-button", onMouseDown: function (event) {
            /**
             * Shift key can cause selections since we set the class to allow text selection,
             * so the only scenario we want to prevent that in is when shift clicking
             */
            if (event.shiftKey) {
                clearSelection();
            }
            /**
             * Stop the ripple that starts on focus, that's only for navigating by keyboard
             */
            setTimeout(function () {
                if (rippleRef.current) {
                    rippleRef.current.stop(fakeEvent);
                }
            }, 0);
        }, onClick: function (event) {
            if (hasSelection()) {
                return;
            }
            if (event.shiftKey) {
                lazyResult.shiftSelect();
            }
            else if (event.ctrlKey || event.metaKey) {
                lazyResult.controlSelect();
            }
            else {
                lazyResult.select();
            }
            if (rippleRef.current) {
                rippleRef.current.start(event);
            }
            setTimeout(function () {
                if (rippleRef.current) {
                    rippleRef.current.stop(fakeEvent);
                }
            }, 200);
        }, onMouseLeave: function () {
            /**
             * This is to prevent weirdness with the dynamic actions, where clicking a menu option there adds focus,
             * thus making the dynamic actions stay visible when the user starts to mouse away.
             */
            try {
                if (document.activeElement &&
                    buttonRef.current &&
                    buttonRef.current.contains(document.activeElement)) {
                    ;
                    document.activeElement.blur();
                }
            }
            catch (err) {
                console.error(err);
            }
        }, onMouseEnter: function () {
            setRenderExtras(true);
        }, onFocus: function (e) {
            setRenderExtras(true);
            if (e.target === e.currentTarget && rippleRef.current) {
                rippleRef.current.pulsate();
            }
        }, onBlur: function (e) {
            if (rippleRef.current) {
                rippleRef.current.stop(e);
            }
        }, ref: buttonRef, className: "select-text outline-none px-6 pr-12 p-2 text-left break-words group w-full Mui-bg-button" },
        React.createElement("div", { className: "w-full" },
            React.createElement(TouchRipple, { ref: rippleRef }),
            React.createElement(SelectionBackground, { lazyResult: lazyResult }),
            React.createElement("div", { className: "w-full relative z-0", ref: itemContentRef },
                React.createElement("div", { className: "w-full flex items-start" },
                    React.createElement(IconButton, { lazyResult: lazyResult, selectionInterface: selectionInterface, itemContentRef: itemContentRef }),
                    ResultTitleIconAddOnInstance && (React.createElement("div", { className: "pt-2 pr-1" }, ResultTitleIconAddOnInstance)),
                    React.createElement("div", { "data-id": "result-item-".concat(shownAttributes[0], "-label"), title: "".concat(MetacardDefinitions.getAlias(shownAttributes[0])), className: "shrink-1 w-full overflow-auto self-center", style: { maxHeight: '200px', minHeight: '21px' } }, shownAttributes[0] === 'thumbnail' && thumbnail ? (React.createElement("img", { "data-id": "result-item-thumbnail", src: imgsrc, style: { maxWidth: '100%', maxHeight: '200px' }, onLoad: function () {
                            measure();
                        }, onError: function () {
                            measure();
                        } })) : lazyResult.highlights[shownAttributes[0]] ? (React.createElement("span", { dangerouslySetInnerHTML: {
                            __html: lazyResult.highlights[shownAttributes[0]][0].highlight,
                        } })) : (getDisplayValue({ detail: shownAttributes[0], lazyResult: lazyResult })))),
                React.createElement("div", { className: "pl-3 ".concat(ResultItemAddOnInstance !== null ||
                        detailsMap.length > 0 ||
                        extraHighlights.length > 0 ||
                        shouldShowRelevance ||
                        shouldShowSource
                        ? 'pb-2'
                        : '') },
                    React.createElement("div", null, ResultItemAddOnInstance),
                    React.createElement("div", null,
                        detailsMap.map(function (detail) {
                            if (detail.attribute === 'thumbnail') {
                                return (React.createElement("img", { key: detail.attribute, "data-id": "result-item-thumbnail", src: imgsrc, style: {
                                        marginTop: '10px',
                                        maxWidth: '100%',
                                        maxHeight: '200px',
                                    }, onLoad: function () {
                                        measure();
                                    }, onError: function () {
                                        measure();
                                    } }));
                            }
                            return (React.createElement(PropertyComponent, { key: detail.attribute, "data-help": MetacardDefinitions.getAlias(detail.attribute), title: "".concat(MetacardDefinitions.getAlias(detail.attribute), ": ").concat(detail.value) },
                                React.createElement("span", null, lazyResult.highlights[detail.attribute] ? (React.createElement("span", { dangerouslySetInnerHTML: {
                                        __html: lazyResult.highlights[detail.attribute][0]
                                            .highlight,
                                    } })) : (getDisplayValue({
                                    detail: detail.attribute,
                                    lazyResult: lazyResult,
                                })))));
                        }),
                        extraHighlights.map(function (extraHighlight) {
                            var relevantHighlight = lazyResult.highlights[extraHighlight][0];
                            return (React.createElement(PropertyComponent, { key: relevantHighlight.attribute, "data-help": MetacardDefinitions.getAlias(relevantHighlight.attribute) },
                                React.createElement(Tooltip, { title: MetacardDefinitions.getAlias(relevantHighlight.attribute) },
                                    React.createElement("span", { dangerouslySetInnerHTML: {
                                            __html: relevantHighlight.highlight,
                                        } }))));
                        }),
                        shouldShowRelevance ? (React.createElement(PropertyComponent, { "data-help": "Relevance: ".concat(lazyResult.plain.relevance), title: "Relevance: ".concat(lazyResult.plain.relevance) },
                            React.createElement("span", null, lazyResult.getRoundedRelevance()))) : (''),
                        shouldShowSource ? (React.createElement(PropertyComponent, { title: "".concat(MetacardDefinitions.getAlias('source-id'), ": ").concat(lazyResult.plain.metacard.properties['source-id']), "data-help": MetacardDefinitions.getAlias('source-id') }, !lazyResult.isRemote() ? (React.createElement(React.Fragment, null,
                            React.createElement("span", { className: "fa fa-home" }),
                            React.createElement("span", { style: { marginLeft: '5px' } }, "local"))) : (React.createElement(React.Fragment, null,
                            React.createElement("span", { className: "fa fa-cloud" }),
                            React.createElement("span", { style: { marginLeft: '5px' } }, lazyResult.plain.metacard.properties['source-id']))))) : ('')))),
            renderExtras ? (React.createElement(React.Fragment, null,
                ' ',
                React.createElement("div", { className: "".concat(diagonalHoverClasses, " w-full transform translate-y-1") }),
                React.createElement("div", { className: "".concat(diagonalHoverClasses, " w-9/12 transform translate-y-2 ") }),
                React.createElement("div", { className: "".concat(diagonalHoverClasses, " w-6/12 transform translate-y-3") }),
                React.createElement("div", { className: "".concat(diagonalHoverClasses, " w-5/12 transform translate-y-4") }),
                React.createElement("div", { className: "".concat(diagonalHoverClasses, " w-4/12 transform translate-y-5") }),
                React.createElement("div", { className: "".concat(diagonalHoverClasses, " w-3/12 transform translate-y-6") }),
                React.createElement("div", { className: "".concat(diagonalHoverClasses, " w-2/12 transform translate-y-8") }),
                React.createElement("div", { className: "absolute z-40 group-hover:z-50 focus-within:z-50 right-0 top-0 focus-within:opacity-100 group-hover:opacity-100 hover:opacity-100 opacity-0 cursor-auto transform focus-within:scale-100 transition-all hover:scale-100 ease-in-out duration-200 hover:translate-x-0 hover:scale-x-100" },
                    React.createElement(Paper, { onClick: function (e) {
                            e.stopPropagation();
                        }, elevation: Elevations.overlays, className: "p-2" },
                        React.createElement(DynamicActions, { lazyResult: lazyResult }))))) : null)));
};
export default hot(module)(ResultItem);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzdWx0LWl0ZW0uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9zcmMvbWFpbi93ZWJhcHAvY29tcG9uZW50L3Zpc3VhbGl6YXRpb24vcmVzdWx0cy12aXN1YWwvcmVzdWx0LWl0ZW0udHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7OztJQWFJO0FBQ0osT0FBTyxLQUFLLEtBQUssTUFBTSxPQUFPLENBQUE7QUFDOUIsT0FBTyx3QkFBd0IsTUFBTSw4QkFBOEIsQ0FBQTtBQUNuRSxPQUFPLFVBQVUsTUFBTSx3QkFBd0IsQ0FBQTtBQUMvQyxPQUFPLElBQUksTUFBTSxnQ0FBZ0MsQ0FBQTtBQUNqRCxPQUFPLE1BQU0sTUFBTSxzQkFBc0IsQ0FBQTtBQUN6QyxPQUFPLFFBQVEsTUFBTSwwQkFBMEIsQ0FBQTtBQUMvQyxPQUFPLFVBQVUsTUFBTSw0QkFBNEIsQ0FBQTtBQUNuRCxPQUFPLElBQUksTUFBTSxvQkFBb0IsQ0FBQTtBQUNyQyxPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sa0JBQWtCLENBQUE7QUFDdEMsT0FBTyxLQUFLLE1BQU0scUJBQXFCLENBQUE7QUFDdkMsT0FBTyxPQUFPLE1BQU0sdUJBQXVCLENBQUE7QUFDM0MsT0FBTyxRQUFRLE1BQU0sOEJBQThCLENBQUE7QUFDbkQsT0FBTyxXQUFXLE1BQU0sNkJBQTZCLENBQUE7QUFDckQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDJDQUEyQyxDQUFBO0FBRXZFLE9BQU8sRUFDTCx5QkFBeUIsRUFDekIsd0JBQXdCLEdBQ3pCLE1BQU0seUNBQXlDLENBQUE7QUFDaEQsT0FBTyxVQUFVLE1BQU0sMkJBQTJCLENBQUE7QUFDbEQsT0FBTyx3QkFBd0IsTUFBTSwwQ0FBMEMsQ0FBQTtBQUMvRSxPQUFPLFNBQVMsTUFBTSwyQkFBMkIsQ0FBQTtBQUNqRCxPQUFPLFlBQVksTUFBTSw4QkFBOEIsQ0FBQTtBQUN2RCxPQUFPLEVBQUUs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QVMsRUFBRSxVQUFHLG9CQUFvQixvQ0FBaUMsR0FDbkU7Z0JBQ0YsNkJBQ0UsU0FBUyxFQUFFLFVBQUcsb0JBQW9CLG9DQUFpQyxHQUNuRTtnQkFDRiw2QkFDRSxTQUFTLEVBQUUsVUFBRyxvQkFBb0Isb0NBQWlDLEdBQ25FO2dCQUNGLDZCQUNFLFNBQVMsRUFBRSx3UkFBd1I7b0JBRW5TLG9CQUFDLEtBQUssSUFDSixPQUFPLEVBQUUsVUFBQyxDQUFDOzRCQUNULENBQUMsQ0FBQyxlQUFlLEVBQUUsQ0FBQTt3QkFDckIsQ0FBQyxFQUNELFNBQVMsRUFBRSxVQUFVLENBQUMsUUFBUSxFQUM5QixTQUFTLEVBQUMsS0FBSzt3QkFFZixvQkFBQyxjQUFjLElBQUMsVUFBVSxFQUFFLFVBQVUsR0FBSSxDQUNwQyxDQUNKLENBQ0wsQ0FDSixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQ0osQ0FDQyxDQUNWLENBQUE7QUFDSCxDQUFDLENBQUE7QUFDRCxlQUFlLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBDb2RpY2UgRm91bmRhdGlvblxuICpcbiAqIFRoaXMgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBMZXNzZXJcbiAqIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlXG4gKiBMaWNlbnNlLCBvciBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqXG4gKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0XG4gKiBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZSBHTlVcbiAqIExlc3NlciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuIEEgY29weSBvZiB0aGUgR05VIExlc3NlciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gKiBpcyBkaXN0cmlidXRlZCBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbSBhbmQgY2FuIGJlIGZvdW5kIGF0XG4gKiA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL2xncGwuaHRtbD4uXG4gKlxuICoqL1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgTGF6eU1ldGFjYXJkSW50ZXJhY3Rpb25zIGZyb20gJy4vbGF6eS1tZXRhY2FyZC1pbnRlcmFjdGlvbnMnXG5pbXBvcnQgSWNvbkhlbHBlciBmcm9tICcuLi8uLi8uLi9qcy9JY29uSGVscGVyJ1xuaW1wb3J0IHVzZXIgZnJvbSAnLi4vLi4vc2luZ2xldG9ucy91c2VyLWluc3RhbmNlJ1xuaW1wb3J0IEJ1dHRvbiBmcm9tICdAbXVpL21hdGVyaWFsL0J1dHRvbidcbmltcG9ydCBMaW5rSWNvbiBmcm9tICdAbXVpL2ljb25zLW1hdGVyaWFsL0xpbmsnXG5pbXBvcnQgR2V0QXBwSWNvbiBmcm9tICdAbXVpL2ljb25zLW1hdGVyaWFsL0dldEFwcCdcbmltcG9ydCBHcmlkIGZyb20gJ0BtdWkvbWF0ZXJpYWwvR3JpZCdcbmltcG9ydCB7IGhvdCB9IGZyb20gJ3JlYWN0LWhvdC1sb2FkZXInXG5pbXBvcnQgUGFwZXIgZnJvbSAnQG11aS9tYXRlcmlhbC9QYXBlcidcbmltcG9ydCBUb29sdGlwIGZyb20gJ0BtdWkvbWF0ZXJpYWwvVG9vbHRpcCdcbmltcG9ydCBNb3JlSWNvbiBmcm9tICdAbXVpL2ljb25zLW1hdGVyaWFsL01vcmVWZXJ0J1xuaW1wb3J0IFdhcm5pbmdJY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvV2FybmluZydcbmltcG9ydCB7IHVzZUJhY2tib25lIH0gZnJvbSAnLi4vLi4vc2VsZWN0aW9uLWNoZWNrYm94L3VzZUJhY2tib25lLmhvb2snXG5pbXBvcnQgeyBMYXp5UXVlcnlSZXN1bHQgfSBmcm9tICcuLi8uLi8uLi9qcy9tb2RlbC9MYXp5UXVlcnlSZXN1bHQvTGF6eVF1ZXJ5UmVzdWx0J1xuaW1wb3J0IHtcbiAgdXNlUmVyZW5kZXJPbkJhY2tib25lU3luYyxcbiAgdXNlU2VsZWN0aW9uT2ZMYXp5UmVzdWx0LFxufSBmcm9tICcuLi8uLi8uLi9qcy9tb2RlbC9MYXp5UXVlcnlSZXN1bHQvaG9va3MnXG5pbXBvcnQgRXh0ZW5zaW9ucyBmcm9tICcuLi8uLi8uLi9leHRlbnNpb24tcG9pbnRzJ1xuaW1wb3J0IENoZWNrQm94T3V0bGluZUJsYW5rSWNvbiBmcm9tICdAbXVpL2ljb25zLW1hdGVyaWFsL0NoZWNrQm94T3V0bGluZUJsYW5rJ1xuaW1wb3J0IENoZWNrSWNvbiBmcm9tICdAbXVpL2ljb25zLW1hdGVyaWFsL0NoZWNrJ1xuaW1wb3J0IENoZWNrQm94SWNvbiBmcm9tICdAbXVpL2ljb25zLW1hdGVyaWFsL0NoZWNrQm94J1xuaW1wb3J0IHsgRWxldmF0aW9ucyB9IGZyb20gJy4uLy4uL3RoZW1lL3RoZW1lJ1xuaW1wb3J0IFRvdWNoUmlwcGxlIGZyb20gJ0BtdWkvbWF0ZXJpYWwvQnV0dG9uQmFzZS9Ub3VjaFJpcHBsZSdcbmltcG9ydCB7IGNsZWFyU2VsZWN0aW9uLCBoYXNTZWxlY3Rpb24gfSBmcm9tICcuL3Jlc3VsdC1pdGVtLXJvdydcbmltcG9ydCB7IHVzZUxhenlSZXN1bHRzU2VsZWN0ZWRSZXN1bHRzRnJvbVNlbGVjdGlvbkludGVyZmFjZSB9IGZyb20gJy4uLy4uL3NlbGVjdGlvbi1pbnRlcmZhY2UvaG9va3MnXG5pbXBvcnQgeyBUeXBlZFVzZXJJbnN0YW5jZSB9IGZyb20gJy4uLy4uL3NpbmdsZXRvbnMvVHlwZWRVc2VyJ1xuaW1wb3J0IHVzZUNvb3JkaW5hdGVGb3JtYXQgZnJvbSAnLi4vLi4vdGFicy9tZXRhY2FyZC91c2VDb29yZGluYXRlRm9ybWF0J1xuaW1wb3J0IEVkaXRJY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvRWRpdCdcbmltcG9ydCB7IExpbmsgfSBmcm9tICcuLi8uLi9saW5rL2xpbmsnXG5pbXBvcnQgeyB1c2VNZW51U3RhdGUgfSBmcm9tICcuLi8uLi9tZW51LXN0YXRlL21lbnUtc3RhdGUnXG5pbXBvcnQgUG9wb3ZlciBmcm9tICdAbXVpL21hdGVyaWFsL1BvcG92ZXInXG5pbXBvcnQgQ29tbW9uIGZyb20gJy4uLy4uLy4uL2pzL0NvbW1vbidcbmltcG9ydCBFeHRlbnNpb25Qb2ludHMgZnJvbSAnLi4vLi4vLi4vZXh0ZW5zaW9uLXBvaW50cy9leHRlbnNpb24tcG9pbnRzJ1xuaW1wb3J0IHsgU3RhcnR1cERhdGFTdG9yZSB9IGZyb20gJy4uLy4uLy4uL2pzL21vZGVsL1N0YXJ0dXAvc3RhcnR1cCdcbmltcG9ydCB7IHVzZU1ldGFjYXJkRGVmaW5pdGlvbnMgfSBmcm9tICcuLi8uLi8uLi9qcy9tb2RlbC9TdGFydHVwL21ldGFjYXJkLWRlZmluaXRpb25zLmhvb2tzJ1xuaW1wb3J0IHdyZXFyIGZyb20gJy4uLy4uLy4uL2pzL3dyZXFyJ1xuaW1wb3J0IHsgdXNlRGlhbG9nIH0gZnJvbSAnLi4vLi4vZGlhbG9nJ1xuaW1wb3J0IHsgdXNlRG93bmxvYWRDb21wb25lbnQgfSBmcm9tICcuLi8uLi9kb3dubG9hZC9kb3dubG9hZCdcbmltcG9ydCB7IExheW91dENvbnRleHQgfSBmcm9tICcuLi8uLi9nb2xkZW4tbGF5b3V0L3Zpc3VhbC1zZXR0aW5ncy5wcm92aWRlcidcbmltcG9ydCB7XG4gIFJFU1VMVFNfQVRUUklCVVRFU19MSVNULFxuICBnZXREZWZhdWx0UmVzdWx0c1Nob3duTGlzdCxcbn0gZnJvbSAnLi4vc2V0dGluZ3MtaGVscGVycydcblxuY29uc3QgUHJvcGVydHlDb21wb25lbnQgPSAocHJvcHM6IFJlYWN0LkFsbEhUTUxBdHRyaWJ1dGVzPEhUTUxEaXZFbGVtZW50PikgPT4ge1xuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIHsuLi5wcm9wc31cbiAgICAgIGNsYXNzTmFtZT1cIm92ZXJmbG93LWF1dG9cIlxuICAgICAgc3R5bGU9e3tcbiAgICAgICAgbWFyZ2luVG9wOiAnMTBweCcsXG4gICAgICAgIG9wYWNpdHk6ICcuNycsXG4gICAgICAgIG1heEhlaWdodDogJzIwMHB4JyxcbiAgICAgICAgbWluSGVpZ2h0OiAnMjFweCcsIC8vIGZpcmVmb3ggd2lsbCBzaG93IHNjcm9sbCBiYXJzIGFsbCB0aGUgdGltZSB1bmxlc3Mgd2UgZG8gdGhpcyBtaW5IZWlnaHQgOlNcbiAgICAgIH19XG4gICAgLz5cbiAgKVxufVxudHlwZSBSZXN1bHRJdGVtQmFzaWNQcm9wcyA9IHtcbiAgbGF6eVJlc3VsdHM6IExhenlRdWVyeVJlc3VsdFtdXG4gIGxhenlSZXN1bHQ6IExhenlRdWVyeVJlc3VsdFxuICBzZWxlY3Rpb25JbnRlcmZhY2U6IGFueVxufVxudHlwZSBSZXN1bHRJdGVtRnVsbFByb3BzID0gUmVzdWx0SXRlbUJhc2ljUHJvcHMgJiB7XG4gIG1lYXN1cmU6ICgpID0+IHZvaWRcbiAgaW5kZXg6IG51bWJlclxuICB3aWR0aDogbnVtYmVyXG59XG5jb25zdCBzaG93U291cmNlID0gKCkgPT4ge1xuICByZXR1cm4gKFxuICAgIFN0YXJ0dXBEYXRhU3RvcmUuQ29uZmlndXJhdGlvbi5nZXRSZXN1bHRTaG93KCkuZmluZChcbiAgICAgIChhZGRpdGlvbmFsUHJvcGVydHk6IHN0cmluZykgPT4ge1xuICAgICAgICByZXR1cm4gYWRkaXRpb25hbFByb3BlcnR5ID09PSAnc291cmNlLWlkJ1xuICAgICAgfVxuICAgICkgIT09IHVuZGVmaW5lZFxuICApXG59XG5jb25zdCBzaG93UmVsZXZhbmNlU2NvcmUgPSAoe1xuICBsYXp5UmVzdWx0LFxufToge1xuICBsYXp5UmVzdWx0OiBSZXN1bHRJdGVtQmFzaWNQcm9wc1snbGF6eVJlc3VsdCddXG59KSA9PiB7XG4gIHJldHVybiAoXG4gICAgU3RhcnR1cERhdGFTdG9yZS5Db25maWd1cmF0aW9uLmdldFNob3dSZWxldmFuY2VTY29yZXMoKSAmJlxuICAgIGxhenlSZXN1bHQuaGFzUmVsZXZhbmNlKClcbiAgKVxufVxuZXhwb3J0IGNvbnN0IGdldEljb25DbGFzc05hbWUgPSAoe1xuICBsYXp5UmVzdWx0LFxufToge1xuICBsYXp5UmVzdWx0OiBMYXp5UXVlcnlSZXN1bHRcbn0pID0+IHtcbiAgaWYgKGxhenlSZXN1bHQuaXNSZXZpc2lvbigpKSB7XG4gICAgcmV0dXJuICdmYSBmYS1oaXN0b3J5J1xuICB9IGVsc2UgaWYgKGxhenlSZXN1bHQuaXNSZXNvdXJjZSgpKSB7XG4gICAgcmV0dXJuIEljb25IZWxwZXIuZ2V0Q2xhc3NCeU1ldGFjYXJkT2JqZWN0KGxhenlSZXN1bHQucGxhaW4pXG4gIH0gZWxzZSBpZiAobGF6eVJlc3VsdC5pc0RlbGV0ZWQoKSkge1xuICAgIHJldHVybiAnZmEgZmEtdHJhc2gnXG4gIH1cbiAgcmV0dXJuIEljb25IZWxwZXIuZ2V0Q2xhc3NCeU1ldGFjYXJkT2JqZWN0KGxhenlSZXN1bHQucGxhaW4pXG59XG4vLyBAdHMtZXhwZWN0LWVycm9yIHRzLW1pZ3JhdGUoNjEzMykgRklYTUU6ICdNdWx0aVNlbGVjdEFjdGlvbnMnIGlzIGRlY2xhcmVkIGJ1dCBpdHMgdmFsdWUgaXMgLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbmNvbnN0IE11bHRpU2VsZWN0QWN0aW9ucyA9ICh7XG4gIHNlbGVjdGlvbkludGVyZmFjZSxcbn06IHtcbiAgc2VsZWN0aW9uSW50ZXJmYWNlOiBhbnlcbn0pID0+IHtcbiAgY29uc3Qgc2VsZWN0ZWRSZXN1bHRzID0gdXNlTGF6eVJlc3VsdHNTZWxlY3RlZFJlc3VsdHNGcm9tU2VsZWN0aW9uSW50ZXJmYWNlKHtcbiAgICBzZWxlY3Rpb25JbnRlcmZhY2UsXG4gIH0pXG4gIGNvbnN0IHNlbGVjdGVkUmVzdWx0c0FycmF5ID0gT2JqZWN0LnZhbHVlcyhzZWxlY3RlZFJlc3VsdHMpXG4gIGNvbnN0IG1ldGFjYXJkSW50ZXJhY3Rpb25NZW51U3RhdGUgPSB1c2VNZW51U3RhdGUoKVxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8QnV0dG9uXG4gICAgICAgIGNvbXBvbmVudD1cImRpdlwiXG4gICAgICAgIGNsYXNzTmFtZT17c2VsZWN0ZWRSZXN1bHRzQXJyYXkubGVuZ3RoID09PSAwID8gJ3JlbGF0aXZlJyA6ICdyZWxhdGl2ZSd9XG4gICAgICAgIGNvbG9yPVwicHJpbWFyeVwiXG4gICAgICAgIGRpc2FibGVkPXtzZWxlY3RlZFJlc3VsdHNBcnJheS5sZW5ndGggPT09IDB9XG4gICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICAgIG1ldGFjYXJkSW50ZXJhY3Rpb25NZW51U3RhdGUuaGFuZGxlQ2xpY2soKVxuICAgICAgICB9fVxuICAgICAgICByZWY9e21ldGFjYXJkSW50ZXJhY3Rpb25NZW51U3RhdGUuYW5jaG9yUmVmfVxuICAgICAgICBzdHlsZT17eyBoZWlnaHQ6ICcxMDAlJyB9fVxuICAgICAgICBzaXplPVwic21hbGxcIlxuICAgICAgPlxuICAgICAgICB7c2VsZWN0ZWRSZXN1bHRzQXJyYXkubGVuZ3RofSBzZWxlY3RlZFxuICAgICAgICA8TW9yZUljb24gY2xhc3NOYW1lPVwiTXVpLXRleHQtdGV4dC1wcmltYXJ5XCIgLz5cbiAgICAgIDwvQnV0dG9uPlxuICAgICAgPFBvcG92ZXIgey4uLm1ldGFjYXJkSW50ZXJhY3Rpb25NZW51U3RhdGUuTXVpUG9wb3ZlclByb3BzfT5cbiAgICAgICAgPFBhcGVyPlxuICAgICAgICAgIDxMYXp5TWV0YWNhcmRJbnRlcmFjdGlvbnNcbiAgICAgICAgICAgIGxhenlSZXN1bHRzPXtzZWxlY3RlZFJlc3VsdHNBcnJheX1cbiAgICAgICAgICAgIG9uQ2xvc2U9e21ldGFjYXJkSW50ZXJhY3Rpb25NZW51U3RhdGUuaGFuZGxlQ2xvc2V9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9QYXBlcj5cbiAgICAgIDwvUG9wb3Zlcj5cbiAgICA8Lz5cbiAgKVxufVxuY29uc3QgZHluYW1pY0FjdGlvbkNsYXNzZXMgPSAnaC1mdWxsJ1xuY29uc3QgRHluYW1pY0FjdGlvbnMgPSAoeyBsYXp5UmVzdWx0IH06IHsgbGF6eVJlc3VsdDogTGF6eVF1ZXJ5UmVzdWx0IH0pID0+IHtcbiAgY29uc3QgeyBzZXRQcm9wcyB9ID0gdXNlRGlhbG9nKClcbiAgY29uc3QgbWV0YWNhcmRJbnRlcmFjdGlvbk1lbnVTdGF0ZSA9IHVzZU1lbnVTdGF0ZSgpXG4gIGNvbnN0IERvd25sb2FkQ29tcG9uZW50ID0gdXNlRG93bmxvYWRDb21wb25lbnQoKVxuICByZXR1cm4gKFxuICAgIDxHcmlkIGNvbnRhaW5lciBkaXJlY3Rpb249XCJjb2x1bW5cIiB3cmFwPVwibm93cmFwXCIgYWxpZ25JdGVtcz1cImNlbnRlclwiPlxuICAgICAgPEdyaWQgaXRlbSBjbGFzc05hbWU9XCJoLWZ1bGxcIj5cbiAgICAgICAgPEJ1dHRvblxuICAgICAgICAgIGNvbXBvbmVudD1cImRpdlwiXG4gICAgICAgICAgZGF0YS1pZD1cInJlc3VsdC1pdGVtLW1vcmUtdmVydC1idXR0b25cIlxuICAgICAgICAgIG9uQ2xpY2s9eyhlOiBSZWFjdC5Nb3VzZUV2ZW50PEhUTUxEaXZFbGVtZW50LCBNb3VzZUV2ZW50PikgPT4ge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICAgICAgbWV0YWNhcmRJbnRlcmFjdGlvbk1lbnVTdGF0ZS5oYW5kbGVDbGljaygpXG4gICAgICAgICAgfX1cbiAgICAgICAgICBzdHlsZT17eyBoZWlnaHQ6ICcxMDAlJyB9fVxuICAgICAgICAgIHNpemU9XCJzbWFsbFwiXG4gICAgICAgICAgcmVmPXttZXRhY2FyZEludGVyYWN0aW9uTWVudVN0YXRlLmFuY2hvclJlZn1cbiAgICAgICAgPlxuICAgICAgICAgIDxNb3JlSWNvbiAvPlxuICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgPFBvcG92ZXJcbiAgICAgICAgICB7Li4ubWV0YWNhcmRJbnRlcmFjdGlvbk1lbnVTdGF0ZS5NdWlQb3BvdmVyUHJvcHN9XG4gICAgICAgICAga2VlcE1vdW50ZWQ9e3RydWV9XG4gICAgICAgID5cbiAgICAgICAgICA8UGFwZXI+XG4gICAgICAgICAgICA8TGF6eU1ldGFjYXJkSW50ZXJhY3Rpb25zXG4gICAgICAgICAgICAgIGxhenlSZXN1bHRzPXtbbGF6eVJlc3VsdF19XG4gICAgICAgICAgICAgIG9uQ2xvc2U9e21ldGFjYXJkSW50ZXJhY3Rpb25NZW51U3RhdGUuaGFuZGxlQ2xvc2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvUGFwZXI+XG4gICAgICAgIDwvUG9wb3Zlcj5cbiAgICAgIDwvR3JpZD5cbiAgICAgIDxHcmlkIGl0ZW0gY2xhc3NOYW1lPXtkeW5hbWljQWN0aW9uQ2xhc3Nlc30+XG4gICAgICAgIHtsYXp5UmVzdWx0Lmhhc0Vycm9ycygpID8gKFxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGRhdGEtaWQ9XCJ2YWxpZGF0aW9uLWVycm9ycy1pY29uXCJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtZnVsbFwiXG4gICAgICAgICAgICB0aXRsZT1cIkhhcyB2YWxpZGF0aW9uIGVycm9ycy5cIlxuICAgICAgICAgICAgZGF0YS1oZWxwPVwiSW5kaWNhdGVzIHRoZSBnaXZlbiByZXN1bHQgaGFzIGEgdmFsaWRhdGlvbiBlcnJvci5cbiAgICAgICAgICAgICAgICAgICAgIFNlZSB0aGUgJ1F1YWxpdHknIHRhYiBvZiB0aGUgcmVzdWx0IGZvciBtb3JlIGRldGFpbHMuXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8V2FybmluZ0ljb24gLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKSA6IChcbiAgICAgICAgICAnJ1xuICAgICAgICApfVxuICAgICAgPC9HcmlkPlxuICAgICAgPEdyaWQgaXRlbSBjbGFzc05hbWU9e2R5bmFtaWNBY3Rpb25DbGFzc2VzfT5cbiAgICAgICAgeyFsYXp5UmVzdWx0Lmhhc0Vycm9ycygpICYmIGxhenlSZXN1bHQuaGFzV2FybmluZ3MoKSA/IChcbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBkYXRhLWlkPVwidmFsaWRhdGlvbi13YXJuaW5ncy1pY29uXCJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtZnVsbFwiXG4gICAgICAgICAgICB0aXRsZT1cIkhhcyB2YWxpZGF0aW9uIHdhcm5pbmdzLlwiXG4gICAgICAgICAgICBkYXRhLWhlbHA9XCJJbmRpY2F0ZXMgdGhlIGdpdmVuIHJlc3VsdCBoYXMgYSB2YWxpZGF0aW9uIHdhcm5pbmcuXG4gICAgICAgICAgICAgICAgICAgICBTZWUgdGhlICdRdWFsaXR5JyB0YWIgb2YgdGhlIHJlc3VsdCBmb3IgbW9yZSBkZXRhaWxzLlwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFdhcm5pbmdJY29uIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgJydcbiAgICAgICAgKX1cbiAgICAgIDwvR3JpZD5cbiAgICAgIDxHcmlkIGl0ZW0gY2xhc3NOYW1lPXtkeW5hbWljQWN0aW9uQ2xhc3Nlc30+XG4gICAgICAgIHtsYXp5UmVzdWx0LnBsYWluLm1ldGFjYXJkLnByb3BlcnRpZXNbJ2V4dC5saW5rJ10gPyAoXG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgY29tcG9uZW50PVwiZGl2XCJcbiAgICAgICAgICAgIHRpdGxlPXtsYXp5UmVzdWx0LnBsYWluLm1ldGFjYXJkLnByb3BlcnRpZXNbJ2V4dC5saW5rJ119XG4gICAgICAgICAgICBvbkNsaWNrPXsoZTogUmVhY3QuTW91c2VFdmVudDxIVE1MRGl2RWxlbWVudCwgTW91c2VFdmVudD4pID0+IHtcbiAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICAgICAgICB3aW5kb3cub3BlbihsYXp5UmVzdWx0LnBsYWluLm1ldGFjYXJkLnByb3BlcnRpZXNbJ2V4dC5saW5rJ10pXG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgc3R5bGU9e3sgaGVpZ2h0OiAnMTAwJScgfX1cbiAgICAgICAgICAgIHNpemU9XCJzbWFsbFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPExpbmtJY29uIC8+XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICkgOiBudWxsfVxuICAgICAgPC9HcmlkPlxuICAgICAgPEdyaWQgaXRlbSBjbGFzc05hbWU9e2R5bmFtaWNBY3Rpb25DbGFzc2VzfT5cbiAgICAgICAge2xhenlSZXN1bHQuZ2V0RG93bmxvYWRVcmwoKSA/IChcbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICBjb21wb25lbnQ9XCJkaXZcIlxuICAgICAgICAgICAgZGF0YS1pZD1cImRvd25sb2FkLWJ1dHRvblwiXG4gICAgICAgICAgICBvbkNsaWNrPXsoZTogUmVhY3QuTW91c2VFdmVudDxIVE1MRGl2RWxlbWVudCwgTW91c2VFdmVudD4pID0+IHtcbiAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICAgICAgICBzZXRQcm9wcyh7XG4gICAgICAgICAgICAgICAgb3BlbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogPERvd25sb2FkQ29tcG9uZW50IGxhenlSZXN1bHRzPXtbbGF6eVJlc3VsdF19IC8+LFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIHN0eWxlPXt7IGhlaWdodDogJzEwMCUnIH19XG4gICAgICAgICAgICBzaXplPVwic21hbGxcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxHZXRBcHBJY29uIC8+XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICkgOiBudWxsfVxuICAgICAgPC9HcmlkPlxuICAgICAgPEV4dGVuc2lvbnMucmVzdWx0SXRlbVRpdGxlQWRkT24gbGF6eVJlc3VsdD17bGF6eVJlc3VsdH0gLz5cbiAgICAgIDxHcmlkIGl0ZW0gY2xhc3NOYW1lPXtkeW5hbWljQWN0aW9uQ2xhc3Nlc30+XG4gICAgICAgIHtsYXp5UmVzdWx0LmlzU2VhcmNoKCkgPyAoXG4gICAgICAgICAgPExpbmtcbiAgICAgICAgICAgIGNvbXBvbmVudD17QnV0dG9ufVxuICAgICAgICAgICAgZGF0YS1pZD1cImVkaXQtYnV0dG9uXCJcbiAgICAgICAgICAgIHRvPXtgL3NlYXJjaC8ke2xhenlSZXN1bHQucGxhaW4uaWR9YH1cbiAgICAgICAgICAgIHN0eWxlPXt7IGhlaWdodDogJzEwMCUnIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPEVkaXRJY29uIC8+XG4gICAgICAgICAgPC9MaW5rPlxuICAgICAgICApIDogbnVsbH1cbiAgICAgIDwvR3JpZD5cbiAgICAgIHsvKiogYWRkIGlubGluZSBlZGl0aW5nIGxhdGVyICovfVxuICAgICAgey8qIDxHcmlkIGl0ZW0gY2xhc3NOYW1lPVwiaC1mdWxsXCI+XG4gICAgICAgICAgIHtsYXp5UmVzdWx0LmlzU2VhcmNoKCkgPyAoXG4gICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgZGF0YS1pZD1cImVkaXQtYnV0dG9uXCJcbiAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgIHNldEVkaXQobGF6eVJlc3VsdClcbiAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICBzdHlsZT17eyBoZWlnaHQ6ICcxMDAlJyB9fVxuICAgICAgICAgICAgICAgc2l6ZT1cInNtYWxsXCJcbiAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICA8RWRpdEljb24gLz5cbiAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICA8L0dyaWQ+ICovfVxuICAgIDwvR3JpZD5cbiAgKVxufVxuZXhwb3J0IGNvbnN0IFNlbGVjdGlvbkJhY2tncm91bmQgPSAoe1xuICBsYXp5UmVzdWx0LFxufToge1xuICBsYXp5UmVzdWx0OiBMYXp5UXVlcnlSZXN1bHRcbiAgc3R5bGU/OiBSZWFjdC5DU1NQcm9wZXJ0aWVzXG59KSA9PiB7XG4gIGNvbnN0IGlzU2VsZWN0ZWQgPSB1c2VTZWxlY3Rpb25PZkxhenlSZXN1bHQoeyBsYXp5UmVzdWx0IH0pXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgbGVmdC0wIHRvcC0wIHotMCB3LWZ1bGwgaC1mdWxsIE11aS1iZy1zZWNvbmRhcnlcIlxuICAgICAgc3R5bGU9e3tcbiAgICAgICAgb3BhY2l0eTogaXNTZWxlY3RlZCA/IDAuMDUgOiAwLFxuICAgICAgfX1cbiAgICAvPlxuICApXG59XG5jb25zdCBJY29uQnV0dG9uID0gKHtcbiAgbGF6eVJlc3VsdCxcbiAgc2VsZWN0aW9uSW50ZXJmYWNlLFxuICBpdGVtQ29udGVudFJlZixcbn06IHtcbiAgbGF6eVJlc3VsdDogTGF6eVF1ZXJ5UmVzdWx0XG4gIHNlbGVjdGlvbkludGVyZmFjZTogYW55XG4gIGl0ZW1Db250ZW50UmVmOiBSZWFjdC5SZWZPYmplY3Q8SFRNTEVsZW1lbnQ+XG59KSA9PiB7XG4gIGNvbnN0IE1ldGFjYXJkRGVmaW5pdGlvbnMgPSB1c2VNZXRhY2FyZERlZmluaXRpb25zKClcbiAgY29uc3QgaXNTZWxlY3RlZCA9IHVzZVNlbGVjdGlvbk9mTGF6eVJlc3VsdCh7IGxhenlSZXN1bHQgfSlcbiAgY29uc3QgUmVzdWx0SXRlbUFjdGlvbiA9IEV4dGVuc2lvblBvaW50cy5yZXN1bHRJdGVtQWN0aW9uKHtcbiAgICBsYXp5UmVzdWx0LFxuICAgIHNlbGVjdGlvbkludGVyZmFjZSxcbiAgICBpdGVtQ29udGVudFJlZixcbiAgICBjbGFzc05hbWU6XG4gICAgICAnc2NhbGUtMCBhYnNvbHV0ZSB6LTEwIGxlZnQtMCAtdHJhbnNsYXRlLXgtZnVsbCBtbC1bM3B4XSBncm91cC1ob3ZlcjpzY2FsZS0xMDAgdHJhbnNpdGlvbiBwdC0xJyxcbiAgfSlcbiAgY29uc3QgZXh0cmFDbGFzc2VzID0gUmVzdWx0SXRlbUFjdGlvblxuICAgID8gJ2dyb3VwLWhvdmVyOnNjYWxlLTUwIGdyb3VwLWhvdmVyOi10cmFuc2xhdGUteC1bODUlXSdcbiAgICA6ICcnXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIHtSZXN1bHRJdGVtQWN0aW9uICYmIChcbiAgICAgICAgPFJlc3VsdEl0ZW1BY3Rpb25cbiAgICAgICAgICBsYXp5UmVzdWx0PXtsYXp5UmVzdWx0fVxuICAgICAgICAgIHNlbGVjdGlvbkludGVyZmFjZT17c2VsZWN0aW9uSW50ZXJmYWNlfVxuICAgICAgICAgIGl0ZW1Db250ZW50UmVmPXtpdGVtQ29udGVudFJlZn1cbiAgICAgICAgLz5cbiAgICAgICl9XG4gICAgICA8QnV0dG9uXG4gICAgICAgIGNvbXBvbmVudD1cImRpdlwiXG4gICAgICAgIGRhdGEtaWQ9XCJzZWxlY3QtY2hlY2tib3hcIlxuICAgICAgICBvbkNsaWNrPXsoZXZlbnQ6IFJlYWN0Lk1vdXNlRXZlbnQ8SFRNTERpdkVsZW1lbnQsIE1vdXNlRXZlbnQ+KSA9PiB7XG4gICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCkgLy8gdGhpcyBidXR0b24gdGFrZXMgcHJlY2VkZW5jZSBvdmVyIHRoZSBlbmNsb3NpbmcgYnV0dG9uLCBhbmQgaXMgYWx3YXlzIGFkZGl0aXZlIC8gc3VidHJhY3RpdmUgKG5vIGRlc2VsZWN0IG9mIG90aGVyIHJlc3VsdHMpXG4gICAgICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICBsYXp5UmVzdWx0LnNoaWZ0U2VsZWN0KClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGF6eVJlc3VsdC5jb250cm9sU2VsZWN0KClcbiAgICAgICAgICB9XG4gICAgICAgIH19XG4gICAgICAgIGZvY3VzVmlzaWJsZUNsYXNzTmFtZT1cImZvY3VzLXZpc2libGVcIlxuICAgICAgICBjbGFzc05hbWU9XCJyZWxhdGl2ZSBwLTIgbWluLXctMCBvdXRsaW5lLW5vbmUgaC1mdWxsIGdyb3VwL2NoZWNrYm94IHNocmluay0wXCJcbiAgICAgID5cbiAgICAgICAgeygoKSA9PiB7XG4gICAgICAgICAgaWYgKGlzU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtleHRyYUNsYXNzZXN9IGFic29sdXRlIHctZnVsbCBoLWZ1bGwgbGVmdC0wIHRvcC0wIG9wYWNpdHktMCB0cmFuc2Zvcm0gdHJhbnNpdGlvbiBkdXJhdGlvbi0yMDAgZWFzZS1pbi1vdXQgLXRyYW5zbGF0ZS14LWZ1bGwgZ3JvdXAtaG92ZXIvY2hlY2tib3g6c2NhbGUtMTAwYH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8Q2hlY2tCb3hJY29uIGNsYXNzTmFtZT1cImdyb3VwLWhvdmVyL2NoZWNrYm94OmJsb2NrIGdyb3VwLWZvY3VzLXZpc2libGUvY2hlY2tib3g6YmxvY2sgaGlkZGVuXCIgLz5cbiAgICAgICAgICAgICAgICAgIDxDaGVja0ljb24gY2xhc3NOYW1lPVwiZ3JvdXAtaG92ZXIvY2hlY2tib3g6aGlkZGVuIGdyb3VwLWZvY3VzLXZpc2libGUvY2hlY2tib3g6aGlkZGVuIGJsb2NrXCIgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake2V4dHJhQ2xhc3Nlc30gdHJhbnNmb3JtIHRyYW5zaXRpb24gZHVyYXRpb24tMjAwIGVhc2UtaW4tb3V0IC10cmFuc2xhdGUteC1mdWxsIGdyb3VwLWZvY3VzLXZpc2libGUvY2hlY2tib3g6IXRyYW5zbGF0ZS14LTAgZ3JvdXAtaG92ZXIvY2hlY2tib3g6IXRyYW5zbGF0ZS14LTAgZ3JvdXAtaG92ZXIvY2hlY2tib3g6c2NhbGUtMTAwYH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8Q2hlY2tCb3hJY29uIGNsYXNzTmFtZT1cImdyb3VwLWhvdmVyL2NoZWNrYm94OmJsb2NrIGdyb3VwLWZvY3VzLXZpc2libGUvY2hlY2tib3g6YmxvY2sgaGlkZGVuXCIgLz5cbiAgICAgICAgICAgICAgICAgIDxDaGVja0ljb24gY2xhc3NOYW1lPVwiZ3JvdXAtaG92ZXIvY2hlY2tib3g6aGlkZGVuIGdyb3VwLWZvY3VzLXZpc2libGUvY2hlY2tib3g6aGlkZGVuIGJsb2NrXCIgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApXG4gICAgICAgICAgfSBlbHNlIGlmICghaXNTZWxlY3RlZCkge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0cmFuc2Zvcm0gXCI+XG4gICAgICAgICAgICAgICAgPENoZWNrQm94T3V0bGluZUJsYW5rSWNvblxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZ3JvdXAtaG92ZXIvY2hlY2tib3g6dmlzaWJsZSBncm91cC1mb2N1cy12aXNpYmxlL2NoZWNrYm94OnZpc2libGUgaW52aXNpYmxlYH1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgfSkoKX1cbiAgICAgICAgPHNwYW5cbiAgICAgICAgICBjbGFzc05hbWU9e2Ake2dldEljb25DbGFzc05hbWUoe1xuICAgICAgICAgICAgbGF6eVJlc3VsdCxcbiAgICAgICAgICB9KX0gZm9udC1hd2Vzb21lLXNwYW4gZ3JvdXAtZm9jdXMtdmlzaWJsZS9jaGVja2JveDppbnZpc2libGUgZ3JvdXAtaG92ZXIvY2hlY2tib3g6aW52aXNpYmxlIGFic29sdXRlIHotMCBsZWZ0LTEvMiB0b3AtMS8yIHRyYW5zZm9ybSAtdHJhbnNsYXRlLXgtMS8yIC10cmFuc2xhdGUteS0xLzJgfVxuICAgICAgICAgIGRhdGEtaGVscD17TWV0YWNhcmREZWZpbml0aW9ucy5nZXRBbGlhcygndGl0bGUnKX1cbiAgICAgICAgICB0aXRsZT17YCR7TWV0YWNhcmREZWZpbml0aW9ucy5nZXRBbGlhcygndGl0bGUnKX06ICR7XG4gICAgICAgICAgICBsYXp5UmVzdWx0LnBsYWluLm1ldGFjYXJkLnByb3BlcnRpZXMudGl0bGVcbiAgICAgICAgICB9YH1cbiAgICAgICAgLz5cbiAgICAgIDwvQnV0dG9uPlxuICAgIDwvPlxuICApXG59XG4vLyBmYWN0b3JlZCBvdXQgZm9yIGVhc3kgZGVidWdnaW5nIChjYW4gYWRkIGJnLWdyYXktNDAwIHRvIHNlZSB0cmFpbClcbmNvbnN0IGRpYWdvbmFsSG92ZXJDbGFzc2VzID1cbiAgJ2Fic29sdXRlIHotNTAgcmlnaHQtMCBib3R0b20tMTAwIGgtNCB0cmFuc2Zvcm0gc2NhbGUtMCBncm91cC1ob3ZlcjpzY2FsZS0xMDAgdHJhbnNpdGlvbi1hbGwgYWJzb2x1dGUgei01MCByaWdodC0wIGJvdHRvbS0xMDAnXG4vLyBmYWtlIGV2ZW50IHRvIHBhc3MgcmlwcGxlLnN0b3BcbmNvbnN0IGZha2VFdmVudCA9IHtcbiAgdHlwZTogJycsXG59IGFzIGFueVxuZXhwb3J0IGNvbnN0IFJlc3VsdEl0ZW0gPSAoe1xuICBsYXp5UmVzdWx0LFxuICBtZWFzdXJlOiBvcmlnaW5hbE1lYXN1cmUsXG4gIHNlbGVjdGlvbkludGVyZmFjZSxcbn06IFJlc3VsdEl0ZW1GdWxsUHJvcHMpID0+IHtcbiAgY29uc3QgeyBnZXRWYWx1ZSwgb25TdGF0ZUNoYW5nZWQgfSA9IFJlYWN0LnVzZUNvbnRleHQoTGF5b3V0Q29udGV4dClcbiAgY29uc3QgTWV0YWNhcmREZWZpbml0aW9ucyA9IHVzZU1ldGFjYXJkRGVmaW5pdGlvbnMoKVxuICBjb25zdCByaXBwbGVSZWYgPSBSZWFjdC51c2VSZWY8e1xuICAgIHB1bHNhdGU6ICgpID0+IHZvaWRcbiAgICBzdG9wOiAoZTogYW55KSA9PiB2b2lkXG4gICAgc3RhcnQ6IChlOiBhbnkpID0+IHZvaWRcbiAgfT4obnVsbClcbiAgY29uc3QgeyBsaXN0ZW5UbyB9ID0gdXNlQmFja2JvbmUoKVxuICBjb25zdCBjb252ZXJ0VG9QcmVjaXNpb24gPSAodmFsdWU6IGFueSkgPT4ge1xuICAgIHJldHVybiB2YWx1ZSAmJiBkZWNpbWFsUHJlY2lzaW9uXG4gICAgICA/IE51bWJlcih2YWx1ZSkudG9GaXhlZChkZWNpbWFsUHJlY2lzaW9uKVxuICAgICAgOiB2YWx1ZVxuICB9XG4gIGNvbnN0IGNvbnZlcnRUb0Zvcm1hdCA9IHVzZUNvb3JkaW5hdGVGb3JtYXQoKVxuICBjb25zdCBbcmVuZGVyRXh0cmFzLCBzZXRSZW5kZXJFeHRyYXNdID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpIC8vIGR5bmFtaWMgYWN0aW9ucyBhcmUgYSBzaWduaWZpY2FudCBwYXJ0IG9mIHJlbmRlcmluZyB0aW1lLCBzbyBkZWxheSB1bnRpbCBuZWNlc3NhcnlcbiAgY29uc3QgW2RlY2ltYWxQcmVjaXNpb24sIHNldERlY2ltYWxQcmVjaXNpb25dID0gUmVhY3QudXNlU3RhdGUoXG4gICAgVHlwZWRVc2VySW5zdGFuY2UuZ2V0RGVjaW1hbFByZWNpc2lvbigpXG4gIClcbiAgY29uc3QgW3Nob3duQXR0cmlidXRlcywgc2V0U2hvd25BdHRyaWJ1dGVzXSA9IFJlYWN0LnVzZVN0YXRlKFxuICAgIGdldFZhbHVlKFJFU1VMVFNfQVRUUklCVVRFU19MSVNULCBnZXREZWZhdWx0UmVzdWx0c1Nob3duTGlzdCgpKSBhcyBzdHJpbmdbXVxuICApXG4gIHVzZVJlcmVuZGVyT25CYWNrYm9uZVN5bmMoeyBsYXp5UmVzdWx0IH0pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBsaXN0ZW5UbyhcbiAgICAgIHVzZXIuZ2V0KCd1c2VyJykuZ2V0KCdwcmVmZXJlbmNlcycpLFxuICAgICAgJ2NoYW5nZTpkZWNpbWFsUHJlY2lzaW9uJyxcbiAgICAgICgpID0+IHtcbiAgICAgICAgc2V0RGVjaW1hbFByZWNpc2lvbihUeXBlZFVzZXJJbnN0YW5jZS5nZXREZWNpbWFsUHJlY2lzaW9uKCkpXG4gICAgICB9XG4gICAgKVxuICAgIG9uU3RhdGVDaGFuZ2VkKCgpID0+IHtcbiAgICAgIGNvbnN0IHNob3duTGlzdCA9IGdldFZhbHVlKFxuICAgICAgICBSRVNVTFRTX0FUVFJJQlVURVNfTElTVCxcbiAgICAgICAgZ2V0RGVmYXVsdFJlc3VsdHNTaG93bkxpc3QoKVxuICAgICAgKVxuICAgICAgc2V0U2hvd25BdHRyaWJ1dGVzKHNob3duTGlzdClcbiAgICB9KVxuICB9LCBbXSlcblxuICAvKipcbiAgICogVW5mb2N1c2VkIChoaWRkZW4pIHRhYiBzZXRzIHRoZSBjb250YWluZXIgaGVpZ2h0IHRvIDBcbiAgICogUnVuIHRoZSBtZWFzdXJlIGZ1bmN0aW9uIHdoZW4gdGhlIGhlaWdodCBpcyAwIGNvdWxkIGNhdXNlIGl0ZW1zIGluc2lkZSB0aGUgdGFiIHRvIGJlIHVucmVhZGFibGVcbiAgICovXG4gIGNvbnN0IG1lYXN1cmUgPSAoKSA9PiB7XG4gICAgaWYgKFxuICAgICAgYnV0dG9uUmVmLmN1cnJlbnQ/LmNsaWVudEhlaWdodCAmJlxuICAgICAgYnV0dG9uUmVmLmN1cnJlbnQ/LmNsaWVudEhlaWdodCA+IDBcbiAgICApIHtcbiAgICAgIG9yaWdpbmFsTWVhc3VyZSgpXG4gICAgfVxuICB9XG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbWVhc3VyZSgpXG4gIH0sIFtzaG93bkF0dHJpYnV0ZXMsIGNvbnZlcnRUb0Zvcm1hdF0pXG4gIGxpc3RlblRvKHdyZXFyLnZlbnQsICdhY3RpdmVDb250ZW50SXRlbUNoYW5nZWQnLCAoKSA9PiB7XG4gICAgbWVhc3VyZSgpXG4gIH0pXG4gIGNvbnN0IHRodW1ibmFpbCA9IGxhenlSZXN1bHQucGxhaW4ubWV0YWNhcmQucHJvcGVydGllcy50aHVtYm5haWxcbiAgY29uc3QgaW1nc3JjID0gQ29tbW9uLmdldEltYWdlU3JjKHRodW1ibmFpbClcbiAgY29uc3QgYnV0dG9uUmVmID0gUmVhY3QudXNlUmVmPEhUTUxCdXR0b25FbGVtZW50PihudWxsKVxuICBjb25zdCBpdGVtQ29udGVudFJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbClcblxuICBjb25zdCBSZXN1bHRJdGVtQWRkT25JbnN0YW5jZSA9IEV4dGVuc2lvbnMucmVzdWx0SXRlbVJvd0FkZE9uKHtcbiAgICBsYXp5UmVzdWx0LFxuICAgIGlzVGFibGVWaWV3OiBmYWxzZSxcbiAgfSlcbiAgY29uc3QgUmVzdWx0VGl0bGVJY29uQWRkT25JbnN0YW5jZSA9IEV4dGVuc2lvbnMucmVzdWx0VGl0bGVJY29uQWRkT24oe1xuICAgIGxhenlSZXN1bHQsXG4gIH0pXG5cbiAgY29uc3Qgc2hvdWxkU2hvd1JlbGV2YW5jZSA9IHNob3dSZWxldmFuY2VTY29yZSh7IGxhenlSZXN1bHQgfSlcbiAgY29uc3Qgc2hvdWxkU2hvd1NvdXJjZSA9IHNob3dTb3VyY2UoKVxuICBjb25zdCBleHRyYUhpZ2hsaWdodHMgPSBPYmplY3Qua2V5cyhsYXp5UmVzdWx0LmhpZ2hsaWdodHMpLmZpbHRlcihcbiAgICAoYXR0cikgPT4gIXNob3duQXR0cmlidXRlcy5maW5kKChzaG93bkF0dHJpYnV0ZSkgPT4gc2hvd25BdHRyaWJ1dGUgPT09IGF0dHIpXG4gIClcbiAgY29uc3QgZ2V0RGlzcGxheVZhbHVlID0gKHtcbiAgICBkZXRhaWwsXG4gICAgbGF6eVJlc3VsdCxcbiAgfToge1xuICAgIGRldGFpbDogc3RyaW5nXG4gICAgbGF6eVJlc3VsdDogTGF6eVF1ZXJ5UmVzdWx0XG4gIH0pID0+IHtcbiAgICBsZXQgdmFsdWUgPSBsYXp5UmVzdWx0LnBsYWluLm1ldGFjYXJkLnByb3BlcnRpZXNbZGV0YWlsXVxuICAgIGlmICh2YWx1ZSAmJiBNZXRhY2FyZERlZmluaXRpb25zLmdldEF0dHJpYnV0ZU1hcCgpW2RldGFpbF0pIHtcbiAgICAgIHN3aXRjaCAoTWV0YWNhcmREZWZpbml0aW9ucy5nZXRBdHRyaWJ1dGVNYXAoKVtkZXRhaWxdLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnREFURSc6XG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLm1hcCgodmFsOiBhbnkpID0+XG4gICAgICAgICAgICAgIFR5cGVkVXNlckluc3RhbmNlLmdldE1vbWVudERhdGUodmFsKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YWx1ZSA9IFR5cGVkVXNlckluc3RhbmNlLmdldE1vbWVudERhdGUodmFsdWUpXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ0dFT01FVFJZJzpcbiAgICAgICAgICBpZiAodmFsdWUuY29uc3RydWN0b3IgPT09IEFycmF5KSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLm1hcCgodmFsOiBhbnkpID0+IGNvbnZlcnRUb0Zvcm1hdCh2YWwpKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YWx1ZSA9IGNvbnZlcnRUb0Zvcm1hdCh2YWx1ZSlcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnTE9ORyc6XG4gICAgICAgIGNhc2UgJ0RPVUJMRSc6XG4gICAgICAgIGNhc2UgJ0ZMT0FUJzpcbiAgICAgICAgICBpZiAodmFsdWUuY29uc3RydWN0b3IgPT09IEFycmF5KSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLm1hcCgodmFsOiBhbnkpID0+IGNvbnZlcnRUb1ByZWNpc2lvbih2YWwpKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YWx1ZSA9IGNvbnZlcnRUb1ByZWNpc2lvbih2YWx1ZSlcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLmpvaW4oJywgJylcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlXG4gIH1cbiAgY29uc3QgZGV0YWlsc01hcCA9IHNob3duQXR0cmlidXRlc1xuICAgIC5zbGljZSgxKSAvLyByZW1vdmUgdG9wIG9uZSBzaW5jZSB0aGF0J3Mgc3BlY2lhbFxuICAgIC5tYXAoKGRldGFpbCkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYXR0cmlidXRlOiBkZXRhaWwsXG4gICAgICAgIHZhbHVlOiBnZXREaXNwbGF5VmFsdWUoeyBkZXRhaWwsIGxhenlSZXN1bHQgfSksXG4gICAgICB9XG4gICAgfSlcbiAgICAuZmlsdGVyKChkZXRhaWwpID0+IHtcbiAgICAgIC8vIHRoaXMgaXMgc3BlY2lhbCBhbmQgaXMgaGFuZGxlZCBkaWZmZXJlbnRseSwgc2VlIHNob3cgc291cmNlXG4gICAgICBpZiAoZGV0YWlsLmF0dHJpYnV0ZSA9PT0gJ3NvdXJjZS1pZCcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICByZXR1cm4gZGV0YWlsLnZhbHVlXG4gICAgfSlcbiAgcmV0dXJuIChcbiAgICA8YnV0dG9uXG4gICAgICBkYXRhLWlkPVwicmVzdWx0LWl0ZW0tY29udGFpbmVyLWJ1dHRvblwiXG4gICAgICBvbk1vdXNlRG93bj17KGV2ZW50OiBhbnkpID0+IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNoaWZ0IGtleSBjYW4gY2F1c2Ugc2VsZWN0aW9ucyBzaW5jZSB3ZSBzZXQgdGhlIGNsYXNzIHRvIGFsbG93IHRleHQgc2VsZWN0aW9uLFxuICAgICAgICAgKiBzbyB0aGUgb25seSBzY2VuYXJpbyB3ZSB3YW50IHRvIHByZXZlbnQgdGhhdCBpbiBpcyB3aGVuIHNoaWZ0IGNsaWNraW5nXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgICAgICBjbGVhclNlbGVjdGlvbigpXG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0b3AgdGhlIHJpcHBsZSB0aGF0IHN0YXJ0cyBvbiBmb2N1cywgdGhhdCdzIG9ubHkgZm9yIG5hdmlnYXRpbmcgYnkga2V5Ym9hcmRcbiAgICAgICAgICovXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGlmIChyaXBwbGVSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgcmlwcGxlUmVmLmN1cnJlbnQuc3RvcChmYWtlRXZlbnQpXG4gICAgICAgICAgfVxuICAgICAgICB9LCAwKVxuICAgICAgfX1cbiAgICAgIG9uQ2xpY2s9eyhldmVudDogYW55KSA9PiB7XG4gICAgICAgIGlmIChoYXNTZWxlY3Rpb24oKSkge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudC5zaGlmdEtleSkge1xuICAgICAgICAgIGxhenlSZXN1bHQuc2hpZnRTZWxlY3QoKVxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSkge1xuICAgICAgICAgIGxhenlSZXN1bHQuY29udHJvbFNlbGVjdCgpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGF6eVJlc3VsdC5zZWxlY3QoKVxuICAgICAgICB9XG4gICAgICAgIGlmIChyaXBwbGVSZWYuY3VycmVudCkge1xuICAgICAgICAgIHJpcHBsZVJlZi5jdXJyZW50LnN0YXJ0KGV2ZW50KVxuICAgICAgICB9XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGlmIChyaXBwbGVSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgcmlwcGxlUmVmLmN1cnJlbnQuc3RvcChmYWtlRXZlbnQpXG4gICAgICAgICAgfVxuICAgICAgICB9LCAyMDApXG4gICAgICB9fVxuICAgICAgb25Nb3VzZUxlYXZlPXsoKSA9PiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIGlzIHRvIHByZXZlbnQgd2VpcmRuZXNzIHdpdGggdGhlIGR5bmFtaWMgYWN0aW9ucywgd2hlcmUgY2xpY2tpbmcgYSBtZW51IG9wdGlvbiB0aGVyZSBhZGRzIGZvY3VzLFxuICAgICAgICAgKiB0aHVzIG1ha2luZyB0aGUgZHluYW1pYyBhY3Rpb25zIHN0YXkgdmlzaWJsZSB3aGVuIHRoZSB1c2VyIHN0YXJ0cyB0byBtb3VzZSBhd2F5LlxuICAgICAgICAgKi9cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmXG4gICAgICAgICAgICBidXR0b25SZWYuY3VycmVudCAmJlxuICAgICAgICAgICAgYnV0dG9uUmVmLmN1cnJlbnQuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIDsoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBhcyBhbnkpLmJsdXIoKVxuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpXG4gICAgICAgIH1cbiAgICAgIH19XG4gICAgICBvbk1vdXNlRW50ZXI9eygpID0+IHtcbiAgICAgICAgc2V0UmVuZGVyRXh0cmFzKHRydWUpXG4gICAgICB9fVxuICAgICAgb25Gb2N1cz17KGU6IGFueSkgPT4ge1xuICAgICAgICBzZXRSZW5kZXJFeHRyYXModHJ1ZSlcbiAgICAgICAgaWYgKGUudGFyZ2V0ID09PSBlLmN1cnJlbnRUYXJnZXQgJiYgcmlwcGxlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICByaXBwbGVSZWYuY3VycmVudC5wdWxzYXRlKClcbiAgICAgICAgfVxuICAgICAgfX1cbiAgICAgIG9uQmx1cj17KGU6IGFueSkgPT4ge1xuICAgICAgICBpZiAocmlwcGxlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICByaXBwbGVSZWYuY3VycmVudC5zdG9wKGUpXG4gICAgICAgIH1cbiAgICAgIH19XG4gICAgICByZWY9e2J1dHRvblJlZn1cbiAgICAgIGNsYXNzTmFtZT17YHNlbGVjdC10ZXh0IG91dGxpbmUtbm9uZSBweC02IHByLTEyIHAtMiB0ZXh0LWxlZnQgYnJlYWstd29yZHMgZ3JvdXAgdy1mdWxsIE11aS1iZy1idXR0b25gfVxuICAgID5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsXCI+XG4gICAgICAgIDxUb3VjaFJpcHBsZSByZWY9e3JpcHBsZVJlZn0gLz5cbiAgICAgICAgPFNlbGVjdGlvbkJhY2tncm91bmQgbGF6eVJlc3VsdD17bGF6eVJlc3VsdH0gLz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgcmVsYXRpdmUgei0wXCIgcmVmPXtpdGVtQ29udGVudFJlZn0+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBpdGVtcy1zdGFydFwiPlxuICAgICAgICAgICAgPEljb25CdXR0b25cbiAgICAgICAgICAgICAgbGF6eVJlc3VsdD17bGF6eVJlc3VsdH1cbiAgICAgICAgICAgICAgc2VsZWN0aW9uSW50ZXJmYWNlPXtzZWxlY3Rpb25JbnRlcmZhY2V9XG4gICAgICAgICAgICAgIGl0ZW1Db250ZW50UmVmPXtpdGVtQ29udGVudFJlZn1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB7UmVzdWx0VGl0bGVJY29uQWRkT25JbnN0YW5jZSAmJiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHQtMiBwci0xXCI+e1Jlc3VsdFRpdGxlSWNvbkFkZE9uSW5zdGFuY2V9PC9kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBkYXRhLWlkPXtgcmVzdWx0LWl0ZW0tJHtzaG93bkF0dHJpYnV0ZXNbMF19LWxhYmVsYH1cbiAgICAgICAgICAgICAgdGl0bGU9e2Ake01ldGFjYXJkRGVmaW5pdGlvbnMuZ2V0QWxpYXMoc2hvd25BdHRyaWJ1dGVzWzBdKX1gfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzaHJpbmstMSB3LWZ1bGwgb3ZlcmZsb3ctYXV0byBzZWxmLWNlbnRlclwiXG4gICAgICAgICAgICAgIHN0eWxlPXt7IG1heEhlaWdodDogJzIwMHB4JywgbWluSGVpZ2h0OiAnMjFweCcgfX0gLy8gZmlyZWZveCB3aWxsIHNob3cgc2Nyb2xsYmFycyBhbHdheXMgd2l0aG91dCB0aGlzIG1pbkhlaWdodCA6U1xuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7c2hvd25BdHRyaWJ1dGVzWzBdID09PSAndGh1bWJuYWlsJyAmJiB0aHVtYm5haWwgPyAoXG4gICAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgICAgZGF0YS1pZD1cInJlc3VsdC1pdGVtLXRodW1ibmFpbFwiXG4gICAgICAgICAgICAgICAgICBzcmM9e2ltZ3NyY31cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1heFdpZHRoOiAnMTAwJScsIG1heEhlaWdodDogJzIwMHB4JyB9fVxuICAgICAgICAgICAgICAgICAgb25Mb2FkPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG1lYXN1cmUoKVxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIG9uRXJyb3I9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbWVhc3VyZSgpXG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICkgOiBsYXp5UmVzdWx0LmhpZ2hsaWdodHNbc2hvd25BdHRyaWJ1dGVzWzBdXSA/IChcbiAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tcbiAgICAgICAgICAgICAgICAgICAgX19odG1sOlxuICAgICAgICAgICAgICAgICAgICAgIGxhenlSZXN1bHQuaGlnaGxpZ2h0c1tzaG93bkF0dHJpYnV0ZXNbMF1dWzBdLmhpZ2hsaWdodCxcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICBnZXREaXNwbGF5VmFsdWUoeyBkZXRhaWw6IHNob3duQXR0cmlidXRlc1swXSwgbGF6eVJlc3VsdCB9KVxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgY2xhc3NOYW1lPXtgcGwtMyAke1xuICAgICAgICAgICAgICBSZXN1bHRJdGVtQWRkT25JbnN0YW5jZSAhPT0gbnVsbCB8fFxuICAgICAgICAgICAgICBkZXRhaWxzTWFwLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgZXh0cmFIaWdobGlnaHRzLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgc2hvdWxkU2hvd1JlbGV2YW5jZSB8fFxuICAgICAgICAgICAgICBzaG91bGRTaG93U291cmNlXG4gICAgICAgICAgICAgICAgPyAncGItMidcbiAgICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgICB9YH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8ZGl2PntSZXN1bHRJdGVtQWRkT25JbnN0YW5jZX08L2Rpdj5cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIHtkZXRhaWxzTWFwLm1hcCgoZGV0YWlsKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGRldGFpbC5hdHRyaWJ1dGUgPT09ICd0aHVtYm5haWwnKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgICAgICAgICAga2V5PXtkZXRhaWwuYXR0cmlidXRlfVxuICAgICAgICAgICAgICAgICAgICAgIGRhdGEtaWQ9XCJyZXN1bHQtaXRlbS10aHVtYm5haWxcIlxuICAgICAgICAgICAgICAgICAgICAgIHNyYz17aW1nc3JjfVxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5Ub3A6ICcxMHB4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heFdpZHRoOiAnMTAwJScsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhIZWlnaHQ6ICcyMDBweCcsXG4gICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICBvbkxvYWQ9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lYXN1cmUoKVxuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgb25FcnJvcj17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVhc3VyZSgpXG4gICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxQcm9wZXJ0eUNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICBrZXk9e2RldGFpbC5hdHRyaWJ1dGV9XG4gICAgICAgICAgICAgICAgICAgIGRhdGEtaGVscD17TWV0YWNhcmREZWZpbml0aW9ucy5nZXRBbGlhcyhkZXRhaWwuYXR0cmlidXRlKX1cbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2Ake01ldGFjYXJkRGVmaW5pdGlvbnMuZ2V0QWxpYXMoXG4gICAgICAgICAgICAgICAgICAgICAgZGV0YWlsLmF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgICAgICApfTogJHtkZXRhaWwudmFsdWV9YH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgey8qIEl0J3Mgb2theSB0byB1c2UgdGhlIGZpcnN0IG9uZSBoZXJlIHNpbmNlIHdlIG9ubHkgZXZlciB3YW50IHRvIGRpc3BsYXkgb25lLCBub3JtYWxseSB5b3UnZCB3YW50IHRvIG1hcCBvdmVyIHRoaXMgbGlzdCAqL31cbiAgICAgICAgICAgICAgICAgICAgICB7bGF6eVJlc3VsdC5oaWdobGlnaHRzW2RldGFpbC5hdHRyaWJ1dGVdID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX2h0bWw6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXp5UmVzdWx0LmhpZ2hsaWdodHNbZGV0YWlsLmF0dHJpYnV0ZV1bMF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmhpZ2hsaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldERpc3BsYXlWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbDogZGV0YWlsLmF0dHJpYnV0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGF6eVJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPC9Qcm9wZXJ0eUNvbXBvbmVudD5cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICB7ZXh0cmFIaWdobGlnaHRzLm1hcCgoZXh0cmFIaWdobGlnaHQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWxldmFudEhpZ2hsaWdodCA9XG4gICAgICAgICAgICAgICAgICBsYXp5UmVzdWx0LmhpZ2hsaWdodHNbZXh0cmFIaWdobGlnaHRdWzBdXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxQcm9wZXJ0eUNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICBrZXk9e3JlbGV2YW50SGlnaGxpZ2h0LmF0dHJpYnV0ZX1cbiAgICAgICAgICAgICAgICAgICAgZGF0YS1oZWxwPXtNZXRhY2FyZERlZmluaXRpb25zLmdldEFsaWFzKFxuICAgICAgICAgICAgICAgICAgICAgIHJlbGV2YW50SGlnaGxpZ2h0LmF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcFxuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtNZXRhY2FyZERlZmluaXRpb25zLmdldEFsaWFzKFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVsZXZhbnRIaWdobGlnaHQuYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICBfX2h0bWw6IHJlbGV2YW50SGlnaGxpZ2h0LmhpZ2hsaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICAgICAgPC9Qcm9wZXJ0eUNvbXBvbmVudD5cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICB7c2hvdWxkU2hvd1JlbGV2YW5jZSA/IChcbiAgICAgICAgICAgICAgICA8UHJvcGVydHlDb21wb25lbnRcbiAgICAgICAgICAgICAgICAgIGRhdGEtaGVscD17YFJlbGV2YW5jZTogJHtsYXp5UmVzdWx0LnBsYWluLnJlbGV2YW5jZX1gfVxuICAgICAgICAgICAgICAgICAgdGl0bGU9e2BSZWxldmFuY2U6ICR7bGF6eVJlc3VsdC5wbGFpbi5yZWxldmFuY2V9YH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8c3Bhbj57bGF6eVJlc3VsdC5nZXRSb3VuZGVkUmVsZXZhbmNlKCl9PC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvUHJvcGVydHlDb21wb25lbnQ+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgJydcbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAge3Nob3VsZFNob3dTb3VyY2UgPyAoXG4gICAgICAgICAgICAgICAgPFByb3BlcnR5Q29tcG9uZW50XG4gICAgICAgICAgICAgICAgICB0aXRsZT17YCR7TWV0YWNhcmREZWZpbml0aW9ucy5nZXRBbGlhcygnc291cmNlLWlkJyl9OiAke1xuICAgICAgICAgICAgICAgICAgICBsYXp5UmVzdWx0LnBsYWluLm1ldGFjYXJkLnByb3BlcnRpZXNbJ3NvdXJjZS1pZCddXG4gICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgIGRhdGEtaGVscD17TWV0YWNhcmREZWZpbml0aW9ucy5nZXRBbGlhcygnc291cmNlLWlkJyl9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgeyFsYXp5UmVzdWx0LmlzUmVtb3RlKCkgPyAoXG4gICAgICAgICAgICAgICAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmYSBmYS1ob21lXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBtYXJnaW5MZWZ0OiAnNXB4JyB9fT5sb2NhbDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmYSBmYS1jbG91ZFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgbWFyZ2luTGVmdDogJzVweCcgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bGF6eVJlc3VsdC5wbGFpbi5tZXRhY2FyZC5wcm9wZXJ0aWVzWydzb3VyY2UtaWQnXX1cbiAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvUHJvcGVydHlDb21wb25lbnQ+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgJydcbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAge3JlbmRlckV4dHJhcyA/IChcbiAgICAgICAgICA8PlxuICAgICAgICAgICAgeycgJ31cbiAgICAgICAgICAgIHsvKiB0cmljayB0byBrZWVwIHRoZSBkcm9wZG93biB2aXNpYmxlIG92ZXIgYW4gYXJjIG9mIHRoZSBjdXJzb3IsIHNvIHVzZXJzIGhhdmUgc29tZSBsZWV3YXkgaWYgZ29pbmcgZGlhZ29uYWwgdG8gdGhlIGFjdGlvbnMgZHJvcGRvd25zICoqL31cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtkaWFnb25hbEhvdmVyQ2xhc3Nlc30gdy1mdWxsIHRyYW5zZm9ybSB0cmFuc2xhdGUteS0xYH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7ZGlhZ29uYWxIb3ZlckNsYXNzZXN9IHctOS8xMiB0cmFuc2Zvcm0gdHJhbnNsYXRlLXktMiBgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtkaWFnb25hbEhvdmVyQ2xhc3Nlc30gdy02LzEyIHRyYW5zZm9ybSB0cmFuc2xhdGUteS0zYH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7ZGlhZ29uYWxIb3ZlckNsYXNzZXN9IHctNS8xMiB0cmFuc2Zvcm0gdHJhbnNsYXRlLXktNGB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake2RpYWdvbmFsSG92ZXJDbGFzc2VzfSB3LTQvMTIgdHJhbnNmb3JtIHRyYW5zbGF0ZS15LTVgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtkaWFnb25hbEhvdmVyQ2xhc3Nlc30gdy0zLzEyIHRyYW5zZm9ybSB0cmFuc2xhdGUteS02YH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7ZGlhZ29uYWxIb3ZlckNsYXNzZXN9IHctMi8xMiB0cmFuc2Zvcm0gdHJhbnNsYXRlLXktOGB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2BhYnNvbHV0ZSB6LTQwIGdyb3VwLWhvdmVyOnotNTAgZm9jdXMtd2l0aGluOnotNTAgcmlnaHQtMCB0b3AtMCBmb2N1cy13aXRoaW46b3BhY2l0eS0xMDAgZ3JvdXAtaG92ZXI6b3BhY2l0eS0xMDAgaG92ZXI6b3BhY2l0eS0xMDAgb3BhY2l0eS0wIGN1cnNvci1hdXRvIHRyYW5zZm9ybSBmb2N1cy13aXRoaW46c2NhbGUtMTAwIHRyYW5zaXRpb24tYWxsIGhvdmVyOnNjYWxlLTEwMCBlYXNlLWluLW91dCBkdXJhdGlvbi0yMDAgaG92ZXI6dHJhbnNsYXRlLXgtMCBob3ZlcjpzY2FsZS14LTEwMGB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxQYXBlclxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBlbGV2YXRpb249e0VsZXZhdGlvbnMub3ZlcmxheXN9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicC0yXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxEeW5hbWljQWN0aW9ucyBsYXp5UmVzdWx0PXtsYXp5UmVzdWx0fSAvPlxuICAgICAgICAgICAgICA8L1BhcGVyPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC8+XG4gICAgICAgICkgOiBudWxsfVxuICAgICAgPC9kaXY+XG4gICAgPC9idXR0b24+XG4gIClcbn1cbmV4cG9ydCBkZWZhdWx0IGhvdChtb2R1bGUpKFJlc3VsdEl0ZW0pXG4iXX0=