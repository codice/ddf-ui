import { __assign, __read } from "tslib";
import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import * as React from 'react';
import Spellcheck from '../spellcheck/spellcheck';
import Grid from '@mui/material/Grid';
import QueryFeed from './query-feed';
import LinearProgress from '@mui/material/LinearProgress';
import Paging from './paging';
import Paper from '@mui/material/Paper';
import Button from '@mui/material/Button';
import FilterListIcon from '@mui/icons-material/FilterList';
import ResultFilter from '../result-filter/result-filter';
import { useBackbone } from '../selection-checkbox/useBackbone.hook';
import EphemeralSearchSort from '../../react-component/query-sort-selection/ephemeral-search-sort';
import { useLazyResultsStatusFromSelectionInterface, useLazyResultsSelectedResultsFromSelectionInterface, } from '../selection-interface/hooks';
import VisualizationSelector from '../../react-component/visualization-selector/visualization-selector';
import LayoutDropdownIcon from '@mui/icons-material/ViewComfy';
import ArrowDownwardIcon from '@mui/icons-material/ArrowDownward';
import user from '../singletons/user-instance';
import MoreIcon from '@mui/icons-material/MoreVert';
import LazyMetacardInteractions from '../visualization/results-visual/lazy-metacard-interactions';
import { Elevations } from '../theme/theme';
import SelectionRipple from '../golden-layout/selection-ripple';
import Extensions from '../../extension-points';
import { useMenuState } from '../menu-state/menu-state';
import Popover from '@mui/material/Popover';
import Badge from '@mui/material/Badge';
var SelectedResults = function (_a) {
    var selectionInterface = _a.selectionInterface;
    var selectedResults = useLazyResultsSelectedResultsFromSelectionInterface({
        selectionInterface: selectionInterface,
    });
    var selectedResultsArray = Object.values(selectedResults);
    var _b = useMenuState(), MuiButtonProps = _b.MuiButtonProps, MuiPopoverProps = _b.MuiPopoverProps, handleClose = _b.handleClose;
    return (_jsxs(_Fragment, { children: [_jsxs(Button, __assign({ "data-id": "result-selector-more-vert-button", className: "relative ".concat(selectedResultsArray.length === 0 ? 'invisible' : ''), color: "primary", disabled: selectedResultsArray.length === 0, style: { height: '100%' }, size: "small" }, MuiButtonProps, { children: [selectedResultsArray.length, " selected", _jsx("div", { className: selectedResultsArray.length === 0 ? '' : 'Mui-text-text-primary', children: _jsx(MoreIcon, {}) })] })), _jsx(Popover, __assign({}, MuiPopoverProps, { keepMounted: true, children: _jsx(Paper, { children: _jsx(LazyMetacardInteractions, { lazyResults: selectedResultsArray, onClose: handleClose }) }) }))] }));
};
var determineResultFilterSize = function () {
    var resultFilters = user.get('user').get('preferences').get('resultFilter');
    if (!resultFilters || !resultFilters.filters) {
        return 0;
    }
    return resultFilters.filters.length;
};
var determineResultSortSize = function () {
    var resultSorts = user.get('user').get('preferences').get('resultSort');
    if (!resultSorts) {
        return 0;
    }
    return resultSorts.length;
};
var ResultSelector = function (_a) {
    var selectionInterface = _a.selectionInterface, model = _a.model, goldenLayout = _a.goldenLayout, layoutResult = _a.layoutResult, editLayoutRef = _a.editLayoutRef;
    var isSearching = useLazyResultsStatusFromSelectionInterface({
        selectionInterface: selectionInterface,
    }).isSearching;
    var _b = __read(React.useState(determineResultFilterSize()), 2), resultFilterSize = _b[0], setResultFilterSize = _b[1];
    var _c = __read(React.useState(determineResultSortSize()), 2), resultSortSize = _c[0], setResultSortSize = _c[1];
    var listenTo = useBackbone().listenTo;
    React.useEffect(function () {
        listenTo(user.get('user').get('preferences'), 'change:resultFilter', function () {
            setResultFilterSize(determineResultFilterSize());
        });
        listenTo(user.get('user').get('preferences'), 'change:resultSort', function () {
            setResultSortSize(determineResultSortSize());
        });
    }, []);
    var LayoutDropdown = Extensions.layoutDropdown({
        goldenLayout: goldenLayout,
        layoutResult: layoutResult,
        editLayoutRef: editLayoutRef,
    });
    var resultFilterMenuState = useMenuState();
    var resultSortMenuState = useMenuState();
    var layoutMenuState = useMenuState();
    return (_jsx(React.Fragment, { children: _jsxs(Grid, { container: true, alignItems: "center", justifyContent: "flex-start", direction: "row", children: [isSearching ? (_jsx(LinearProgress, { variant: "query", className: "opacity-100 absolute w-full h-1 left-0 bottom-0" })) : null, _jsx(Grid, { item: true, children: _jsx(Spellcheck, { selectionInterface: selectionInterface, model: model }, Math.random()) }), _jsx(Grid, { item: true, className: "relative z-10", children: _jsx(QueryFeed, { selectionInterface: selectionInterface }) }), _jsxs(Grid, { item: true, className: "relative z-0", children: [_jsx(SelectionRipple, { selectionInterface: selectionInterface }), _jsx(SelectedResults, { selectionInterface: selectionInterface })] }), _jsx(Grid, { item: true, className: "pl-2 mx-auto", children: _jsx(Paging, { selectionInterface: selectionInterface }) }), _jsxs(Grid, { item: true, className: "ml-auto", children: [_jsx(Button, __assign({ "data-id": "filter-button", variant: "text", color: "primary" }, resultFilterMenuState.MuiButtonProps, { children: _jsxs(Badge, { color: "secondary", badgeContent: resultFilterSize, anchorOrigin: {
                                    vertical: 'top',
                                    horizontal: 'left',
                                }, className: "items-center", children: [_jsx(FilterListIcon, { className: "Mui-text-text-primary" }), "Filter"] }) })), _jsx(Popover, __assign({}, resultFilterMenuState.MuiPopoverProps, { children: _jsx(Paper, { className: "p-3", elevation: Elevations.overlays, children: _jsx(ResultFilter, { closeDropdown: resultFilterMenuState.handleClose }) }) }))] }), _jsxs(Grid, { item: true, className: "pl-2", children: [_jsx(Button, __assign({ "data-id": "sort-button", variant: "text", color: "primary" }, resultSortMenuState.MuiButtonProps, { children: _jsxs(Badge, { color: "secondary", badgeContent: resultSortSize, anchorOrigin: {
                                    vertical: 'top',
                                    horizontal: 'left',
                                }, className: "items-center", children: [_jsx(ArrowDownwardIcon, { className: "Mui-text-text-primary" }), "Sort"] }) })), _jsx(Popover, __assign({}, resultSortMenuState.MuiPopoverProps, { children: _jsx(Paper, { className: "p-3", elevation: Elevations.overlays, children: _jsx(EphemeralSearchSort, { closeDropdown: resultSortMenuState.handleClose }) }) }))] }), _jsxs(Grid, { item: true, className: "pl-2", children: [_jsxs(Button, __assign({ "data-id": "layout-button", color: "primary" }, layoutMenuState.MuiButtonProps, { children: [_jsx(LayoutDropdownIcon, { className: "Mui-text-text-primary" }), _jsx("div", { className: "pl-1", children: "Layout" })] })), _jsx(Popover, __assign({}, layoutMenuState.MuiPopoverProps, { children: _jsx(Paper, { className: "p-3", elevation: Elevations.overlays, children: LayoutDropdown || (_jsx(VisualizationSelector, { onClose: layoutMenuState.handleClose, goldenLayout: goldenLayout })) }) }))] })] }) }));
};
export default ResultSelector;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzdWx0LXNlbGVjdG9yLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL21haW4vd2ViYXBwL2NvbXBvbmVudC9yZXN1bHQtc2VsZWN0b3IvcmVzdWx0LXNlbGVjdG9yLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU8sS0FBSyxLQUFLLE1BQU0sT0FBTyxDQUFBO0FBQzlCLE9BQU8sVUFBVSxNQUFNLDBCQUEwQixDQUFBO0FBQ2pELE9BQU8sSUFBSSxNQUFNLG9CQUFvQixDQUFBO0FBRXJDLE9BQU8sU0FBUyxNQUFNLGNBQWMsQ0FBQTtBQUNwQyxPQUFPLGNBQWMsTUFBTSw4QkFBOEIsQ0FBQTtBQUN6RCxPQUFPLE1BQU0sTUFBTSxVQUFVLENBQUE7QUFDN0IsT0FBTyxLQUFLLE1BQU0scUJBQXFCLENBQUE7QUFDdkMsT0FBTyxNQUFNLE1BQU0sc0JBQXNCLENBQUE7QUFDekMsT0FBTyxjQUFjLE1BQU0sZ0NBQWdDLENBQUE7QUFDM0QsT0FBTyxZQUFZLE1BQU0sZ0NBQWdDLENBQUE7QUFDekQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHdDQUF3QyxDQUFBO0FBQ3BFLE9BQU8sbUJBQW1CLE1BQU0sa0VBQWtFLENBQUE7QUFDbEcsT0FBTyxFQUNMLDBDQUEwQyxFQUMxQyxtREFBbUQsR0FDcEQsTUFBTSw4QkFBOEIsQ0FBQTtBQUVyQyxPQUFPLHFCQUFxQixNQUFNLHFFQUFxRSxDQUFBO0FBQ3ZHLE9BQU8sa0JBQWtCLE1BQU0sK0JBQStCLENBQUE7QUFDOUQsT0FBTyxpQkFBaUIsTUFBTSxtQ0FBbUMsQ0FBQTtBQUNqRSxPQUFPLElBQUksTUFBTSw2QkFBNkIsQ0FBQTtBQUM5QyxPQUFPLFFBQVEsTUFBTSw4QkFBOEIsQ0FBQTtBQUVuRCxPQUFPLHdCQUF3QixNQUFNLDREQUE0RCxDQUFBO0FBQ2pHLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQTtBQUMzQyxPQUFP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QUUsVUFBVSxDQUFDLFFBQVEsWUFDbEQsY0FBYyxJQUFJLENBQ2pCLEtBQUMscUJBQXFCLElBQ3BCLE9BQU8sRUFBRSxlQUFlLENBQUMsV0FBVyxFQUNwQyxZQUFZLEVBQUUsWUFBWSxHQUMxQixDQUNILEdBQ0ssSUFDQSxJQUNMLElBQ0YsR0FDUSxDQUNsQixDQUFBO0FBQ0gsQ0FBQyxDQUFBO0FBRUQsZUFBZSxjQUFjLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCBTcGVsbGNoZWNrIGZyb20gJy4uL3NwZWxsY2hlY2svc3BlbGxjaGVjaydcbmltcG9ydCBHcmlkIGZyb20gJ0BtdWkvbWF0ZXJpYWwvR3JpZCdcblxuaW1wb3J0IFF1ZXJ5RmVlZCBmcm9tICcuL3F1ZXJ5LWZlZWQnXG5pbXBvcnQgTGluZWFyUHJvZ3Jlc3MgZnJvbSAnQG11aS9tYXRlcmlhbC9MaW5lYXJQcm9ncmVzcydcbmltcG9ydCBQYWdpbmcgZnJvbSAnLi9wYWdpbmcnXG5pbXBvcnQgUGFwZXIgZnJvbSAnQG11aS9tYXRlcmlhbC9QYXBlcidcbmltcG9ydCBCdXR0b24gZnJvbSAnQG11aS9tYXRlcmlhbC9CdXR0b24nXG5pbXBvcnQgRmlsdGVyTGlzdEljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9GaWx0ZXJMaXN0J1xuaW1wb3J0IFJlc3VsdEZpbHRlciBmcm9tICcuLi9yZXN1bHQtZmlsdGVyL3Jlc3VsdC1maWx0ZXInXG5pbXBvcnQgeyB1c2VCYWNrYm9uZSB9IGZyb20gJy4uL3NlbGVjdGlvbi1jaGVja2JveC91c2VCYWNrYm9uZS5ob29rJ1xuaW1wb3J0IEVwaGVtZXJhbFNlYXJjaFNvcnQgZnJvbSAnLi4vLi4vcmVhY3QtY29tcG9uZW50L3F1ZXJ5LXNvcnQtc2VsZWN0aW9uL2VwaGVtZXJhbC1zZWFyY2gtc29ydCdcbmltcG9ydCB7XG4gIHVzZUxhenlSZXN1bHRzU3RhdHVzRnJvbVNlbGVjdGlvbkludGVyZmFjZSxcbiAgdXNlTGF6eVJlc3VsdHNTZWxlY3RlZFJlc3VsdHNGcm9tU2VsZWN0aW9uSW50ZXJmYWNlLFxufSBmcm9tICcuLi9zZWxlY3Rpb24taW50ZXJmYWNlL2hvb2tzJ1xuXG5pbXBvcnQgVmlzdWFsaXphdGlvblNlbGVjdG9yIGZyb20gJy4uLy4uL3JlYWN0LWNvbXBvbmVudC92aXN1YWxpemF0aW9uLXNlbGVjdG9yL3Zpc3VhbGl6YXRpb24tc2VsZWN0b3InXG5pbXBvcnQgTGF5b3V0RHJvcGRvd25JY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvVmlld0NvbWZ5J1xuaW1wb3J0IEFycm93RG93bndhcmRJY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvQXJyb3dEb3dud2FyZCdcbmltcG9ydCB1c2VyIGZyb20gJy4uL3NpbmdsZXRvbnMvdXNlci1pbnN0YW5jZSdcbmltcG9ydCBNb3JlSWNvbiBmcm9tICdAbXVpL2ljb25zLW1hdGVyaWFsL01vcmVWZXJ0J1xuXG5pbXBvcnQgTGF6eU1ldGFjYXJkSW50ZXJhY3Rpb25zIGZyb20gJy4uL3Zpc3VhbGl6YXRpb24vcmVzdWx0cy12aXN1YWwvbGF6eS1tZXRhY2FyZC1pbnRlcmFjdGlvbnMnXG5pbXBvcnQgeyBFbGV2YXRpb25zIH0gZnJvbSAnLi4vdGhlbWUvdGhlbWUnXG5pbXBvcnQgU2VsZWN0aW9uUmlwcGxlIGZyb20gJy4uL2dvbGRlbi1sYXlvdXQvc2VsZWN0aW9uLXJpcHBsZSdcbmltcG9ydCB7IFJlc3VsdFR5cGUgfSBmcm9tICcuLi8uLi9qcy9tb2RlbC9UeXBlcydcbmltcG9ydCBFeHRlbnNpb25zIGZyb20gJy4uLy4uL2V4dGVuc2lvbi1wb2ludHMnXG5pbXBvcnQgeyB1c2VNZW51U3RhdGUgfSBmcm9tICcuLi9tZW51LXN0YXRlL21lbnUtc3RhdGUnXG5pbXBvcnQgUG9wb3ZlciBmcm9tICdAbXVpL21hdGVyaWFsL1BvcG92ZXInXG5pbXBvcnQgQmFkZ2UgZnJvbSAnQG11aS9tYXRlcmlhbC9CYWRnZSdcblxuY29uc3QgU2VsZWN0ZWRSZXN1bHRzID0gKHsgc2VsZWN0aW9uSW50ZXJmYWNlIH06IGFueSkgPT4ge1xuICBjb25zdCBzZWxlY3RlZFJlc3VsdHMgPSB1c2VMYXp5UmVzdWx0c1NlbGVjdGVkUmVzdWx0c0Zyb21TZWxlY3Rpb25JbnRlcmZhY2Uoe1xuICAgIHNlbGVjdGlvbkludGVyZmFjZSxcbiAgfSlcbiAgY29uc3Qgc2VsZWN0ZWRSZXN1bHRzQXJyYXkgPSBPYmplY3QudmFsdWVzKHNlbGVjdGVkUmVzdWx0cylcbiAgY29uc3QgeyBNdWlCdXR0b25Qcm9wcywgTXVpUG9wb3ZlclByb3BzLCBoYW5kbGVDbG9zZSB9ID0gdXNlTWVudVN0YXRlKClcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8QnV0dG9uXG4gICAgICAgIGRhdGEtaWQ9XCJyZXN1bHQtc2VsZWN0b3ItbW9yZS12ZXJ0LWJ1dHRvblwiXG4gICAgICAgIGNsYXNzTmFtZT17YHJlbGF0aXZlICR7XG4gICAgICAgICAgc2VsZWN0ZWRSZXN1bHRzQXJyYXkubGVuZ3RoID09PSAwID8gJ2ludmlzaWJsZScgOiAnJ1xuICAgICAgICB9YH1cbiAgICAgICAgY29sb3I9XCJwcmltYXJ5XCJcbiAgICAgICAgZGlzYWJsZWQ9e3NlbGVjdGVkUmVzdWx0c0FycmF5Lmxlbmd0aCA9PT0gMH1cbiAgICAgICAgc3R5bGU9e3sgaGVpZ2h0OiAnMTAwJScgfX1cbiAgICAgICAgc2l6ZT1cInNtYWxsXCJcbiAgICAgICAgey4uLk11aUJ1dHRvblByb3BzfVxuICAgICAgPlxuICAgICAgICB7c2VsZWN0ZWRSZXN1bHRzQXJyYXkubGVuZ3RofSBzZWxlY3RlZFxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3NOYW1lPXtcbiAgICAgICAgICAgIHNlbGVjdGVkUmVzdWx0c0FycmF5Lmxlbmd0aCA9PT0gMCA/ICcnIDogJ011aS10ZXh0LXRleHQtcHJpbWFyeSdcbiAgICAgICAgICB9XG4gICAgICAgID5cbiAgICAgICAgICA8TW9yZUljb24gLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L0J1dHRvbj5cbiAgICAgIDxQb3BvdmVyIHsuLi5NdWlQb3BvdmVyUHJvcHN9IGtlZXBNb3VudGVkPXt0cnVlfT5cbiAgICAgICAgPFBhcGVyPlxuICAgICAgICAgIDxMYXp5TWV0YWNhcmRJbnRlcmFjdGlvbnNcbiAgICAgICAgICAgIGxhenlSZXN1bHRzPXtzZWxlY3RlZFJlc3VsdHNBcnJheX1cbiAgICAgICAgICAgIG9uQ2xvc2U9e2hhbmRsZUNsb3NlfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvUGFwZXI+XG4gICAgICA8L1BvcG92ZXI+XG4gICAgPC8+XG4gIClcbn1cblxuY29uc3QgZGV0ZXJtaW5lUmVzdWx0RmlsdGVyU2l6ZSA9ICgpID0+IHtcbiAgY29uc3QgcmVzdWx0RmlsdGVycyA9IHVzZXIuZ2V0KCd1c2VyJykuZ2V0KCdwcmVmZXJlbmNlcycpLmdldCgncmVzdWx0RmlsdGVyJylcbiAgaWYgKCFyZXN1bHRGaWx0ZXJzIHx8ICFyZXN1bHRGaWx0ZXJzLmZpbHRlcnMpIHtcbiAgICByZXR1cm4gMFxuICB9XG4gIHJldHVybiByZXN1bHRGaWx0ZXJzLmZpbHRlcnMubGVuZ3RoXG59XG5cbmNvbnN0IGRldGVybWluZVJlc3VsdFNvcnRTaXplID0gKCkgPT4ge1xuICBjb25zdCByZXN1bHRTb3J0cyA9IHVzZXIuZ2V0KCd1c2VyJykuZ2V0KCdwcmVmZXJlbmNlcycpLmdldCgncmVzdWx0U29ydCcpXG4gIGlmICghcmVzdWx0U29ydHMpIHtcbiAgICByZXR1cm4gMFxuICB9XG4gIHJldHVybiByZXN1bHRTb3J0cy5sZW5ndGhcbn1cblxudHlwZSBQcm9wcyA9IHtcbiAgc2VsZWN0aW9uSW50ZXJmYWNlOiBhbnlcbiAgbW9kZWw6IGFueVxuICBnb2xkZW5MYXlvdXQ6IGFueVxuICBsYXlvdXRSZXN1bHQ/OiBSZXN1bHRUeXBlXG4gIGVkaXRMYXlvdXRSZWY/OiBhbnlcbn1cblxuY29uc3QgUmVzdWx0U2VsZWN0b3IgPSAoe1xuICBzZWxlY3Rpb25JbnRlcmZhY2UsXG4gIG1vZGVsLFxuICBnb2xkZW5MYXlvdXQsXG4gIGxheW91dFJlc3VsdCxcbiAgZWRpdExheW91dFJlZixcbn06IFByb3BzKSA9PiB7XG4gIGNvbnN0IHsgaXNTZWFyY2hpbmcgfSA9IHVzZUxhenlSZXN1bHRzU3RhdHVzRnJvbVNlbGVjdGlvbkludGVyZmFjZSh7XG4gICAgc2VsZWN0aW9uSW50ZXJmYWNlLFxuICB9KVxuICBjb25zdCBbcmVzdWx0RmlsdGVyU2l6ZSwgc2V0UmVzdWx0RmlsdGVyU2l6ZV0gPSBSZWFjdC51c2VTdGF0ZShcbiAgICBkZXRlcm1pbmVSZXN1bHRGaWx0ZXJTaXplKClcbiAgKVxuICBjb25zdCBbcmVzdWx0U29ydFNpemUsIHNldFJlc3VsdFNvcnRTaXplXSA9IFJlYWN0LnVzZVN0YXRlKFxuICAgIGRldGVybWluZVJlc3VsdFNvcnRTaXplKClcbiAgKVxuICBjb25zdCB7IGxpc3RlblRvIH0gPSB1c2VCYWNrYm9uZSgpXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGlzdGVuVG8odXNlci5nZXQoJ3VzZXInKS5nZXQoJ3ByZWZlcmVuY2VzJyksICdjaGFuZ2U6cmVzdWx0RmlsdGVyJywgKCkgPT4ge1xuICAgICAgc2V0UmVzdWx0RmlsdGVyU2l6ZShkZXRlcm1pbmVSZXN1bHRGaWx0ZXJTaXplKCkpXG4gICAgfSlcbiAgICBsaXN0ZW5Ubyh1c2VyLmdldCgndXNlcicpLmdldCgncHJlZmVyZW5jZXMnKSwgJ2NoYW5nZTpyZXN1bHRTb3J0JywgKCkgPT4ge1xuICAgICAgc2V0UmVzdWx0U29ydFNpemUoZGV0ZXJtaW5lUmVzdWx0U29ydFNpemUoKSlcbiAgICB9KVxuICB9LCBbXSlcbiAgY29uc3QgTGF5b3V0RHJvcGRvd24gPSBFeHRlbnNpb25zLmxheW91dERyb3Bkb3duKHtcbiAgICBnb2xkZW5MYXlvdXQsXG4gICAgbGF5b3V0UmVzdWx0LFxuICAgIGVkaXRMYXlvdXRSZWYsXG4gIH0pXG4gIGNvbnN0IHJlc3VsdEZpbHRlck1lbnVTdGF0ZSA9IHVzZU1lbnVTdGF0ZSgpXG4gIGNvbnN0IHJlc3VsdFNvcnRNZW51U3RhdGUgPSB1c2VNZW51U3RhdGUoKVxuICBjb25zdCBsYXlvdXRNZW51U3RhdGUgPSB1c2VNZW51U3RhdGUoKVxuICByZXR1cm4gKFxuICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgIDxHcmlkXG4gICAgICAgIGNvbnRhaW5lclxuICAgICAgICBhbGlnbkl0ZW1zPVwiY2VudGVyXCJcbiAgICAgICAganVzdGlmeUNvbnRlbnQ9XCJmbGV4LXN0YXJ0XCJcbiAgICAgICAgZGlyZWN0aW9uPVwicm93XCJcbiAgICAgID5cbiAgICAgICAge2lzU2VhcmNoaW5nID8gKFxuICAgICAgICAgIDxMaW5lYXJQcm9ncmVzc1xuICAgICAgICAgICAgdmFyaWFudD1cInF1ZXJ5XCJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cIm9wYWNpdHktMTAwIGFic29sdXRlIHctZnVsbCBoLTEgbGVmdC0wIGJvdHRvbS0wXCJcbiAgICAgICAgICAvPlxuICAgICAgICApIDogbnVsbH1cblxuICAgICAgICA8R3JpZCBpdGVtPlxuICAgICAgICAgIDxTcGVsbGNoZWNrXG4gICAgICAgICAgICBrZXk9e01hdGgucmFuZG9tKCl9XG4gICAgICAgICAgICBzZWxlY3Rpb25JbnRlcmZhY2U9e3NlbGVjdGlvbkludGVyZmFjZX1cbiAgICAgICAgICAgIG1vZGVsPXttb2RlbH1cbiAgICAgICAgICAvPlxuICAgICAgICA8L0dyaWQ+XG4gICAgICAgIDxHcmlkIGl0ZW0gY2xhc3NOYW1lPVwicmVsYXRpdmUgei0xMFwiPlxuICAgICAgICAgIDxRdWVyeUZlZWQgc2VsZWN0aW9uSW50ZXJmYWNlPXtzZWxlY3Rpb25JbnRlcmZhY2V9IC8+XG4gICAgICAgIDwvR3JpZD5cblxuICAgICAgICA8R3JpZCBpdGVtIGNsYXNzTmFtZT1cInJlbGF0aXZlIHotMFwiPlxuICAgICAgICAgIDxTZWxlY3Rpb25SaXBwbGUgc2VsZWN0aW9uSW50ZXJmYWNlPXtzZWxlY3Rpb25JbnRlcmZhY2V9IC8+XG4gICAgICAgICAgPFNlbGVjdGVkUmVzdWx0cyBzZWxlY3Rpb25JbnRlcmZhY2U9e3NlbGVjdGlvbkludGVyZmFjZX0gLz5cbiAgICAgICAgPC9HcmlkPlxuICAgICAgICA8R3JpZCBpdGVtIGNsYXNzTmFtZT1cInBsLTIgbXgtYXV0b1wiPlxuICAgICAgICAgIDxQYWdpbmcgc2VsZWN0aW9uSW50ZXJmYWNlPXtzZWxlY3Rpb25JbnRlcmZhY2V9IC8+XG4gICAgICAgIDwvR3JpZD5cbiAgICAgICAgPEdyaWQgaXRlbSBjbGFzc05hbWU9XCJtbC1hdXRvXCI+XG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgZGF0YS1pZD1cImZpbHRlci1idXR0b25cIlxuICAgICAgICAgICAgdmFyaWFudD1cInRleHRcIlxuICAgICAgICAgICAgY29sb3I9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgIHsuLi5yZXN1bHRGaWx0ZXJNZW51U3RhdGUuTXVpQnV0dG9uUHJvcHN9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPEJhZGdlXG4gICAgICAgICAgICAgIGNvbG9yPVwic2Vjb25kYXJ5XCJcbiAgICAgICAgICAgICAgYmFkZ2VDb250ZW50PXtyZXN1bHRGaWx0ZXJTaXplfVxuICAgICAgICAgICAgICBhbmNob3JPcmlnaW49e3tcbiAgICAgICAgICAgICAgICB2ZXJ0aWNhbDogJ3RvcCcsXG4gICAgICAgICAgICAgICAgaG9yaXpvbnRhbDogJ2xlZnQnLFxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpdGVtcy1jZW50ZXJcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8RmlsdGVyTGlzdEljb24gY2xhc3NOYW1lPVwiTXVpLXRleHQtdGV4dC1wcmltYXJ5XCIgLz5cbiAgICAgICAgICAgICAgRmlsdGVyXG4gICAgICAgICAgICA8L0JhZGdlPlxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDxQb3BvdmVyIHsuLi5yZXN1bHRGaWx0ZXJNZW51U3RhdGUuTXVpUG9wb3ZlclByb3BzfT5cbiAgICAgICAgICAgIDxQYXBlciBjbGFzc05hbWU9XCJwLTNcIiBlbGV2YXRpb249e0VsZXZhdGlvbnMub3ZlcmxheXN9PlxuICAgICAgICAgICAgICA8UmVzdWx0RmlsdGVyIGNsb3NlRHJvcGRvd249e3Jlc3VsdEZpbHRlck1lbnVTdGF0ZS5oYW5kbGVDbG9zZX0gLz5cbiAgICAgICAgICAgIDwvUGFwZXI+XG4gICAgICAgICAgPC9Qb3BvdmVyPlxuICAgICAgICA8L0dyaWQ+XG4gICAgICAgIDxHcmlkIGl0ZW0gY2xhc3NOYW1lPVwicGwtMlwiPlxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIGRhdGEtaWQ9XCJzb3J0LWJ1dHRvblwiXG4gICAgICAgICAgICB2YXJpYW50PVwidGV4dFwiXG4gICAgICAgICAgICBjb2xvcj1cInByaW1hcnlcIlxuICAgICAgICAgICAgey4uLnJlc3VsdFNvcnRNZW51U3RhdGUuTXVpQnV0dG9uUHJvcHN9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPEJhZGdlXG4gICAgICAgICAgICAgIGNvbG9yPVwic2Vjb25kYXJ5XCJcbiAgICAgICAgICAgICAgYmFkZ2VDb250ZW50PXtyZXN1bHRTb3J0U2l6ZX1cbiAgICAgICAgICAgICAgYW5jaG9yT3JpZ2luPXt7XG4gICAgICAgICAgICAgICAgdmVydGljYWw6ICd0b3AnLFxuICAgICAgICAgICAgICAgIGhvcml6b250YWw6ICdsZWZ0JyxcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaXRlbXMtY2VudGVyXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPEFycm93RG93bndhcmRJY29uIGNsYXNzTmFtZT1cIk11aS10ZXh0LXRleHQtcHJpbWFyeVwiIC8+XG4gICAgICAgICAgICAgIFNvcnRcbiAgICAgICAgICAgIDwvQmFkZ2U+XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPFBvcG92ZXIgey4uLnJlc3VsdFNvcnRNZW51U3RhdGUuTXVpUG9wb3ZlclByb3BzfT5cbiAgICAgICAgICAgIDxQYXBlciBjbGFzc05hbWU9XCJwLTNcIiBlbGV2YXRpb249e0VsZXZhdGlvbnMub3ZlcmxheXN9PlxuICAgICAgICAgICAgICA8RXBoZW1lcmFsU2VhcmNoU29ydFxuICAgICAgICAgICAgICAgIGNsb3NlRHJvcGRvd249e3Jlc3VsdFNvcnRNZW51U3RhdGUuaGFuZGxlQ2xvc2V9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L1BhcGVyPlxuICAgICAgICAgIDwvUG9wb3Zlcj5cbiAgICAgICAgPC9HcmlkPlxuICAgICAgICA8R3JpZCBpdGVtIGNsYXNzTmFtZT1cInBsLTJcIj5cbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICBkYXRhLWlkPVwibGF5b3V0LWJ1dHRvblwiXG4gICAgICAgICAgICBjb2xvcj1cInByaW1hcnlcIlxuICAgICAgICAgICAgey4uLmxheW91dE1lbnVTdGF0ZS5NdWlCdXR0b25Qcm9wc31cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8TGF5b3V0RHJvcGRvd25JY29uIGNsYXNzTmFtZT1cIk11aS10ZXh0LXRleHQtcHJpbWFyeVwiIC8+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBsLTFcIj5MYXlvdXQ8L2Rpdj5cbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8UG9wb3ZlciB7Li4ubGF5b3V0TWVudVN0YXRlLk11aVBvcG92ZXJQcm9wc30+XG4gICAgICAgICAgICA8UGFwZXIgY2xhc3NOYW1lPVwicC0zXCIgZWxldmF0aW9uPXtFbGV2YXRpb25zLm92ZXJsYXlzfT5cbiAgICAgICAgICAgICAge0xheW91dERyb3Bkb3duIHx8IChcbiAgICAgICAgICAgICAgICA8VmlzdWFsaXphdGlvblNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICBvbkNsb3NlPXtsYXlvdXRNZW51U3RhdGUuaGFuZGxlQ2xvc2V9XG4gICAgICAgICAgICAgICAgICBnb2xkZW5MYXlvdXQ9e2dvbGRlbkxheW91dH1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9QYXBlcj5cbiAgICAgICAgICA8L1BvcG92ZXI+XG4gICAgICAgIDwvR3JpZD5cbiAgICAgIDwvR3JpZD5cbiAgICA8L1JlYWN0LkZyYWdtZW50PlxuICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IFJlc3VsdFNlbGVjdG9yXG4iXX0=