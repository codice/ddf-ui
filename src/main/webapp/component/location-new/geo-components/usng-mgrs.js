import { __assign } from "tslib";
/**
 * Copyright (c) Codice Foundation
 *
 * This is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser
 * General Public License as published by the Free Software Foundation, either version 3 of the
 * License, or any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without
 * even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
 * Lesser General Public License for more details. A copy of the GNU Lesser General Public License
 * is distributed along with this program and can be found at
 * <http://www.gnu.org/licenses/lgpl.html>.
 *
 **/
import React from 'react';
import { Radio, RadioItem } from '../../../react-component/radio/radio';
import TextField from '../../../react-component/text-field/index';
import { Units } from '../../../react-component/location/common';
import ListEditor from '../inputs/list-editor';
import { UsngCoordinate } from './coordinates';
var Point = function (props) {
    var usng = props.usng, setState = props.setState;
    return (React.createElement(UsngCoordinate, { value: usng.point, onChange: setState(function (draft, value) { return (draft.usng.point = value); }) }));
};
var Circle = function (props) {
    var usng = props.usng, setState = props.setState;
    return (React.createElement("div", { className: "flex flex-col flex-nowrap space-y-2" },
        React.createElement(UsngCoordinate, { value: usng.circle.point, onChange: setState(function (draft, value) { return (draft.usng.circle.point = value); }) }),
        React.createElement(Units, { value: usng.circle.units, onChange: setState(function (draft, value) { return (draft.usng.circle.units = value); }) },
            React.createElement(TextField
            // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; type: string; value: any; o... Remove this comment to see the full error message
            , { 
                // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; type: string; value: any; o... Remove this comment to see the full error message
                label: "Radius", type: "number", value: usng.circle.radius, onChange: setState(function (draft, value) { return (draft.usng.circle.radius = value); }) }))));
};
var Line = function (props) {
    var usng = props.usng, setState = props.setState;
    var grids = usng.line.list.map(function (_entry, index) { return (React.createElement(UsngCoordinate, { value: usng.line.list[index], onChange: setState(function (draft, value) { return (draft.usng.line.list[index] = value); }), key: index })); });
    return (React.createElement(ListEditor, { list: usng.line.list, defaultItem: "", onChange: setState(function (draft, value) { return (draft.usng.line.list = value); }) }, grids));
};
var Polygon = function (props) {
    var usng = props.usng, setState = props.setState;
    var grids = usng.polygon.list.map(function (_entry, index) { return (React.createElement(UsngCoordinate, { value: usng.polygon.list[index], onChange: setState(function (draft, value) { return (draft.usng.polygon.list[index] = value); }), key: index })); });
    return (React.createElement(ListEditor, { list: usng.polygon.list, defaultItem: "", onChange: setState(function (draft, value) { return (draft.usng.polygon.list = value); }) }, grids));
};
var BoundingBox = function (props) {
    var usng = props.usng, setState = props.setState;
    return (React.createElement(UsngCoordinate, { value: usng.boundingbox, onChange: setState(function (draft, value) { return (draft.usng.boundingbox = value); }) }));
};
var USNG = function (props) {
    var usng = props.usng, setState = props.setState;
    var inputs = {
        point: Point,
        circle: Circle,
        line: Line,
        polygon: Polygon,
        boundingbox: BoundingBox,
    };
    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message
    var Component = inputs[usng.shape] || null;
    return (React.createElement("div", null,
        React.createElement(Radio, { value: usng.shape, onChange: setState(function (draft, value) { return (draft.usng.shape = value); }) },
            React.createElement(RadioItem, { value: "point" }, "Point"),
            React.createElement(RadioItem, { value: "circle" }, "Circle"),
            React.createElement(RadioItem, { value: "line" }, "Line"),
            React.createElement(RadioItem, { value: "polygon" }, "Polygon"),
            React.createElement(RadioItem, { value: "boundingbox" }, "Bounding Box")),
        React.createElement("div", { className: "input-location mt-2" }, Component !== null ? React.createElement(Component, __assign({}, props)) : null)));
};
export default USNG;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNuZy1tZ3JzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vc3JjL21haW4vd2ViYXBwL2NvbXBvbmVudC9sb2NhdGlvbi1uZXcvZ2VvLWNvbXBvbmVudHMvdXNuZy1tZ3JzLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7Ozs7Ozs7SUFhSTtBQUNKLE9BQU8sS0FBSyxNQUFNLE9BQU8sQ0FBQTtBQUV6QixPQUFPLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxNQUFNLHNDQUFzQyxDQUFBO0FBQ3ZFLE9BQU8sU0FBUyxNQUFNLDJDQUEyQyxDQUFBO0FBQ2pFLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSwwQ0FBMEMsQ0FBQTtBQUNoRSxPQUFPLFVBQVUsTUFBTSx1QkFBdUIsQ0FBQTtBQUM5QyxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sZUFBZSxDQUFBO0FBRTlDLElBQU0sS0FBSyxHQUFHLFVBQUMsS0FBVTtJQUNmLElBQUEsSUFBSSxHQUFlLEtBQUssS0FBcEIsRUFBRSxRQUFRLEdBQUssS0FBSyxTQUFWLENBQVU7SUFDaEMsT0FBTyxDQUNMLG9CQUFDLGNBQWMsSUFDYixLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUssRUFDakIsUUFBUSxFQUFFLFFBQVEsQ0FDaEIsVUFBQyxLQUFVLEVBQUUsS0FBVSxJQUFLLE9BQUEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsRUFBMUIsQ0FBMEIsQ0FDdkQsR0FDRCxDQUNILENBQUE7QUFDSCxDQUFDLENBQUE7QUFFRCxJQUFNLE1BQU0sR0FBRyxVQUFDLEtBQVU7SUFDaEIsSUFBQSxJQUFJLEdBQWUsS0FBSyxLQUFwQixFQUFFLFFBQVEsR0FBSyxLQUFLLFNBQVYsQ0FBVTtJQUNoQyxPQUFPLENBQ0wsNkJBQUssU0FBUyxFQUFDLHFDQUFxQztRQUNsRCxvQkFBQyxjQUFjLElBQ2IsS0FBSyxFQUFFLElBQUks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QUFJLENBQUMsS0FBSyxFQUNqQixRQUFRLEVBQUUsUUFBUSxDQUNoQixVQUFDLEtBQVUsRUFBRSxLQUFVLElBQUssT0FBQSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxFQUExQixDQUEwQixDQUN2RDtZQUVELG9CQUFDLFNBQVMsSUFBQyxLQUFLLEVBQUMsT0FBTyxZQUFrQjtZQUMxQyxvQkFBQyxTQUFTLElBQUMsS0FBSyxFQUFDLFFBQVEsYUFBbUI7WUFDNUMsb0JBQUMsU0FBUyxJQUFDLEtBQUssRUFBQyxNQUFNLFdBQWlCO1lBQ3hDLG9CQUFDLFNBQVMsSUFBQyxLQUFLLEVBQUMsU0FBUyxjQUFvQjtZQUM5QyxvQkFBQyxTQUFTLElBQUMsS0FBSyxFQUFDLGFBQWEsbUJBQXlCLENBQ2pEO1FBQ1IsNkJBQUssU0FBUyxFQUFDLHFCQUFxQixJQUNqQyxTQUFTLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQyxvQkFBQyxTQUFTLGVBQUssS0FBSyxFQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FDakQsQ0FDRixDQUNQLENBQUE7QUFDSCxDQUFDLENBQUE7QUFFRCxlQUFlLElBQUksQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBDb2RpY2UgRm91bmRhdGlvblxuICpcbiAqIFRoaXMgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBMZXNzZXJcbiAqIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlXG4gKiBMaWNlbnNlLCBvciBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqXG4gKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0XG4gKiBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZSBHTlVcbiAqIExlc3NlciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuIEEgY29weSBvZiB0aGUgR05VIExlc3NlciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gKiBpcyBkaXN0cmlidXRlZCBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbSBhbmQgY2FuIGJlIGZvdW5kIGF0XG4gKiA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL2xncGwuaHRtbD4uXG4gKlxuICoqL1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuXG5pbXBvcnQgeyBSYWRpbywgUmFkaW9JdGVtIH0gZnJvbSAnLi4vLi4vLi4vcmVhY3QtY29tcG9uZW50L3JhZGlvL3JhZGlvJ1xuaW1wb3J0IFRleHRGaWVsZCBmcm9tICcuLi8uLi8uLi9yZWFjdC1jb21wb25lbnQvdGV4dC1maWVsZC9pbmRleCdcbmltcG9ydCB7IFVuaXRzIH0gZnJvbSAnLi4vLi4vLi4vcmVhY3QtY29tcG9uZW50L2xvY2F0aW9uL2NvbW1vbidcbmltcG9ydCBMaXN0RWRpdG9yIGZyb20gJy4uL2lucHV0cy9saXN0LWVkaXRvcidcbmltcG9ydCB7IFVzbmdDb29yZGluYXRlIH0gZnJvbSAnLi9jb29yZGluYXRlcydcblxuY29uc3QgUG9pbnQgPSAocHJvcHM6IGFueSkgPT4ge1xuICBjb25zdCB7IHVzbmcsIHNldFN0YXRlIH0gPSBwcm9wc1xuICByZXR1cm4gKFxuICAgIDxVc25nQ29vcmRpbmF0ZVxuICAgICAgdmFsdWU9e3VzbmcucG9pbnR9XG4gICAgICBvbkNoYW5nZT17c2V0U3RhdGUoXG4gICAgICAgIChkcmFmdDogYW55LCB2YWx1ZTogYW55KSA9PiAoZHJhZnQudXNuZy5wb2ludCA9IHZhbHVlKVxuICAgICAgKX1cbiAgICAvPlxuICApXG59XG5cbmNvbnN0IENpcmNsZSA9IChwcm9wczogYW55KSA9PiB7XG4gIGNvbnN0IHsgdXNuZywgc2V0U3RhdGUgfSA9IHByb3BzXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGZsZXgtbm93cmFwIHNwYWNlLXktMlwiPlxuICAgICAgPFVzbmdDb29yZGluYXRlXG4gICAgICAgIHZhbHVlPXt1c25nLmNpcmNsZS5wb2ludH1cbiAgICAgICAgb25DaGFuZ2U9e3NldFN0YXRlKFxuICAgICAgICAgIChkcmFmdDogYW55LCB2YWx1ZTogYW55KSA9PiAoZHJhZnQudXNuZy5jaXJjbGUucG9pbnQgPSB2YWx1ZSlcbiAgICAgICAgKX1cbiAgICAgIC8+XG4gICAgICA8VW5pdHNcbiAgICAgICAgdmFsdWU9e3VzbmcuY2lyY2xlLnVuaXRzfVxuICAgICAgICBvbkNoYW5nZT17c2V0U3RhdGUoXG4gICAgICAgICAgKGRyYWZ0OiBhbnksIHZhbHVlOiBhbnkpID0+IChkcmFmdC51c25nLmNpcmNsZS51bml0cyA9IHZhbHVlKVxuICAgICAgICApfVxuICAgICAgPlxuICAgICAgICA8VGV4dEZpZWxkXG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciB0cy1taWdyYXRlKDIzMjIpIEZJWE1FOiBUeXBlICd7IGxhYmVsOiBzdHJpbmc7IHR5cGU6IHN0cmluZzsgdmFsdWU6IGFueTsgby4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgbGFiZWw9XCJSYWRpdXNcIlxuICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICAgIHZhbHVlPXt1c25nLmNpcmNsZS5yYWRpdXN9XG4gICAgICAgICAgb25DaGFuZ2U9e3NldFN0YXRlKFxuICAgICAgICAgICAgKGRyYWZ0OiBhbnksIHZhbHVlOiBhbnkpID0+IChkcmFmdC51c25nLmNpcmNsZS5yYWRpdXMgPSB2YWx1ZSlcbiAgICAgICAgICApfVxuICAgICAgICAvPlxuICAgICAgPC9Vbml0cz5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5jb25zdCBMaW5lID0gKHByb3BzOiBhbnkpID0+IHtcbiAgY29uc3QgeyB1c25nLCBzZXRTdGF0ZSB9ID0gcHJvcHNcbiAgY29uc3QgZ3JpZHMgPSB1c25nLmxpbmUubGlzdC5tYXAoKF9lbnRyeTogYW55LCBpbmRleDogYW55KSA9PiAoXG4gICAgPFVzbmdDb29yZGluYXRlXG4gICAgICB2YWx1ZT17dXNuZy5saW5lLmxpc3RbaW5kZXhdfVxuICAgICAgb25DaGFuZ2U9e3NldFN0YXRlKFxuICAgICAgICAoZHJhZnQ6IGFueSwgdmFsdWU6IGFueSkgPT4gKGRyYWZ0LnVzbmcubGluZS5saXN0W2luZGV4XSA9IHZhbHVlKVxuICAgICAgKX1cbiAgICAgIGtleT17aW5kZXh9XG4gICAgLz5cbiAgKSlcblxuICByZXR1cm4gKFxuICAgIDxMaXN0RWRpdG9yXG4gICAgICBsaXN0PXt1c25nLmxpbmUubGlzdH1cbiAgICAgIGRlZmF1bHRJdGVtPVwiXCJcbiAgICAgIG9uQ2hhbmdlPXtzZXRTdGF0ZShcbiAgICAgICAgKGRyYWZ0OiBhbnksIHZhbHVlOiBhbnkpID0+IChkcmFmdC51c25nLmxpbmUubGlzdCA9IHZhbHVlKVxuICAgICAgKX1cbiAgICA+XG4gICAgICB7Z3JpZHN9XG4gICAgPC9MaXN0RWRpdG9yPlxuICApXG59XG5cbmNvbnN0IFBvbHlnb24gPSAocHJvcHM6IGFueSkgPT4ge1xuICBjb25zdCB7IHVzbmcsIHNldFN0YXRlIH0gPSBwcm9wc1xuICBjb25zdCBncmlkcyA9IHVzbmcucG9seWdvbi5saXN0Lm1hcCgoX2VudHJ5OiBhbnksIGluZGV4OiBhbnkpID0+IChcbiAgICA8VXNuZ0Nvb3JkaW5hdGVcbiAgICAgIHZhbHVlPXt1c25nLnBvbHlnb24ubGlzdFtpbmRleF19XG4gICAgICBvbkNoYW5nZT17c2V0U3RhdGUoXG4gICAgICAgIChkcmFmdDogYW55LCB2YWx1ZTogYW55KSA9PiAoZHJhZnQudXNuZy5wb2x5Z29uLmxpc3RbaW5kZXhdID0gdmFsdWUpXG4gICAgICApfVxuICAgICAga2V5PXtpbmRleH1cbiAgICAvPlxuICApKVxuXG4gIHJldHVybiAoXG4gICAgPExpc3RFZGl0b3JcbiAgICAgIGxpc3Q9e3VzbmcucG9seWdvbi5saXN0fVxuICAgICAgZGVmYXVsdEl0ZW09XCJcIlxuICAgICAgb25DaGFuZ2U9e3NldFN0YXRlKFxuICAgICAgICAoZHJhZnQ6IGFueSwgdmFsdWU6IGFueSkgPT4gKGRyYWZ0LnVzbmcucG9seWdvbi5saXN0ID0gdmFsdWUpXG4gICAgICApfVxuICAgID5cbiAgICAgIHtncmlkc31cbiAgICA8L0xpc3RFZGl0b3I+XG4gIClcbn1cblxuY29uc3QgQm91bmRpbmdCb3ggPSAocHJvcHM6IGFueSkgPT4ge1xuICBjb25zdCB7IHVzbmcsIHNldFN0YXRlIH0gPSBwcm9wc1xuICByZXR1cm4gKFxuICAgIDxVc25nQ29vcmRpbmF0ZVxuICAgICAgdmFsdWU9e3VzbmcuYm91bmRpbmdib3h9XG4gICAgICBvbkNoYW5nZT17c2V0U3RhdGUoXG4gICAgICAgIChkcmFmdDogYW55LCB2YWx1ZTogYW55KSA9PiAoZHJhZnQudXNuZy5ib3VuZGluZ2JveCA9IHZhbHVlKVxuICAgICAgKX1cbiAgICAvPlxuICApXG59XG5cbmNvbnN0IFVTTkcgPSAocHJvcHM6IGFueSkgPT4ge1xuICBjb25zdCB7IHVzbmcsIHNldFN0YXRlIH0gPSBwcm9wc1xuXG4gIGNvbnN0IGlucHV0cyA9IHtcbiAgICBwb2ludDogUG9pbnQsXG4gICAgY2lyY2xlOiBDaXJjbGUsXG4gICAgbGluZTogTGluZSxcbiAgICBwb2x5Z29uOiBQb2x5Z29uLFxuICAgIGJvdW5kaW5nYm94OiBCb3VuZGluZ0JveCxcbiAgfVxuXG4gIC8vIEB0cy1leHBlY3QtZXJyb3IgdHMtbWlncmF0ZSg3MDUzKSBGSVhNRTogRWxlbWVudCBpbXBsaWNpdGx5IGhhcyBhbiAnYW55JyB0eXBlIGJlY2F1c2UgZXhwcmUuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICBjb25zdCBDb21wb25lbnQgPSBpbnB1dHNbdXNuZy5zaGFwZV0gfHwgbnVsbFxuXG4gIHJldHVybiAoXG4gICAgPGRpdj5cbiAgICAgIDxSYWRpb1xuICAgICAgICB2YWx1ZT17dXNuZy5zaGFwZX1cbiAgICAgICAgb25DaGFuZ2U9e3NldFN0YXRlKFxuICAgICAgICAgIChkcmFmdDogYW55LCB2YWx1ZTogYW55KSA9PiAoZHJhZnQudXNuZy5zaGFwZSA9IHZhbHVlKVxuICAgICAgICApfVxuICAgICAgPlxuICAgICAgICA8UmFkaW9JdGVtIHZhbHVlPVwicG9pbnRcIj5Qb2ludDwvUmFkaW9JdGVtPlxuICAgICAgICA8UmFkaW9JdGVtIHZhbHVlPVwiY2lyY2xlXCI+Q2lyY2xlPC9SYWRpb0l0ZW0+XG4gICAgICAgIDxSYWRpb0l0ZW0gdmFsdWU9XCJsaW5lXCI+TGluZTwvUmFkaW9JdGVtPlxuICAgICAgICA8UmFkaW9JdGVtIHZhbHVlPVwicG9seWdvblwiPlBvbHlnb248L1JhZGlvSXRlbT5cbiAgICAgICAgPFJhZGlvSXRlbSB2YWx1ZT1cImJvdW5kaW5nYm94XCI+Qm91bmRpbmcgQm94PC9SYWRpb0l0ZW0+XG4gICAgICA8L1JhZGlvPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnB1dC1sb2NhdGlvbiBtdC0yXCI+XG4gICAgICAgIHtDb21wb25lbnQgIT09IG51bGwgPyA8Q29tcG9uZW50IHsuLi5wcm9wc30gLz4gOiBudWxsfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgVVNOR1xuIl19