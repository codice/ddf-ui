import { __assign } from "tslib";
import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
/**
 * Copyright (c) Codice Foundation
 *
 * This is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser
 * General Public License as published by the Free Software Foundation, either version 3 of the
 * License, or any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without
 * even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
 * Lesser General Public License for more details. A copy of the GNU Lesser General Public License
 * is distributed along with this program and can be found at
 * <http://www.gnu.org/licenses/lgpl.html>.
 *
 **/
import { Radio, RadioItem } from '../../../react-component/radio/radio';
import TextField from '../../../react-component/text-field/index';
import { Units } from '../../../react-component/location/common';
import ListEditor from '../inputs/list-editor';
import { UsngCoordinate } from './coordinates';
var Point = function (props) {
    var usng = props.usng, setState = props.setState;
    return (_jsx(UsngCoordinate, { value: usng.point, onChange: setState(function (draft, value) { return (draft.usng.point = value); }) }));
};
var Circle = function (props) {
    var usng = props.usng, setState = props.setState;
    return (_jsxs("div", { className: "flex flex-col flex-nowrap space-y-2", children: [_jsx(UsngCoordinate, { value: usng.circle.point, onChange: setState(function (draft, value) { return (draft.usng.circle.point = value); }) }), _jsx(Units, { value: usng.circle.units, onChange: setState(function (draft, value) { return (draft.usng.circle.units = value); }), children: _jsx(TextField
                // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; type: string; value: any; o... Remove this comment to see the full error message
                , { 
                    // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; type: string; value: any; o... Remove this comment to see the full error message
                    label: "Radius", type: "number", value: usng.circle.radius, onChange: setState(function (draft, value) { return (draft.usng.circle.radius = value); }) }) })] }));
};
var Line = function (props) {
    var usng = props.usng, setState = props.setState;
    var grids = usng.line.list.map(function (_entry, index) { return (_jsx(UsngCoordinate, { value: usng.line.list[index], onChange: setState(function (draft, value) { return (draft.usng.line.list[index] = value); }) }, index)); });
    return (_jsx(ListEditor, { list: usng.line.list, defaultItem: "", onChange: setState(function (draft, value) { return (draft.usng.line.list = value); }), children: grids }));
};
var Polygon = function (props) {
    var usng = props.usng, setState = props.setState;
    var grids = usng.polygon.list.map(function (_entry, index) { return (_jsx(UsngCoordinate, { value: usng.polygon.list[index], onChange: setState(function (draft, value) { return (draft.usng.polygon.list[index] = value); }) }, index)); });
    return (_jsx(ListEditor, { list: usng.polygon.list, defaultItem: "", onChange: setState(function (draft, value) { return (draft.usng.polygon.list = value); }), children: grids }));
};
var BoundingBox = function (props) {
    var usng = props.usng, setState = props.setState;
    return (_jsx(UsngCoordinate, { value: usng.boundingbox, onChange: setState(function (draft, value) { return (draft.usng.boundingbox = value); }) }));
};
var USNG = function (props) {
    var usng = props.usng, setState = props.setState;
    var inputs = {
        point: Point,
        circle: Circle,
        line: Line,
        polygon: Polygon,
        boundingbox: BoundingBox,
    };
    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message
    var Component = inputs[usng.shape] || null;
    return (_jsxs("div", { children: [_jsxs(Radio, { value: usng.shape, onChange: setState(function (draft, value) { return (draft.usng.shape = value); }), children: [_jsx(RadioItem, { value: "point", children: "Point" }), _jsx(RadioItem, { value: "circle", children: "Circle" }), _jsx(RadioItem, { value: "line", children: "Line" }), _jsx(RadioItem, { value: "polygon", children: "Polygon" }), _jsx(RadioItem, { value: "boundingbox", children: "Bounding Box" })] }), _jsx("div", { className: "input-location mt-2", children: Component !== null ? _jsx(Component, __assign({}, props)) : null })] }));
};
export default USNG;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNuZy1tZ3JzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vc3JjL21haW4vd2ViYXBwL2NvbXBvbmVudC9sb2NhdGlvbi1uZXcvZ2VvLWNvbXBvbmVudHMvdXNuZy1tZ3JzLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7Ozs7Ozs7O0lBYUk7QUFFSixPQUFPLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxNQUFNLHNDQUFzQyxDQUFBO0FBQ3ZFLE9BQU8sU0FBUyxNQUFNLDJDQUEyQyxDQUFBO0FBQ2pFLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSwwQ0FBMEMsQ0FBQTtBQUNoRSxPQUFPLFVBQVUsTUFBTSx1QkFBdUIsQ0FBQTtBQUM5QyxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sZUFBZSxDQUFBO0FBRTlDLElBQU0sS0FBSyxHQUFHLFVBQUMsS0FBVTtJQUNmLElBQUEsSUFBSSxHQUFlLEtBQUssS0FBcEIsRUFBRSxRQUFRLEdBQUssS0FBSyxTQUFWLENBQVU7SUFDaEMsT0FBTyxDQUNMLEtBQUMsY0FBYyxJQUNiLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxFQUNqQixRQUFRLEVBQUUsUUFBUSxDQUNoQixVQUFDLEtBQVUsRUFBRSxLQUFVLElBQUssT0FBQSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxFQUExQixDQUEwQixDQUN2RCxHQUNELENBQ0gsQ0FBQTtBQUNILENBQUMsQ0FBQTtBQUVELElBQU0sTUFBTSxHQUFHLFVBQUMsS0FBVTtJQUNoQixJQUFBLElBQUksR0FBZSxLQUFLLEtBQXBCLEVBQUUsUUFBUSxHQUFLLEtBQUssU0FBVixDQUFVO0lBQ2hDLE9BQU8sQ0FDTCxlQUFLLFNBQVMsRUFBQyxxQ0FBcUMsYUFDbEQsS0FBQyxjQUFjLElBQ2IsS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUN4QixRQUFRLEVB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VSxJQUFLLE9BQUEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsRUFBMUIsQ0FBMEIsQ0FDdkQsYUFFRCxLQUFDLFNBQVMsSUFBQyxLQUFLLEVBQUMsT0FBTyxzQkFBa0IsRUFDMUMsS0FBQyxTQUFTLElBQUMsS0FBSyxFQUFDLFFBQVEsdUJBQW1CLEVBQzVDLEtBQUMsU0FBUyxJQUFDLEtBQUssRUFBQyxNQUFNLHFCQUFpQixFQUN4QyxLQUFDLFNBQVMsSUFBQyxLQUFLLEVBQUMsU0FBUyx3QkFBb0IsRUFDOUMsS0FBQyxTQUFTLElBQUMsS0FBSyxFQUFDLGFBQWEsNkJBQXlCLElBQ2pELEVBQ1IsY0FBSyxTQUFTLEVBQUMscUJBQXFCLFlBQ2pDLFNBQVMsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUMsU0FBUyxlQUFLLEtBQUssRUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQ2pELElBQ0YsQ0FDUCxDQUFBO0FBQ0gsQ0FBQyxDQUFBO0FBRUQsZUFBZSxJQUFJLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgQ29kaWNlIEZvdW5kYXRpb25cbiAqXG4gKiBUaGlzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgTGVzc2VyXG4gKiBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZVxuICogTGljZW5zZSwgb3IgYW55IGxhdGVyIHZlcnNpb24uXG4gKlxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dFxuICogZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGUgR05VXG4gKiBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLiBBIGNvcHkgb2YgdGhlIEdOVSBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICogaXMgZGlzdHJpYnV0ZWQgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0gYW5kIGNhbiBiZSBmb3VuZCBhdFxuICogPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9sZ3BsLmh0bWw+LlxuICpcbiAqKi9cblxuaW1wb3J0IHsgUmFkaW8sIFJhZGlvSXRlbSB9IGZyb20gJy4uLy4uLy4uL3JlYWN0LWNvbXBvbmVudC9yYWRpby9yYWRpbydcbmltcG9ydCBUZXh0RmllbGQgZnJvbSAnLi4vLi4vLi4vcmVhY3QtY29tcG9uZW50L3RleHQtZmllbGQvaW5kZXgnXG5pbXBvcnQgeyBVbml0cyB9IGZyb20gJy4uLy4uLy4uL3JlYWN0LWNvbXBvbmVudC9sb2NhdGlvbi9jb21tb24nXG5pbXBvcnQgTGlzdEVkaXRvciBmcm9tICcuLi9pbnB1dHMvbGlzdC1lZGl0b3InXG5pbXBvcnQgeyBVc25nQ29vcmRpbmF0ZSB9IGZyb20gJy4vY29vcmRpbmF0ZXMnXG5cbmNvbnN0IFBvaW50ID0gKHByb3BzOiBhbnkpID0+IHtcbiAgY29uc3QgeyB1c25nLCBzZXRTdGF0ZSB9ID0gcHJvcHNcbiAgcmV0dXJuIChcbiAgICA8VXNuZ0Nvb3JkaW5hdGVcbiAgICAgIHZhbHVlPXt1c25nLnBvaW50fVxuICAgICAgb25DaGFuZ2U9e3NldFN0YXRlKFxuICAgICAgICAoZHJhZnQ6IGFueSwgdmFsdWU6IGFueSkgPT4gKGRyYWZ0LnVzbmcucG9pbnQgPSB2YWx1ZSlcbiAgICAgICl9XG4gICAgLz5cbiAgKVxufVxuXG5jb25zdCBDaXJjbGUgPSAocHJvcHM6IGFueSkgPT4ge1xuICBjb25zdCB7IHVzbmcsIHNldFN0YXRlIH0gPSBwcm9wc1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBmbGV4LW5vd3JhcCBzcGFjZS15LTJcIj5cbiAgICAgIDxVc25nQ29vcmRpbmF0ZVxuICAgICAgICB2YWx1ZT17dXNuZy5jaXJjbGUucG9pbnR9XG4gICAgICAgIG9uQ2hhbmdlPXtzZXRTdGF0ZShcbiAgICAgICAgICAoZHJhZnQ6IGFueSwgdmFsdWU6IGFueSkgPT4gKGRyYWZ0LnVzbmcuY2lyY2xlLnBvaW50ID0gdmFsdWUpXG4gICAgICAgICl9XG4gICAgICAvPlxuICAgICAgPFVuaXRzXG4gICAgICAgIHZhbHVlPXt1c25nLmNpcmNsZS51bml0c31cbiAgICAgICAgb25DaGFuZ2U9e3NldFN0YXRlKFxuICAgICAgICAgIChkcmFmdDogYW55LCB2YWx1ZTogYW55KSA9PiAoZHJhZnQudXNuZy5jaXJjbGUudW5pdHMgPSB2YWx1ZSlcbiAgICAgICAgKX1cbiAgICAgID5cbiAgICAgICAgPFRleHRGaWVsZFxuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgdHMtbWlncmF0ZSgyMzIyKSBGSVhNRTogVHlwZSAneyBsYWJlbDogc3RyaW5nOyB0eXBlOiBzdHJpbmc7IHZhbHVlOiBhbnk7IG8uLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgIGxhYmVsPVwiUmFkaXVzXCJcbiAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcbiAgICAgICAgICB2YWx1ZT17dXNuZy5jaXJjbGUucmFkaXVzfVxuICAgICAgICAgIG9uQ2hhbmdlPXtzZXRTdGF0ZShcbiAgICAgICAgICAgIChkcmFmdDogYW55LCB2YWx1ZTogYW55KSA9PiAoZHJhZnQudXNuZy5jaXJjbGUucmFkaXVzID0gdmFsdWUpXG4gICAgICAgICAgKX1cbiAgICAgICAgLz5cbiAgICAgIDwvVW5pdHM+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuY29uc3QgTGluZSA9IChwcm9wczogYW55KSA9PiB7XG4gIGNvbnN0IHsgdXNuZywgc2V0U3RhdGUgfSA9IHByb3BzXG4gIGNvbnN0IGdyaWRzID0gdXNuZy5saW5lLmxpc3QubWFwKChfZW50cnk6IGFueSwgaW5kZXg6IGFueSkgPT4gKFxuICAgIDxVc25nQ29vcmRpbmF0ZVxuICAgICAgdmFsdWU9e3VzbmcubGluZS5saXN0W2luZGV4XX1cbiAgICAgIG9uQ2hhbmdlPXtzZXRTdGF0ZShcbiAgICAgICAgKGRyYWZ0OiBhbnksIHZhbHVlOiBhbnkpID0+IChkcmFmdC51c25nLmxpbmUubGlzdFtpbmRleF0gPSB2YWx1ZSlcbiAgICAgICl9XG4gICAgICBrZXk9e2luZGV4fVxuICAgIC8+XG4gICkpXG5cbiAgcmV0dXJuIChcbiAgICA8TGlzdEVkaXRvclxuICAgICAgbGlzdD17dXNuZy5saW5lLmxpc3R9XG4gICAgICBkZWZhdWx0SXRlbT1cIlwiXG4gICAgICBvbkNoYW5nZT17c2V0U3RhdGUoXG4gICAgICAgIChkcmFmdDogYW55LCB2YWx1ZTogYW55KSA9PiAoZHJhZnQudXNuZy5saW5lLmxpc3QgPSB2YWx1ZSlcbiAgICAgICl9XG4gICAgPlxuICAgICAge2dyaWRzfVxuICAgIDwvTGlzdEVkaXRvcj5cbiAgKVxufVxuXG5jb25zdCBQb2x5Z29uID0gKHByb3BzOiBhbnkpID0+IHtcbiAgY29uc3QgeyB1c25nLCBzZXRTdGF0ZSB9ID0gcHJvcHNcbiAgY29uc3QgZ3JpZHMgPSB1c25nLnBvbHlnb24ubGlzdC5tYXAoKF9lbnRyeTogYW55LCBpbmRleDogYW55KSA9PiAoXG4gICAgPFVzbmdDb29yZGluYXRlXG4gICAgICB2YWx1ZT17dXNuZy5wb2x5Z29uLmxpc3RbaW5kZXhdfVxuICAgICAgb25DaGFuZ2U9e3NldFN0YXRlKFxuICAgICAgICAoZHJhZnQ6IGFueSwgdmFsdWU6IGFueSkgPT4gKGRyYWZ0LnVzbmcucG9seWdvbi5saXN0W2luZGV4XSA9IHZhbHVlKVxuICAgICAgKX1cbiAgICAgIGtleT17aW5kZXh9XG4gICAgLz5cbiAgKSlcblxuICByZXR1cm4gKFxuICAgIDxMaXN0RWRpdG9yXG4gICAgICBsaXN0PXt1c25nLnBvbHlnb24ubGlzdH1cbiAgICAgIGRlZmF1bHRJdGVtPVwiXCJcbiAgICAgIG9uQ2hhbmdlPXtzZXRTdGF0ZShcbiAgICAgICAgKGRyYWZ0OiBhbnksIHZhbHVlOiBhbnkpID0+IChkcmFmdC51c25nLnBvbHlnb24ubGlzdCA9IHZhbHVlKVxuICAgICAgKX1cbiAgICA+XG4gICAgICB7Z3JpZHN9XG4gICAgPC9MaXN0RWRpdG9yPlxuICApXG59XG5cbmNvbnN0IEJvdW5kaW5nQm94ID0gKHByb3BzOiBhbnkpID0+IHtcbiAgY29uc3QgeyB1c25nLCBzZXRTdGF0ZSB9ID0gcHJvcHNcbiAgcmV0dXJuIChcbiAgICA8VXNuZ0Nvb3JkaW5hdGVcbiAgICAgIHZhbHVlPXt1c25nLmJvdW5kaW5nYm94fVxuICAgICAgb25DaGFuZ2U9e3NldFN0YXRlKFxuICAgICAgICAoZHJhZnQ6IGFueSwgdmFsdWU6IGFueSkgPT4gKGRyYWZ0LnVzbmcuYm91bmRpbmdib3ggPSB2YWx1ZSlcbiAgICAgICl9XG4gICAgLz5cbiAgKVxufVxuXG5jb25zdCBVU05HID0gKHByb3BzOiBhbnkpID0+IHtcbiAgY29uc3QgeyB1c25nLCBzZXRTdGF0ZSB9ID0gcHJvcHNcblxuICBjb25zdCBpbnB1dHMgPSB7XG4gICAgcG9pbnQ6IFBvaW50LFxuICAgIGNpcmNsZTogQ2lyY2xlLFxuICAgIGxpbmU6IExpbmUsXG4gICAgcG9seWdvbjogUG9seWdvbixcbiAgICBib3VuZGluZ2JveDogQm91bmRpbmdCb3gsXG4gIH1cblxuICAvLyBAdHMtZXhwZWN0LWVycm9yIHRzLW1pZ3JhdGUoNzA1MykgRklYTUU6IEVsZW1lbnQgaW1wbGljaXRseSBoYXMgYW4gJ2FueScgdHlwZSBiZWNhdXNlIGV4cHJlLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgY29uc3QgQ29tcG9uZW50ID0gaW5wdXRzW3Vzbmcuc2hhcGVdIHx8IG51bGxcblxuICByZXR1cm4gKFxuICAgIDxkaXY+XG4gICAgICA8UmFkaW9cbiAgICAgICAgdmFsdWU9e3Vzbmcuc2hhcGV9XG4gICAgICAgIG9uQ2hhbmdlPXtzZXRTdGF0ZShcbiAgICAgICAgICAoZHJhZnQ6IGFueSwgdmFsdWU6IGFueSkgPT4gKGRyYWZ0LnVzbmcuc2hhcGUgPSB2YWx1ZSlcbiAgICAgICAgKX1cbiAgICAgID5cbiAgICAgICAgPFJhZGlvSXRlbSB2YWx1ZT1cInBvaW50XCI+UG9pbnQ8L1JhZGlvSXRlbT5cbiAgICAgICAgPFJhZGlvSXRlbSB2YWx1ZT1cImNpcmNsZVwiPkNpcmNsZTwvUmFkaW9JdGVtPlxuICAgICAgICA8UmFkaW9JdGVtIHZhbHVlPVwibGluZVwiPkxpbmU8L1JhZGlvSXRlbT5cbiAgICAgICAgPFJhZGlvSXRlbSB2YWx1ZT1cInBvbHlnb25cIj5Qb2x5Z29uPC9SYWRpb0l0ZW0+XG4gICAgICAgIDxSYWRpb0l0ZW0gdmFsdWU9XCJib3VuZGluZ2JveFwiPkJvdW5kaW5nIEJveDwvUmFkaW9JdGVtPlxuICAgICAgPC9SYWRpbz5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5wdXQtbG9jYXRpb24gbXQtMlwiPlxuICAgICAgICB7Q29tcG9uZW50ICE9PSBudWxsID8gPENvbXBvbmVudCB7Li4ucHJvcHN9IC8+IDogbnVsbH1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IFVTTkdcbiJdfQ==