import { __assign } from "tslib";
/**
 * Copyright (c) Codice Foundation
 *
 * This is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser
 * General Public License as published by the Free Software Foundation, either version 3 of the
 * License, or any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without
 * even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
 * Lesser General Public License for more details. A copy of the GNU Lesser General Public License
 * is distributed along with this program and can be found at
 * <http://www.gnu.org/licenses/lgpl.html>.
 *
 **/
import React from 'react';
import Group from '../../../react-component/group/index';
import { Radio, RadioItem } from '../../../react-component/radio/radio';
import TextField from '../../../react-component/text-field/index';
import { Units } from '../../../react-component/location/common';
import ListEditor from '../inputs/list-editor';
import { DmsLatitude, DmsLongitude } from './coordinates';
import { dmsPoint } from '../models';
import DirectionInput from './direction';
import { Direction } from '../utils/dms-utils';
var latitudeDirections = [Direction.North, Direction.South];
var longitudeDirections = [Direction.East, Direction.West];
var Point = function (props) {
    var dms = props.dms, setState = props.setState;
    return (React.createElement(Group, null,
        React.createElement(DmsLatitude, { value: dms.point.latitude.coordinate, onChange: setState(function (draft, value) {
                return (draft.dms.point.latitude.coordinate = value);
            }) },
            React.createElement(DirectionInput
            // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
            , { 
                // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
                options: latitudeDirections, value: dms.point.latitude.direction, onChange: setState(function (draft, value) {
                    return (draft.dms.point.latitude.direction = value);
                }) })),
        React.createElement(DmsLongitude, { value: dms.point.longitude.coordinate, onChange: setState(function (draft, value) {
                return (draft.dms.point.longitude.coordinate = value);
            }) },
            React.createElement(DirectionInput
            // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
            , { 
                // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
                options: longitudeDirections, value: dms.point.longitude.direction, onChange: setState(function (draft, value) {
                    return (draft.dms.point.longitude.direction = value);
                }) }))));
};
var Circle = function (props) {
    var dms = props.dms, setState = props.setState;
    return (React.createElement("div", { className: "flex flex-col flex-nowrap space-y-2" },
        React.createElement(Group, null,
            React.createElement(DmsLatitude, { value: dms.circle.point.latitude.coordinate, onChange: setState(function (draft, value) {
                    return (draft.dms.circle.point.latitude.coordinate = value);
                }) },
                React.createElement(DirectionInput
                // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
                , { 
                    // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
                    options: latitudeDirections, value: dms.circle.point.latitude.direction, onChange: setState(function (draft, value) {
                        return (draft.dms.circle.point.latitude.direction = value);
                    }) })),
            React.createElement(DmsLongitude, { value: dms.circle.point.longitude.coordinate, onChange: setState(function (draft, value) {
                    return (draft.dms.circle.point.longitude.coordinate = value);
                }) },
                React.createElement(DirectionInput
                // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
                , { 
                    // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
                    options: longitudeDirections, value: dms.circle.point.longitude.direction, onChange: setState(function (draft, value) {
                        return (draft.dms.circle.point.longitude.direction = value);
                    }) }))),
        React.createElement(Units, { value: dms.circle.units, onChange: setState(function (draft, value) { return (draft.dms.circle.units = value); }) },
            React.createElement(TextField
            // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; type: string; value: any; o... Remove this comment to see the full error message
            , { 
                // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; type: string; value: any; o... Remove this comment to see the full error message
                label: "Radius", type: "number", value: dms.circle.radius, onChange: setState(function (draft, value) { return (draft.dms.circle.radius = value); }) }))));
};
var Line = function (props) {
    var dms = props.dms, setState = props.setState;
    var points = dms.line.list.map(function (_entry, index) { return (React.createElement(Group, { key: index },
        React.createElement(DmsLatitude, { value: dms.line.list[index].latitude.coordinate, onChange: setState(function (draft, value) {
                return (draft.dms.line.list[index].latitude.coordinate = value);
            }) },
            React.createElement(DirectionInput
            // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
            , { 
                // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
                options: latitudeDirections, value: dms.line.list[index].latitude.direction, onChange: setState(function (draft, value) {
                    return (draft.dms.line.list[index].latitude.direction = value);
                }) })),
        React.createElement(DmsLongitude, { value: dms.line.list[index].longitude.coordinate, onChange: setState(function (draft, value) {
                return (draft.dms.line.list[index].longitude.coordinate = value);
            }) },
            React.createElement(DirectionInput
            // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
            , { 
                // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
                options: longitudeDirections, value: dms.line.list[index].longitude.direction, onChange: setState(function (draft, value) {
                    return (draft.dms.line.list[index].longitude.direction = value);
                }) })))); });
    return (React.createElement(ListEditor, { list: dms.line.list, defaultItem: dmsPoint, onChange: setState(function (draft, value) { return (draft.dms.line.list = value); }) }, points));
};
var Polygon = function (props) {
    var dms = props.dms, setState = props.setState;
    var points = dms.polygon.list.map(function (_entry, index) { return (React.createElement(Group, { key: index },
        React.createElement(DmsLatitude, { value: dms.polygon.list[index].latitude.coordinate, onChange: setState(function (draft, value) {
                return (draft.dms.polygon.list[index].latitude.coordinate = value);
            }) },
            React.createElement(DirectionInput
            // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
            , { 
                // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
                options: latitudeDirections, value: dms.polygon.list[index].latitude.direction, onChange: setState(function (draft, value) {
                    return (draft.dms.polygon.list[index].latitude.direction = value);
                }) })),
        React.createElement(DmsLongitude, { value: dms.polygon.list[index].longitude.coordinate, onChange: setState(function (draft, value) {
                return (draft.dms.polygon.list[index].longitude.coordinate = value);
            }) },
            React.createElement(DirectionInput
            // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
            , { 
                // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
                options: longitudeDirections, value: dms.polygon.list[index].longitude.direction, onChange: setState(function (draft, value) {
                    return (draft.dms.polygon.list[index].longitude.direction = value);
                }) })))); });
    return (React.createElement(ListEditor, { list: dms.polygon.list, defaultItem: dmsPoint, onChange: setState(function (draft, value) { return (draft.dms.polygon.list = value); }) }, points));
};
var BoundingBox = function (props) {
    var dms = props.dms, setState = props.setState;
    return (React.createElement("div", { className: "flex flex-col flex-nowrap space-y-2" },
        React.createElement(DmsLatitude, { label: "South", value: dms.boundingbox.south.coordinate, onChange: setState(function (draft, value) {
                return (draft.dms.boundingbox.south.coordinate = value);
            }) },
            React.createElement(DirectionInput
            // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
            , { 
                // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
                options: latitudeDirections, value: dms.boundingbox.south.direction, onChange: setState(function (draft, value) {
                    return (draft.dms.boundingbox.south.direction = value);
                }) })),
        React.createElement(DmsLatitude, { label: "North", value: dms.boundingbox.north.coordinate, onChange: setState(function (draft, value) {
                return (draft.dms.boundingbox.north.coordinate = value);
            }) },
            React.createElement(DirectionInput
            // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
            , { 
                // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
                options: latitudeDirections, value: dms.boundingbox.north.direction, onChange: setState(function (draft, value) {
                    return (draft.dms.boundingbox.north.direction = value);
                }) })),
        React.createElement(DmsLongitude, { label: "West", value: dms.boundingbox.west.coordinate, onChange: setState(function (draft, value) {
                return (draft.dms.boundingbox.west.coordinate = value);
            }) },
            React.createElement(DirectionInput
            // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
            , { 
                // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
                options: longitudeDirections, value: dms.boundingbox.west.direction, onChange: setState(function (draft, value) {
                    return (draft.dms.boundingbox.west.direction = value);
                }) })),
        React.createElement(DmsLongitude, { label: "East", value: dms.boundingbox.east.coordinate, onChange: setState(function (draft, value) {
                return (draft.dms.boundingbox.east.coordinate = value);
            }) },
            React.createElement(DirectionInput
            // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
            , { 
                // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
                options: longitudeDirections, value: dms.boundingbox.east.direction, onChange: setState(function (draft, value) {
                    return (draft.dms.boundingbox.east.direction = value);
                }) }))));
};
var LatLongDMS = function (props) {
    var dms = props.dms, setState = props.setState;
    var inputs = {
        point: Point,
        line: Line,
        circle: Circle,
        polygon: Polygon,
        boundingbox: BoundingBox,
    };
    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message
    var Component = inputs[dms.shape] || null;
    return (React.createElement("div", null,
        React.createElement(Radio, { value: dms.shape, onChange: setState(function (draft, value) { return (draft.dms.shape = value); }) },
            React.createElement(RadioItem, { value: "point" }, "Point"),
            React.createElement(RadioItem, { value: "circle" }, "Circle"),
            React.createElement(RadioItem, { value: "line" }, "Line"),
            React.createElement(RadioItem, { value: "polygon" }, "Polygon"),
            React.createElement(RadioItem, { value: "boundingbox" }, "Bounding Box")),
        React.createElement("div", { className: "input-location mt-2" }, Component !== null ? React.createElement(Component, __assign({}, props)) : null)));
};
export default LatLongDMS;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGF0LWxvbmctZG1zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vc3JjL21haW4vd2ViYXBwL2NvbXBvbmVudC9sb2NhdGlvbi1uZXcvZ2VvLWNvbXBvbmVudHMvbGF0LWxvbmctZG1zLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7Ozs7Ozs7SUFhSTtBQUNKLE9BQU8sS0FBSyxNQUFNLE9BQU8sQ0FBQTtBQUV6QixPQUFPLEtBQUssTUFBTSxzQ0FBc0MsQ0FBQTtBQUN4RCxPQUFPLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxNQUFNLHNDQUFzQyxDQUFBO0FBQ3ZFLE9BQU8sU0FBUyxNQUFNLDJDQUEyQyxDQUFBO0FBQ2pFLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSwwQ0FBMEMsQ0FBQTtBQUNoRSxPQUFPLFVBQVUsTUFBTSx1QkFBdUIsQ0FBQTtBQUM5QyxPQUFPLEVBQUUsV0FBVyxFQUFFLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQTtBQUN6RCxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sV0FBVyxDQUFBO0FBQ3BDLE9BQU8sY0FBYyxNQUFNLGFBQWEsQ0FBQTtBQUN4QyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sb0JBQW9CLENBQUE7QUFFOUMsSUFBTSxrQkFBa0IsR0FBRyxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFBO0FBQzdELElBQU0sbUJBQW1CLEdBQUcsQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQTtBQUU1RCxJQUFNLEtBQUssR0FBRyxVQUFDLEtBQVU7SUFDZixJQUFBLEdBQUcsR0FBZSxLQUFLLElBQXBCLEVBQUUsUUFBUSxHQUFLLEtBQUssU0FBVixDQUFVO0lBQy9CLE9BQU8sQ0FDTCxvQkFBQyxLQUFLO1FBQ0osb0JBQUMsV0FBVyxJQUNWLEtBQUssRUFBRSxHQUFHLENB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cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIENvZGljZSBGb3VuZGF0aW9uXG4gKlxuICogVGhpcyBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIExlc3NlclxuICogR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGVcbiAqIExpY2Vuc2UsIG9yIGFueSBsYXRlciB2ZXJzaW9uLlxuICpcbiAqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLCBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXRcbiAqIGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlIEdOVVxuICogTGVzc2VyIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4gQSBjb3B5IG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAqIGlzIGRpc3RyaWJ1dGVkIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtIGFuZCBjYW4gYmUgZm91bmQgYXRcbiAqIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvbGdwbC5odG1sPi5cbiAqXG4gKiovXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5cbmltcG9ydCBHcm91cCBmcm9tICcuLi8uLi8uLi9yZWFjdC1jb21wb25lbnQvZ3JvdXAvaW5kZXgnXG5pbXBvcnQgeyBSYWRpbywgUmFkaW9JdGVtIH0gZnJvbSAnLi4vLi4vLi4vcmVhY3QtY29tcG9uZW50L3JhZGlvL3JhZGlvJ1xuaW1wb3J0IFRleHRGaWVsZCBmcm9tICcuLi8uLi8uLi9yZWFjdC1jb21wb25lbnQvdGV4dC1maWVsZC9pbmRleCdcbmltcG9ydCB7IFVuaXRzIH0gZnJvbSAnLi4vLi4vLi4vcmVhY3QtY29tcG9uZW50L2xvY2F0aW9uL2NvbW1vbidcbmltcG9ydCBMaXN0RWRpdG9yIGZyb20gJy4uL2lucHV0cy9saXN0LWVkaXRvcidcbmltcG9ydCB7IERtc0xhdGl0dWRlLCBEbXNMb25naXR1ZGUgfSBmcm9tICcuL2Nvb3JkaW5hdGVzJ1xuaW1wb3J0IHsgZG1zUG9pbnQgfSBmcm9tICcuLi9tb2RlbHMnXG5pbXBvcnQgRGlyZWN0aW9uSW5wdXQgZnJvbSAnLi9kaXJlY3Rpb24nXG5pbXBvcnQgeyBEaXJlY3Rpb24gfSBmcm9tICcuLi91dGlscy9kbXMtdXRpbHMnXG5cbmNvbnN0IGxhdGl0dWRlRGlyZWN0aW9ucyA9IFtEaXJlY3Rpb24uTm9ydGgsIERpcmVjdGlvbi5Tb3V0aF1cbmNvbnN0IGxvbmdpdHVkZURpcmVjdGlvbnMgPSBbRGlyZWN0aW9uLkVhc3QsIERpcmVjdGlvbi5XZXN0XVxuXG5jb25zdCBQb2ludCA9IChwcm9wczogYW55KSA9PiB7XG4gIGNvbnN0IHsgZG1zLCBzZXRTdGF0ZSB9ID0gcHJvcHNcbiAgcmV0dXJuIChcbiAgICA8R3JvdXA+XG4gICAgICA8RG1zTGF0aXR1ZGVcbiAgICAgICAgdmFsdWU9e2Rtcy5wb2ludC5sYXRpdHVkZS5jb29yZGluYXRlfVxuICAgICAgICBvbkNoYW5nZT17c2V0U3RhdGUoXG4gICAgICAgICAgKGRyYWZ0OiBhbnksIHZhbHVlOiBhbnkpID0+XG4gICAgICAgICAgICAoZHJhZnQuZG1zLnBvaW50LmxhdGl0dWRlLmNvb3JkaW5hdGUgPSB2YWx1ZSlcbiAgICAgICAgKX1cbiAgICAgID5cbiAgICAgICAgPERpcmVjdGlvbklucHV0XG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciB0cy1taWdyYXRlKDI3NjkpIEZJWE1FOiBObyBvdmVybG9hZCBtYXRjaGVzIHRoaXMgY2FsbC5cbiAgICAgICAgICBvcHRpb25zPXtsYXRpdHVkZURpcmVjdGlvbnN9XG4gICAgICAgICAgdmFsdWU9e2Rtcy5wb2ludC5sYXRpdHVkZS5kaXJlY3Rpb259XG4gICAgICAgICAgb25DaGFuZ2U9e3NldFN0YXRlKFxuICAgICAgICAgICAgKGRyYWZ0OiBhbnksIHZhbHVlOiBhbnkpID0+XG4gICAgICAgICAgICAgIChkcmFmdC5kbXMucG9pbnQubGF0aXR1ZGUuZGlyZWN0aW9uID0gdmFsdWUpXG4gICAgICAgICAgKX1cbiAgICAgICAgLz5cbiAgICAgIDwvRG1zTGF0aXR1ZGU+XG4gICAgICA8RG1zTG9uZ2l0dWRlXG4gICAgICAgIHZhbHVlPXtkbXMucG9pbnQubG9uZ2l0dWRlLmNvb3JkaW5hdGV9XG4gICAgICAgIG9uQ2hhbmdlPXtzZXRTdGF0ZShcbiAgICAgICAgICAoZHJhZnQ6IGFueSwgdmFsdWU6IGFueSkgPT5cbiAgICAgICAgICAgIChkcmFmdC5kbXMucG9pbnQubG9uZ2l0dWRlLmNvb3JkaW5hdGUgPSB2YWx1ZSlcbiAgICAgICAgKX1cbiAgICAgID5cbiAgICAgICAgPERpcmVjdGlvbklucHV0XG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciB0cy1taWdyYXRlKDI3NjkpIEZJWE1FOiBObyBvdmVybG9hZCBtYXRjaGVzIHRoaXMgY2FsbC5cbiAgICAgICAgICBvcHRpb25zPXtsb25naXR1ZGVEaXJlY3Rpb25zfVxuICAgICAgICAgIHZhbHVlPXtkbXMucG9pbnQubG9uZ2l0dWRlLmRpcmVjdGlvbn1cbiAgICAgICAgICBvbkNoYW5nZT17c2V0U3RhdGUoXG4gICAgICAgICAgICAoZHJhZnQ6IGFueSwgdmFsdWU6IGFueSkgPT5cbiAgICAgICAgICAgICAgKGRyYWZ0LmRtcy5wb2ludC5sb25naXR1ZGUuZGlyZWN0aW9uID0gdmFsdWUpXG4gICAgICAgICAgKX1cbiAgICAgICAgLz5cbiAgICAgIDwvRG1zTG9uZ2l0dWRlPlxuICAgIDwvR3JvdXA+XG4gIClcbn1cblxuY29uc3QgQ2lyY2xlID0gKHByb3BzOiBhbnkpID0+IHtcbiAgY29uc3QgeyBkbXMsIHNldFN0YXRlIH0gPSBwcm9wc1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBmbGV4LW5vd3JhcCBzcGFjZS15LTJcIj5cbiAgICAgIDxHcm91cD5cbiAgICAgICAgPERtc0xhdGl0dWRlXG4gICAgICAgICAgdmFsdWU9e2Rtcy5jaXJjbGUucG9pbnQubGF0aXR1ZGUuY29vcmRpbmF0ZX1cbiAgICAgICAgICBvbkNoYW5nZT17c2V0U3RhdGUoXG4gICAgICAgICAgICAoZHJhZnQ6IGFueSwgdmFsdWU6IGFueSkgPT5cbiAgICAgICAgICAgICAgKGRyYWZ0LmRtcy5jaXJjbGUucG9pbnQubGF0aXR1ZGUuY29vcmRpbmF0ZSA9IHZhbHVlKVxuICAgICAgICAgICl9XG4gICAgICAgID5cbiAgICAgICAgICA8RGlyZWN0aW9uSW5wdXRcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgdHMtbWlncmF0ZSgyNzY5KSBGSVhNRTogTm8gb3ZlcmxvYWQgbWF0Y2hlcyB0aGlzIGNhbGwuXG4gICAgICAgICAgICBvcHRpb25zPXtsYXRpdHVkZURpcmVjdGlvbnN9XG4gICAgICAgICAgICB2YWx1ZT17ZG1zLmNpcmNsZS5wb2ludC5sYXRpdHVkZS5kaXJlY3Rpb259XG4gICAgICAgICAgICBvbkNoYW5nZT17c2V0U3RhdGUoXG4gICAgICAgICAgICAgIChkcmFmdDogYW55LCB2YWx1ZTogYW55KSA9PlxuICAgICAgICAgICAgICAgIChkcmFmdC5kbXMuY2lyY2xlLnBvaW50LmxhdGl0dWRlLmRpcmVjdGlvbiA9IHZhbHVlKVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L0Rtc0xhdGl0dWRlPlxuICAgICAgICA8RG1zTG9uZ2l0dWRlXG4gICAgICAgICAgdmFsdWU9e2Rtcy5jaXJjbGUucG9pbnQubG9uZ2l0dWRlLmNvb3JkaW5hdGV9XG4gICAgICAgICAgb25DaGFuZ2U9e3NldFN0YXRlKFxuICAgICAgICAgICAgKGRyYWZ0OiBhbnksIHZhbHVlOiBhbnkpID0+XG4gICAgICAgICAgICAgIChkcmFmdC5kbXMuY2lyY2xlLnBvaW50LmxvbmdpdHVkZS5jb29yZGluYXRlID0gdmFsdWUpXG4gICAgICAgICAgKX1cbiAgICAgICAgPlxuICAgICAgICAgIDxEaXJlY3Rpb25JbnB1dFxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciB0cy1taWdyYXRlKDI3NjkpIEZJWE1FOiBObyBvdmVybG9hZCBtYXRjaGVzIHRoaXMgY2FsbC5cbiAgICAgICAgICAgIG9wdGlvbnM9e2xvbmdpdHVkZURpcmVjdGlvbnN9XG4gICAgICAgICAgICB2YWx1ZT17ZG1zLmNpcmNsZS5wb2ludC5sb25naXR1ZGUuZGlyZWN0aW9ufVxuICAgICAgICAgICAgb25DaGFuZ2U9e3NldFN0YXRlKFxuICAgICAgICAgICAgICAoZHJhZnQ6IGFueSwgdmFsdWU6IGFueSkgPT5cbiAgICAgICAgICAgICAgICAoZHJhZnQuZG1zLmNpcmNsZS5wb2ludC5sb25naXR1ZGUuZGlyZWN0aW9uID0gdmFsdWUpXG4gICAgICAgICAgICApfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvRG1zTG9uZ2l0dWRlPlxuICAgICAgPC9Hcm91cD5cbiAgICAgIDxVbml0c1xuICAgICAgICB2YWx1ZT17ZG1zLmNpcmNsZS51bml0c31cbiAgICAgICAgb25DaGFuZ2U9e3NldFN0YXRlKFxuICAgICAgICAgIChkcmFmdDogYW55LCB2YWx1ZTogYW55KSA9PiAoZHJhZnQuZG1zLmNpcmNsZS51bml0cyA9IHZhbHVlKVxuICAgICAgICApfVxuICAgICAgPlxuICAgICAgICA8VGV4dEZpZWxkXG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciB0cy1taWdyYXRlKDIzMjIpIEZJWE1FOiBUeXBlICd7IGxhYmVsOiBzdHJpbmc7IHR5cGU6IHN0cmluZzsgdmFsdWU6IGFueTsgby4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgbGFiZWw9XCJSYWRpdXNcIlxuICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICAgIHZhbHVlPXtkbXMuY2lyY2xlLnJhZGl1c31cbiAgICAgICAgICBvbkNoYW5nZT17c2V0U3RhdGUoXG4gICAgICAgICAgICAoZHJhZnQ6IGFueSwgdmFsdWU6IGFueSkgPT4gKGRyYWZ0LmRtcy5jaXJjbGUucmFkaXVzID0gdmFsdWUpXG4gICAgICAgICAgKX1cbiAgICAgICAgLz5cbiAgICAgIDwvVW5pdHM+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuY29uc3QgTGluZSA9IChwcm9wczogYW55KSA9PiB7XG4gIGNvbnN0IHsgZG1zLCBzZXRTdGF0ZSB9ID0gcHJvcHNcbiAgY29uc3QgcG9pbnRzID0gZG1zLmxpbmUubGlzdC5tYXAoKF9lbnRyeTogYW55LCBpbmRleDogYW55KSA9PiAoXG4gICAgPEdyb3VwIGtleT17aW5kZXh9PlxuICAgICAgPERtc0xhdGl0dWRlXG4gICAgICAgIHZhbHVlPXtkbXMubGluZS5saXN0W2luZGV4XS5sYXRpdHVkZS5jb29yZGluYXRlfVxuICAgICAgICBvbkNoYW5nZT17c2V0U3RhdGUoXG4gICAgICAgICAgKGRyYWZ0OiBhbnksIHZhbHVlOiBhbnkpID0+XG4gICAgICAgICAgICAoZHJhZnQuZG1zLmxpbmUubGlzdFtpbmRleF0ubGF0aXR1ZGUuY29vcmRpbmF0ZSA9IHZhbHVlKVxuICAgICAgICApfVxuICAgICAgPlxuICAgICAgICA8RGlyZWN0aW9uSW5wdXRcbiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHRzLW1pZ3JhdGUoMjc2OSkgRklYTUU6IE5vIG92ZXJsb2FkIG1hdGNoZXMgdGhpcyBjYWxsLlxuICAgICAgICAgIG9wdGlvbnM9e2xhdGl0dWRlRGlyZWN0aW9uc31cbiAgICAgICAgICB2YWx1ZT17ZG1zLmxpbmUubGlzdFtpbmRleF0ubGF0aXR1ZGUuZGlyZWN0aW9ufVxuICAgICAgICAgIG9uQ2hhbmdlPXtzZXRTdGF0ZShcbiAgICAgICAgICAgIChkcmFmdDogYW55LCB2YWx1ZTogYW55KSA9PlxuICAgICAgICAgICAgICAoZHJhZnQuZG1zLmxpbmUubGlzdFtpbmRleF0ubGF0aXR1ZGUuZGlyZWN0aW9uID0gdmFsdWUpXG4gICAgICAgICAgKX1cbiAgICAgICAgLz5cbiAgICAgIDwvRG1zTGF0aXR1ZGU+XG4gICAgICA8RG1zTG9uZ2l0dWRlXG4gICAgICAgIHZhbHVlPXtkbXMubGluZS5saXN0W2luZGV4XS5sb25naXR1ZGUuY29vcmRpbmF0ZX1cbiAgICAgICAgb25DaGFuZ2U9e3NldFN0YXRlKFxuICAgICAgICAgIChkcmFmdDogYW55LCB2YWx1ZTogYW55KSA9PlxuICAgICAgICAgICAgKGRyYWZ0LmRtcy5saW5lLmxpc3RbaW5kZXhdLmxvbmdpdHVkZS5jb29yZGluYXRlID0gdmFsdWUpXG4gICAgICAgICl9XG4gICAgICA+XG4gICAgICAgIDxEaXJlY3Rpb25JbnB1dFxuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgdHMtbWlncmF0ZSgyNzY5KSBGSVhNRTogTm8gb3ZlcmxvYWQgbWF0Y2hlcyB0aGlzIGNhbGwuXG4gICAgICAgICAgb3B0aW9ucz17bG9uZ2l0dWRlRGlyZWN0aW9uc31cbiAgICAgICAgICB2YWx1ZT17ZG1zLmxpbmUubGlzdFtpbmRleF0ubG9uZ2l0dWRlLmRpcmVjdGlvbn1cbiAgICAgICAgICBvbkNoYW5nZT17c2V0U3RhdGUoXG4gICAgICAgICAgICAoZHJhZnQ6IGFueSwgdmFsdWU6IGFueSkgPT5cbiAgICAgICAgICAgICAgKGRyYWZ0LmRtcy5saW5lLmxpc3RbaW5kZXhdLmxvbmdpdHVkZS5kaXJlY3Rpb24gPSB2YWx1ZSlcbiAgICAgICAgICApfVxuICAgICAgICAvPlxuICAgICAgPC9EbXNMb25naXR1ZGU+XG4gICAgPC9Hcm91cD5cbiAgKSlcblxuICByZXR1cm4gKFxuICAgIDxMaXN0RWRpdG9yXG4gICAgICBsaXN0PXtkbXMubGluZS5saXN0fVxuICAgICAgZGVmYXVsdEl0ZW09e2Rtc1BvaW50fVxuICAgICAgb25DaGFuZ2U9e3NldFN0YXRlKFxuICAgICAgICAoZHJhZnQ6IGFueSwgdmFsdWU6IGFueSkgPT4gKGRyYWZ0LmRtcy5saW5lLmxpc3QgPSB2YWx1ZSlcbiAgICAgICl9XG4gICAgPlxuICAgICAge3BvaW50c31cbiAgICA8L0xpc3RFZGl0b3I+XG4gIClcbn1cblxuY29uc3QgUG9seWdvbiA9IChwcm9wczogYW55KSA9PiB7XG4gIGNvbnN0IHsgZG1zLCBzZXRTdGF0ZSB9ID0gcHJvcHNcbiAgY29uc3QgcG9pbnRzID0gZG1zLnBvbHlnb24ubGlzdC5tYXAoKF9lbnRyeTogYW55LCBpbmRleDogYW55KSA9PiAoXG4gICAgPEdyb3VwIGtleT17aW5kZXh9PlxuICAgICAgPERtc0xhdGl0dWRlXG4gICAgICAgIHZhbHVlPXtkbXMucG9seWdvbi5saXN0W2luZGV4XS5sYXRpdHVkZS5jb29yZGluYXRlfVxuICAgICAgICBvbkNoYW5nZT17c2V0U3RhdGUoXG4gICAgICAgICAgKGRyYWZ0OiBhbnksIHZhbHVlOiBhbnkpID0+XG4gICAgICAgICAgICAoZHJhZnQuZG1zLnBvbHlnb24ubGlzdFtpbmRleF0ubGF0aXR1ZGUuY29vcmRpbmF0ZSA9IHZhbHVlKVxuICAgICAgICApfVxuICAgICAgPlxuICAgICAgICA8RGlyZWN0aW9uSW5wdXRcbiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHRzLW1pZ3JhdGUoMjc2OSkgRklYTUU6IE5vIG92ZXJsb2FkIG1hdGNoZXMgdGhpcyBjYWxsLlxuICAgICAgICAgIG9wdGlvbnM9e2xhdGl0dWRlRGlyZWN0aW9uc31cbiAgICAgICAgICB2YWx1ZT17ZG1zLnBvbHlnb24ubGlzdFtpbmRleF0ubGF0aXR1ZGUuZGlyZWN0aW9ufVxuICAgICAgICAgIG9uQ2hhbmdlPXtzZXRTdGF0ZShcbiAgICAgICAgICAgIChkcmFmdDogYW55LCB2YWx1ZTogYW55KSA9PlxuICAgICAgICAgICAgICAoZHJhZnQuZG1zLnBvbHlnb24ubGlzdFtpbmRleF0ubGF0aXR1ZGUuZGlyZWN0aW9uID0gdmFsdWUpXG4gICAgICAgICAgKX1cbiAgICAgICAgLz5cbiAgICAgIDwvRG1zTGF0aXR1ZGU+XG4gICAgICA8RG1zTG9uZ2l0dWRlXG4gICAgICAgIHZhbHVlPXtkbXMucG9seWdvbi5saXN0W2luZGV4XS5sb25naXR1ZGUuY29vcmRpbmF0ZX1cbiAgICAgICAgb25DaGFuZ2U9e3NldFN0YXRlKFxuICAgICAgICAgIChkcmFmdDogYW55LCB2YWx1ZTogYW55KSA9PlxuICAgICAgICAgICAgKGRyYWZ0LmRtcy5wb2x5Z29uLmxpc3RbaW5kZXhdLmxvbmdpdHVkZS5jb29yZGluYXRlID0gdmFsdWUpXG4gICAgICAgICl9XG4gICAgICA+XG4gICAgICAgIDxEaXJlY3Rpb25JbnB1dFxuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgdHMtbWlncmF0ZSgyNzY5KSBGSVhNRTogTm8gb3ZlcmxvYWQgbWF0Y2hlcyB0aGlzIGNhbGwuXG4gICAgICAgICAgb3B0aW9ucz17bG9uZ2l0dWRlRGlyZWN0aW9uc31cbiAgICAgICAgICB2YWx1ZT17ZG1zLnBvbHlnb24ubGlzdFtpbmRleF0ubG9uZ2l0dWRlLmRpcmVjdGlvbn1cbiAgICAgICAgICBvbkNoYW5nZT17c2V0U3RhdGUoXG4gICAgICAgICAgICAoZHJhZnQ6IGFueSwgdmFsdWU6IGFueSkgPT5cbiAgICAgICAgICAgICAgKGRyYWZ0LmRtcy5wb2x5Z29uLmxpc3RbaW5kZXhdLmxvbmdpdHVkZS5kaXJlY3Rpb24gPSB2YWx1ZSlcbiAgICAgICAgICApfVxuICAgICAgICAvPlxuICAgICAgPC9EbXNMb25naXR1ZGU+XG4gICAgPC9Hcm91cD5cbiAgKSlcblxuICByZXR1cm4gKFxuICAgIDxMaXN0RWRpdG9yXG4gICAgICBsaXN0PXtkbXMucG9seWdvbi5saXN0fVxuICAgICAgZGVmYXVsdEl0ZW09e2Rtc1BvaW50fVxuICAgICAgb25DaGFuZ2U9e3NldFN0YXRlKFxuICAgICAgICAoZHJhZnQ6IGFueSwgdmFsdWU6IGFueSkgPT4gKGRyYWZ0LmRtcy5wb2x5Z29uLmxpc3QgPSB2YWx1ZSlcbiAgICAgICl9XG4gICAgPlxuICAgICAge3BvaW50c31cbiAgICA8L0xpc3RFZGl0b3I+XG4gIClcbn1cblxuY29uc3QgQm91bmRpbmdCb3ggPSAocHJvcHM6IGFueSkgPT4ge1xuICBjb25zdCB7IGRtcywgc2V0U3RhdGUgfSA9IHByb3BzXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGZsZXgtbm93cmFwIHNwYWNlLXktMlwiPlxuICAgICAgPERtc0xhdGl0dWRlXG4gICAgICAgIGxhYmVsPVwiU291dGhcIlxuICAgICAgICB2YWx1ZT17ZG1zLmJvdW5kaW5nYm94LnNvdXRoLmNvb3JkaW5hdGV9XG4gICAgICAgIG9uQ2hhbmdlPXtzZXRTdGF0ZShcbiAgICAgICAgICAoZHJhZnQ6IGFueSwgdmFsdWU6IGFueSkgPT5cbiAgICAgICAgICAgIChkcmFmdC5kbXMuYm91bmRpbmdib3guc291dGguY29vcmRpbmF0ZSA9IHZhbHVlKVxuICAgICAgICApfVxuICAgICAgPlxuICAgICAgICA8RGlyZWN0aW9uSW5wdXRcbiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHRzLW1pZ3JhdGUoMjc2OSkgRklYTUU6IE5vIG92ZXJsb2FkIG1hdGNoZXMgdGhpcyBjYWxsLlxuICAgICAgICAgIG9wdGlvbnM9e2xhdGl0dWRlRGlyZWN0aW9uc31cbiAgICAgICAgICB2YWx1ZT17ZG1zLmJvdW5kaW5nYm94LnNvdXRoLmRpcmVjdGlvbn1cbiAgICAgICAgICBvbkNoYW5nZT17c2V0U3RhdGUoXG4gICAgICAgICAgICAoZHJhZnQ6IGFueSwgdmFsdWU6IGFueSkgPT5cbiAgICAgICAgICAgICAgKGRyYWZ0LmRtcy5ib3VuZGluZ2JveC5zb3V0aC5kaXJlY3Rpb24gPSB2YWx1ZSlcbiAgICAgICAgICApfVxuICAgICAgICAvPlxuICAgICAgPC9EbXNMYXRpdHVkZT5cbiAgICAgIDxEbXNMYXRpdHVkZVxuICAgICAgICBsYWJlbD1cIk5vcnRoXCJcbiAgICAgICAgdmFsdWU9e2Rtcy5ib3VuZGluZ2JveC5ub3J0aC5jb29yZGluYXRlfVxuICAgICAgICBvbkNoYW5nZT17c2V0U3RhdGUoXG4gICAgICAgICAgKGRyYWZ0OiBhbnksIHZhbHVlOiBhbnkpID0+XG4gICAgICAgICAgICAoZHJhZnQuZG1zLmJvdW5kaW5nYm94Lm5vcnRoLmNvb3JkaW5hdGUgPSB2YWx1ZSlcbiAgICAgICAgKX1cbiAgICAgID5cbiAgICAgICAgPERpcmVjdGlvbklucHV0XG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciB0cy1taWdyYXRlKDI3NjkpIEZJWE1FOiBObyBvdmVybG9hZCBtYXRjaGVzIHRoaXMgY2FsbC5cbiAgICAgICAgICBvcHRpb25zPXtsYXRpdHVkZURpcmVjdGlvbnN9XG4gICAgICAgICAgdmFsdWU9e2Rtcy5ib3VuZGluZ2JveC5ub3J0aC5kaXJlY3Rpb259XG4gICAgICAgICAgb25DaGFuZ2U9e3NldFN0YXRlKFxuICAgICAgICAgICAgKGRyYWZ0OiBhbnksIHZhbHVlOiBhbnkpID0+XG4gICAgICAgICAgICAgIChkcmFmdC5kbXMuYm91bmRpbmdib3gubm9ydGguZGlyZWN0aW9uID0gdmFsdWUpXG4gICAgICAgICAgKX1cbiAgICAgICAgLz5cbiAgICAgIDwvRG1zTGF0aXR1ZGU+XG4gICAgICA8RG1zTG9uZ2l0dWRlXG4gICAgICAgIGxhYmVsPVwiV2VzdFwiXG4gICAgICAgIHZhbHVlPXtkbXMuYm91bmRpbmdib3gud2VzdC5jb29yZGluYXRlfVxuICAgICAgICBvbkNoYW5nZT17c2V0U3RhdGUoXG4gICAgICAgICAgKGRyYWZ0OiBhbnksIHZhbHVlOiBhbnkpID0+XG4gICAgICAgICAgICAoZHJhZnQuZG1zLmJvdW5kaW5nYm94Lndlc3QuY29vcmRpbmF0ZSA9IHZhbHVlKVxuICAgICAgICApfVxuICAgICAgPlxuICAgICAgICA8RGlyZWN0aW9uSW5wdXRcbiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHRzLW1pZ3JhdGUoMjc2OSkgRklYTUU6IE5vIG92ZXJsb2FkIG1hdGNoZXMgdGhpcyBjYWxsLlxuICAgICAgICAgIG9wdGlvbnM9e2xvbmdpdHVkZURpcmVjdGlvbnN9XG4gICAgICAgICAgdmFsdWU9e2Rtcy5ib3VuZGluZ2JveC53ZXN0LmRpcmVjdGlvbn1cbiAgICAgICAgICBvbkNoYW5nZT17c2V0U3RhdGUoXG4gICAgICAgICAgICAoZHJhZnQ6IGFueSwgdmFsdWU6IGFueSkgPT5cbiAgICAgICAgICAgICAgKGRyYWZ0LmRtcy5ib3VuZGluZ2JveC53ZXN0LmRpcmVjdGlvbiA9IHZhbHVlKVxuICAgICAgICAgICl9XG4gICAgICAgIC8+XG4gICAgICA8L0Rtc0xvbmdpdHVkZT5cbiAgICAgIDxEbXNMb25naXR1ZGVcbiAgICAgICAgbGFiZWw9XCJFYXN0XCJcbiAgICAgICAgdmFsdWU9e2Rtcy5ib3VuZGluZ2JveC5lYXN0LmNvb3JkaW5hdGV9XG4gICAgICAgIG9uQ2hhbmdlPXtzZXRTdGF0ZShcbiAgICAgICAgICAoZHJhZnQ6IGFueSwgdmFsdWU6IGFueSkgPT5cbiAgICAgICAgICAgIChkcmFmdC5kbXMuYm91bmRpbmdib3guZWFzdC5jb29yZGluYXRlID0gdmFsdWUpXG4gICAgICAgICl9XG4gICAgICA+XG4gICAgICAgIDxEaXJlY3Rpb25JbnB1dFxuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgdHMtbWlncmF0ZSgyNzY5KSBGSVhNRTogTm8gb3ZlcmxvYWQgbWF0Y2hlcyB0aGlzIGNhbGwuXG4gICAgICAgICAgb3B0aW9ucz17bG9uZ2l0dWRlRGlyZWN0aW9uc31cbiAgICAgICAgICB2YWx1ZT17ZG1zLmJvdW5kaW5nYm94LmVhc3QuZGlyZWN0aW9ufVxuICAgICAgICAgIG9uQ2hhbmdlPXtzZXRTdGF0ZShcbiAgICAgICAgICAgIChkcmFmdDogYW55LCB2YWx1ZTogYW55KSA9PlxuICAgICAgICAgICAgICAoZHJhZnQuZG1zLmJvdW5kaW5nYm94LmVhc3QuZGlyZWN0aW9uID0gdmFsdWUpXG4gICAgICAgICAgKX1cbiAgICAgICAgLz5cbiAgICAgIDwvRG1zTG9uZ2l0dWRlPlxuICAgIDwvZGl2PlxuICApXG59XG5cbmNvbnN0IExhdExvbmdETVMgPSAocHJvcHM6IGFueSkgPT4ge1xuICBjb25zdCB7IGRtcywgc2V0U3RhdGUgfSA9IHByb3BzXG5cbiAgY29uc3QgaW5wdXRzID0ge1xuICAgIHBvaW50OiBQb2ludCxcbiAgICBsaW5lOiBMaW5lLFxuICAgIGNpcmNsZTogQ2lyY2xlLFxuICAgIHBvbHlnb246IFBvbHlnb24sXG4gICAgYm91bmRpbmdib3g6IEJvdW5kaW5nQm94LFxuICB9XG5cbiAgLy8gQHRzLWV4cGVjdC1lcnJvciB0cy1taWdyYXRlKDcwNTMpIEZJWE1FOiBFbGVtZW50IGltcGxpY2l0bHkgaGFzIGFuICdhbnknIHR5cGUgYmVjYXVzZSBleHByZS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gIGNvbnN0IENvbXBvbmVudCA9IGlucHV0c1tkbXMuc2hhcGVdIHx8IG51bGxcblxuICByZXR1cm4gKFxuICAgIDxkaXY+XG4gICAgICA8UmFkaW9cbiAgICAgICAgdmFsdWU9e2Rtcy5zaGFwZX1cbiAgICAgICAgb25DaGFuZ2U9e3NldFN0YXRlKFxuICAgICAgICAgIChkcmFmdDogYW55LCB2YWx1ZTogYW55KSA9PiAoZHJhZnQuZG1zLnNoYXBlID0gdmFsdWUpXG4gICAgICAgICl9XG4gICAgICA+XG4gICAgICAgIDxSYWRpb0l0ZW0gdmFsdWU9XCJwb2ludFwiPlBvaW50PC9SYWRpb0l0ZW0+XG4gICAgICAgIDxSYWRpb0l0ZW0gdmFsdWU9XCJjaXJjbGVcIj5DaXJjbGU8L1JhZGlvSXRlbT5cbiAgICAgICAgPFJhZGlvSXRlbSB2YWx1ZT1cImxpbmVcIj5MaW5lPC9SYWRpb0l0ZW0+XG4gICAgICAgIDxSYWRpb0l0ZW0gdmFsdWU9XCJwb2x5Z29uXCI+UG9seWdvbjwvUmFkaW9JdGVtPlxuICAgICAgICA8UmFkaW9JdGVtIHZhbHVlPVwiYm91bmRpbmdib3hcIj5Cb3VuZGluZyBCb3g8L1JhZGlvSXRlbT5cbiAgICAgIDwvUmFkaW8+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImlucHV0LWxvY2F0aW9uIG10LTJcIj5cbiAgICAgICAge0NvbXBvbmVudCAhPT0gbnVsbCA/IDxDb21wb25lbnQgey4uLnByb3BzfSAvPiA6IG51bGx9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBMYXRMb25nRE1TXG4iXX0=