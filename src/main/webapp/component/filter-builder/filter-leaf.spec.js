import * as React from 'react';
import Enzyme, { mount } from 'enzyme';
import Adapter from '@wojtekmaj/enzyme-adapter-react-17';
Enzyme.configure({ adapter: new Adapter() });
import { expect } from 'chai';
import FilterLeaf from './filter-leaf';
import { FilterClass, } from './filter.structure';
import moment from 'moment';
import user from '../singletons/user-instance';
import { StartupDataStore } from '../../js/model/Startup/startup';
import { BasicDataTypePropertyName } from './reserved.properties';
function addTestDefs() {
    var _a;
    StartupDataStore.MetacardDefinitions.addDynamicallyFoundMetacardDefinitions({
        testing: (_a = {
                integerType: {
                    type: 'INTEGER',
                    id: 'integerType',
                    multivalued: false,
                    isInjected: false,
                },
                floatType: {
                    type: 'FLOAT',
                    id: 'floatType',
                    multivalued: false,
                    isInjected: false,
                },
                longType: {
                    type: 'LONG',
                    id: 'longType',
                    multivalued: false,
                    isInjected: false,
                },
                shortType: {
                    type: 'SHORT',
                    id: 'shortType',
                    multivalued: false,
                    isInjected: false,
                },
                doubleType: {
                    type: 'DOUBLE',
                    id: 'doubleType',
                    multivalued: false,
                    isInjected: false,
                },
                booleanType: {
                    type: 'BOOLEAN',
                    id: 'booleanType',
                    multivalued: false,
                    isInjected: false,
                },
                dateType: {
                    type: 'DATE',
                    id: 'dateType',
                    multivalued: false,
                    isInjected: false,
                },
                locationType: {
                    type: 'LOCATION',
                    id: 'locationType',
                    multivalued: false,
                    isInjected: false,
                },
                xmlType: {
                    type: 'XML',
                    id: 'xmlType',
                    multivalued: false,
                    isInjected: false,
                    hidden: true,
                },
                binaryType: {
                    type: 'BINARY',
                    id: 'binaryType',
                    multivalued: false,
                    isInjected: false,
                    hidden: true,
                },
                'location.country-code': {
                    type: 'STRING',
                    id: 'location.country-code',
                    multivalued: false,
                    isInjected: false,
                },
                datatype: {
                    type: 'STRING',
                    id: 'datatype',
                    multivalued: false,
                    isInjected: false,
                },
                anyText: {
                    type: 'STRING',
                    id: 'anyText',
                    multivalued: false,
                    isInjected: false,
                    hidden: true,
                }
            },
            _a[BasicDataTypePropertyName] = {
                type: 'STRING',
                id: BasicDataTypePropertyName,
                multivalued: false,
                isInjected: false,
                hidden: true,
            },
            _a),
    });
}
// do not rely on our own transforms for testing, rely on static data!
var data = {
    date1: {
        timezone: 'America/St_Johns',
        originalISO: '2021-01-15T06:53:54.316Z',
        originalDate: new Date('2021-01-15T06:53:54.316Z'),
        shiftedISO: '2021-01-15T10:23:54.316Z',
        shiftedDate: new Date('2021-01-15T10:23:54.316Z'),
        userFormatISO: '2021-01-15T03:23:54.316-03:30',
        userFormat24: '15 Jan 2021 03:23:54.316 -03:30',
        userFormat12: '15 Jan 2021 03:23:54.316 am -03:30',
    },
    date2: {
        timezone: 'America/St_Johns',
        userSuppliedInput: '15 Jan 2021 03:24:54.316 -02:30',
        parsedOutput: '15 Jan 2021 02:24:54.316 -03:30',
    },
    date3: {
        timezone: 'Etc/UTC',
        maxFuture: moment().add(10, 'years').toISOString(),
        disallowedFuture: moment().add(11, 'years').toISOString(),
    },
    location1: {
        type: 'LINE',
        mode: 'line',
        lineWidth: '50',
        line: [
            [0, 0],
            [1, 1],
        ],
    },
    location2: {
        type: 'POLYGON',
        mode: 'poly',
        polygonBufferWidth: '50',
        polygonBufferUnits: 'meters',
        polygon: [
            [0, 0],
            [1, 1],
            [2, 2],
            [0, 0],
        ],
    },
    location3: {
        type: 'POINTRADIUS',
        mode: 'circle',
        radiusUnits: 'meters',
        radius: 50,
        lat: 0,
        lon: 30,
    },
};
describe('filter leaf testing', function () {
    before(function () {
        /**
         * Needs to be done here, otherwise these get blown away when the mock fetch happens.
         */
        addTestDefs();
    });
    it('renders with a blank FilterClass', function () {
        mount(React.createElement(FilterLeaf, { filter: new FilterClass({}), setFilter: function () { } }));
    });
    it('renders with a non-blank text FilterClass', function () {
        var wrapper = mount(React.createElement(FilterLeaf, { filter: new FilterClass({
                type: 'ILIKE',
                property: 'anyText',
                value: 'text',
            }), setFilter: function () { } }));
        expect(wrapper.find('input').first().render().val()).to.equal('anyText');
        expect(wrapper.find('input').last().render().val()).to.equal('text');
    });
    it('renders with a non-blank number FilterClass', function () {
        var wrapper = mount(React.createElement(FilterLeaf, { filter: new FilterClass({
                type: '<',
                property: 'integerType',
                value: 4,
            }), setFilter: function () { } }));
        expect(wrapper.find('input').first().render().val()).to.equal('integerType');
        expect(wrapper.find('input').last().render().val()).to.equal('4');
    });
    it('renders with a non-blank integer FilterClass', function () {
        var wrapper = mount(React.createElement(FilterLeaf, { filter: new FilterClass({
                type: '<',
                property: 'integerType',
                value: 4,
            }), setFilter: function () { } }));
        expect(wrapper.find('input').first().render().val()).to.equal('integerType');
        expect(wrapper.find('input').last().render().val()).to.equal('4');
    });
    it('renders with a non-blank float FilterClass', function () {
        var wrapper = mount(React.createElement(FilterLeaf, { filter: new FilterClass({
                type: '<',
                property: 'floatType',
                value: 4,
            }), setFilter: function () { } }));
        expect(wrapper.find('input').first().render().val()).to.equal('floatType');
        expect(wrapper.find('input').last().render().val()).to.equal('4');
    });
    it('renders with a non-blank long FilterClass', function () {
        var wrapper = mount(React.createElement(FilterLeaf, { filter: new FilterClass({
                type: '<',
                property: 'longType',
                value: 4,
            }), setFilter: function () { } }));
        expect(wrapper.find('input').first().render().val()).to.equal('longType');
        expect(wrapper.find('input').last().render().val()).to.equal('4');
    });
    it('renders with a non-blank short FilterClass', function () {
        var wrapper = mount(React.createElement(FilterLeaf, { filter: new FilterClass({
                type: '<',
                property: 'shortType',
                value: 4,
            }), setFilter: function () { } }));
        expect(wrapper.find('input').first().render().val()).to.equal('shortType');
        expect(wrapper.find('input').last().render().val()).to.equal('4');
    });
    it('renders with a non-blank double FilterClass', function () {
        var wrapper = mount(React.createElement(FilterLeaf, { filter: new FilterClass({
                type: '<',
                property: 'doubleType',
                value: 4,
            }), setFilter: function () { } }));
        expect(wrapper.find('input').first().render().val()).to.equal('doubleType');
        expect(wrapper.find('input').last().render().val()).to.equal('4');
    });
    it('renders with a non-blank boolean FilterClass', function () {
        var wrapper = mount(React.createElement(FilterLeaf, { filter: new FilterClass({
                type: '=',
                property: 'booleanType',
                value: true,
            }), setFilter: function () { } }));
        expect(wrapper.find('input').first().render().val()).to.equal('booleanType');
        expect(wrapper.find('input').last().render().val()).to.equal('true');
    });
    it('renders with a non-blank date FilterClass', function () {
        user.get('user').get('preferences').set('timeZone', data.date1.timezone);
        var wrapper = mount(React.createElement(FilterLeaf, { filter: new FilterClass({
                type: 'AFTER',
                property: 'dateType',
                value: data.date1.originalISO,
            }), setFilter: function () { } }));
        expect(wrapper.find('input').first().render().val()).to.equal('dateType');
        expect(wrapper.find('input').last().render().val()).to.equal(data.date1.userFormatISO);
    });
    it('renders with a non-blank location FilterClass', function () {
        var wrapper = mount(React.createElement(FilterLeaf, { filter: new FilterClass({
                type: 'DWITHIN',
                property: 'locationType',
                value: data.location1,
            }), setFilter: function () { } }));
        var thingsToFind = Object.values(data.location1)
            .map(function (val) {
            if (typeof val !== 'string') {
                return JSON.stringify(val);
            }
            return val.toLowerCase();
        })
            .filter(function (val) { return val !== 'line'; });
        wrapper.find('input').forEach(function (node) {
            var rendering = node.render();
            var val = rendering.val().toLowerCase();
            var index = thingsToFind.indexOf(val);
            if (index >= 0) {
                thingsToFind.splice(index, 1);
            }
        });
        expect(thingsToFind.length).to.equal(0);
    });
    it('renders with a non-blank polygon location FilterClass', function () {
        var wrapper = mount(React.createElement(FilterLeaf, { filter: new FilterClass({
                type: 'DWITHIN',
                property: 'locationType',
                value: data.location2,
            }), setFilter: function () { } }));
        var thingsToFind = Object.values(data.location2)
            .map(function (val) {
            if (typeof val !== 'string') {
                return JSON.stringify(val);
            }
            return val.toLowerCase();
        })
            .filter(function (val) { return val !== 'poly'; });
        wrapper.find('input').forEach(function (node) {
            var rendering = node.render();
            var val = rendering.val().toLowerCase();
            var index = thingsToFind.indexOf(val);
            if (index >= 0) {
                thingsToFind.splice(index, 1);
            }
        });
        expect(thingsToFind.length).to.equal(0);
    });
    it('renders with a non-blank point radius location FilterClass', function () {
        var wrapper = mount(React.createElement(FilterLeaf, { filter: new FilterClass({
                type: 'DWITHIN',
                property: 'locationType',
                value: data.location3,
            }), setFilter: function () { } }));
        var thingsToFind = Object.values(data.location3)
            .map(function (val) {
            if (typeof val !== 'string') {
                return JSON.stringify(val);
            }
            if (val === 'POINTRADIUS') {
                return 'point-radius';
            }
            return val.toLowerCase();
        })
            .filter(function (val) { return val !== 'circle'; });
        wrapper.find('input').forEach(function (node) {
            var rendering = node.render();
            var val = rendering.val().toLowerCase();
            var index = thingsToFind.indexOf(val);
            if (index >= 0) {
                thingsToFind.splice(index, 1);
            }
        });
        expect(thingsToFind.length).to.equal(0);
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsdGVyLWxlYWYuc3BlYy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9tYWluL3dlYmFwcC9jb21wb25lbnQvZmlsdGVyLWJ1aWxkZXIvZmlsdGVyLWxlYWYuc3BlYy50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxLQUFLLEtBQUssTUFBTSxPQUFPLENBQUE7QUFDOUIsT0FBTyxNQUFNLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxRQUFRLENBQUE7QUFDdEMsT0FBTyxPQUFPLE1BQU0sb0NBQW9DLENBQUE7QUFDeEQsTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFLE9BQU8sRUFBRSxJQUFJLE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FBQTtBQUM1QyxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sTUFBTSxDQUFBO0FBQzdCLE9BQU8sVUFBVSxNQUFNLGVBQWUsQ0FBQTtBQUN0QyxPQUFPLEVBQ0wsV0FBVyxHQUlaLE1BQU0sb0JBQW9CLENBQUE7QUFDM0IsT0FBTyxNQUFNLE1BQU0sUUFBUSxDQUFBO0FBQzNCLE9BQU8sSUFBSSxNQUFNLDZCQUE2QixDQUFBO0FBQzlDLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGdDQUFnQyxDQUFBO0FBQ2pFLE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxNQUFNLHVCQUF1QixDQUFBO0FBQ2pFLFNBQVMsV0FBVzs7SUFDbEIsZ0JBQWdCLENBQUMsbUJBQW1CLENBQUMsc0NBQXNDLENBQUM7UUFDMUUsT0FBTztnQkFDTCxXQUFXLEVBQUU7b0JBQ1gsSUFBSSxFQUFFLFNBQVM7b0JBQ2YsRUFBRSxFQUFFLGFBQWE7b0JBQ2pCLFdBQVcsRUFBRSxLQUFLO29CQUNsQixVQUFVLEVBQUUsS0FBSztpQkFDbEI7Z0JBQ0QsU0FBUyxFQUFFO29CQUNULElBQUksRUFBRSxPQUFPO29CQUNiLEVBQUUsRUFBRSxXQUFXO29CQUNmLFdBQVcsRUFBRSxLQUFLO29CQUNsQixV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QTthQUN0QjtZQUNELE9BQU8sR0FBRyxDQUFDLFdBQVcsRUFBRSxDQUFBO1FBQzFCLENBQUMsQ0FBQzthQUNELE1BQU0sQ0FBQyxVQUFDLEdBQUcsSUFBSyxPQUFBLEdBQUcsS0FBSyxRQUFRLEVBQWhCLENBQWdCLENBQUMsQ0FBQTtRQUNwQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxVQUFDLElBQUk7WUFDakMsSUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFBO1lBQy9CLElBQU0sR0FBRyxHQUFHLFNBQVMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtZQUN6QyxJQUFNLEtBQUssR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFBO1lBQ3ZDLElBQUksS0FBSyxJQUFJLENBQUMsRUFBRTtnQkFDZCxZQUFZLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQTthQUM5QjtRQUNILENBQUMsQ0FBQyxDQUFBO1FBQ0YsTUFBTSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBQ3pDLENBQUMsQ0FBQyxDQUFBO0FBQ0osQ0FBQyxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCBFbnp5bWUsIHsgbW91bnQgfSBmcm9tICdlbnp5bWUnXG5pbXBvcnQgQWRhcHRlciBmcm9tICdAd29qdGVrbWFqL2VuenltZS1hZGFwdGVyLXJlYWN0LTE3J1xuRW56eW1lLmNvbmZpZ3VyZSh7IGFkYXB0ZXI6IG5ldyBBZGFwdGVyKCkgfSlcbmltcG9ydCB7IGV4cGVjdCB9IGZyb20gJ2NoYWknXG5pbXBvcnQgRmlsdGVyTGVhZiBmcm9tICcuL2ZpbHRlci1sZWFmJ1xuaW1wb3J0IHtcbiAgRmlsdGVyQ2xhc3MsXG4gIExpbmVMb2NhdGlvbixcbiAgUG9pbnRSYWRpdXNMb2NhdGlvbixcbiAgUG9seWdvbkxvY2F0aW9uLFxufSBmcm9tICcuL2ZpbHRlci5zdHJ1Y3R1cmUnXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCdcbmltcG9ydCB1c2VyIGZyb20gJy4uL3NpbmdsZXRvbnMvdXNlci1pbnN0YW5jZSdcbmltcG9ydCB7IFN0YXJ0dXBEYXRhU3RvcmUgfSBmcm9tICcuLi8uLi9qcy9tb2RlbC9TdGFydHVwL3N0YXJ0dXAnXG5pbXBvcnQgeyBCYXNpY0RhdGFUeXBlUHJvcGVydHlOYW1lIH0gZnJvbSAnLi9yZXNlcnZlZC5wcm9wZXJ0aWVzJ1xuZnVuY3Rpb24gYWRkVGVzdERlZnMoKSB7XG4gIFN0YXJ0dXBEYXRhU3RvcmUuTWV0YWNhcmREZWZpbml0aW9ucy5hZGREeW5hbWljYWxseUZvdW5kTWV0YWNhcmREZWZpbml0aW9ucyh7XG4gICAgdGVzdGluZzoge1xuICAgICAgaW50ZWdlclR5cGU6IHtcbiAgICAgICAgdHlwZTogJ0lOVEVHRVInLFxuICAgICAgICBpZDogJ2ludGVnZXJUeXBlJyxcbiAgICAgICAgbXVsdGl2YWx1ZWQ6IGZhbHNlLFxuICAgICAgICBpc0luamVjdGVkOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBmbG9hdFR5cGU6IHtcbiAgICAgICAgdHlwZTogJ0ZMT0FUJyxcbiAgICAgICAgaWQ6ICdmbG9hdFR5cGUnLFxuICAgICAgICBtdWx0aXZhbHVlZDogZmFsc2UsXG4gICAgICAgIGlzSW5qZWN0ZWQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIGxvbmdUeXBlOiB7XG4gICAgICAgIHR5cGU6ICdMT05HJyxcbiAgICAgICAgaWQ6ICdsb25nVHlwZScsXG4gICAgICAgIG11bHRpdmFsdWVkOiBmYWxzZSxcbiAgICAgICAgaXNJbmplY3RlZDogZmFsc2UsXG4gICAgICB9LFxuICAgICAgc2hvcnRUeXBlOiB7XG4gICAgICAgIHR5cGU6ICdTSE9SVCcsXG4gICAgICAgIGlkOiAnc2hvcnRUeXBlJyxcbiAgICAgICAgbXVsdGl2YWx1ZWQ6IGZhbHNlLFxuICAgICAgICBpc0luamVjdGVkOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBkb3VibGVUeXBlOiB7XG4gICAgICAgIHR5cGU6ICdET1VCTEUnLFxuICAgICAgICBpZDogJ2RvdWJsZVR5cGUnLFxuICAgICAgICBtdWx0aXZhbHVlZDogZmFsc2UsXG4gICAgICAgIGlzSW5qZWN0ZWQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIGJvb2xlYW5UeXBlOiB7XG4gICAgICAgIHR5cGU6ICdCT09MRUFOJyxcbiAgICAgICAgaWQ6ICdib29sZWFuVHlwZScsXG4gICAgICAgIG11bHRpdmFsdWVkOiBmYWxzZSxcbiAgICAgICAgaXNJbmplY3RlZDogZmFsc2UsXG4gICAgICB9LFxuICAgICAgZGF0ZVR5cGU6IHtcbiAgICAgICAgdHlwZTogJ0RBVEUnLFxuICAgICAgICBpZDogJ2RhdGVUeXBlJyxcbiAgICAgICAgbXVsdGl2YWx1ZWQ6IGZhbHNlLFxuICAgICAgICBpc0luamVjdGVkOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBsb2NhdGlvblR5cGU6IHtcbiAgICAgICAgdHlwZTogJ0xPQ0FUSU9OJyxcbiAgICAgICAgaWQ6ICdsb2NhdGlvblR5cGUnLFxuICAgICAgICBtdWx0aXZhbHVlZDogZmFsc2UsXG4gICAgICAgIGlzSW5qZWN0ZWQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIHhtbFR5cGU6IHtcbiAgICAgICAgdHlwZTogJ1hNTCcsXG4gICAgICAgIGlkOiAneG1sVHlwZScsXG4gICAgICAgIG11bHRpdmFsdWVkOiBmYWxzZSxcbiAgICAgICAgaXNJbmplY3RlZDogZmFsc2UsXG4gICAgICAgIGhpZGRlbjogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICBiaW5hcnlUeXBlOiB7XG4gICAgICAgIHR5cGU6ICdCSU5BUlknLFxuICAgICAgICBpZDogJ2JpbmFyeVR5cGUnLFxuICAgICAgICBtdWx0aXZhbHVlZDogZmFsc2UsXG4gICAgICAgIGlzSW5qZWN0ZWQ6IGZhbHNlLFxuICAgICAgICBoaWRkZW46IHRydWUsXG4gICAgICB9LFxuICAgICAgJ2xvY2F0aW9uLmNvdW50cnktY29kZSc6IHtcbiAgICAgICAgdHlwZTogJ1NUUklORycsXG4gICAgICAgIGlkOiAnbG9jYXRpb24uY291bnRyeS1jb2RlJyxcbiAgICAgICAgbXVsdGl2YWx1ZWQ6IGZhbHNlLFxuICAgICAgICBpc0luamVjdGVkOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBkYXRhdHlwZToge1xuICAgICAgICB0eXBlOiAnU1RSSU5HJyxcbiAgICAgICAgaWQ6ICdkYXRhdHlwZScsXG4gICAgICAgIG11bHRpdmFsdWVkOiBmYWxzZSxcbiAgICAgICAgaXNJbmplY3RlZDogZmFsc2UsXG4gICAgICB9LFxuICAgICAgYW55VGV4dDoge1xuICAgICAgICB0eXBlOiAnU1RSSU5HJyxcbiAgICAgICAgaWQ6ICdhbnlUZXh0JyxcbiAgICAgICAgbXVsdGl2YWx1ZWQ6IGZhbHNlLFxuICAgICAgICBpc0luamVjdGVkOiBmYWxzZSxcbiAgICAgICAgaGlkZGVuOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIFtCYXNpY0RhdGFUeXBlUHJvcGVydHlOYW1lXToge1xuICAgICAgICB0eXBlOiAnU1RSSU5HJyxcbiAgICAgICAgaWQ6IEJhc2ljRGF0YVR5cGVQcm9wZXJ0eU5hbWUsXG4gICAgICAgIG11bHRpdmFsdWVkOiBmYWxzZSxcbiAgICAgICAgaXNJbmplY3RlZDogZmFsc2UsXG4gICAgICAgIGhpZGRlbjogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcbn1cblxuLy8gZG8gbm90IHJlbHkgb24gb3VyIG93biB0cmFuc2Zvcm1zIGZvciB0ZXN0aW5nLCByZWx5IG9uIHN0YXRpYyBkYXRhIVxuY29uc3QgZGF0YSA9IHtcbiAgZGF0ZTE6IHtcbiAgICB0aW1lem9uZTogJ0FtZXJpY2EvU3RfSm9obnMnLFxuICAgIG9yaWdpbmFsSVNPOiAnMjAyMS0wMS0xNVQwNjo1Mzo1NC4zMTZaJyxcbiAgICBvcmlnaW5hbERhdGU6IG5ldyBEYXRlKCcyMDIxLTAxLTE1VDA2OjUzOjU0LjMxNlonKSxcbiAgICBzaGlmdGVkSVNPOiAnMjAyMS0wMS0xNVQxMDoyMzo1NC4zMTZaJyxcbiAgICBzaGlmdGVkRGF0ZTogbmV3IERhdGUoJzIwMjEtMDEtMTVUMTA6MjM6NTQuMzE2WicpLFxuICAgIHVzZXJGb3JtYXRJU086ICcyMDIxLTAxLTE1VDAzOjIzOjU0LjMxNi0wMzozMCcsXG4gICAgdXNlckZvcm1hdDI0OiAnMTUgSmFuIDIwMjEgMDM6MjM6NTQuMzE2IC0wMzozMCcsXG4gICAgdXNlckZvcm1hdDEyOiAnMTUgSmFuIDIwMjEgMDM6MjM6NTQuMzE2IGFtIC0wMzozMCcsXG4gIH0sXG4gIGRhdGUyOiB7XG4gICAgdGltZXpvbmU6ICdBbWVyaWNhL1N0X0pvaG5zJyxcbiAgICB1c2VyU3VwcGxpZWRJbnB1dDogJzE1IEphbiAyMDIxIDAzOjI0OjU0LjMxNiAtMDI6MzAnLFxuICAgIHBhcnNlZE91dHB1dDogJzE1IEphbiAyMDIxIDAyOjI0OjU0LjMxNiAtMDM6MzAnLFxuICB9LFxuICBkYXRlMzoge1xuICAgIHRpbWV6b25lOiAnRXRjL1VUQycsXG4gICAgbWF4RnV0dXJlOiBtb21lbnQoKS5hZGQoMTAsICd5ZWFycycpLnRvSVNPU3RyaW5nKCksXG4gICAgZGlzYWxsb3dlZEZ1dHVyZTogbW9tZW50KCkuYWRkKDExLCAneWVhcnMnKS50b0lTT1N0cmluZygpLFxuICB9LFxuICBsb2NhdGlvbjE6IHtcbiAgICB0eXBlOiAnTElORScsXG4gICAgbW9kZTogJ2xpbmUnLFxuICAgIGxpbmVXaWR0aDogJzUwJyxcbiAgICBsaW5lOiBbXG4gICAgICBbMCwgMF0sXG4gICAgICBbMSwgMV0sXG4gICAgXSxcbiAgfSBhcyBMaW5lTG9jYXRpb24sXG4gIGxvY2F0aW9uMjoge1xuICAgIHR5cGU6ICdQT0xZR09OJyxcbiAgICBtb2RlOiAncG9seScsXG4gICAgcG9seWdvbkJ1ZmZlcldpZHRoOiAnNTAnLFxuICAgIHBvbHlnb25CdWZmZXJVbml0czogJ21ldGVycycsXG4gICAgcG9seWdvbjogW1xuICAgICAgWzAsIDBdLFxuICAgICAgWzEsIDFdLFxuICAgICAgWzIsIDJdLFxuICAgICAgWzAsIDBdLFxuICAgIF0sXG4gIH0gYXMgUG9seWdvbkxvY2F0aW9uLFxuICBsb2NhdGlvbjM6IHtcbiAgICB0eXBlOiAnUE9JTlRSQURJVVMnLFxuICAgIG1vZGU6ICdjaXJjbGUnLFxuICAgIHJhZGl1c1VuaXRzOiAnbWV0ZXJzJyxcbiAgICByYWRpdXM6IDUwLFxuICAgIGxhdDogMCxcbiAgICBsb246IDMwLFxuICB9IGFzIFBvaW50UmFkaXVzTG9jYXRpb24sXG59XG5cbmRlc2NyaWJlKCdmaWx0ZXIgbGVhZiB0ZXN0aW5nJywgKCkgPT4ge1xuICBiZWZvcmUoKCkgPT4ge1xuICAgIC8qKlxuICAgICAqIE5lZWRzIHRvIGJlIGRvbmUgaGVyZSwgb3RoZXJ3aXNlIHRoZXNlIGdldCBibG93biBhd2F5IHdoZW4gdGhlIG1vY2sgZmV0Y2ggaGFwcGVucy5cbiAgICAgKi9cbiAgICBhZGRUZXN0RGVmcygpXG4gIH0pXG4gIGl0KCdyZW5kZXJzIHdpdGggYSBibGFuayBGaWx0ZXJDbGFzcycsICgpID0+IHtcbiAgICBtb3VudCg8RmlsdGVyTGVhZiBmaWx0ZXI9e25ldyBGaWx0ZXJDbGFzcyh7fSl9IHNldEZpbHRlcj17KCkgPT4ge319IC8+KVxuICB9KVxuICBpdCgncmVuZGVycyB3aXRoIGEgbm9uLWJsYW5rIHRleHQgRmlsdGVyQ2xhc3MnLCAoKSA9PiB7XG4gICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KFxuICAgICAgPEZpbHRlckxlYWZcbiAgICAgICAgZmlsdGVyPXtcbiAgICAgICAgICBuZXcgRmlsdGVyQ2xhc3Moe1xuICAgICAgICAgICAgdHlwZTogJ0lMSUtFJyxcbiAgICAgICAgICAgIHByb3BlcnR5OiAnYW55VGV4dCcsXG4gICAgICAgICAgICB2YWx1ZTogJ3RleHQnLFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgc2V0RmlsdGVyPXsoKSA9PiB7fX1cbiAgICAgIC8+XG4gICAgKVxuICAgIGV4cGVjdCh3cmFwcGVyLmZpbmQoJ2lucHV0JykuZmlyc3QoKS5yZW5kZXIoKS52YWwoKSkudG8uZXF1YWwoJ2FueVRleHQnKVxuICAgIGV4cGVjdCh3cmFwcGVyLmZpbmQoJ2lucHV0JykubGFzdCgpLnJlbmRlcigpLnZhbCgpKS50by5lcXVhbCgndGV4dCcpXG4gIH0pXG4gIGl0KCdyZW5kZXJzIHdpdGggYSBub24tYmxhbmsgbnVtYmVyIEZpbHRlckNsYXNzJywgKCkgPT4ge1xuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudChcbiAgICAgIDxGaWx0ZXJMZWFmXG4gICAgICAgIGZpbHRlcj17XG4gICAgICAgICAgbmV3IEZpbHRlckNsYXNzKHtcbiAgICAgICAgICAgIHR5cGU6ICc8JyxcbiAgICAgICAgICAgIHByb3BlcnR5OiAnaW50ZWdlclR5cGUnLFxuICAgICAgICAgICAgdmFsdWU6IDQsXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBzZXRGaWx0ZXI9eygpID0+IHt9fVxuICAgICAgLz5cbiAgICApXG4gICAgZXhwZWN0KHdyYXBwZXIuZmluZCgnaW5wdXQnKS5maXJzdCgpLnJlbmRlcigpLnZhbCgpKS50by5lcXVhbCgnaW50ZWdlclR5cGUnKVxuICAgIGV4cGVjdCh3cmFwcGVyLmZpbmQoJ2lucHV0JykubGFzdCgpLnJlbmRlcigpLnZhbCgpKS50by5lcXVhbCgnNCcpXG4gIH0pXG4gIGl0KCdyZW5kZXJzIHdpdGggYSBub24tYmxhbmsgaW50ZWdlciBGaWx0ZXJDbGFzcycsICgpID0+IHtcbiAgICBjb25zdCB3cmFwcGVyID0gbW91bnQoXG4gICAgICA8RmlsdGVyTGVhZlxuICAgICAgICBmaWx0ZXI9e1xuICAgICAgICAgIG5ldyBGaWx0ZXJDbGFzcyh7XG4gICAgICAgICAgICB0eXBlOiAnPCcsXG4gICAgICAgICAgICBwcm9wZXJ0eTogJ2ludGVnZXJUeXBlJyxcbiAgICAgICAgICAgIHZhbHVlOiA0LFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgc2V0RmlsdGVyPXsoKSA9PiB7fX1cbiAgICAgIC8+XG4gICAgKVxuICAgIGV4cGVjdCh3cmFwcGVyLmZpbmQoJ2lucHV0JykuZmlyc3QoKS5yZW5kZXIoKS52YWwoKSkudG8uZXF1YWwoJ2ludGVnZXJUeXBlJylcbiAgICBleHBlY3Qod3JhcHBlci5maW5kKCdpbnB1dCcpLmxhc3QoKS5yZW5kZXIoKS52YWwoKSkudG8uZXF1YWwoJzQnKVxuICB9KVxuICBpdCgncmVuZGVycyB3aXRoIGEgbm9uLWJsYW5rIGZsb2F0IEZpbHRlckNsYXNzJywgKCkgPT4ge1xuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudChcbiAgICAgIDxGaWx0ZXJMZWFmXG4gICAgICAgIGZpbHRlcj17XG4gICAgICAgICAgbmV3IEZpbHRlckNsYXNzKHtcbiAgICAgICAgICAgIHR5cGU6ICc8JyxcbiAgICAgICAgICAgIHByb3BlcnR5OiAnZmxvYXRUeXBlJyxcbiAgICAgICAgICAgIHZhbHVlOiA0LFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgc2V0RmlsdGVyPXsoKSA9PiB7fX1cbiAgICAgIC8+XG4gICAgKVxuICAgIGV4cGVjdCh3cmFwcGVyLmZpbmQoJ2lucHV0JykuZmlyc3QoKS5yZW5kZXIoKS52YWwoKSkudG8uZXF1YWwoJ2Zsb2F0VHlwZScpXG4gICAgZXhwZWN0KHdyYXBwZXIuZmluZCgnaW5wdXQnKS5sYXN0KCkucmVuZGVyKCkudmFsKCkpLnRvLmVxdWFsKCc0JylcbiAgfSlcbiAgaXQoJ3JlbmRlcnMgd2l0aCBhIG5vbi1ibGFuayBsb25nIEZpbHRlckNsYXNzJywgKCkgPT4ge1xuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudChcbiAgICAgIDxGaWx0ZXJMZWFmXG4gICAgICAgIGZpbHRlcj17XG4gICAgICAgICAgbmV3IEZpbHRlckNsYXNzKHtcbiAgICAgICAgICAgIHR5cGU6ICc8JyxcbiAgICAgICAgICAgIHByb3BlcnR5OiAnbG9uZ1R5cGUnLFxuICAgICAgICAgICAgdmFsdWU6IDQsXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBzZXRGaWx0ZXI9eygpID0+IHt9fVxuICAgICAgLz5cbiAgICApXG4gICAgZXhwZWN0KHdyYXBwZXIuZmluZCgnaW5wdXQnKS5maXJzdCgpLnJlbmRlcigpLnZhbCgpKS50by5lcXVhbCgnbG9uZ1R5cGUnKVxuICAgIGV4cGVjdCh3cmFwcGVyLmZpbmQoJ2lucHV0JykubGFzdCgpLnJlbmRlcigpLnZhbCgpKS50by5lcXVhbCgnNCcpXG4gIH0pXG4gIGl0KCdyZW5kZXJzIHdpdGggYSBub24tYmxhbmsgc2hvcnQgRmlsdGVyQ2xhc3MnLCAoKSA9PiB7XG4gICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KFxuICAgICAgPEZpbHRlckxlYWZcbiAgICAgICAgZmlsdGVyPXtcbiAgICAgICAgICBuZXcgRmlsdGVyQ2xhc3Moe1xuICAgICAgICAgICAgdHlwZTogJzwnLFxuICAgICAgICAgICAgcHJvcGVydHk6ICdzaG9ydFR5cGUnLFxuICAgICAgICAgICAgdmFsdWU6IDQsXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBzZXRGaWx0ZXI9eygpID0+IHt9fVxuICAgICAgLz5cbiAgICApXG4gICAgZXhwZWN0KHdyYXBwZXIuZmluZCgnaW5wdXQnKS5maXJzdCgpLnJlbmRlcigpLnZhbCgpKS50by5lcXVhbCgnc2hvcnRUeXBlJylcbiAgICBleHBlY3Qod3JhcHBlci5maW5kKCdpbnB1dCcpLmxhc3QoKS5yZW5kZXIoKS52YWwoKSkudG8uZXF1YWwoJzQnKVxuICB9KVxuICBpdCgncmVuZGVycyB3aXRoIGEgbm9uLWJsYW5rIGRvdWJsZSBGaWx0ZXJDbGFzcycsICgpID0+IHtcbiAgICBjb25zdCB3cmFwcGVyID0gbW91bnQoXG4gICAgICA8RmlsdGVyTGVhZlxuICAgICAgICBmaWx0ZXI9e1xuICAgICAgICAgIG5ldyBGaWx0ZXJDbGFzcyh7XG4gICAgICAgICAgICB0eXBlOiAnPCcsXG4gICAgICAgICAgICBwcm9wZXJ0eTogJ2RvdWJsZVR5cGUnLFxuICAgICAgICAgICAgdmFsdWU6IDQsXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBzZXRGaWx0ZXI9eygpID0+IHt9fVxuICAgICAgLz5cbiAgICApXG4gICAgZXhwZWN0KHdyYXBwZXIuZmluZCgnaW5wdXQnKS5maXJzdCgpLnJlbmRlcigpLnZhbCgpKS50by5lcXVhbCgnZG91YmxlVHlwZScpXG4gICAgZXhwZWN0KHdyYXBwZXIuZmluZCgnaW5wdXQnKS5sYXN0KCkucmVuZGVyKCkudmFsKCkpLnRvLmVxdWFsKCc0JylcbiAgfSlcbiAgaXQoJ3JlbmRlcnMgd2l0aCBhIG5vbi1ibGFuayBib29sZWFuIEZpbHRlckNsYXNzJywgKCkgPT4ge1xuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudChcbiAgICAgIDxGaWx0ZXJMZWFmXG4gICAgICAgIGZpbHRlcj17XG4gICAgICAgICAgbmV3IEZpbHRlckNsYXNzKHtcbiAgICAgICAgICAgIHR5cGU6ICc9JyxcbiAgICAgICAgICAgIHByb3BlcnR5OiAnYm9vbGVhblR5cGUnLFxuICAgICAgICAgICAgdmFsdWU6IHRydWUsXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBzZXRGaWx0ZXI9eygpID0+IHt9fVxuICAgICAgLz5cbiAgICApXG4gICAgZXhwZWN0KHdyYXBwZXIuZmluZCgnaW5wdXQnKS5maXJzdCgpLnJlbmRlcigpLnZhbCgpKS50by5lcXVhbCgnYm9vbGVhblR5cGUnKVxuICAgIGV4cGVjdCh3cmFwcGVyLmZpbmQoJ2lucHV0JykubGFzdCgpLnJlbmRlcigpLnZhbCgpKS50by5lcXVhbCgndHJ1ZScpXG4gIH0pXG4gIGl0KCdyZW5kZXJzIHdpdGggYSBub24tYmxhbmsgZGF0ZSBGaWx0ZXJDbGFzcycsICgpID0+IHtcbiAgICB1c2VyLmdldCgndXNlcicpLmdldCgncHJlZmVyZW5jZXMnKS5zZXQoJ3RpbWVab25lJywgZGF0YS5kYXRlMS50aW1lem9uZSlcblxuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudChcbiAgICAgIDxGaWx0ZXJMZWFmXG4gICAgICAgIGZpbHRlcj17XG4gICAgICAgICAgbmV3IEZpbHRlckNsYXNzKHtcbiAgICAgICAgICAgIHR5cGU6ICdBRlRFUicsXG4gICAgICAgICAgICBwcm9wZXJ0eTogJ2RhdGVUeXBlJyxcbiAgICAgICAgICAgIHZhbHVlOiBkYXRhLmRhdGUxLm9yaWdpbmFsSVNPLFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgc2V0RmlsdGVyPXsoKSA9PiB7fX1cbiAgICAgIC8+XG4gICAgKVxuICAgIGV4cGVjdCh3cmFwcGVyLmZpbmQoJ2lucHV0JykuZmlyc3QoKS5yZW5kZXIoKS52YWwoKSkudG8uZXF1YWwoJ2RhdGVUeXBlJylcbiAgICBleHBlY3Qod3JhcHBlci5maW5kKCdpbnB1dCcpLmxhc3QoKS5yZW5kZXIoKS52YWwoKSkudG8uZXF1YWwoXG4gICAgICBkYXRhLmRhdGUxLnVzZXJGb3JtYXRJU09cbiAgICApXG4gIH0pXG4gIGl0KCdyZW5kZXJzIHdpdGggYSBub24tYmxhbmsgbG9jYXRpb24gRmlsdGVyQ2xhc3MnLCAoKSA9PiB7XG4gICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KFxuICAgICAgPEZpbHRlckxlYWZcbiAgICAgICAgZmlsdGVyPXtcbiAgICAgICAgICBuZXcgRmlsdGVyQ2xhc3Moe1xuICAgICAgICAgICAgdHlwZTogJ0RXSVRISU4nLFxuICAgICAgICAgICAgcHJvcGVydHk6ICdsb2NhdGlvblR5cGUnLFxuICAgICAgICAgICAgdmFsdWU6IGRhdGEubG9jYXRpb24xLFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgc2V0RmlsdGVyPXsoKSA9PiB7fX1cbiAgICAgIC8+XG4gICAgKVxuICAgIGNvbnN0IHRoaW5nc1RvRmluZCA9IE9iamVjdC52YWx1ZXMoZGF0YS5sb2NhdGlvbjEpXG4gICAgICAubWFwKCh2YWwpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWwgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsLnRvTG93ZXJDYXNlKClcbiAgICAgIH0pXG4gICAgICAuZmlsdGVyKCh2YWwpID0+IHZhbCAhPT0gJ2xpbmUnKVxuICAgIHdyYXBwZXIuZmluZCgnaW5wdXQnKS5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICBjb25zdCByZW5kZXJpbmcgPSBub2RlLnJlbmRlcigpXG4gICAgICBjb25zdCB2YWwgPSByZW5kZXJpbmcudmFsKCkudG9Mb3dlckNhc2UoKVxuICAgICAgY29uc3QgaW5kZXggPSB0aGluZ3NUb0ZpbmQuaW5kZXhPZih2YWwpXG4gICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICB0aGluZ3NUb0ZpbmQuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgfVxuICAgIH0pXG4gICAgZXhwZWN0KHRoaW5nc1RvRmluZC5sZW5ndGgpLnRvLmVxdWFsKDApXG4gIH0pXG4gIGl0KCdyZW5kZXJzIHdpdGggYSBub24tYmxhbmsgcG9seWdvbiBsb2NhdGlvbiBGaWx0ZXJDbGFzcycsICgpID0+IHtcbiAgICBjb25zdCB3cmFwcGVyID0gbW91bnQoXG4gICAgICA8RmlsdGVyTGVhZlxuICAgICAgICBmaWx0ZXI9e1xuICAgICAgICAgIG5ldyBGaWx0ZXJDbGFzcyh7XG4gICAgICAgICAgICB0eXBlOiAnRFdJVEhJTicsXG4gICAgICAgICAgICBwcm9wZXJ0eTogJ2xvY2F0aW9uVHlwZScsXG4gICAgICAgICAgICB2YWx1ZTogZGF0YS5sb2NhdGlvbjIsXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBzZXRGaWx0ZXI9eygpID0+IHt9fVxuICAgICAgLz5cbiAgICApXG4gICAgY29uc3QgdGhpbmdzVG9GaW5kID0gT2JqZWN0LnZhbHVlcyhkYXRhLmxvY2F0aW9uMilcbiAgICAgIC5tYXAoKHZhbCkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHZhbCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWwudG9Mb3dlckNhc2UoKVxuICAgICAgfSlcbiAgICAgIC5maWx0ZXIoKHZhbCkgPT4gdmFsICE9PSAncG9seScpXG4gICAgd3JhcHBlci5maW5kKCdpbnB1dCcpLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgIGNvbnN0IHJlbmRlcmluZyA9IG5vZGUucmVuZGVyKClcbiAgICAgIGNvbnN0IHZhbCA9IHJlbmRlcmluZy52YWwoKS50b0xvd2VyQ2FzZSgpXG4gICAgICBjb25zdCBpbmRleCA9IHRoaW5nc1RvRmluZC5pbmRleE9mKHZhbClcbiAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgIHRoaW5nc1RvRmluZC5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICB9XG4gICAgfSlcbiAgICBleHBlY3QodGhpbmdzVG9GaW5kLmxlbmd0aCkudG8uZXF1YWwoMClcbiAgfSlcbiAgaXQoJ3JlbmRlcnMgd2l0aCBhIG5vbi1ibGFuayBwb2ludCByYWRpdXMgbG9jYXRpb24gRmlsdGVyQ2xhc3MnLCAoKSA9PiB7XG4gICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KFxuICAgICAgPEZpbHRlckxlYWZcbiAgICAgICAgZmlsdGVyPXtcbiAgICAgICAgICBuZXcgRmlsdGVyQ2xhc3Moe1xuICAgICAgICAgICAgdHlwZTogJ0RXSVRISU4nLFxuICAgICAgICAgICAgcHJvcGVydHk6ICdsb2NhdGlvblR5cGUnLFxuICAgICAgICAgICAgdmFsdWU6IGRhdGEubG9jYXRpb24zLFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgc2V0RmlsdGVyPXsoKSA9PiB7fX1cbiAgICAgIC8+XG4gICAgKVxuICAgIGNvbnN0IHRoaW5nc1RvRmluZCA9IE9iamVjdC52YWx1ZXMoZGF0YS5sb2NhdGlvbjMpXG4gICAgICAubWFwKCh2YWwpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWwgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbClcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsID09PSAnUE9JTlRSQURJVVMnKSB7XG4gICAgICAgICAgcmV0dXJuICdwb2ludC1yYWRpdXMnXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbC50b0xvd2VyQ2FzZSgpXG4gICAgICB9KVxuICAgICAgLmZpbHRlcigodmFsKSA9PiB2YWwgIT09ICdjaXJjbGUnKVxuICAgIHdyYXBwZXIuZmluZCgnaW5wdXQnKS5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICBjb25zdCByZW5kZXJpbmcgPSBub2RlLnJlbmRlcigpXG4gICAgICBjb25zdCB2YWwgPSByZW5kZXJpbmcudmFsKCkudG9Mb3dlckNhc2UoKVxuICAgICAgY29uc3QgaW5kZXggPSB0aGluZ3NUb0ZpbmQuaW5kZXhPZih2YWwpXG4gICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICB0aGluZ3NUb0ZpbmQuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgfVxuICAgIH0pXG4gICAgZXhwZWN0KHRoaW5nc1RvRmluZC5sZW5ndGgpLnRvLmVxdWFsKDApXG4gIH0pXG59KVxuIl19