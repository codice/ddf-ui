export var isRelativeValue = function (value) {
    return (typeof value === 'object' &&
        value !== null &&
        'last' in value &&
        'unit' in value &&
        typeof value.last === 'string' &&
        ['m', 'h', 'd', 'M', 'y', 's', 'w'].includes(value.unit));
};
export var isAroundValue = function (value) {
    return (typeof value === 'object' &&
        value !== null &&
        'date' in value &&
        'buffer' in value &&
        'direction' in value &&
        typeof value.date === 'string' &&
        typeof value.buffer === 'object' &&
        'amount' in value.buffer &&
        'unit' in value.buffer &&
        typeof value.buffer.amount === 'string' &&
        ['both', 'before', 'after'].includes(value.direction));
};
export var isProximityValue = function (value) {
    return (typeof value === 'object' &&
        value !== null &&
        'first' in value &&
        'second' in value &&
        'distance' in value &&
        typeof value.first === 'string' &&
        typeof value.second === 'string' &&
        typeof value.distance === 'number');
};
export var isDateValue = function (value) {
    return typeof value === 'string';
};
export var isBooleanValue = function (value) {
    return typeof value === 'boolean';
};
export var isTextValue = function (value) {
    return typeof value === 'string';
};
export var isFloatValue = function (value) {
    return typeof value === 'number';
};
export var isIntegerValue = function (value) {
    return Number.isInteger(value);
};
export var isDuringValue = function (value) {
    return (typeof value === 'object' &&
        value !== null &&
        'start' in value &&
        'end' in value &&
        typeof value.start === 'string' &&
        typeof value.end === 'string');
};
export var isBetweenValue = function (value) {
    return (typeof value === 'object' &&
        value !== null &&
        'start' in value &&
        'end' in value &&
        Number.isInteger(value.start) &&
        Number.isInteger(value.end));
};
export var isMultivalue = function (value) {
    return Array.isArray(value) && value.every(function (v) { return typeof v === 'string'; });
};
export var isBooleanTextValue = function (value) {
    return (typeof value === 'object' &&
        value !== null &&
        'text' in value &&
        'cql' in value &&
        'error' in value &&
        typeof value.text === 'string' &&
        typeof value.cql === 'string' &&
        typeof value.error === 'boolean');
};
export var isLocationValue = function (value) {
    return (typeof value === 'object' &&
        value !== null &&
        'type' in value &&
        (value.type === 'LINE' ||
            value.type === 'POLYGON' ||
            value.type === 'POINTRADIUS'));
};
export var isValueEmpty = function (filter) {
    var type = filter.type;
    if (type === 'IS NULL') {
        return false; // IS NULL is never empty
    }
    var value = filter.value;
    if (value === null || value === undefined || value === '') {
        return true;
    }
    if (isDateValue(value)) {
        return value.trim() === '';
    }
    if (isBooleanValue(value)) {
        return false; // Boolean values can't be "empty"
    }
    if (isTextValue(value)) {
        return value.trim() === '';
    }
    if (isFloatValue(value)) {
        return isNaN(value);
    }
    if (isIntegerValue(value)) {
        return isNaN(value);
    }
    if (isDuringValue(value)) {
        return value.start.trim() === '' || value.end.trim() === '';
    }
    if (isBetweenValue(value)) {
        return isNaN(value.start) || isNaN(value.end);
    }
    if (isMultivalue(value)) {
        return value.length === 0 || value.every(function (v) { return v.trim() === ''; });
    }
    if (isBooleanTextValue(value)) {
        return value.text.trim() === '' || value.cql.trim() === '';
    }
    if (isLocationValue(value)) {
        if (value.type === 'LINE') {
            return value.line.length === 0;
        }
        else if (value.type === 'POLYGON') {
            return value.polygon.length === 0;
        }
        else if (value.type === 'POINTRADIUS') {
            return (isNaN(value.lat) ||
                isNaN(value.lon) ||
                isNaN(parseFloat(value.radius.toString())));
        }
    }
    if (isProximityValue(value)) {
        return (value.first.trim() === '' ||
            value.second.trim() === '' ||
            isNaN(value.distance));
    }
    if (isAroundValue(value)) {
        return (value.date.trim() === '' ||
            isNaN(parseFloat(value.buffer.amount)) ||
            parseFloat(value.buffer.amount) <= 0);
    }
    if (isRelativeValue(value)) {
        return (value.last.trim() === '' ||
            isNaN(parseFloat(value.last)) ||
            parseFloat(value.last) <= 0);
    }
    return false;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsdGVyLnN0cnVjdHVyZS51dGlsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL21haW4vd2ViYXBwL2NvbXBvbmVudC9maWx0ZXItYnVpbGRlci9maWx0ZXIuc3RydWN0dXJlLnV0aWwudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE1BQU0sQ0FBQyxJQUFNLGVBQWUsR0FBRyxVQUM3QixLQUFnQjtJQUVoQixPQUFPLENBQ0wsT0FBTyxLQUFLLEtBQUssUUFBUTtRQUN6QixLQUFLLEtBQUssSUFBSTtRQUNkLE1BQU0sSUFBSSxLQUFLO1FBQ2YsTUFBTSxJQUFJLEtBQUs7UUFDZixPQUFPLEtBQUssQ0FBQyxJQUFJLEtBQUssUUFBUTtRQUM5QixDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQ3pELENBQUE7QUFDSCxDQUFDLENBQUE7QUFFRCxNQUFNLENBQUMsSUFBTSxhQUFhLEdBQUcsVUFDM0IsS0FBZ0I7SUFFaEIsT0FBTyxDQUNMLE9BQU8sS0FBSyxLQUFLLFFBQVE7UUFDekIsS0FBSyxLQUFLLElBQUk7UUFDZCxNQUFNLElBQUksS0FBSztRQUNmLFFBQVEsSUFBSSxLQUFLO1FBQ2pCLFdBQVcsSUFBSSxLQUFLO1FBQ3BCLE9BQU8sS0FBSyxDQUFDLElBQUksS0FBSyxRQUFRO1FBQzlCLE9BQU8sS0FBSyxDQUFDLE1BQU0sS0FBSyxRQUFRO1FBQ2hDLFFBQVEsSUFBSSxLQUFLLENBQUMsTUFBTTtRQUN4QixNQUFNLElBQUksS0FBSyxDQUFDLE1BQU07UUFDdEIsT0FBTyxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQU0sS0FBSyxRQUFRO1FBQ3ZDLENBQUMsTUFBTSxFQUFFLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FB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SyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUM7Z0JBQ2hCLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDO2dCQUNoQixLQUFLLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUMzQyxDQUFBO1NBQ0Y7S0FDRjtJQUVELElBQUksZ0JBQWdCLENBQUMsS0FBSyxDQUFDLEVBQUU7UUFDM0IsT0FBTyxDQUNMLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRTtZQUN6QixLQUFLLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUU7WUFDMUIsS0FBSyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FDdEIsQ0FBQTtLQUNGO0lBRUQsSUFBSSxhQUFhLENBQUMsS0FBSyxDQUFDLEVBQUU7UUFDeEIsT0FBTyxDQUNMLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRTtZQUN4QixLQUFLLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDdEMsVUFBVSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUNyQyxDQUFBO0tBQ0Y7SUFFRCxJQUFJLGVBQWUsQ0FBQyxLQUFLLENBQUMsRUFBRTtRQUMxQixPQUFPLENBQ0wsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFO1lBQ3hCLEtBQUssQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzdCLFVBQVUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUM1QixDQUFBO0tBQ0Y7SUFFRCxPQUFPLEtBQUssQ0FBQTtBQUNkLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZpbHRlckNsYXNzLCBWYWx1ZVR5cGUsIFZhbHVlVHlwZXMgfSBmcm9tICcuL2ZpbHRlci5zdHJ1Y3R1cmUnXG5cbmV4cG9ydCBjb25zdCBpc1JlbGF0aXZlVmFsdWUgPSAoXG4gIHZhbHVlOiBWYWx1ZVR5cGVcbik6IHZhbHVlIGlzIFZhbHVlVHlwZXNbJ3JlbGF0aXZlJ10gPT4ge1xuICByZXR1cm4gKFxuICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgICB2YWx1ZSAhPT0gbnVsbCAmJlxuICAgICdsYXN0JyBpbiB2YWx1ZSAmJlxuICAgICd1bml0JyBpbiB2YWx1ZSAmJlxuICAgIHR5cGVvZiB2YWx1ZS5sYXN0ID09PSAnc3RyaW5nJyAmJlxuICAgIFsnbScsICdoJywgJ2QnLCAnTScsICd5JywgJ3MnLCAndyddLmluY2x1ZGVzKHZhbHVlLnVuaXQpXG4gIClcbn1cblxuZXhwb3J0IGNvbnN0IGlzQXJvdW5kVmFsdWUgPSAoXG4gIHZhbHVlOiBWYWx1ZVR5cGVcbik6IHZhbHVlIGlzIFZhbHVlVHlwZXNbJ2Fyb3VuZCddID0+IHtcbiAgcmV0dXJuIChcbiAgICB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gICAgdmFsdWUgIT09IG51bGwgJiZcbiAgICAnZGF0ZScgaW4gdmFsdWUgJiZcbiAgICAnYnVmZmVyJyBpbiB2YWx1ZSAmJlxuICAgICdkaXJlY3Rpb24nIGluIHZhbHVlICYmXG4gICAgdHlwZW9mIHZhbHVlLmRhdGUgPT09ICdzdHJpbmcnICYmXG4gICAgdHlwZW9mIHZhbHVlLmJ1ZmZlciA9PT0gJ29iamVjdCcgJiZcbiAgICAnYW1vdW50JyBpbiB2YWx1ZS5idWZmZXIgJiZcbiAgICAndW5pdCcgaW4gdmFsdWUuYnVmZmVyICYmXG4gICAgdHlwZW9mIHZhbHVlLmJ1ZmZlci5hbW91bnQgPT09ICdzdHJpbmcnICYmXG4gICAgWydib3RoJywgJ2JlZm9yZScsICdhZnRlciddLmluY2x1ZGVzKHZhbHVlLmRpcmVjdGlvbilcbiAgKVxufVxuXG5leHBvcnQgY29uc3QgaXNQcm94aW1pdHlWYWx1ZSA9IChcbiAgdmFsdWU6IFZhbHVlVHlwZVxuKTogdmFsdWUgaXMgVmFsdWVUeXBlc1sncHJveGltaXR5J10gPT4ge1xuICByZXR1cm4gKFxuICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgICB2YWx1ZSAhPT0gbnVsbCAmJlxuICAgICdmaXJzdCcgaW4gdmFsdWUgJiZcbiAgICAnc2Vjb25kJyBpbiB2YWx1ZSAmJlxuICAgICdkaXN0YW5jZScgaW4gdmFsdWUgJiZcbiAgICB0eXBlb2YgdmFsdWUuZmlyc3QgPT09ICdzdHJpbmcnICYmXG4gICAgdHlwZW9mIHZhbHVlLnNlY29uZCA9PT0gJ3N0cmluZycgJiZcbiAgICB0eXBlb2YgdmFsdWUuZGlzdGFuY2UgPT09ICdudW1iZXInXG4gIClcbn1cblxuZXhwb3J0IGNvbnN0IGlzRGF0ZVZhbHVlID0gKHZhbHVlOiBWYWx1ZVR5cGUpOiB2YWx1ZSBpcyBWYWx1ZVR5cGVzWydkYXRlJ10gPT4ge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJ1xufVxuXG5leHBvcnQgY29uc3QgaXNCb29sZWFuVmFsdWUgPSAoXG4gIHZhbHVlOiBWYWx1ZVR5cGVcbik6IHZhbHVlIGlzIFZhbHVlVHlwZXNbJ2Jvb2xlYW4nXSA9PiB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJ1xufVxuXG5leHBvcnQgY29uc3QgaXNUZXh0VmFsdWUgPSAodmFsdWU6IFZhbHVlVHlwZSk6IHZhbHVlIGlzIFZhbHVlVHlwZXNbJ3RleHQnXSA9PiB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnXG59XG5cbmV4cG9ydCBjb25zdCBpc0Zsb2F0VmFsdWUgPSAoXG4gIHZhbHVlOiBWYWx1ZVR5cGVcbik6IHZhbHVlIGlzIFZhbHVlVHlwZXNbJ2Zsb2F0J10gPT4ge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJ1xufVxuXG5leHBvcnQgY29uc3QgaXNJbnRlZ2VyVmFsdWUgPSAoXG4gIHZhbHVlOiBWYWx1ZVR5cGVcbik6IHZhbHVlIGlzIFZhbHVlVHlwZXNbJ2ludGVnZXInXSA9PiB7XG4gIHJldHVybiBOdW1iZXIuaXNJbnRlZ2VyKHZhbHVlKVxufVxuXG5leHBvcnQgY29uc3QgaXNEdXJpbmdWYWx1ZSA9IChcbiAgdmFsdWU6IFZhbHVlVHlwZVxuKTogdmFsdWUgaXMgVmFsdWVUeXBlc1snZHVyaW5nJ10gPT4ge1xuICByZXR1cm4gKFxuICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgICB2YWx1ZSAhPT0gbnVsbCAmJlxuICAgICdzdGFydCcgaW4gdmFsdWUgJiZcbiAgICAnZW5kJyBpbiB2YWx1ZSAmJlxuICAgIHR5cGVvZiB2YWx1ZS5zdGFydCA9PT0gJ3N0cmluZycgJiZcbiAgICB0eXBlb2YgdmFsdWUuZW5kID09PSAnc3RyaW5nJ1xuICApXG59XG5cbmV4cG9ydCBjb25zdCBpc0JldHdlZW5WYWx1ZSA9IChcbiAgdmFsdWU6IFZhbHVlVHlwZVxuKTogdmFsdWUgaXMgVmFsdWVUeXBlc1snYmV0d2VlbiddID0+IHtcbiAgcmV0dXJuIChcbiAgICB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gICAgdmFsdWUgIT09IG51bGwgJiZcbiAgICAnc3RhcnQnIGluIHZhbHVlICYmXG4gICAgJ2VuZCcgaW4gdmFsdWUgJiZcbiAgICBOdW1iZXIuaXNJbnRlZ2VyKHZhbHVlLnN0YXJ0KSAmJlxuICAgIE51bWJlci5pc0ludGVnZXIodmFsdWUuZW5kKVxuICApXG59XG5cbmV4cG9ydCBjb25zdCBpc011bHRpdmFsdWUgPSAoXG4gIHZhbHVlOiBWYWx1ZVR5cGVcbik6IHZhbHVlIGlzIFZhbHVlVHlwZXNbJ211bHRpdmFsdWUnXSA9PiB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5ldmVyeSgodikgPT4gdHlwZW9mIHYgPT09ICdzdHJpbmcnKVxufVxuXG5leHBvcnQgY29uc3QgaXNCb29sZWFuVGV4dFZhbHVlID0gKFxuICB2YWx1ZTogVmFsdWVUeXBlXG4pOiB2YWx1ZSBpcyBWYWx1ZVR5cGVzWydib29sZWFuVGV4dCddID0+IHtcbiAgcmV0dXJuIChcbiAgICB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gICAgdmFsdWUgIT09IG51bGwgJiZcbiAgICAndGV4dCcgaW4gdmFsdWUgJiZcbiAgICAnY3FsJyBpbiB2YWx1ZSAmJlxuICAgICdlcnJvcicgaW4gdmFsdWUgJiZcbiAgICB0eXBlb2YgdmFsdWUudGV4dCA9PT0gJ3N0cmluZycgJiZcbiAgICB0eXBlb2YgdmFsdWUuY3FsID09PSAnc3RyaW5nJyAmJlxuICAgIHR5cGVvZiB2YWx1ZS5lcnJvciA9PT0gJ2Jvb2xlYW4nXG4gIClcbn1cblxuZXhwb3J0IGNvbnN0IGlzTG9jYXRpb25WYWx1ZSA9IChcbiAgdmFsdWU6IFZhbHVlVHlwZVxuKTogdmFsdWUgaXMgVmFsdWVUeXBlc1snbG9jYXRpb24nXSA9PiB7XG4gIHJldHVybiAoXG4gICAgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJlxuICAgIHZhbHVlICE9PSBudWxsICYmXG4gICAgJ3R5cGUnIGluIHZhbHVlICYmXG4gICAgKHZhbHVlLnR5cGUgPT09ICdMSU5FJyB8fFxuICAgICAgdmFsdWUudHlwZSA9PT0gJ1BPTFlHT04nIHx8XG4gICAgICB2YWx1ZS50eXBlID09PSAnUE9JTlRSQURJVVMnKVxuICApXG59XG5cbmV4cG9ydCBjb25zdCBpc1ZhbHVlRW1wdHkgPSAoZmlsdGVyOiBGaWx0ZXJDbGFzcyk6IGJvb2xlYW4gPT4ge1xuICBjb25zdCB0eXBlID0gZmlsdGVyLnR5cGVcbiAgaWYgKHR5cGUgPT09ICdJUyBOVUxMJykge1xuICAgIHJldHVybiBmYWxzZSAvLyBJUyBOVUxMIGlzIG5ldmVyIGVtcHR5XG4gIH1cblxuICBjb25zdCB2YWx1ZSA9IGZpbHRlci52YWx1ZVxuICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gJycpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgaWYgKGlzRGF0ZVZhbHVlKHZhbHVlKSkge1xuICAgIHJldHVybiB2YWx1ZS50cmltKCkgPT09ICcnXG4gIH1cblxuICBpZiAoaXNCb29sZWFuVmFsdWUodmFsdWUpKSB7XG4gICAgcmV0dXJuIGZhbHNlIC8vIEJvb2xlYW4gdmFsdWVzIGNhbid0IGJlIFwiZW1wdHlcIlxuICB9XG5cbiAgaWYgKGlzVGV4dFZhbHVlKHZhbHVlKSkge1xuICAgIHJldHVybiB2YWx1ZS50cmltKCkgPT09ICcnXG4gIH1cblxuICBpZiAoaXNGbG9hdFZhbHVlKHZhbHVlKSkge1xuICAgIHJldHVybiBpc05hTih2YWx1ZSlcbiAgfVxuXG4gIGlmIChpc0ludGVnZXJWYWx1ZSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gaXNOYU4odmFsdWUpXG4gIH1cblxuICBpZiAoaXNEdXJpbmdWYWx1ZSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdmFsdWUuc3RhcnQudHJpbSgpID09PSAnJyB8fCB2YWx1ZS5lbmQudHJpbSgpID09PSAnJ1xuICB9XG5cbiAgaWYgKGlzQmV0d2VlblZhbHVlKHZhbHVlKSkge1xuICAgIHJldHVybiBpc05hTih2YWx1ZS5zdGFydCkgfHwgaXNOYU4odmFsdWUuZW5kKVxuICB9XG5cbiAgaWYgKGlzTXVsdGl2YWx1ZSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdmFsdWUubGVuZ3RoID09PSAwIHx8IHZhbHVlLmV2ZXJ5KCh2KSA9PiB2LnRyaW0oKSA9PT0gJycpXG4gIH1cblxuICBpZiAoaXNCb29sZWFuVGV4dFZhbHVlKHZhbHVlKSkge1xuICAgIHJldHVybiB2YWx1ZS50ZXh0LnRyaW0oKSA9PT0gJycgfHwgdmFsdWUuY3FsLnRyaW0oKSA9PT0gJydcbiAgfVxuXG4gIGlmIChpc0xvY2F0aW9uVmFsdWUodmFsdWUpKSB7XG4gICAgaWYgKHZhbHVlLnR5cGUgPT09ICdMSU5FJykge1xuICAgICAgcmV0dXJuIHZhbHVlLmxpbmUubGVuZ3RoID09PSAwXG4gICAgfSBlbHNlIGlmICh2YWx1ZS50eXBlID09PSAnUE9MWUdPTicpIHtcbiAgICAgIHJldHVybiB2YWx1ZS5wb2x5Z29uLmxlbmd0aCA9PT0gMFxuICAgIH0gZWxzZSBpZiAodmFsdWUudHlwZSA9PT0gJ1BPSU5UUkFESVVTJykge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgaXNOYU4odmFsdWUubGF0KSB8fFxuICAgICAgICBpc05hTih2YWx1ZS5sb24pIHx8XG4gICAgICAgIGlzTmFOKHBhcnNlRmxvYXQodmFsdWUucmFkaXVzLnRvU3RyaW5nKCkpKVxuICAgICAgKVxuICAgIH1cbiAgfVxuXG4gIGlmIChpc1Byb3hpbWl0eVZhbHVlKHZhbHVlKSkge1xuICAgIHJldHVybiAoXG4gICAgICB2YWx1ZS5maXJzdC50cmltKCkgPT09ICcnIHx8XG4gICAgICB2YWx1ZS5zZWNvbmQudHJpbSgpID09PSAnJyB8fFxuICAgICAgaXNOYU4odmFsdWUuZGlzdGFuY2UpXG4gICAgKVxuICB9XG5cbiAgaWYgKGlzQXJvdW5kVmFsdWUodmFsdWUpKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHZhbHVlLmRhdGUudHJpbSgpID09PSAnJyB8fFxuICAgICAgaXNOYU4ocGFyc2VGbG9hdCh2YWx1ZS5idWZmZXIuYW1vdW50KSkgfHxcbiAgICAgIHBhcnNlRmxvYXQodmFsdWUuYnVmZmVyLmFtb3VudCkgPD0gMFxuICAgIClcbiAgfVxuXG4gIGlmIChpc1JlbGF0aXZlVmFsdWUodmFsdWUpKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHZhbHVlLmxhc3QudHJpbSgpID09PSAnJyB8fFxuICAgICAgaXNOYU4ocGFyc2VGbG9hdCh2YWx1ZS5sYXN0KSkgfHxcbiAgICAgIHBhcnNlRmxvYXQodmFsdWUubGFzdCkgPD0gMFxuICAgIClcbiAgfVxuXG4gIHJldHVybiBmYWxzZVxufVxuIl19