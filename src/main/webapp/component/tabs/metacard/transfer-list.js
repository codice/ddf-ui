import { __assign, __awaiter, __generator, __read } from "tslib";
import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
/* https://material-ui.com/components/transfer-list/ */
import React from 'react';
import Grid from '@mui/material/Grid';
import List from '@mui/material/List';
import Button from '@mui/material/Button';
import DialogContent from '@mui/material/DialogContent';
import DialogActions from '@mui/material/DialogActions';
import TextField from '@mui/material/TextField';
import Tooltip from '@mui/material/Tooltip';
import LinearProgress from '@mui/material/LinearProgress';
import CircularProgress from '@mui/material/CircularProgress';
import Paper from '@mui/material/Paper';
import { useDialog } from '../../dialog';
import EditIcon from '@mui/icons-material/Edit';
import { Editor } from './summary';
import { DragDropContext, Droppable, Draggable, } from 'react-beautiful-dnd';
import extension from '../../../extension-points';
import { Elevations } from '../../theme/theme';
import { DarkDivider } from '../../dark-divider/dark-divider';
import LeftArrowIcon from '@mui/icons-material/ChevronLeft';
import RightArrowIcon from '@mui/icons-material/ChevronRight';
import CloseIcon from '@mui/icons-material/Close';
import CheckBoxIcon from '@mui/icons-material/CheckBox';
import CheckBoxOutlineBlankIcon from '@mui/icons-material/CheckBoxOutlineBlank';
import IndeterminateCheckBoxIcon from '@mui/icons-material/IndeterminateCheckBox';
import FormControlLabel from '@mui/material/FormControlLabel';
import Switch from '@mui/material/Switch';
import { AutoVariableSizeList } from 'react-window-components';
import debounce from 'lodash.debounce';
import { Memo } from '../../memo/memo';
import { TypedUserInstance } from '../../singletons/TypedUser';
import user from '../../singletons/user-instance';
import ExtensionPoints from '../../../extension-points/extension-points';
import { useMetacardDefinitions } from '../../../js/model/Startup/metacard-definitions.hooks';
import { StartupDataStore } from '../../../js/model/Startup/startup';
import { useConfiguration } from '../../../js/model/Startup/configuration.hooks';
var getAmountChecked = function (items) {
    return Object.values(items).filter(function (a) { return a; }).length;
};
var handleShiftClick = function (_a) {
    var _b;
    var items = _a.items, filteredItemArray = _a.filteredItemArray, setItems = _a.setItems, item = _a.item;
    var defaultMin = filteredItemArray.length;
    var defaultMax = -1;
    var firstIndex = filteredItemArray.reduce(function (min, filteredItem, index) {
        if (items[filteredItem]) {
            return Math.min(min, index);
        }
        return min;
    }, defaultMin);
    var lastIndex = filteredItemArray.reduce(function (max, filteredItem, index) {
        if (items[filteredItem]) {
            return Math.max(max, index);
        }
        return max;
    }, defaultMax);
    var indexClicked = filteredItemArray.indexOf(item);
    if (firstIndex === defaultMin && lastIndex === defaultMax) {
        setItems(__assign(__assign({}, items), (_b = {}, _b[item] = true, _b)));
    }
    else if (indexClicked <= firstIndex) {
        // traverse from target to next until firstIndex
        var updates = filteredItemArray.slice(indexClicked, firstIndex + 1);
        setItems(__assign(__assign({}, items), updates.reduce(function (blob, filteredItem) {
            blob[filteredItem] = true;
            return blob;
        }, {})));
    }
    else if (indexClicked >= lastIndex) {
        // traverse from target to prev until lastIndex
        var updates = filteredItemArray.slice(lastIndex, indexClicked + 1);
        setItems(__assign(__assign({}, items), updates.reduce(function (blob, filteredItem) {
            blob[filteredItem] = true;
            return blob;
        }, {})));
    }
    else {
        // traverse from target to prev until something doesn't change
        var closestPreviousIndex = filteredItemArray
            .slice(0, indexClicked - 1)
            .reduce(function (max, filteredItem, index) {
            if (items[filteredItem]) {
                return Math.max(max, index);
            }
            return max;
        }, defaultMax);
        var updates = filteredItemArray.slice(closestPreviousIndex, indexClicked + 1);
        setItems(__assign(__assign({}, items), updates.reduce(function (blob, filteredItem) {
            blob[filteredItem] = true;
            return blob;
        }, {})));
    }
};
var ItemRow = function (_a) {
    var value = _a.value, required = _a.required, lazyResult = _a.lazyResult, startOver = _a.startOver, measure = _a.measure, filter = _a.filter;
    var _b = __read(React.useState(false), 2), show = _b[0], setShow = _b[1];
    var MetacardDefinitions = useMetacardDefinitions();
    var dialogContext = useDialog();
    var _c = React.useContext(CustomListContext), setItems = _c.setItems, items = _c.items, filteredItemArray = _c.filteredItemArray;
    var isNotWritable = useCustomReadOnlyCheck().isNotWritable;
    React.useEffect(function () {
        if (measure)
            measure();
    }, []);
    var alias = MetacardDefinitions.getAlias(value);
    var isReadonly = lazyResult
        ? isNotWritable({
            attribute: value,
            lazyResult: lazyResult,
        })
        : true;
    if (filter && !alias.toLowerCase().includes(filter.toLowerCase())) {
        return null;
    }
    var CustomAttributeEditor = lazyResult
        ? ExtensionPoints.attributeEditor(lazyResult, value)
        : null;
    return (_jsxs("div", { "data-id": "attribute-container", role: "listitem", className: "p-0 flex w-full", children: [_jsx(Tooltip, { title: "Attributes required by admin must remain 'Active'.", open: show, children: _jsx("div", { onMouseEnter: function () { return required && setShow(true); }, onMouseLeave: function () { return setShow(false); }, children: _jsx(Button, { disabled: required, onClick: function (event) {
                            var _a, _b;
                            if (event.shiftKey) {
                                handleShiftClick({
                                    items: items,
                                    item: value,
                                    setItems: setItems,
                                    filteredItemArray: filteredItemArray,
                                });
                            }
                            else if (event.ctrlKey || event.metaKey) {
                                setItems(__assign(__assign({}, items), (_a = {}, _a[value] = !items[value], _a)));
                            }
                            else {
                                setItems(__assign(__assign({}, items), (_b = {}, _b[value] = !items[value], _b)));
                            }
                        }, size: "medium", children: items[value] ? _jsx(CheckBoxIcon, {}) : _jsx(CheckBoxOutlineBlankIcon, {}) }) }) }), _jsx(Button, { disabled: required, fullWidth: true, size: "medium", className: "justify-start", onClick: function (event) {
                    var _a, _b;
                    if (event.shiftKey) {
                        handleShiftClick({
                            items: items,
                            item: value,
                            setItems: setItems,
                            filteredItemArray: filteredItemArray,
                        });
                    }
                    else if (event.ctrlKey || event.metaKey) {
                        setItems(__assign(__assign({}, items), (_a = {}, _a[value] = !items[value], _a)));
                    }
                    else {
                        // really the only difference from the checkbox click event, where we turn off everything but this one
                        setItems(__assign(__assign({}, Object.keys(items).reduce(function (blob, val) {
                            blob[val] = false;
                            return blob;
                        }, {})), (_b = {}, _b[value] = !items[value], _b)));
                    }
                }, children: alias }), !isReadonly && lazyResult && (_jsx(Button, { "data-id": "edit-button", style: {
                    pointerEvents: 'all',
                    height: '100%',
                }, onClick: function () {
                    dialogContext.setProps({
                        open: true,
                        children: CustomAttributeEditor ? (_jsx(CustomAttributeEditor, { attribute: value, result: lazyResult, onCancel: startOver, onSave: startOver, goBack: startOver })) : (_jsx("div", { style: {
                                padding: '10px',
                                minHeight: '30em',
                                minWidth: '60vh',
                            }, children: _jsx(Editor, { attr: value, lazyResult: lazyResult, 
                                /* Re-open this modal again but with the current state
                          This maintains the state so that if we haven't saved,
                          we can come back to where we were working */
                                goBack: startOver, onCancel: startOver, onSave: startOver }) })),
                    });
                }, children: _jsx(EditIcon, {}) }))] }));
};
var CustomListContext = React.createContext({
    items: {},
    setItems: (function () { }),
    filteredItemArray: [],
});
var filterUpdate = function (_a) {
    var filter = _a.filter, setItemArray = _a.setItemArray, items = _a.items;
    setItemArray(Object.keys(items).filter(function (attr) {
        var alias = StartupDataStore.MetacardDefinitions.getAlias(attr);
        var isFiltered = filter !== ''
            ? !alias.toLowerCase().includes(filter.toLowerCase())
            : false;
        return !isFiltered;
    }));
};
var generateDebouncedFilterUpdate = function () {
    return debounce(filterUpdate, 500);
};
/**
 * At the moment, we only virtualize the right side since that's likely to be huge whereas the left isn't (it also has DND on left, which makes things diff to virtualize)
 */
var CustomList = function (_a) {
    var title = _a.title, items = _a.items, requiredAttributes = _a.requiredAttributes, lazyResult = _a.lazyResult, updateItems = _a.updateItems, isDnD = _a.isDnD, handleToggleAll = _a.handleToggleAll, mode = _a.mode, startOver = _a.startOver, totalPossible = _a.totalPossible;
    var itemsRef = React.useRef(items);
    itemsRef.current = items; // don't see a performant way besides this to allow us to avoid rerendering DnD but allow it to update the item orders correctly
    var _b = __read(React.useState(''), 2), filter = _b[0], setFilter = _b[1];
    var _c = __read(React.useState(Object.keys(items)), 2), unfilteredItemArray = _c[0], setUnfilteredItemArray = _c[1];
    var _d = __read(React.useState(Object.keys(items)), 2), filteredItemArray = _d[0], setFilteredItemArray = _d[1];
    var _e = __read(React.useState(false), 2), isFiltering = _e[0], setIsFiltering = _e[1];
    var debouncedFilterUpdate = React.useRef(generateDebouncedFilterUpdate());
    var numberChecked = getAmountChecked(items);
    var total = Object.keys(items).length;
    var totalCheckable = requiredAttributes
        ? total - requiredAttributes.length
        : total;
    var isIndeterminate = numberChecked !== totalCheckable && numberChecked !== 0;
    var isCompletelySelected = numberChecked === totalCheckable && totalCheckable !== 0;
    React.useEffect(function () {
        setUnfilteredItemArray(Object.keys(items));
    }, [Object.keys(items).toString()]);
    React.useEffect(function () {
        setIsFiltering(true);
        debouncedFilterUpdate.current({
            items: items,
            filter: filter,
            setItemArray: setFilteredItemArray,
        });
    }, [Object.keys(items).toString(), filter]);
    React.useEffect(function () {
        setIsFiltering(false);
    }, [filteredItemArray]);
    // memo this, other wise the creation of the new object each time is seen as a "change"
    var memoProviderValue = React.useMemo(function () {
        return { items: items, setItems: updateItems, filteredItemArray: filteredItemArray };
    }, [items, updateItems]);
    return (_jsx(CustomListContext.Provider, { value: memoProviderValue, children: _jsxs(Paper, { "data-id": "".concat(title.toLowerCase(), "-container"), elevation: Elevations.paper, children: [_jsxs(Grid, { container: true, className: "p-2 text-xl font-normal relative", direction: "row", wrap: "nowrap", alignItems: "center", children: [_jsx(Grid, { item: true, className: "absolute left-0 top-0 ml-2 mt-min", children: _jsx(Button, { "data-id": "".concat(title.toLowerCase(), "-select-all-checkbox"), disabled: Object.keys(items).length === 0, onClick: handleToggleAll(items), color: "primary", children: (function () {
                                    if (isCompletelySelected) {
                                        return (_jsxs(_Fragment, { children: [_jsx(CheckBoxIcon, {}), numberChecked, ' '] }));
                                    }
                                    else if (isIndeterminate) {
                                        return (_jsxs(_Fragment, { children: [_jsx(IndeterminateCheckBoxIcon, {}), numberChecked, ' '] }));
                                    }
                                    else {
                                        return _jsx(CheckBoxOutlineBlankIcon, {});
                                    }
                                })() }) }), _jsxs(Grid, { item: true, className: "m-auto ", children: [title, " (", total, "/", totalPossible, ")"] })] }), _jsx(DarkDivider, { className: "w-full h-min" }), _jsx("div", { className: "p-2", children: _jsx(TextField, { "data-id": "filter-input", size: "small", variant: "outlined", label: "Filter by keyword", fullWidth: true, value: filter, onChange: function (e) {
                            setFilter(e.target.value);
                        } }) }), _jsx(DarkDivider, { className: "w-full h-min" }), mode === 'loading' ? (_jsx(CircularProgress, {})) : (_jsxs(List, { className: "w-common h-common overflow-hidden relative", dense: true, component: "div", role: "list", children: [isFiltering ? (_jsx(LinearProgress, { className: "w-full h-1 absolute left-0 top-0", variant: "indeterminate" })) : null, isDnD ? (_jsx(Memo, { dependencies: [filteredItemArray], children: _jsxs("div", { className: "flex flex-col flex-nowrap h-full w-full overflow-hidden", children: [_jsx("div", { className: "italic px-4 text-xs font-normal", children: "Click and drag attributes to reorder." }), _jsx("div", { className: "w-full h-full", children: _jsx(DragDropContext, { onDragEnd: function (result) {
                                                //Put these NO-OPs up front for performance reasons:
                                                //1. If the item is dropped outside the list, do nothing
                                                //2. If the item is moved into the same place, do nothing
                                                if (!result.destination) {
                                                    return;
                                                }
                                                if (result.source.index === result.destination.index) {
                                                    return;
                                                }
                                                // complicated by the fact that we filter, so we need to find the original and dest index ourselves :(
                                                if (result.reason === 'DROP' && result.destination) {
                                                    var shiftedOriginalIndex = unfilteredItemArray.indexOf(result.draggableId);
                                                    var shiftedDestIndex = unfilteredItemArray.indexOf(filteredItemArray[result.destination.index]);
                                                    var clonedList = unfilteredItemArray.slice(0);
                                                    clonedList.splice(shiftedOriginalIndex, 1);
                                                    clonedList.splice(shiftedDestIndex, 0, // insert WITHOUT removing anything
                                                    result.draggableId);
                                                    var newList = clonedList.reduce(function (blob, attr) {
                                                        blob[attr] = itemsRef.current[attr];
                                                        return blob;
                                                    }, {});
                                                    updateItems(newList);
                                                    filterUpdate({
                                                        filter: filter,
                                                        setItemArray: setFilteredItemArray,
                                                        items: newList,
                                                    }); // in this case, we eagerly set in order to avoid flickering
                                                }
                                            }, children: _jsx("div", { className: "children-h-full children-w-full h-full w-full overflow-hidden", children: _jsx(Droppable, { droppableId: "test", mode: "virtual", renderClone: function (provided, _snapshot, rubric) {
                                                        return (_jsx("div", __assign({}, provided.draggableProps, provided.dragHandleProps, { ref: provided.innerRef, children: _jsx(ItemRow, { value: filteredItemArray[rubric.source.index], required: requiredAttributes === null || requiredAttributes === void 0 ? void 0 : requiredAttributes.includes(filteredItemArray[rubric.source.index]), startOver: startOver, lazyResult: lazyResult, filter: filter }) })));
                                                    }, children: function (provided) {
                                                        return (_jsx(AutoVariableSizeList, { items: filteredItemArray, defaultSize: 39.42, controlledMeasuring: true, overscanCount: 10, outerRef: provided.innerRef, Item: function (_a) {
                                                                var itemRef = _a.itemRef, item = _a.item, measure = _a.measure, index = _a.index;
                                                                return (_jsx("div", { ref: itemRef, className: "relative", children: _jsx(Draggable, { draggableId: item, index: index, isDragDisabled: !isDnD, disableInteractiveElementBlocking: true, children: function (provided) {
                                                                            return (_jsx("div", __assign({ ref: provided.innerRef }, provided.draggableProps, provided.dragHandleProps, { children: _jsx(ItemRow, { value: item, required: requiredAttributes === null || requiredAttributes === void 0 ? void 0 : requiredAttributes.includes(item), startOver: startOver, lazyResult: lazyResult, 
                                                                                    // filter={filter}
                                                                                    measure: measure }) })));
                                                                        } }, item) }));
                                                            }, Empty: function () {
                                                                return _jsx("div", {});
                                                            } }));
                                                    } }) }) }) })] }) })) : (_jsx(_Fragment, { children: _jsx(AutoVariableSizeList, { items: filteredItemArray, defaultSize: 39.42, controlledMeasuring: true, overscanCount: 10, Item: function (_a) {
                                    var itemRef = _a.itemRef, item = _a.item, measure = _a.measure;
                                    return (_jsx("div", { ref: itemRef, className: "relative", children: _jsx(ItemRow, { value: item, required: requiredAttributes === null || requiredAttributes === void 0 ? void 0 : requiredAttributes.includes(item), startOver: startOver, lazyResult: lazyResult, measure: measure }) }));
                                }, Empty: function () {
                                    return _jsx("div", {});
                                } }) }))] }))] }) }));
};
export var useCustomReadOnlyCheck = function () {
    var Configuration = useConfiguration();
    var _a = __read(React.useState([]), 2), customEditableAttributes = _a[0], setCustomEditableAttributes = _a[1];
    var isMounted = React.useRef(true);
    var _b = __read(React.useState(true), 2), loading = _b[0], setLoading = _b[1];
    var initializeCustomEditableAttributes = function () { return __awaiter(void 0, void 0, void 0, function () {
        var attrs;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, extension.customEditableAttributes()];
                case 1:
                    attrs = _a.sent();
                    if (isMounted.current) {
                        if (attrs !== undefined) {
                            setCustomEditableAttributes(attrs);
                        }
                        setLoading(false);
                    }
                    return [2 /*return*/];
            }
        });
    }); };
    React.useEffect(function () {
        initializeCustomEditableAttributes();
        return function () {
            isMounted.current = false;
        };
    }, []);
    return {
        loading: loading,
        isNotWritable: function (_a) {
            var attribute = _a.attribute, lazyResult = _a.lazyResult;
            var perm = extension.customCanWritePermission({
                attribute: attribute,
                lazyResult: lazyResult,
                user: user,
                editableAttributes: customEditableAttributes,
            });
            if (perm !== undefined) {
                return !perm;
            }
            var determination = lazyResult.isRemote() ||
                !TypedUserInstance.canWrite(lazyResult) ||
                Configuration.isReadOnly(attribute);
            return determination;
        },
    };
};
var convertAttrListToMap = function (attrs) {
    return attrs.reduce(function (blob, attr) {
        blob[attr] = false;
        return blob;
    }, {});
};
var TransferList = function (_a) {
    var startingLeft = _a.startingLeft, requiredAttributes = _a.requiredAttributes, startingRight = _a.startingRight, startingHideEmpty = _a.startingHideEmpty, lazyResult = _a.lazyResult, onSave = _a.onSave;
    var dialogContext = useDialog();
    var _b = __read(React.useState('loading'), 2), mode = _b[0], setMode = _b[1];
    var _c = __read(React.useState(convertAttrListToMap(startingLeft)), 2), left = _c[0], setLeft = _c[1];
    var _d = __read(React.useState(convertAttrListToMap(startingRight)), 2), right = _d[0], setRight = _d[1];
    var _e = __read(React.useState(startingHideEmpty), 2), hideEmpty = _e[0], setHideEmpty = _e[1];
    var loading = useCustomReadOnlyCheck().loading;
    React.useEffect(function () {
        if (!loading) {
            setMode('normal');
        }
    }, [loading]);
    var generateHandleToggleAll = function (_a) {
        var setState = _a.setState, state = _a.state, _b = _a.disabledAttributes, disabledAttributes = _b === void 0 ? [] : _b;
        return function () { return function () {
            var allValues = Object.values(state);
            var totalCheckable = allValues.length - disabledAttributes.length;
            var numberChecked = allValues.filter(function (checked) { return checked; }).length;
            var allSelected = numberChecked === totalCheckable && totalCheckable !== 0;
            if (!allSelected) {
                setState(Object.keys(state).reduce(function (blob, attr) {
                    if (disabledAttributes.includes(attr))
                        blob[attr] = false;
                    else
                        blob[attr] = true;
                    return blob;
                }, {}));
            }
            else {
                setState(Object.keys(state).reduce(function (blob, attr) {
                    blob[attr] = false;
                    return blob;
                }, {}));
            }
        }; };
    };
    var moveRight = function () {
        var checkedLeft = Object.entries(left)
            .filter(function (a) { return a[1]; })
            .reduce(function (blob, a) {
            blob[a[0]] = false;
            return blob;
        }, {});
        var nonCheckedLeft = Object.entries(left)
            .filter(function (a) { return !a[1]; })
            .reduce(function (blob, a) {
            blob[a[0]] = a[1];
            return blob;
        }, {});
        setRight(__assign(__assign({}, right), checkedLeft));
        setLeft(nonCheckedLeft);
    };
    var moveLeft = function () {
        var checkedRight = Object.entries(right)
            .filter(function (a) { return a[1]; })
            .reduce(function (blob, a) {
            blob[a[0]] = false;
            return blob;
        }, {});
        var nonCheckedRight = Object.entries(right)
            .filter(function (a) { return !a[1]; })
            .reduce(function (blob, a) {
            blob[a[0]] = a[1];
            return blob;
        }, {});
        setLeft(__assign(__assign({}, left), checkedRight));
        setRight(nonCheckedRight);
    };
    var hasLeftChecked = Object.entries(left).find(function (a) { return a[1]; }) !== undefined;
    var hasRightChecked = Object.entries(right).find(function (a) { return a[1]; }) !== undefined;
    var startOver = function () {
        dialogContext.setProps({
            open: true,
            children: (_jsx(TransferList, { startingLeft: Object.keys(left), startingRight: Object.keys(right), startingHideEmpty: hideEmpty, lazyResult: lazyResult, onSave: onSave })),
        });
    };
    var totalPossible = startingLeft.length + startingRight.length;
    return (_jsxs(_Fragment, { children: [_jsxs("div", { className: "text-2xl text-center px-2 pb-2 pt-4 font-normal relative", children: ["Manage Attributes", _jsx(Button, { "data-id": "close-button", className: "absolute right-0 top-0 mr-1 mt-1", variant: "text", size: "small", onClick: function () {
                            dialogContext.setProps({
                                open: false,
                                children: null,
                            });
                        }, children: _jsx(CloseIcon, {}) })] }), _jsx(DarkDivider, { className: "w-full h-min" }), _jsx(DialogContent, { children: _jsxs("div", { className: "flex flex-row justify-center items-center space-x-2 flex-nowrap w-full", children: [_jsx("div", { children: _jsx(CustomList, { title: "Active", items: left, requiredAttributes: requiredAttributes, lazyResult: lazyResult, updateItems: setLeft, isDnD: true, startOver: startOver, handleToggleAll: generateHandleToggleAll({
                                    setState: setLeft,
                                    state: left,
                                    disabledAttributes: requiredAttributes,
                                }), totalPossible: totalPossible, mode: mode }) }), _jsx("div", { children: _jsxs("div", { className: "flex flex-col items-center", children: [_jsx(Button, { "data-id": "move-right-button", variant: "outlined", className: "m-1", onClick: moveRight, disabled: !hasLeftChecked, "aria-label": "move selected right", children: _jsx(RightArrowIcon, {}) }), _jsx(Button, { "data-id": "move-left-button", variant: "outlined", className: "m-1", onClick: moveLeft, disabled: !hasRightChecked, "aria-label": "move selected left", children: _jsx(LeftArrowIcon, {}) })] }) }), _jsx("div", { children: _jsx(CustomList, { title: "Hidden", items: right, lazyResult: lazyResult, updateItems: setRight, isDnD: false, startOver: startOver, handleToggleAll: generateHandleToggleAll({
                                    setState: setRight,
                                    state: right,
                                }), mode: mode, totalPossible: totalPossible }) })] }) }), _jsx(DarkDivider, { className: "w-full h-min" }), _jsxs(DialogActions, { children: [hideEmpty !== undefined && (_jsxs(_Fragment, { children: [_jsx(FormControlLabel, { control: _jsx(Switch, { checked: hideEmpty, onChange: function (e) { return setHideEmpty(e.target.checked); } }), label: "Hide empty attributes in inspector", style: { paddingLeft: '10px' } }), _jsx("div", { style: { flex: '1 0 0' } })] })), _jsx(Button, { "data-id": "dialog-save-button", disabled: mode === 'saving', onClick: function () {
                            dialogContext.setProps({
                                open: false,
                                children: null,
                            });
                        }, variant: "text", color: "secondary", className: "mr-2", children: "Cancel" }), _jsx(Button, { className: "ml-2", disabled: mode === 'saving', onClick: function () {
                            setMode('saving');
                            onSave(Object.keys(left), hideEmpty);
                            dialogContext.setProps({
                                open: false,
                                children: null,
                            });
                        }, variant: "contained", color: "primary", children: "Save" })] }), mode === 'saving' ? (_jsx(LinearProgress, { style: {
                    width: '100%',
                    height: '10px',
                    position: 'absolute',
                    left: '0px',
                    bottom: '0%',
                }, variant: "indeterminate" })) : null] }));
};
export default TransferList;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhbnNmZXItbGlzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3NyYy9tYWluL3dlYmFwcC9jb21wb25lbnQvdGFicy9tZXRhY2FyZC90cmFuc2Zlci1saXN0LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHVEQUF1RDtBQUV2RCxPQUFPLEtBQUssTUFBTSxPQUFPLENBQUE7QUFDekIsT0FBTyxJQUFJLE1BQU0sb0JBQW9CLENBQUE7QUFDckMsT0FBTyxJQUFJLE1BQU0sb0JBQW9CLENBQUE7QUFDckMsT0FBTyxNQUFNLE1BQU0sc0JBQXNCLENBQUE7QUFDekMsT0FBTyxhQUFhLE1BQU0sNkJBQTZCLENBQUE7QUFDdkQsT0FBTyxhQUFhLE1BQU0sNkJBQTZCLENBQUE7QUFDdkQsT0FBTyxTQUFTLE1BQU0seUJBQXlCLENBQUE7QUFDL0MsT0FBTyxPQUFPLE1BQU0sdUJBQXVCLENBQUE7QUFDM0MsT0FBTyxjQUFjLE1BQU0sOEJBQThCLENBQUE7QUFDekQsT0FBTyxnQkFBZ0IsTUFBTSxnQ0FBZ0MsQ0FBQTtBQUM3RCxPQUFPLEtBQUssTUFBTSxxQkFBcUIsQ0FBQTtBQUN2QyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sY0FBYyxDQUFBO0FBQ3hDLE9BQU8sUUFBUSxNQUFNLDBCQUEwQixDQUFBO0FBQy9DLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxXQUFXLENBQUE7QUFFbEMsT0FBTyxFQUVMLGVBQWUsRUFDZixTQUFTLEVBQ1QsU0FBUyxHQUNWLE1BQU0scUJBQXFCLENBQUE7QUFDNUIsT0FBTyxTQUFTLE1BQU0sMkJBQTJCLENBQUE7QUFDakQsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLG1CQUFtQixDQUFBO0FBQzlDLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQTtBQUM3RCxPQUFPLGFBQWEsTUFBTSxpQ0FBaUMsQ0FBQTtBQUMzRCxPQUFPLGNBQWMsTUFBTSxr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L2NvbXBvbmVudHMvdHJhbnNmZXItbGlzdC8gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IEdyaWQgZnJvbSAnQG11aS9tYXRlcmlhbC9HcmlkJ1xuaW1wb3J0IExpc3QgZnJvbSAnQG11aS9tYXRlcmlhbC9MaXN0J1xuaW1wb3J0IEJ1dHRvbiBmcm9tICdAbXVpL21hdGVyaWFsL0J1dHRvbidcbmltcG9ydCBEaWFsb2dDb250ZW50IGZyb20gJ0BtdWkvbWF0ZXJpYWwvRGlhbG9nQ29udGVudCdcbmltcG9ydCBEaWFsb2dBY3Rpb25zIGZyb20gJ0BtdWkvbWF0ZXJpYWwvRGlhbG9nQWN0aW9ucydcbmltcG9ydCBUZXh0RmllbGQgZnJvbSAnQG11aS9tYXRlcmlhbC9UZXh0RmllbGQnXG5pbXBvcnQgVG9vbHRpcCBmcm9tICdAbXVpL21hdGVyaWFsL1Rvb2x0aXAnXG5pbXBvcnQgTGluZWFyUHJvZ3Jlc3MgZnJvbSAnQG11aS9tYXRlcmlhbC9MaW5lYXJQcm9ncmVzcydcbmltcG9ydCBDaXJjdWxhclByb2dyZXNzIGZyb20gJ0BtdWkvbWF0ZXJpYWwvQ2lyY3VsYXJQcm9ncmVzcydcbmltcG9ydCBQYXBlciBmcm9tICdAbXVpL21hdGVyaWFsL1BhcGVyJ1xuaW1wb3J0IHsgdXNlRGlhbG9nIH0gZnJvbSAnLi4vLi4vZGlhbG9nJ1xuaW1wb3J0IEVkaXRJY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvRWRpdCdcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gJy4vc3VtbWFyeSdcbmltcG9ydCB7IExhenlRdWVyeVJlc3VsdCB9IGZyb20gJy4uLy4uLy4uL2pzL21vZGVsL0xhenlRdWVyeVJlc3VsdC9MYXp5UXVlcnlSZXN1bHQnXG5pbXBvcnQge1xuICBEcm9wUmVzdWx0LFxuICBEcmFnRHJvcENvbnRleHQsXG4gIERyb3BwYWJsZSxcbiAgRHJhZ2dhYmxlLFxufSBmcm9tICdyZWFjdC1iZWF1dGlmdWwtZG5kJ1xuaW1wb3J0IGV4dGVuc2lvbiBmcm9tICcuLi8uLi8uLi9leHRlbnNpb24tcG9pbnRzJ1xuaW1wb3J0IHsgRWxldmF0aW9ucyB9IGZyb20gJy4uLy4uL3RoZW1lL3RoZW1lJ1xuaW1wb3J0IHsgRGFya0RpdmlkZXIgfSBmcm9tICcuLi8uLi9kYXJrLWRpdmlkZXIvZGFyay1kaXZpZGVyJ1xuaW1wb3J0IExlZnRBcnJvd0ljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9DaGV2cm9uTGVmdCdcbmltcG9ydCBSaWdodEFycm93SWNvbiBmcm9tICdAbXVpL2ljb25zLW1hdGVyaWFsL0NoZXZyb25SaWdodCdcbmltcG9ydCBDbG9zZUljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9DbG9zZSdcbmltcG9ydCBDaGVja0JveEljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9DaGVja0JveCdcbmltcG9ydCBDaGVja0JveE91dGxpbmVCbGFua0ljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9DaGVja0JveE91dGxpbmVCbGFuaydcbmltcG9ydCBJbmRldGVybWluYXRlQ2hlY2tCb3hJY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvSW5kZXRlcm1pbmF0ZUNoZWNrQm94J1xuaW1wb3J0IEZvcm1Db250cm9sTGFiZWwgZnJvbSAnQG11aS9tYXRlcmlhbC9Gb3JtQ29udHJvbExhYmVsJ1xuaW1wb3J0IFN3aXRjaCBmcm9tICdAbXVpL21hdGVyaWFsL1N3aXRjaCdcbmltcG9ydCB7IEF1dG9WYXJpYWJsZVNpemVMaXN0IH0gZnJvbSAncmVhY3Qtd2luZG93LWNvbXBvbmVudHMnXG5pbXBvcnQgZGVib3VuY2UgZnJvbSAnbG9kYXNoLmRlYm91bmNlJ1xuaW1wb3J0IHsgTWVtbyB9IGZyb20gJy4uLy4uL21lbW8vbWVtbydcbmltcG9ydCB7IFR5cGVkVXNlckluc3RhbmNlIH0gZnJvbSAnLi4vLi4vc2luZ2xldG9ucy9UeXBlZFVzZXInXG5pbXBvcnQgdXNlciBmcm9tICcuLi8uLi9zaW5nbGV0b25zL3VzZXItaW5zdGFuY2UnXG5pbXBvcnQgRXh0ZW5zaW9uUG9pbnRzIGZyb20gJy4uLy4uLy4uL2V4dGVuc2lvbi1wb2ludHMvZXh0ZW5zaW9uLXBvaW50cydcbmltcG9ydCB7IHVzZU1ldGFjYXJkRGVmaW5pdGlvbnMgfSBmcm9tICcuLi8uLi8uLi9qcy9tb2RlbC9TdGFydHVwL21ldGFjYXJkLWRlZmluaXRpb25zLmhvb2tzJ1xuaW1wb3J0IHsgU3RhcnR1cERhdGFTdG9yZSB9IGZyb20gJy4uLy4uLy4uL2pzL21vZGVsL1N0YXJ0dXAvc3RhcnR1cCdcbmltcG9ydCB7IHVzZUNvbmZpZ3VyYXRpb24gfSBmcm9tICcuLi8uLi8uLi9qcy9tb2RlbC9TdGFydHVwL2NvbmZpZ3VyYXRpb24uaG9va3MnXG5jb25zdCBnZXRBbW91bnRDaGVja2VkID0gKGl0ZW1zOiBDaGVja2VkVHlwZSkgPT4ge1xuICByZXR1cm4gT2JqZWN0LnZhbHVlcyhpdGVtcykuZmlsdGVyKChhKSA9PiBhKS5sZW5ndGhcbn1cbmNvbnN0IGhhbmRsZVNoaWZ0Q2xpY2sgPSAoe1xuICBpdGVtcyxcbiAgZmlsdGVyZWRJdGVtQXJyYXksXG4gIHNldEl0ZW1zLFxuICBpdGVtLFxufToge1xuICBpdGVtczogQ2hlY2tlZFR5cGVcbiAgaXRlbTogc3RyaW5nXG4gIGZpbHRlcmVkSXRlbUFycmF5OiBzdHJpbmdbXVxuICBzZXRJdGVtczogU2V0Q2hlY2tlZFR5cGVcbn0pID0+IHtcbiAgY29uc3QgZGVmYXVsdE1pbiA9IGZpbHRlcmVkSXRlbUFycmF5Lmxlbmd0aFxuICBjb25zdCBkZWZhdWx0TWF4ID0gLTFcbiAgY29uc3QgZmlyc3RJbmRleCA9IGZpbHRlcmVkSXRlbUFycmF5LnJlZHVjZSgobWluLCBmaWx0ZXJlZEl0ZW0sIGluZGV4KSA9PiB7XG4gICAgaWYgKGl0ZW1zW2ZpbHRlcmVkSXRlbV0pIHtcbiAgICAgIHJldHVybiBNYXRoLm1pbihtaW4sIGluZGV4KVxuICAgIH1cbiAgICByZXR1cm4gbWluXG4gIH0sIGRlZmF1bHRNaW4pXG4gIGNvbnN0IGxhc3RJbmRleCA9IGZpbHRlcmVkSXRlbUFycmF5LnJlZHVjZSgobWF4LCBmaWx0ZXJlZEl0ZW0sIGluZGV4KSA9PiB7XG4gICAgaWYgKGl0ZW1zW2ZpbHRlcmVkSXRlbV0pIHtcbiAgICAgIHJldHVybiBNYXRoLm1heChtYXgsIGluZGV4KVxuICAgIH1cbiAgICByZXR1cm4gbWF4XG4gIH0sIGRlZmF1bHRNYXgpXG4gIGNvbnN0IGluZGV4Q2xpY2tlZCA9IGZpbHRlcmVkSXRlbUFycmF5LmluZGV4T2YoaXRlbSlcbiAgaWYgKGZpcnN0SW5kZXggPT09IGRlZmF1bHRNaW4gJiYgbGFzdEluZGV4ID09PSBkZWZhdWx0TWF4KSB7XG4gICAgc2V0SXRlbXMoe1xuICAgICAgLi4uaXRlbXMsXG4gICAgICBbaXRlbV06IHRydWUsXG4gICAgfSlcbiAgfSBlbHNlIGlmIChpbmRleENsaWNrZWQgPD0gZmlyc3RJbmRleCkge1xuICAgIC8vIHRyYXZlcnNlIGZyb20gdGFyZ2V0IHRvIG5leHQgdW50aWwgZmlyc3RJbmRleFxuICAgIGNvbnN0IHVwZGF0ZXMgPSBmaWx0ZXJlZEl0ZW1BcnJheS5zbGljZShpbmRleENsaWNrZWQsIGZpcnN0SW5kZXggKyAxKVxuICAgIHNldEl0ZW1zKHtcbiAgICAgIC4uLml0ZW1zLFxuICAgICAgLi4udXBkYXRlcy5yZWR1Y2UoKGJsb2IsIGZpbHRlcmVkSXRlbSkgPT4ge1xuICAgICAgICBibG9iW2ZpbHRlcmVkSXRlbV0gPSB0cnVlXG4gICAgICAgIHJldHVybiBibG9iXG4gICAgICB9LCB7fSBhcyBDaGVja2VkVHlwZSksXG4gICAgfSlcbiAgfSBlbHNlIGlmIChpbmRleENsaWNrZWQgPj0gbGFzdEluZGV4KSB7XG4gICAgLy8gdHJhdmVyc2UgZnJvbSB0YXJnZXQgdG8gcHJldiB1bnRpbCBsYXN0SW5kZXhcbiAgICBjb25zdCB1cGRhdGVzID0gZmlsdGVyZWRJdGVtQXJyYXkuc2xpY2UobGFzdEluZGV4LCBpbmRleENsaWNrZWQgKyAxKVxuICAgIHNldEl0ZW1zKHtcbiAgICAgIC4uLml0ZW1zLFxuICAgICAgLi4udXBkYXRlcy5yZWR1Y2UoKGJsb2IsIGZpbHRlcmVkSXRlbSkgPT4ge1xuICAgICAgICBibG9iW2ZpbHRlcmVkSXRlbV0gPSB0cnVlXG4gICAgICAgIHJldHVybiBibG9iXG4gICAgICB9LCB7fSBhcyBDaGVja2VkVHlwZSksXG4gICAgfSlcbiAgfSBlbHNlIHtcbiAgICAvLyB0cmF2ZXJzZSBmcm9tIHRhcmdldCB0byBwcmV2IHVudGlsIHNvbWV0aGluZyBkb2Vzbid0IGNoYW5nZVxuICAgIGNvbnN0IGNsb3Nlc3RQcmV2aW91c0luZGV4ID0gZmlsdGVyZWRJdGVtQXJyYXlcbiAgICAgIC5zbGljZSgwLCBpbmRleENsaWNrZWQgLSAxKVxuICAgICAgLnJlZHVjZSgobWF4LCBmaWx0ZXJlZEl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgIGlmIChpdGVtc1tmaWx0ZXJlZEl0ZW1dKSB7XG4gICAgICAgICAgcmV0dXJuIE1hdGgubWF4KG1heCwgaW5kZXgpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heFxuICAgICAgfSwgZGVmYXVsdE1heClcbiAgICBjb25zdCB1cGRhdGVzID0gZmlsdGVyZWRJdGVtQXJyYXkuc2xpY2UoXG4gICAgICBjbG9zZXN0UHJldmlvdXNJbmRleCxcbiAgICAgIGluZGV4Q2xpY2tlZCArIDFcbiAgICApXG4gICAgc2V0SXRlbXMoe1xuICAgICAgLi4uaXRlbXMsXG4gICAgICAuLi51cGRhdGVzLnJlZHVjZSgoYmxvYiwgZmlsdGVyZWRJdGVtKSA9PiB7XG4gICAgICAgIGJsb2JbZmlsdGVyZWRJdGVtXSA9IHRydWVcbiAgICAgICAgcmV0dXJuIGJsb2JcbiAgICAgIH0sIHt9IGFzIENoZWNrZWRUeXBlKSxcbiAgICB9KVxuICB9XG59XG5jb25zdCBJdGVtUm93ID0gKHtcbiAgdmFsdWUsXG4gIHJlcXVpcmVkLFxuICBsYXp5UmVzdWx0LFxuICBzdGFydE92ZXIsXG4gIG1lYXN1cmUsXG4gIGZpbHRlcixcbn06IHtcbiAgdmFsdWU6IHN0cmluZ1xuICByZXF1aXJlZD86IGJvb2xlYW5cbiAgbGF6eVJlc3VsdD86IExhenlRdWVyeVJlc3VsdFxuICBzdGFydE92ZXI6ICgpID0+IHZvaWRcbiAgbWVhc3VyZT86ICgpID0+IHZvaWRcbiAgZmlsdGVyPzogc3RyaW5nXG59KSA9PiB7XG4gIGNvbnN0IFtzaG93LCBzZXRTaG93XSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBNZXRhY2FyZERlZmluaXRpb25zID0gdXNlTWV0YWNhcmREZWZpbml0aW9ucygpXG4gIGNvbnN0IGRpYWxvZ0NvbnRleHQgPSB1c2VEaWFsb2coKVxuICBjb25zdCB7IHNldEl0ZW1zLCBpdGVtcywgZmlsdGVyZWRJdGVtQXJyYXkgfSA9XG4gICAgUmVhY3QudXNlQ29udGV4dChDdXN0b21MaXN0Q29udGV4dClcbiAgY29uc3QgeyBpc05vdFdyaXRhYmxlIH0gPSB1c2VDdXN0b21SZWFkT25seUNoZWNrKClcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAobWVhc3VyZSkgbWVhc3VyZSgpXG4gIH0sIFtdKVxuICBjb25zdCBhbGlhcyA9IE1ldGFjYXJkRGVmaW5pdGlvbnMuZ2V0QWxpYXModmFsdWUpXG4gIGNvbnN0IGlzUmVhZG9ubHkgPSBsYXp5UmVzdWx0XG4gICAgPyBpc05vdFdyaXRhYmxlKHtcbiAgICAgICAgYXR0cmlidXRlOiB2YWx1ZSxcbiAgICAgICAgbGF6eVJlc3VsdCxcbiAgICAgIH0pXG4gICAgOiB0cnVlXG4gIGlmIChmaWx0ZXIgJiYgIWFsaWFzLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoZmlsdGVyLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICBjb25zdCBDdXN0b21BdHRyaWJ1dGVFZGl0b3IgPSBsYXp5UmVzdWx0XG4gICAgPyBFeHRlbnNpb25Qb2ludHMuYXR0cmlidXRlRWRpdG9yKGxhenlSZXN1bHQsIHZhbHVlKVxuICAgIDogbnVsbFxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGRhdGEtaWQ9XCJhdHRyaWJ1dGUtY29udGFpbmVyXCJcbiAgICAgIHJvbGU9XCJsaXN0aXRlbVwiXG4gICAgICBjbGFzc05hbWU9XCJwLTAgZmxleCB3LWZ1bGxcIlxuICAgID5cbiAgICAgIDxUb29sdGlwXG4gICAgICAgIHRpdGxlPVwiQXR0cmlidXRlcyByZXF1aXJlZCBieSBhZG1pbiBtdXN0IHJlbWFpbiAnQWN0aXZlJy5cIlxuICAgICAgICBvcGVuPXtzaG93fVxuICAgICAgPlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgb25Nb3VzZUVudGVyPXsoKSA9PiByZXF1aXJlZCAmJiBzZXRTaG93KHRydWUpfVxuICAgICAgICAgIG9uTW91c2VMZWF2ZT17KCkgPT4gc2V0U2hvdyhmYWxzZSl9XG4gICAgICAgID5cbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICBkaXNhYmxlZD17cmVxdWlyZWR9XG4gICAgICAgICAgICBvbkNsaWNrPXsoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlU2hpZnRDbGljayh7XG4gICAgICAgICAgICAgICAgICBpdGVtcyxcbiAgICAgICAgICAgICAgICAgIGl0ZW06IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgc2V0SXRlbXMsXG4gICAgICAgICAgICAgICAgICBmaWx0ZXJlZEl0ZW1BcnJheSxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSkge1xuICAgICAgICAgICAgICAgIHNldEl0ZW1zKHtcbiAgICAgICAgICAgICAgICAgIC4uLml0ZW1zLFxuICAgICAgICAgICAgICAgICAgW3ZhbHVlXTogIWl0ZW1zW3ZhbHVlXSxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNldEl0ZW1zKHtcbiAgICAgICAgICAgICAgICAgIC4uLml0ZW1zLFxuICAgICAgICAgICAgICAgICAgW3ZhbHVlXTogIWl0ZW1zW3ZhbHVlXSxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgc2l6ZT1cIm1lZGl1bVwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAge2l0ZW1zW3ZhbHVlXSA/IDxDaGVja0JveEljb24gLz4gOiA8Q2hlY2tCb3hPdXRsaW5lQmxhbmtJY29uIC8+fVxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvVG9vbHRpcD5cbiAgICAgIDxCdXR0b25cbiAgICAgICAgZGlzYWJsZWQ9e3JlcXVpcmVkfVxuICAgICAgICBmdWxsV2lkdGhcbiAgICAgICAgc2l6ZT1cIm1lZGl1bVwiXG4gICAgICAgIGNsYXNzTmFtZT1cImp1c3RpZnktc3RhcnRcIlxuICAgICAgICBvbkNsaWNrPXsoZXZlbnQpID0+IHtcbiAgICAgICAgICBpZiAoZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgIGhhbmRsZVNoaWZ0Q2xpY2soe1xuICAgICAgICAgICAgICBpdGVtcyxcbiAgICAgICAgICAgICAgaXRlbTogdmFsdWUsXG4gICAgICAgICAgICAgIHNldEl0ZW1zLFxuICAgICAgICAgICAgICBmaWx0ZXJlZEl0ZW1BcnJheSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkpIHtcbiAgICAgICAgICAgIHNldEl0ZW1zKHtcbiAgICAgICAgICAgICAgLi4uaXRlbXMsXG4gICAgICAgICAgICAgIFt2YWx1ZV06ICFpdGVtc1t2YWx1ZV0sXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyByZWFsbHkgdGhlIG9ubHkgZGlmZmVyZW5jZSBmcm9tIHRoZSBjaGVja2JveCBjbGljayBldmVudCwgd2hlcmUgd2UgdHVybiBvZmYgZXZlcnl0aGluZyBidXQgdGhpcyBvbmVcbiAgICAgICAgICAgIHNldEl0ZW1zKHtcbiAgICAgICAgICAgICAgLi4uT2JqZWN0LmtleXMoaXRlbXMpLnJlZHVjZSgoYmxvYiwgdmFsKSA9PiB7XG4gICAgICAgICAgICAgICAgYmxvYlt2YWxdID0gZmFsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gYmxvYlxuICAgICAgICAgICAgICB9LCB7fSBhcyBDaGVja2VkVHlwZSksXG4gICAgICAgICAgICAgIFt2YWx1ZV06ICFpdGVtc1t2YWx1ZV0sXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfX1cbiAgICAgID5cbiAgICAgICAge2FsaWFzfVxuICAgICAgPC9CdXR0b24+XG4gICAgICB7IWlzUmVhZG9ubHkgJiYgbGF6eVJlc3VsdCAmJiAoXG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICBkYXRhLWlkPVwiZWRpdC1idXR0b25cIlxuICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICBwb2ludGVyRXZlbnRzOiAnYWxsJyxcbiAgICAgICAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgICAgIH19XG4gICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgZGlhbG9nQ29udGV4dC5zZXRQcm9wcyh7XG4gICAgICAgICAgICAgIG9wZW46IHRydWUsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBDdXN0b21BdHRyaWJ1dGVFZGl0b3IgPyAoXG4gICAgICAgICAgICAgICAgPEN1c3RvbUF0dHJpYnV0ZUVkaXRvclxuICAgICAgICAgICAgICAgICAgYXR0cmlidXRlPXt2YWx1ZX1cbiAgICAgICAgICAgICAgICAgIHJlc3VsdD17bGF6eVJlc3VsdH1cbiAgICAgICAgICAgICAgICAgIG9uQ2FuY2VsPXtzdGFydE92ZXJ9XG4gICAgICAgICAgICAgICAgICBvblNhdmU9e3N0YXJ0T3Zlcn1cbiAgICAgICAgICAgICAgICAgIGdvQmFjaz17c3RhcnRPdmVyfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogJzEwcHgnLFxuICAgICAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6ICczMGVtJyxcbiAgICAgICAgICAgICAgICAgICAgbWluV2lkdGg6ICc2MHZoJyxcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPEVkaXRvclxuICAgICAgICAgICAgICAgICAgICBhdHRyPXt2YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgbGF6eVJlc3VsdD17bGF6eVJlc3VsdH1cbiAgICAgICAgICAgICAgICAgICAgLyogUmUtb3BlbiB0aGlzIG1vZGFsIGFnYWluIGJ1dCB3aXRoIHRoZSBjdXJyZW50IHN0YXRlXG4gICAgICAgICAgICAgIFRoaXMgbWFpbnRhaW5zIHRoZSBzdGF0ZSBzbyB0aGF0IGlmIHdlIGhhdmVuJ3Qgc2F2ZWQsXG4gICAgICAgICAgICAgIHdlIGNhbiBjb21lIGJhY2sgdG8gd2hlcmUgd2Ugd2VyZSB3b3JraW5nICovXG4gICAgICAgICAgICAgICAgICAgIGdvQmFjaz17c3RhcnRPdmVyfVxuICAgICAgICAgICAgICAgICAgICBvbkNhbmNlbD17c3RhcnRPdmVyfVxuICAgICAgICAgICAgICAgICAgICBvblNhdmU9e3N0YXJ0T3Zlcn1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICA8RWRpdEljb24gLz5cbiAgICAgICAgPC9CdXR0b24+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApXG59XG5jb25zdCBDdXN0b21MaXN0Q29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQoe1xuICBpdGVtczoge30gYXMgQ2hlY2tlZFR5cGUsXG4gIHNldEl0ZW1zOiAoKCkgPT4ge30pIGFzIFNldENoZWNrZWRUeXBlLFxuICBmaWx0ZXJlZEl0ZW1BcnJheTogW10gYXMgc3RyaW5nW10sXG59KVxuY29uc3QgZmlsdGVyVXBkYXRlID0gKHtcbiAgZmlsdGVyLFxuICBzZXRJdGVtQXJyYXksXG4gIGl0ZW1zLFxufToge1xuICBpdGVtczoge1xuICAgIFtrZXk6IHN0cmluZ106IGJvb2xlYW5cbiAgfVxuICBmaWx0ZXI6IHN0cmluZ1xuICBzZXRJdGVtQXJyYXk6ICh2YWw6IHN0cmluZ1tdKSA9PiB2b2lkXG59KSA9PiB7XG4gIHNldEl0ZW1BcnJheShcbiAgICBPYmplY3Qua2V5cyhpdGVtcykuZmlsdGVyKChhdHRyKSA9PiB7XG4gICAgICBjb25zdCBhbGlhcyA9IFN0YXJ0dXBEYXRhU3RvcmUuTWV0YWNhcmREZWZpbml0aW9ucy5nZXRBbGlhcyhhdHRyKVxuICAgICAgY29uc3QgaXNGaWx0ZXJlZCA9XG4gICAgICAgIGZpbHRlciAhPT0gJydcbiAgICAgICAgICA/ICFhbGlhcy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGZpbHRlci50b0xvd2VyQ2FzZSgpKVxuICAgICAgICAgIDogZmFsc2VcbiAgICAgIHJldHVybiAhaXNGaWx0ZXJlZFxuICAgIH0pXG4gIClcbn1cbmNvbnN0IGdlbmVyYXRlRGVib3VuY2VkRmlsdGVyVXBkYXRlID0gKCkgPT4ge1xuICByZXR1cm4gZGVib3VuY2UoZmlsdGVyVXBkYXRlLCA1MDApXG59XG4vKipcbiAqIEF0IHRoZSBtb21lbnQsIHdlIG9ubHkgdmlydHVhbGl6ZSB0aGUgcmlnaHQgc2lkZSBzaW5jZSB0aGF0J3MgbGlrZWx5IHRvIGJlIGh1Z2Ugd2hlcmVhcyB0aGUgbGVmdCBpc24ndCAoaXQgYWxzbyBoYXMgRE5EIG9uIGxlZnQsIHdoaWNoIG1ha2VzIHRoaW5ncyBkaWZmIHRvIHZpcnR1YWxpemUpXG4gKi9cbmNvbnN0IEN1c3RvbUxpc3QgPSAoe1xuICB0aXRsZSxcbiAgaXRlbXMsXG4gIHJlcXVpcmVkQXR0cmlidXRlcyxcbiAgbGF6eVJlc3VsdCxcbiAgdXBkYXRlSXRlbXMsXG4gIGlzRG5ELFxuICBoYW5kbGVUb2dnbGVBbGwsXG4gIG1vZGUsXG4gIHN0YXJ0T3ZlcixcbiAgdG90YWxQb3NzaWJsZSxcbn06IHtcbiAgdGl0bGU6IFJlYWN0LlJlYWN0Tm9kZVxuICBpdGVtczogQ2hlY2tlZFR5cGVcbiAgcmVxdWlyZWRBdHRyaWJ1dGVzPzogc3RyaW5nW11cbiAgbGF6eVJlc3VsdD86IExhenlRdWVyeVJlc3VsdFxuICB1cGRhdGVJdGVtczogU2V0Q2hlY2tlZFR5cGVcbiAgaXNEbkQ6IGJvb2xlYW4gLy8gZHJhZyBhbmQgZHJvcCBhbGxvd2VkP1xuICBoYW5kbGVUb2dnbGVBbGw6IChwcm9wczogYW55KSA9PiAoKSA9PiB2b2lkXG4gIG1vZGU6ICdsb2FkaW5nJyB8IHN0cmluZ1xuICBzdGFydE92ZXI6ICgpID0+IHZvaWRcbiAgdG90YWxQb3NzaWJsZTogbnVtYmVyXG59KSA9PiB7XG4gIGNvbnN0IGl0ZW1zUmVmID0gUmVhY3QudXNlUmVmKGl0ZW1zKVxuICBpdGVtc1JlZi5jdXJyZW50ID0gaXRlbXMgLy8gZG9uJ3Qgc2VlIGEgcGVyZm9ybWFudCB3YXkgYmVzaWRlcyB0aGlzIHRvIGFsbG93IHVzIHRvIGF2b2lkIHJlcmVuZGVyaW5nIERuRCBidXQgYWxsb3cgaXQgdG8gdXBkYXRlIHRoZSBpdGVtIG9yZGVycyBjb3JyZWN0bHlcbiAgY29uc3QgW2ZpbHRlciwgc2V0RmlsdGVyXSA9IFJlYWN0LnVzZVN0YXRlKCcnKVxuICBjb25zdCBbdW5maWx0ZXJlZEl0ZW1BcnJheSwgc2V0VW5maWx0ZXJlZEl0ZW1BcnJheV0gPSBSZWFjdC51c2VTdGF0ZShcbiAgICBPYmplY3Qua2V5cyhpdGVtcylcbiAgKVxuICBjb25zdCBbZmlsdGVyZWRJdGVtQXJyYXksIHNldEZpbHRlcmVkSXRlbUFycmF5XSA9IFJlYWN0LnVzZVN0YXRlKFxuICAgIE9iamVjdC5rZXlzKGl0ZW1zKVxuICApXG4gIGNvbnN0IFtpc0ZpbHRlcmluZywgc2V0SXNGaWx0ZXJpbmddID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IGRlYm91bmNlZEZpbHRlclVwZGF0ZSA9IFJlYWN0LnVzZVJlZihnZW5lcmF0ZURlYm91bmNlZEZpbHRlclVwZGF0ZSgpKVxuICBjb25zdCBudW1iZXJDaGVja2VkID0gZ2V0QW1vdW50Q2hlY2tlZChpdGVtcylcbiAgY29uc3QgdG90YWwgPSBPYmplY3Qua2V5cyhpdGVtcykubGVuZ3RoXG4gIGNvbnN0IHRvdGFsQ2hlY2thYmxlID0gcmVxdWlyZWRBdHRyaWJ1dGVzXG4gICAgPyB0b3RhbCAtIHJlcXVpcmVkQXR0cmlidXRlcy5sZW5ndGhcbiAgICA6IHRvdGFsXG4gIGNvbnN0IGlzSW5kZXRlcm1pbmF0ZSA9XG4gICAgbnVtYmVyQ2hlY2tlZCAhPT0gdG90YWxDaGVja2FibGUgJiYgbnVtYmVyQ2hlY2tlZCAhPT0gMFxuICBjb25zdCBpc0NvbXBsZXRlbHlTZWxlY3RlZCA9XG4gICAgbnVtYmVyQ2hlY2tlZCA9PT0gdG90YWxDaGVja2FibGUgJiYgdG90YWxDaGVja2FibGUgIT09IDBcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRVbmZpbHRlcmVkSXRlbUFycmF5KE9iamVjdC5rZXlzKGl0ZW1zKSlcbiAgfSwgW09iamVjdC5rZXlzKGl0ZW1zKS50b1N0cmluZygpXSlcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRJc0ZpbHRlcmluZyh0cnVlKVxuICAgIGRlYm91bmNlZEZpbHRlclVwZGF0ZS5jdXJyZW50KHtcbiAgICAgIGl0ZW1zLFxuICAgICAgZmlsdGVyLFxuICAgICAgc2V0SXRlbUFycmF5OiBzZXRGaWx0ZXJlZEl0ZW1BcnJheSxcbiAgICB9KVxuICB9LCBbT2JqZWN0LmtleXMoaXRlbXMpLnRvU3RyaW5nKCksIGZpbHRlcl0pXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0SXNGaWx0ZXJpbmcoZmFsc2UpXG4gIH0sIFtmaWx0ZXJlZEl0ZW1BcnJheV0pXG4gIC8vIG1lbW8gdGhpcywgb3RoZXIgd2lzZSB0aGUgY3JlYXRpb24gb2YgdGhlIG5ldyBvYmplY3QgZWFjaCB0aW1lIGlzIHNlZW4gYXMgYSBcImNoYW5nZVwiXG4gIGNvbnN0IG1lbW9Qcm92aWRlclZhbHVlID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHsgaXRlbXMsIHNldEl0ZW1zOiB1cGRhdGVJdGVtcywgZmlsdGVyZWRJdGVtQXJyYXkgfVxuICB9LCBbaXRlbXMsIHVwZGF0ZUl0ZW1zXSlcbiAgcmV0dXJuIChcbiAgICA8Q3VzdG9tTGlzdENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e21lbW9Qcm92aWRlclZhbHVlfT5cbiAgICAgIDxQYXBlclxuICAgICAgICBkYXRhLWlkPXtgJHsodGl0bGUgYXMgYW55KS50b0xvd2VyQ2FzZSgpfS1jb250YWluZXJgfVxuICAgICAgICBlbGV2YXRpb249e0VsZXZhdGlvbnMucGFwZXJ9XG4gICAgICA+XG4gICAgICAgIDxHcmlkXG4gICAgICAgICAgY29udGFpbmVyXG4gICAgICAgICAgY2xhc3NOYW1lPVwicC0yIHRleHQteGwgZm9udC1ub3JtYWwgcmVsYXRpdmVcIlxuICAgICAgICAgIGRpcmVjdGlvbj1cInJvd1wiXG4gICAgICAgICAgd3JhcD1cIm5vd3JhcFwiXG4gICAgICAgICAgYWxpZ25JdGVtcz1cImNlbnRlclwiXG4gICAgICAgID5cbiAgICAgICAgICA8R3JpZCBpdGVtIGNsYXNzTmFtZT1cImFic29sdXRlIGxlZnQtMCB0b3AtMCBtbC0yIG10LW1pblwiPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICBkYXRhLWlkPXtgJHsodGl0bGUgYXMgYW55KS50b0xvd2VyQ2FzZSgpfS1zZWxlY3QtYWxsLWNoZWNrYm94YH1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e09iamVjdC5rZXlzKGl0ZW1zKS5sZW5ndGggPT09IDB9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVRvZ2dsZUFsbChpdGVtcyl9XG4gICAgICAgICAgICAgIGNvbG9yPVwicHJpbWFyeVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHsoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpc0NvbXBsZXRlbHlTZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tCb3hJY29uIC8+XG4gICAgICAgICAgICAgICAgICAgICAge251bWJlckNoZWNrZWR9eycgJ31cbiAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc0luZGV0ZXJtaW5hdGUpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgPEluZGV0ZXJtaW5hdGVDaGVja0JveEljb24gLz5cbiAgICAgICAgICAgICAgICAgICAgICB7bnVtYmVyQ2hlY2tlZH17JyAnfVxuICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIDxDaGVja0JveE91dGxpbmVCbGFua0ljb24gLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pKCl9XG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8L0dyaWQ+XG4gICAgICAgICAgPEdyaWQgaXRlbSBjbGFzc05hbWU9XCJtLWF1dG8gXCI+XG4gICAgICAgICAgICB7dGl0bGV9ICh7dG90YWx9L3t0b3RhbFBvc3NpYmxlfSlcbiAgICAgICAgICA8L0dyaWQ+XG4gICAgICAgIDwvR3JpZD5cbiAgICAgICAgPERhcmtEaXZpZGVyIGNsYXNzTmFtZT1cInctZnVsbCBoLW1pblwiIC8+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0yXCI+XG4gICAgICAgICAgPFRleHRGaWVsZFxuICAgICAgICAgICAgZGF0YS1pZD1cImZpbHRlci1pbnB1dFwiXG4gICAgICAgICAgICBzaXplPVwic21hbGxcIlxuICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVkXCJcbiAgICAgICAgICAgIGxhYmVsPVwiRmlsdGVyIGJ5IGtleXdvcmRcIlxuICAgICAgICAgICAgZnVsbFdpZHRoPXt0cnVlfVxuICAgICAgICAgICAgdmFsdWU9e2ZpbHRlcn1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICBzZXRGaWx0ZXIoZS50YXJnZXQudmFsdWUpXG4gICAgICAgICAgICB9fVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8RGFya0RpdmlkZXIgY2xhc3NOYW1lPVwidy1mdWxsIGgtbWluXCIgLz5cbiAgICAgICAge21vZGUgPT09ICdsb2FkaW5nJyA/IChcbiAgICAgICAgICA8Q2lyY3VsYXJQcm9ncmVzcyAvPlxuICAgICAgICApIDogKFxuICAgICAgICAgIDxMaXN0XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWNvbW1vbiBoLWNvbW1vbiBvdmVyZmxvdy1oaWRkZW4gcmVsYXRpdmVcIlxuICAgICAgICAgICAgZGVuc2VcbiAgICAgICAgICAgIGNvbXBvbmVudD1cImRpdlwiXG4gICAgICAgICAgICByb2xlPVwibGlzdFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAge2lzRmlsdGVyaW5nID8gKFxuICAgICAgICAgICAgICA8TGluZWFyUHJvZ3Jlc3NcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgaC0xIGFic29sdXRlIGxlZnQtMCB0b3AtMFwiXG4gICAgICAgICAgICAgICAgdmFyaWFudD1cImluZGV0ZXJtaW5hdGVcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICB7aXNEbkQgPyAoXG4gICAgICAgICAgICAgIDxNZW1vIGRlcGVuZGVuY2llcz17W2ZpbHRlcmVkSXRlbUFycmF5XX0+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGZsZXgtbm93cmFwIGgtZnVsbCB3LWZ1bGwgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIml0YWxpYyBweC00IHRleHQteHMgZm9udC1ub3JtYWxcIj5cbiAgICAgICAgICAgICAgICAgICAgQ2xpY2sgYW5kIGRyYWcgYXR0cmlidXRlcyB0byByZW9yZGVyLlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgPERyYWdEcm9wQ29udGV4dFxuICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ0VuZD17KHJlc3VsdDogRHJvcFJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9QdXQgdGhlc2UgTk8tT1BzIHVwIGZyb250IGZvciBwZXJmb3JtYW5jZSByZWFzb25zOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8xLiBJZiB0aGUgaXRlbSBpcyBkcm9wcGVkIG91dHNpZGUgdGhlIGxpc3QsIGRvIG5vdGhpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vMi4gSWYgdGhlIGl0ZW0gaXMgbW92ZWQgaW50byB0aGUgc2FtZSBwbGFjZSwgZG8gbm90aGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuZGVzdGluYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnNvdXJjZS5pbmRleCA9PT0gcmVzdWx0LmRlc3RpbmF0aW9uLmluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29tcGxpY2F0ZWQgYnkgdGhlIGZhY3QgdGhhdCB3ZSBmaWx0ZXIsIHNvIHdlIG5lZWQgdG8gZmluZCB0aGUgb3JpZ2luYWwgYW5kIGRlc3QgaW5kZXggb3Vyc2VsdmVzIDooXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnJlYXNvbiA9PT0gJ0RST1AnICYmIHJlc3VsdC5kZXN0aW5hdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaGlmdGVkT3JpZ2luYWxJbmRleCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5maWx0ZXJlZEl0ZW1BcnJheS5pbmRleE9mKHJlc3VsdC5kcmFnZ2FibGVJZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2hpZnRlZERlc3RJbmRleCA9IHVuZmlsdGVyZWRJdGVtQXJyYXkuaW5kZXhPZihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZEl0ZW1BcnJheVtyZXN1bHQuZGVzdGluYXRpb24uaW5kZXhdXG4gICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xvbmVkTGlzdCA9IHVuZmlsdGVyZWRJdGVtQXJyYXkuc2xpY2UoMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmVkTGlzdC5zcGxpY2Uoc2hpZnRlZE9yaWdpbmFsSW5kZXgsIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lZExpc3Quc3BsaWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaWZ0ZWREZXN0SW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMCwgLy8gaW5zZXJ0IFdJVEhPVVQgcmVtb3ZpbmcgYW55dGhpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuZHJhZ2dhYmxlSWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdMaXN0ID0gY2xvbmVkTGlzdC5yZWR1Y2UoKGJsb2IsIGF0dHIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9iW2F0dHJdID0gaXRlbXNSZWYuY3VycmVudFthdHRyXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBibG9iXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHt9IGFzIENoZWNrZWRUeXBlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVJdGVtcyhuZXdMaXN0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJVcGRhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJdGVtQXJyYXk6IHNldEZpbHRlcmVkSXRlbUFycmF5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBuZXdMaXN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KSAvLyBpbiB0aGlzIGNhc2UsIHdlIGVhZ2VybHkgc2V0IGluIG9yZGVyIHRvIGF2b2lkIGZsaWNrZXJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjaGlsZHJlbi1oLWZ1bGwgY2hpbGRyZW4tdy1mdWxsIGgtZnVsbCB3LWZ1bGwgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8RHJvcHBhYmxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRyb3BwYWJsZUlkPVwidGVzdFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGU9XCJ2aXJ0dWFsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyQ2xvbmU9eyhwcm92aWRlZCwgX3NuYXBzaG90LCBydWJyaWMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Li4uKHByb3ZpZGVkLmRyYWdnYWJsZVByb3BzIGFzIGFueSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsuLi4ocHJvdmlkZWQuZHJhZ0hhbmRsZVByb3BzIGFzIGFueSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj17cHJvdmlkZWQuaW5uZXJSZWYgYXMgYW55fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SXRlbVJvd1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtmaWx0ZXJlZEl0ZW1BcnJheVtydWJyaWMuc291cmNlLmluZGV4XX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZD17cmVxdWlyZWRBdHRyaWJ1dGVzPy5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkSXRlbUFycmF5W3J1YnJpYy5zb3VyY2UuaW5kZXhdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydE92ZXI9e3N0YXJ0T3Zlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXp5UmVzdWx0PXtsYXp5UmVzdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcj17ZmlsdGVyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7KHByb3ZpZGVkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBdXRvVmFyaWFibGVTaXplTGlzdDxzdHJpbmcsIEhUTUxEaXZFbGVtZW50PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtcz17ZmlsdGVyZWRJdGVtQXJyYXl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRTaXplPXszOS40Mn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlZE1lYXN1cmluZz17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcnNjYW5Db3VudD17MTB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dGVyUmVmPXtwcm92aWRlZC5pbm5lclJlZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSXRlbT17KHsgaXRlbVJlZiwgaXRlbSwgbWVhc3VyZSwgaW5kZXggfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHJlZj17aXRlbVJlZn0gY2xhc3NOYW1lPVwicmVsYXRpdmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERyYWdnYWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZUlkPXtpdGVtfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4PXtpbmRleH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2l0ZW19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEcmFnRGlzYWJsZWQ9eyFpc0RuRH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlSW50ZXJhY3RpdmVFbGVtZW50QmxvY2tpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsocHJvdmlkZWQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9e3Byb3ZpZGVkLmlubmVyUmVmIGFzIGFueX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Li4uKHByb3ZpZGVkLmRyYWdnYWJsZVByb3BzIGFzIGFueSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey4uLihwcm92aWRlZC5kcmFnSGFuZGxlUHJvcHMgYXMgYW55KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJdGVtUm93XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17aXRlbX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkPXtyZXF1aXJlZEF0dHJpYnV0ZXM/LmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRPdmVyPXtzdGFydE92ZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXp5UmVzdWx0PXtsYXp5UmVzdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmlsdGVyPXtmaWx0ZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWFzdXJlPXttZWFzdXJlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRHJhZ2dhYmxlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbXB0eT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA8ZGl2PjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Ryb3BwYWJsZT5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9EcmFnRHJvcENvbnRleHQ+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9NZW1vPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICA8QXV0b1ZhcmlhYmxlU2l6ZUxpc3Q8c3RyaW5nLCBIVE1MRGl2RWxlbWVudD5cbiAgICAgICAgICAgICAgICAgIGl0ZW1zPXtmaWx0ZXJlZEl0ZW1BcnJheX1cbiAgICAgICAgICAgICAgICAgIGRlZmF1bHRTaXplPXszOS40Mn1cbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZWRNZWFzdXJpbmc9e3RydWV9XG4gICAgICAgICAgICAgICAgICBvdmVyc2NhbkNvdW50PXsxMH1cbiAgICAgICAgICAgICAgICAgIEl0ZW09eyh7IGl0ZW1SZWYsIGl0ZW0sIG1lYXN1cmUgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgcmVmPXtpdGVtUmVmfSBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEl0ZW1Sb3dcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2l0ZW19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkPXtyZXF1aXJlZEF0dHJpYnV0ZXM/LmluY2x1ZGVzKGl0ZW0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydE92ZXI9e3N0YXJ0T3Zlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGF6eVJlc3VsdD17bGF6eVJlc3VsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWVhc3VyZT17bWVhc3VyZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBFbXB0eT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gPGRpdj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvTGlzdD5cbiAgICAgICAgKX1cbiAgICAgIDwvUGFwZXI+XG4gICAgPC9DdXN0b21MaXN0Q29udGV4dC5Qcm92aWRlcj5cbiAgKVxufVxuZXhwb3J0IGNvbnN0IHVzZUN1c3RvbVJlYWRPbmx5Q2hlY2sgPSAoKSA9PiB7XG4gIGNvbnN0IENvbmZpZ3VyYXRpb24gPSB1c2VDb25maWd1cmF0aW9uKClcbiAgY29uc3QgW2N1c3RvbUVkaXRhYmxlQXR0cmlidXRlcywgc2V0Q3VzdG9tRWRpdGFibGVBdHRyaWJ1dGVzXSA9XG4gICAgUmVhY3QudXNlU3RhdGUoW10gYXMgc3RyaW5nW10pXG4gIGNvbnN0IGlzTW91bnRlZCA9IFJlYWN0LnVzZVJlZjxib29sZWFuPih0cnVlKVxuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSBSZWFjdC51c2VTdGF0ZSh0cnVlKVxuICBjb25zdCBpbml0aWFsaXplQ3VzdG9tRWRpdGFibGVBdHRyaWJ1dGVzID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGF0dHJzID0gYXdhaXQgZXh0ZW5zaW9uLmN1c3RvbUVkaXRhYmxlQXR0cmlidXRlcygpXG4gICAgaWYgKGlzTW91bnRlZC5jdXJyZW50KSB7XG4gICAgICBpZiAoYXR0cnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzZXRDdXN0b21FZGl0YWJsZUF0dHJpYnV0ZXMoYXR0cnMpXG4gICAgICB9XG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKVxuICAgIH1cbiAgfVxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGluaXRpYWxpemVDdXN0b21FZGl0YWJsZUF0dHJpYnV0ZXMoKVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpc01vdW50ZWQuY3VycmVudCA9IGZhbHNlXG4gICAgfVxuICB9LCBbXSlcbiAgcmV0dXJuIHtcbiAgICBsb2FkaW5nLFxuICAgIGlzTm90V3JpdGFibGU6ICh7XG4gICAgICBhdHRyaWJ1dGUsXG4gICAgICBsYXp5UmVzdWx0LFxuICAgIH06IHtcbiAgICAgIGF0dHJpYnV0ZTogc3RyaW5nXG4gICAgICBsYXp5UmVzdWx0OiBMYXp5UXVlcnlSZXN1bHRcbiAgICB9KSA9PiB7XG4gICAgICBjb25zdCBwZXJtID0gZXh0ZW5zaW9uLmN1c3RvbUNhbldyaXRlUGVybWlzc2lvbih7XG4gICAgICAgIGF0dHJpYnV0ZSxcbiAgICAgICAgbGF6eVJlc3VsdCxcbiAgICAgICAgdXNlcixcbiAgICAgICAgZWRpdGFibGVBdHRyaWJ1dGVzOiBjdXN0b21FZGl0YWJsZUF0dHJpYnV0ZXMsXG4gICAgICB9KVxuICAgICAgaWYgKHBlcm0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gIXBlcm1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGRldGVybWluYXRpb24gPVxuICAgICAgICBsYXp5UmVzdWx0LmlzUmVtb3RlKCkgfHxcbiAgICAgICAgIVR5cGVkVXNlckluc3RhbmNlLmNhbldyaXRlKGxhenlSZXN1bHQpIHx8XG4gICAgICAgIENvbmZpZ3VyYXRpb24uaXNSZWFkT25seShhdHRyaWJ1dGUpXG4gICAgICByZXR1cm4gZGV0ZXJtaW5hdGlvblxuICAgIH0sXG4gIH1cbn1cbmNvbnN0IGNvbnZlcnRBdHRyTGlzdFRvTWFwID0gKGF0dHJzOiBzdHJpbmdbXSkgPT4ge1xuICByZXR1cm4gYXR0cnMucmVkdWNlKFxuICAgIChibG9iLCBhdHRyKSA9PiB7XG4gICAgICBibG9iW2F0dHJdID0gZmFsc2VcbiAgICAgIHJldHVybiBibG9iXG4gICAgfSxcbiAgICB7fSBhcyB7XG4gICAgICBba2V5OiBzdHJpbmddOiBib29sZWFuXG4gICAgfVxuICApXG59XG50eXBlIENoZWNrZWRUeXBlID0ge1xuICBba2V5OiBzdHJpbmddOiBib29sZWFuXG59XG50eXBlIFNldENoZWNrZWRUeXBlID0gUmVhY3QuRGlzcGF0Y2g8UmVhY3QuU2V0U3RhdGVBY3Rpb248Q2hlY2tlZFR5cGU+PlxuY29uc3QgVHJhbnNmZXJMaXN0ID0gKHtcbiAgc3RhcnRpbmdMZWZ0LFxuICByZXF1aXJlZEF0dHJpYnV0ZXMsXG4gIHN0YXJ0aW5nUmlnaHQsXG4gIHN0YXJ0aW5nSGlkZUVtcHR5LFxuICBsYXp5UmVzdWx0LFxuICBvblNhdmUsXG59OiB7XG4gIHN0YXJ0aW5nTGVmdDogc3RyaW5nW11cbiAgcmVxdWlyZWRBdHRyaWJ1dGVzPzogc3RyaW5nW11cbiAgc3RhcnRpbmdSaWdodDogc3RyaW5nW11cbiAgc3RhcnRpbmdIaWRlRW1wdHk/OiBib29sZWFuXG4gIGxhenlSZXN1bHQ/OiBMYXp5UXVlcnlSZXN1bHRcbiAgb25TYXZlOiAoYXJnOiBzdHJpbmdbXSwgaGlkZUVtcHR5OiBib29sZWFuIHwgdW5kZWZpbmVkKSA9PiB2b2lkXG59KSA9PiB7XG4gIGNvbnN0IGRpYWxvZ0NvbnRleHQgPSB1c2VEaWFsb2coKVxuICBjb25zdCBbbW9kZSwgc2V0TW9kZV0gPSBSZWFjdC51c2VTdGF0ZShcbiAgICAnbG9hZGluZycgYXMgJ25vcm1hbCcgfCAnc2F2aW5nJyB8ICdsb2FkaW5nJ1xuICApXG4gIGNvbnN0IFtsZWZ0LCBzZXRMZWZ0XSA9IFJlYWN0LnVzZVN0YXRlKGNvbnZlcnRBdHRyTGlzdFRvTWFwKHN0YXJ0aW5nTGVmdCkpXG4gIGNvbnN0IFtyaWdodCwgc2V0UmlnaHRdID0gUmVhY3QudXNlU3RhdGUoY29udmVydEF0dHJMaXN0VG9NYXAoc3RhcnRpbmdSaWdodCkpXG4gIGNvbnN0IFtoaWRlRW1wdHksIHNldEhpZGVFbXB0eV0gPSBSZWFjdC51c2VTdGF0ZShzdGFydGluZ0hpZGVFbXB0eSlcbiAgY29uc3QgeyBsb2FkaW5nIH0gPSB1c2VDdXN0b21SZWFkT25seUNoZWNrKClcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWxvYWRpbmcpIHtcbiAgICAgIHNldE1vZGUoJ25vcm1hbCcpXG4gICAgfVxuICB9LCBbbG9hZGluZ10pXG4gIGNvbnN0IGdlbmVyYXRlSGFuZGxlVG9nZ2xlQWxsID0gKHtcbiAgICBzZXRTdGF0ZSxcbiAgICBzdGF0ZSxcbiAgICBkaXNhYmxlZEF0dHJpYnV0ZXMgPSBbXSxcbiAgfToge1xuICAgIHNldFN0YXRlOiBTZXRDaGVja2VkVHlwZVxuICAgIHN0YXRlOiBDaGVja2VkVHlwZVxuICAgIGRpc2FibGVkQXR0cmlidXRlcz86IHN0cmluZ1tdXG4gIH0pID0+IHtcbiAgICByZXR1cm4gKCkgPT4gKCkgPT4ge1xuICAgICAgY29uc3QgYWxsVmFsdWVzID0gT2JqZWN0LnZhbHVlcyhzdGF0ZSlcbiAgICAgIGNvbnN0IHRvdGFsQ2hlY2thYmxlID0gYWxsVmFsdWVzLmxlbmd0aCAtIGRpc2FibGVkQXR0cmlidXRlcy5sZW5ndGhcbiAgICAgIGNvbnN0IG51bWJlckNoZWNrZWQgPSBhbGxWYWx1ZXMuZmlsdGVyKChjaGVja2VkKSA9PiBjaGVja2VkKS5sZW5ndGhcbiAgICAgIGNvbnN0IGFsbFNlbGVjdGVkID1cbiAgICAgICAgbnVtYmVyQ2hlY2tlZCA9PT0gdG90YWxDaGVja2FibGUgJiYgdG90YWxDaGVja2FibGUgIT09IDBcblxuICAgICAgaWYgKCFhbGxTZWxlY3RlZCkge1xuICAgICAgICBzZXRTdGF0ZShcbiAgICAgICAgICBPYmplY3Qua2V5cyhzdGF0ZSkucmVkdWNlKChibG9iLCBhdHRyKSA9PiB7XG4gICAgICAgICAgICBpZiAoZGlzYWJsZWRBdHRyaWJ1dGVzLmluY2x1ZGVzKGF0dHIpKSBibG9iW2F0dHJdID0gZmFsc2VcbiAgICAgICAgICAgIGVsc2UgYmxvYlthdHRyXSA9IHRydWVcbiAgICAgICAgICAgIHJldHVybiBibG9iXG4gICAgICAgICAgfSwge30gYXMgQ2hlY2tlZFR5cGUpXG4gICAgICAgIClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldFN0YXRlKFxuICAgICAgICAgIE9iamVjdC5rZXlzKHN0YXRlKS5yZWR1Y2UoKGJsb2IsIGF0dHIpID0+IHtcbiAgICAgICAgICAgIGJsb2JbYXR0cl0gPSBmYWxzZVxuICAgICAgICAgICAgcmV0dXJuIGJsb2JcbiAgICAgICAgICB9LCB7fSBhcyBDaGVja2VkVHlwZSlcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBjb25zdCBtb3ZlUmlnaHQgPSAoKSA9PiB7XG4gICAgY29uc3QgY2hlY2tlZExlZnQgPSBPYmplY3QuZW50cmllcyhsZWZ0KVxuICAgICAgLmZpbHRlcigoYSkgPT4gYVsxXSlcbiAgICAgIC5yZWR1Y2UoKGJsb2IsIGEpID0+IHtcbiAgICAgICAgYmxvYlthWzBdXSA9IGZhbHNlXG4gICAgICAgIHJldHVybiBibG9iXG4gICAgICB9LCB7fSBhcyBDaGVja2VkVHlwZSlcbiAgICBjb25zdCBub25DaGVja2VkTGVmdCA9IE9iamVjdC5lbnRyaWVzKGxlZnQpXG4gICAgICAuZmlsdGVyKChhKSA9PiAhYVsxXSlcbiAgICAgIC5yZWR1Y2UoKGJsb2IsIGEpID0+IHtcbiAgICAgICAgYmxvYlthWzBdXSA9IGFbMV1cbiAgICAgICAgcmV0dXJuIGJsb2JcbiAgICAgIH0sIHt9IGFzIENoZWNrZWRUeXBlKVxuICAgIHNldFJpZ2h0KHtcbiAgICAgIC4uLnJpZ2h0LFxuICAgICAgLi4uY2hlY2tlZExlZnQsXG4gICAgfSlcbiAgICBzZXRMZWZ0KG5vbkNoZWNrZWRMZWZ0KVxuICB9XG4gIGNvbnN0IG1vdmVMZWZ0ID0gKCkgPT4ge1xuICAgIGNvbnN0IGNoZWNrZWRSaWdodCA9IE9iamVjdC5lbnRyaWVzKHJpZ2h0KVxuICAgICAgLmZpbHRlcigoYSkgPT4gYVsxXSlcbiAgICAgIC5yZWR1Y2UoKGJsb2IsIGEpID0+IHtcbiAgICAgICAgYmxvYlthWzBdXSA9IGZhbHNlXG4gICAgICAgIHJldHVybiBibG9iXG4gICAgICB9LCB7fSBhcyBDaGVja2VkVHlwZSlcbiAgICBjb25zdCBub25DaGVja2VkUmlnaHQgPSBPYmplY3QuZW50cmllcyhyaWdodClcbiAgICAgIC5maWx0ZXIoKGEpID0+ICFhWzFdKVxuICAgICAgLnJlZHVjZSgoYmxvYiwgYSkgPT4ge1xuICAgICAgICBibG9iW2FbMF1dID0gYVsxXVxuICAgICAgICByZXR1cm4gYmxvYlxuICAgICAgfSwge30gYXMgQ2hlY2tlZFR5cGUpXG4gICAgc2V0TGVmdCh7XG4gICAgICAuLi5sZWZ0LFxuICAgICAgLi4uY2hlY2tlZFJpZ2h0LFxuICAgIH0pXG4gICAgc2V0UmlnaHQobm9uQ2hlY2tlZFJpZ2h0KVxuICB9XG4gIGNvbnN0IGhhc0xlZnRDaGVja2VkID0gT2JqZWN0LmVudHJpZXMobGVmdCkuZmluZCgoYSkgPT4gYVsxXSkgIT09IHVuZGVmaW5lZFxuICBjb25zdCBoYXNSaWdodENoZWNrZWQgPSBPYmplY3QuZW50cmllcyhyaWdodCkuZmluZCgoYSkgPT4gYVsxXSkgIT09IHVuZGVmaW5lZFxuICBjb25zdCBzdGFydE92ZXIgPSAoKSA9PiB7XG4gICAgZGlhbG9nQ29udGV4dC5zZXRQcm9wcyh7XG4gICAgICBvcGVuOiB0cnVlLFxuICAgICAgY2hpbGRyZW46IChcbiAgICAgICAgPFRyYW5zZmVyTGlzdFxuICAgICAgICAgIHN0YXJ0aW5nTGVmdD17T2JqZWN0LmtleXMobGVmdCl9XG4gICAgICAgICAgc3RhcnRpbmdSaWdodD17T2JqZWN0LmtleXMocmlnaHQpfVxuICAgICAgICAgIHN0YXJ0aW5nSGlkZUVtcHR5PXtoaWRlRW1wdHl9XG4gICAgICAgICAgbGF6eVJlc3VsdD17bGF6eVJlc3VsdH1cbiAgICAgICAgICBvblNhdmU9e29uU2F2ZX1cbiAgICAgICAgLz5cbiAgICAgICksXG4gICAgfSlcbiAgfVxuICBjb25zdCB0b3RhbFBvc3NpYmxlID0gc3RhcnRpbmdMZWZ0Lmxlbmd0aCArIHN0YXJ0aW5nUmlnaHQubGVuZ3RoXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC0yeGwgdGV4dC1jZW50ZXIgcHgtMiBwYi0yIHB0LTQgZm9udC1ub3JtYWwgcmVsYXRpdmVcIj5cbiAgICAgICAgTWFuYWdlIEF0dHJpYnV0ZXNcbiAgICAgICAgPEJ1dHRvblxuICAgICAgICAgIGRhdGEtaWQ9XCJjbG9zZS1idXR0b25cIlxuICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHJpZ2h0LTAgdG9wLTAgbXItMSBtdC0xXCJcbiAgICAgICAgICB2YXJpYW50PVwidGV4dFwiXG4gICAgICAgICAgc2l6ZT1cInNtYWxsXCJcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICBkaWFsb2dDb250ZXh0LnNldFByb3BzKHtcbiAgICAgICAgICAgICAgb3BlbjogZmFsc2UsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBudWxsLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgPENsb3NlSWNvbiAvPlxuICAgICAgICA8L0J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgICAgPERhcmtEaXZpZGVyIGNsYXNzTmFtZT1cInctZnVsbCBoLW1pblwiIC8+XG4gICAgICA8RGlhbG9nQ29udGVudD5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtcm93IGp1c3RpZnktY2VudGVyIGl0ZW1zLWNlbnRlciBzcGFjZS14LTIgZmxleC1ub3dyYXAgdy1mdWxsXCI+XG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxDdXN0b21MaXN0XG4gICAgICAgICAgICAgIHRpdGxlPVwiQWN0aXZlXCJcbiAgICAgICAgICAgICAgaXRlbXM9e2xlZnR9XG4gICAgICAgICAgICAgIHJlcXVpcmVkQXR0cmlidXRlcz17cmVxdWlyZWRBdHRyaWJ1dGVzfVxuICAgICAgICAgICAgICBsYXp5UmVzdWx0PXtsYXp5UmVzdWx0fVxuICAgICAgICAgICAgICB1cGRhdGVJdGVtcz17c2V0TGVmdH1cbiAgICAgICAgICAgICAgaXNEbkQ9e3RydWV9XG4gICAgICAgICAgICAgIHN0YXJ0T3Zlcj17c3RhcnRPdmVyfVxuICAgICAgICAgICAgICBoYW5kbGVUb2dnbGVBbGw9e2dlbmVyYXRlSGFuZGxlVG9nZ2xlQWxsKHtcbiAgICAgICAgICAgICAgICBzZXRTdGF0ZTogc2V0TGVmdCxcbiAgICAgICAgICAgICAgICBzdGF0ZTogbGVmdCxcbiAgICAgICAgICAgICAgICBkaXNhYmxlZEF0dHJpYnV0ZXM6IHJlcXVpcmVkQXR0cmlidXRlcyxcbiAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIHRvdGFsUG9zc2libGU9e3RvdGFsUG9zc2libGV9XG4gICAgICAgICAgICAgIG1vZGU9e21vZGV9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICBkYXRhLWlkPVwibW92ZS1yaWdodC1idXR0b25cIlxuICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lZFwiXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibS0xXCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXttb3ZlUmlnaHR9XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFoYXNMZWZ0Q2hlY2tlZH1cbiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwibW92ZSBzZWxlY3RlZCByaWdodFwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8UmlnaHRBcnJvd0ljb24gLz5cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICBkYXRhLWlkPVwibW92ZS1sZWZ0LWJ1dHRvblwiXG4gICAgICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVkXCJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtLTFcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e21vdmVMZWZ0fVxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXshaGFzUmlnaHRDaGVja2VkfVxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJtb3ZlIHNlbGVjdGVkIGxlZnRcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPExlZnRBcnJvd0ljb24gLz5cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPEN1c3RvbUxpc3RcbiAgICAgICAgICAgICAgdGl0bGU9XCJIaWRkZW5cIlxuICAgICAgICAgICAgICBpdGVtcz17cmlnaHR9XG4gICAgICAgICAgICAgIGxhenlSZXN1bHQ9e2xhenlSZXN1bHR9XG4gICAgICAgICAgICAgIHVwZGF0ZUl0ZW1zPXtzZXRSaWdodH1cbiAgICAgICAgICAgICAgaXNEbkQ9e2ZhbHNlfVxuICAgICAgICAgICAgICBzdGFydE92ZXI9e3N0YXJ0T3Zlcn1cbiAgICAgICAgICAgICAgaGFuZGxlVG9nZ2xlQWxsPXtnZW5lcmF0ZUhhbmRsZVRvZ2dsZUFsbCh7XG4gICAgICAgICAgICAgICAgc2V0U3RhdGU6IHNldFJpZ2h0LFxuICAgICAgICAgICAgICAgIHN0YXRlOiByaWdodCxcbiAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIG1vZGU9e21vZGV9XG4gICAgICAgICAgICAgIHRvdGFsUG9zc2libGU9e3RvdGFsUG9zc2libGV9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvRGlhbG9nQ29udGVudD5cbiAgICAgIDxEYXJrRGl2aWRlciBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1taW5cIiAvPlxuICAgICAgPERpYWxvZ0FjdGlvbnM+XG4gICAgICAgIHtoaWRlRW1wdHkgIT09IHVuZGVmaW5lZCAmJiAoXG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIDxGb3JtQ29udHJvbExhYmVsXG4gICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgIDxTd2l0Y2hcbiAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2hpZGVFbXB0eX1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0SGlkZUVtcHR5KGUudGFyZ2V0LmNoZWNrZWQpfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgbGFiZWw9XCJIaWRlIGVtcHR5IGF0dHJpYnV0ZXMgaW4gaW5zcGVjdG9yXCJcbiAgICAgICAgICAgICAgc3R5bGU9e3sgcGFkZGluZ0xlZnQ6ICcxMHB4JyB9fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZmxleDogJzEgMCAwJyB9fSAvPlxuICAgICAgICAgIDwvPlxuICAgICAgICApfVxuICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgZGF0YS1pZD1cImRpYWxvZy1zYXZlLWJ1dHRvblwiXG4gICAgICAgICAgZGlzYWJsZWQ9e21vZGUgPT09ICdzYXZpbmcnfVxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgIGRpYWxvZ0NvbnRleHQuc2V0UHJvcHMoe1xuICAgICAgICAgICAgICBvcGVuOiBmYWxzZSxcbiAgICAgICAgICAgICAgY2hpbGRyZW46IG51bGwsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH19XG4gICAgICAgICAgdmFyaWFudD1cInRleHRcIlxuICAgICAgICAgIGNvbG9yPVwic2Vjb25kYXJ5XCJcbiAgICAgICAgICBjbGFzc05hbWU9XCJtci0yXCJcbiAgICAgICAgPlxuICAgICAgICAgIENhbmNlbFxuICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgPEJ1dHRvblxuICAgICAgICAgIGNsYXNzTmFtZT1cIm1sLTJcIlxuICAgICAgICAgIGRpc2FibGVkPXttb2RlID09PSAnc2F2aW5nJ31cbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICBzZXRNb2RlKCdzYXZpbmcnKVxuICAgICAgICAgICAgb25TYXZlKE9iamVjdC5rZXlzKGxlZnQpLCBoaWRlRW1wdHkpXG4gICAgICAgICAgICBkaWFsb2dDb250ZXh0LnNldFByb3BzKHtcbiAgICAgICAgICAgICAgb3BlbjogZmFsc2UsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBudWxsLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9fVxuICAgICAgICAgIHZhcmlhbnQ9XCJjb250YWluZWRcIlxuICAgICAgICAgIGNvbG9yPVwicHJpbWFyeVwiXG4gICAgICAgID5cbiAgICAgICAgICBTYXZlXG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgPC9EaWFsb2dBY3Rpb25zPlxuICAgICAge21vZGUgPT09ICdzYXZpbmcnID8gKFxuICAgICAgICA8TGluZWFyUHJvZ3Jlc3NcbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgICAgIGhlaWdodDogJzEwcHgnLFxuICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICBsZWZ0OiAnMHB4JyxcbiAgICAgICAgICAgIGJvdHRvbTogJzAlJyxcbiAgICAgICAgICB9fVxuICAgICAgICAgIHZhcmlhbnQ9XCJpbmRldGVybWluYXRlXCJcbiAgICAgICAgLz5cbiAgICAgICkgOiBudWxsfVxuICAgIDwvPlxuICApXG59XG5leHBvcnQgZGVmYXVsdCBUcmFuc2Zlckxpc3RcbiJdfQ==