import { __assign, __read } from "tslib";
import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
/* https://material-ui.com/components/transfer-list/ */
import React from 'react';
import Grid from '@mui/material/Grid';
import List from '@mui/material/List';
import Button from '@mui/material/Button';
import DialogContent from '@mui/material/DialogContent';
import DialogActions from '@mui/material/DialogActions';
import TextField from '@mui/material/TextField';
import Tooltip from '@mui/material/Tooltip';
import LinearProgress from '@mui/material/LinearProgress';
import CircularProgress from '@mui/material/CircularProgress';
import Paper from '@mui/material/Paper';
import { useDialog } from '../../dialog';
import EditIcon from '@mui/icons-material/Edit';
import { Editor } from './summary';
import { DragDropContext, Droppable, Draggable, } from 'react-beautiful-dnd';
import { Elevations } from '../../theme/theme';
import { DarkDivider } from '../../dark-divider/dark-divider';
import LeftArrowIcon from '@mui/icons-material/ChevronLeft';
import RightArrowIcon from '@mui/icons-material/ChevronRight';
import CloseIcon from '@mui/icons-material/Close';
import CheckBoxIcon from '@mui/icons-material/CheckBox';
import CheckBoxOutlineBlankIcon from '@mui/icons-material/CheckBoxOutlineBlank';
import IndeterminateCheckBoxIcon from '@mui/icons-material/IndeterminateCheckBox';
import FormControlLabel from '@mui/material/FormControlLabel';
import Switch from '@mui/material/Switch';
import { AutoVariableSizeList } from 'react-window-components';
import debounce from 'lodash.debounce';
import { Memo } from '../../memo/memo';
import { TypedUserInstance } from '../../singletons/TypedUser';
import user from '../../singletons/user-instance';
import ExtensionPoints from '../../../extension-points/extension-points';
import { useMetacardDefinitions } from '../../../js/model/Startup/metacard-definitions.hooks';
import { StartupDataStore } from '../../../js/model/Startup/startup';
import { useConfiguration } from '../../../js/model/Startup/configuration.hooks';
import { useCanWritePermission } from '../../overridable/overridable-can-write-permission';
import { useCustomEditableAttributes } from '../../overridable/overridable-editable-attributes';
var getAmountChecked = function (items) {
    return Object.values(items).filter(function (a) { return a; }).length;
};
var handleShiftClick = function (_a) {
    var _b;
    var items = _a.items, filteredItemArray = _a.filteredItemArray, setItems = _a.setItems, item = _a.item;
    var defaultMin = filteredItemArray.length;
    var defaultMax = -1;
    var firstIndex = filteredItemArray.reduce(function (min, filteredItem, index) {
        if (items[filteredItem]) {
            return Math.min(min, index);
        }
        return min;
    }, defaultMin);
    var lastIndex = filteredItemArray.reduce(function (max, filteredItem, index) {
        if (items[filteredItem]) {
            return Math.max(max, index);
        }
        return max;
    }, defaultMax);
    var indexClicked = filteredItemArray.indexOf(item);
    if (firstIndex === defaultMin && lastIndex === defaultMax) {
        setItems(__assign(__assign({}, items), (_b = {}, _b[item] = true, _b)));
    }
    else if (indexClicked <= firstIndex) {
        // traverse from target to next until firstIndex
        var updates = filteredItemArray.slice(indexClicked, firstIndex + 1);
        setItems(__assign(__assign({}, items), updates.reduce(function (blob, filteredItem) {
            blob[filteredItem] = true;
            return blob;
        }, {})));
    }
    else if (indexClicked >= lastIndex) {
        // traverse from target to prev until lastIndex
        var updates = filteredItemArray.slice(lastIndex, indexClicked + 1);
        setItems(__assign(__assign({}, items), updates.reduce(function (blob, filteredItem) {
            blob[filteredItem] = true;
            return blob;
        }, {})));
    }
    else {
        // traverse from target to prev until something doesn't change
        var closestPreviousIndex = filteredItemArray
            .slice(0, indexClicked - 1)
            .reduce(function (max, filteredItem, index) {
            if (items[filteredItem]) {
                return Math.max(max, index);
            }
            return max;
        }, defaultMax);
        var updates = filteredItemArray.slice(closestPreviousIndex, indexClicked + 1);
        setItems(__assign(__assign({}, items), updates.reduce(function (blob, filteredItem) {
            blob[filteredItem] = true;
            return blob;
        }, {})));
    }
};
var ItemRow = function (_a) {
    var value = _a.value, required = _a.required, lazyResult = _a.lazyResult, startOver = _a.startOver, measure = _a.measure, filter = _a.filter;
    var _b = __read(React.useState(false), 2), show = _b[0], setShow = _b[1];
    var MetacardDefinitions = useMetacardDefinitions();
    var dialogContext = useDialog();
    var _c = React.useContext(CustomListContext), setItems = _c.setItems, items = _c.items, filteredItemArray = _c.filteredItemArray;
    var isWritable = useCustomReadOnlyCheck().isWritable;
    React.useEffect(function () {
        if (measure)
            measure();
    }, []);
    var alias = MetacardDefinitions.getAlias(value);
    var isReadonly = !lazyResult
        ? true
        : isWritable({
            attribute: value,
            lazyResult: lazyResult,
        });
    if (filter && !alias.toLowerCase().includes(filter.toLowerCase())) {
        return null;
    }
    var CustomAttributeEditor = lazyResult
        ? ExtensionPoints.attributeEditor(lazyResult, value)
        : null;
    return (_jsxs("div", { "data-id": "attribute-container", role: "listitem", className: "p-0 flex w-full", children: [_jsx(Tooltip, { title: "Attributes required by admin must remain 'Active'.", open: show, children: _jsx("div", { onMouseEnter: function () { return required && setShow(true); }, onMouseLeave: function () { return setShow(false); }, children: _jsx(Button, { disabled: required, onClick: function (event) {
                            var _a, _b;
                            if (event.shiftKey) {
                                handleShiftClick({
                                    items: items,
                                    item: value,
                                    setItems: setItems,
                                    filteredItemArray: filteredItemArray,
                                });
                            }
                            else if (event.ctrlKey || event.metaKey) {
                                setItems(__assign(__assign({}, items), (_a = {}, _a[value] = !items[value], _a)));
                            }
                            else {
                                setItems(__assign(__assign({}, items), (_b = {}, _b[value] = !items[value], _b)));
                            }
                        }, size: "medium", children: items[value] ? _jsx(CheckBoxIcon, {}) : _jsx(CheckBoxOutlineBlankIcon, {}) }) }) }), _jsx(Button, { disabled: required, fullWidth: true, size: "medium", className: "justify-start", onClick: function (event) {
                    var _a, _b;
                    if (event.shiftKey) {
                        handleShiftClick({
                            items: items,
                            item: value,
                            setItems: setItems,
                            filteredItemArray: filteredItemArray,
                        });
                    }
                    else if (event.ctrlKey || event.metaKey) {
                        setItems(__assign(__assign({}, items), (_a = {}, _a[value] = !items[value], _a)));
                    }
                    else {
                        // really the only difference from the checkbox click event, where we turn off everything but this one
                        setItems(__assign(__assign({}, Object.keys(items).reduce(function (blob, val) {
                            blob[val] = false;
                            return blob;
                        }, {})), (_b = {}, _b[value] = !items[value], _b)));
                    }
                }, children: alias }), !isReadonly && lazyResult && (_jsx(Button, { "data-id": "edit-button", style: {
                    pointerEvents: 'all',
                    height: '100%',
                }, onClick: function () {
                    dialogContext.setProps({
                        open: true,
                        children: CustomAttributeEditor ? (_jsx(CustomAttributeEditor, { attribute: value, result: lazyResult, onCancel: startOver, onSave: startOver, goBack: startOver })) : (_jsx("div", { style: {
                                padding: '10px',
                                minHeight: '30em',
                                minWidth: '60vh',
                            }, children: _jsx(Editor, { attr: value, lazyResult: lazyResult, 
                                /* Re-open this modal again but with the current state
                          This maintains the state so that if we haven't saved,
                          we can come back to where we were working */
                                goBack: startOver, onCancel: startOver, onSave: startOver }) })),
                    });
                }, children: _jsx(EditIcon, {}) }))] }));
};
var CustomListContext = React.createContext({
    items: {},
    setItems: (function () { }),
    filteredItemArray: [],
});
var filterUpdate = function (_a) {
    var filter = _a.filter, setItemArray = _a.setItemArray, items = _a.items;
    setItemArray(Object.keys(items).filter(function (attr) {
        var alias = StartupDataStore.MetacardDefinitions.getAlias(attr);
        var isFiltered = filter !== ''
            ? !alias.toLowerCase().includes(filter.toLowerCase())
            : false;
        return !isFiltered;
    }));
};
var generateDebouncedFilterUpdate = function () {
    return debounce(filterUpdate, 500);
};
/**
 * At the moment, we only virtualize the right side since that's likely to be huge whereas the left isn't (it also has DND on left, which makes things diff to virtualize)
 */
var CustomList = function (_a) {
    var title = _a.title, items = _a.items, requiredAttributes = _a.requiredAttributes, lazyResult = _a.lazyResult, updateItems = _a.updateItems, isDnD = _a.isDnD, handleToggleAll = _a.handleToggleAll, mode = _a.mode, startOver = _a.startOver, totalPossible = _a.totalPossible;
    var itemsRef = React.useRef(items);
    itemsRef.current = items; // don't see a performant way besides this to allow us to avoid rerendering DnD but allow it to update the item orders correctly
    var _b = __read(React.useState(''), 2), filter = _b[0], setFilter = _b[1];
    var _c = __read(React.useState(Object.keys(items)), 2), unfilteredItemArray = _c[0], setUnfilteredItemArray = _c[1];
    var _d = __read(React.useState(Object.keys(items)), 2), filteredItemArray = _d[0], setFilteredItemArray = _d[1];
    var _e = __read(React.useState(false), 2), isFiltering = _e[0], setIsFiltering = _e[1];
    var debouncedFilterUpdate = React.useRef(generateDebouncedFilterUpdate());
    var numberChecked = getAmountChecked(items);
    var total = Object.keys(items).length;
    var totalCheckable = requiredAttributes
        ? total - requiredAttributes.length
        : total;
    var isIndeterminate = numberChecked !== totalCheckable && numberChecked !== 0;
    var isCompletelySelected = numberChecked === totalCheckable && totalCheckable !== 0;
    React.useEffect(function () {
        setUnfilteredItemArray(Object.keys(items));
    }, [Object.keys(items).toString()]);
    React.useEffect(function () {
        setIsFiltering(true);
        debouncedFilterUpdate.current({
            items: items,
            filter: filter,
            setItemArray: setFilteredItemArray,
        });
    }, [Object.keys(items).toString(), filter]);
    React.useEffect(function () {
        setIsFiltering(false);
    }, [filteredItemArray]);
    // memo this, other wise the creation of the new object each time is seen as a "change"
    var memoProviderValue = React.useMemo(function () {
        return { items: items, setItems: updateItems, filteredItemArray: filteredItemArray };
    }, [items, updateItems]);
    return (_jsx(CustomListContext.Provider, { value: memoProviderValue, children: _jsxs(Paper, { "data-id": "".concat(title.toLowerCase(), "-container"), elevation: Elevations.paper, children: [_jsxs(Grid, { container: true, className: "p-2 text-xl font-normal relative", direction: "row", wrap: "nowrap", alignItems: "center", children: [_jsx(Grid, { item: true, className: "absolute left-0 top-0 ml-2 mt-min", children: _jsx(Button, { "data-id": "".concat(title.toLowerCase(), "-select-all-checkbox"), disabled: Object.keys(items).length === 0, onClick: handleToggleAll(items), color: "primary", children: (function () {
                                    if (isCompletelySelected) {
                                        return (_jsxs(_Fragment, { children: [_jsx(CheckBoxIcon, {}), numberChecked, ' '] }));
                                    }
                                    else if (isIndeterminate) {
                                        return (_jsxs(_Fragment, { children: [_jsx(IndeterminateCheckBoxIcon, {}), numberChecked, ' '] }));
                                    }
                                    else {
                                        return _jsx(CheckBoxOutlineBlankIcon, {});
                                    }
                                })() }) }), _jsxs(Grid, { item: true, className: "m-auto ", children: [title, " (", total, "/", totalPossible, ")"] })] }), _jsx(DarkDivider, { className: "w-full h-min" }), _jsx("div", { className: "p-2", children: _jsx(TextField, { "data-id": "filter-input", size: "small", variant: "outlined", label: "Filter by keyword", fullWidth: true, value: filter, onChange: function (e) {
                            setFilter(e.target.value);
                        } }) }), _jsx(DarkDivider, { className: "w-full h-min" }), mode === 'loading' ? (_jsx(CircularProgress, {})) : (_jsxs(List, { className: "w-common h-common overflow-hidden relative", dense: true, component: "div", role: "list", children: [isFiltering ? (_jsx(LinearProgress, { className: "w-full h-1 absolute left-0 top-0", variant: "indeterminate" })) : null, isDnD ? (_jsx(Memo, { dependencies: [filteredItemArray], children: _jsxs("div", { className: "flex flex-col flex-nowrap h-full w-full overflow-hidden", children: [_jsx("div", { className: "italic px-4 text-xs font-normal", children: "Click and drag attributes to reorder." }), _jsx("div", { className: "w-full h-full", children: _jsx(DragDropContext, { onDragEnd: function (result) {
                                                //Put these NO-OPs up front for performance reasons:
                                                //1. If the item is dropped outside the list, do nothing
                                                //2. If the item is moved into the same place, do nothing
                                                if (!result.destination) {
                                                    return;
                                                }
                                                if (result.source.index === result.destination.index) {
                                                    return;
                                                }
                                                // complicated by the fact that we filter, so we need to find the original and dest index ourselves :(
                                                if (result.reason === 'DROP' && result.destination) {
                                                    var shiftedOriginalIndex = unfilteredItemArray.indexOf(result.draggableId);
                                                    var shiftedDestIndex = unfilteredItemArray.indexOf(filteredItemArray[result.destination.index]);
                                                    var clonedList = unfilteredItemArray.slice(0);
                                                    clonedList.splice(shiftedOriginalIndex, 1);
                                                    clonedList.splice(shiftedDestIndex, 0, // insert WITHOUT removing anything
                                                    result.draggableId);
                                                    var newList = clonedList.reduce(function (blob, attr) {
                                                        blob[attr] = itemsRef.current[attr];
                                                        return blob;
                                                    }, {});
                                                    updateItems(newList);
                                                    filterUpdate({
                                                        filter: filter,
                                                        setItemArray: setFilteredItemArray,
                                                        items: newList,
                                                    }); // in this case, we eagerly set in order to avoid flickering
                                                }
                                            }, children: _jsx("div", { className: "children-h-full children-w-full h-full w-full overflow-hidden", children: _jsx(Droppable, { droppableId: "test", mode: "virtual", renderClone: function (provided, _snapshot, rubric) {
                                                        return (_jsx("div", __assign({}, provided.draggableProps, provided.dragHandleProps, { ref: provided.innerRef, children: _jsx(ItemRow, { value: filteredItemArray[rubric.source.index], required: requiredAttributes === null || requiredAttributes === void 0 ? void 0 : requiredAttributes.includes(filteredItemArray[rubric.source.index]), startOver: startOver, lazyResult: lazyResult, filter: filter }) })));
                                                    }, children: function (provided) {
                                                        return (_jsx(AutoVariableSizeList, { items: filteredItemArray, defaultSize: 39.42, controlledMeasuring: true, overscanCount: 10, outerRef: provided.innerRef, Item: function (_a) {
                                                                var itemRef = _a.itemRef, item = _a.item, measure = _a.measure, index = _a.index;
                                                                return (_jsx("div", { ref: itemRef, className: "relative", children: _jsx(Draggable, { draggableId: item, index: index, isDragDisabled: !isDnD, disableInteractiveElementBlocking: true, children: function (provided) {
                                                                            return (_jsx("div", __assign({ ref: provided.innerRef }, provided.draggableProps, provided.dragHandleProps, { children: _jsx(ItemRow, { value: item, required: requiredAttributes === null || requiredAttributes === void 0 ? void 0 : requiredAttributes.includes(item), startOver: startOver, lazyResult: lazyResult, 
                                                                                    // filter={filter}
                                                                                    measure: measure }) })));
                                                                        } }, item) }));
                                                            }, Empty: function () {
                                                                return _jsx("div", {});
                                                            } }));
                                                    } }) }) }) })] }) })) : (_jsx(_Fragment, { children: _jsx(AutoVariableSizeList, { items: filteredItemArray, defaultSize: 39.42, controlledMeasuring: true, overscanCount: 10, Item: function (_a) {
                                    var itemRef = _a.itemRef, item = _a.item, measure = _a.measure;
                                    return (_jsx("div", { ref: itemRef, className: "relative", children: _jsx(ItemRow, { value: item, required: requiredAttributes === null || requiredAttributes === void 0 ? void 0 : requiredAttributes.includes(item), startOver: startOver, lazyResult: lazyResult, measure: measure }) }));
                                }, Empty: function () {
                                    return _jsx("div", {});
                                } }) }))] }))] }) }));
};
export var useCustomReadOnlyCheck = function () {
    var Configuration = useConfiguration();
    var canWritePermission = useCanWritePermission();
    var _a = useCustomEditableAttributes(), loading = _a.loading, customEditableAttributes = _a.customEditableAttributes;
    return {
        loading: loading,
        isWritable: function (_a) {
            var attribute = _a.attribute, lazyResult = _a.lazyResult;
            return canWritePermission({
                attribute: attribute,
                lazyResult: lazyResult,
                user: user,
                editableAttributes: customEditableAttributes || [],
                typedUserInstance: TypedUserInstance,
                configuration: Configuration,
            });
        },
    };
};
var convertAttrListToMap = function (attrs) {
    return attrs.reduce(function (blob, attr) {
        blob[attr] = false;
        return blob;
    }, {});
};
var TransferList = function (_a) {
    var startingLeft = _a.startingLeft, requiredAttributes = _a.requiredAttributes, startingRight = _a.startingRight, startingHideEmpty = _a.startingHideEmpty, lazyResult = _a.lazyResult, onSave = _a.onSave;
    var dialogContext = useDialog();
    var _b = __read(React.useState('loading'), 2), mode = _b[0], setMode = _b[1];
    var _c = __read(React.useState(convertAttrListToMap(startingLeft)), 2), left = _c[0], setLeft = _c[1];
    var _d = __read(React.useState(convertAttrListToMap(startingRight)), 2), right = _d[0], setRight = _d[1];
    var _e = __read(React.useState(startingHideEmpty), 2), hideEmpty = _e[0], setHideEmpty = _e[1];
    var loading = useCustomReadOnlyCheck().loading;
    React.useEffect(function () {
        if (!loading) {
            setMode('normal');
        }
    }, [loading]);
    var generateHandleToggleAll = function (_a) {
        var setState = _a.setState, state = _a.state, _b = _a.disabledAttributes, disabledAttributes = _b === void 0 ? [] : _b;
        return function () { return function () {
            var allValues = Object.values(state);
            var totalCheckable = allValues.length - disabledAttributes.length;
            var numberChecked = allValues.filter(function (checked) { return checked; }).length;
            var allSelected = numberChecked === totalCheckable && totalCheckable !== 0;
            if (!allSelected) {
                setState(Object.keys(state).reduce(function (blob, attr) {
                    if (disabledAttributes.includes(attr))
                        blob[attr] = false;
                    else
                        blob[attr] = true;
                    return blob;
                }, {}));
            }
            else {
                setState(Object.keys(state).reduce(function (blob, attr) {
                    blob[attr] = false;
                    return blob;
                }, {}));
            }
        }; };
    };
    var moveRight = function () {
        var checkedLeft = Object.entries(left)
            .filter(function (a) { return a[1]; })
            .reduce(function (blob, a) {
            blob[a[0]] = false;
            return blob;
        }, {});
        var nonCheckedLeft = Object.entries(left)
            .filter(function (a) { return !a[1]; })
            .reduce(function (blob, a) {
            blob[a[0]] = a[1];
            return blob;
        }, {});
        setRight(__assign(__assign({}, right), checkedLeft));
        setLeft(nonCheckedLeft);
    };
    var moveLeft = function () {
        var checkedRight = Object.entries(right)
            .filter(function (a) { return a[1]; })
            .reduce(function (blob, a) {
            blob[a[0]] = false;
            return blob;
        }, {});
        var nonCheckedRight = Object.entries(right)
            .filter(function (a) { return !a[1]; })
            .reduce(function (blob, a) {
            blob[a[0]] = a[1];
            return blob;
        }, {});
        setLeft(__assign(__assign({}, left), checkedRight));
        setRight(nonCheckedRight);
    };
    var hasLeftChecked = Object.entries(left).find(function (a) { return a[1]; }) !== undefined;
    var hasRightChecked = Object.entries(right).find(function (a) { return a[1]; }) !== undefined;
    var startOver = function () {
        dialogContext.setProps({
            open: true,
            children: (_jsx(TransferList, { startingLeft: Object.keys(left), startingRight: Object.keys(right), startingHideEmpty: hideEmpty, lazyResult: lazyResult, onSave: onSave })),
        });
    };
    var totalPossible = startingLeft.length + startingRight.length;
    return (_jsxs(_Fragment, { children: [_jsxs("div", { className: "text-2xl text-center px-2 pb-2 pt-4 font-normal relative", children: ["Manage Attributes", _jsx(Button, { "data-id": "close-button", className: "absolute right-0 top-0 mr-1 mt-1", variant: "text", size: "small", onClick: function () {
                            dialogContext.setProps({
                                open: false,
                                children: null,
                            });
                        }, children: _jsx(CloseIcon, {}) })] }), _jsx(DarkDivider, { className: "w-full h-min" }), _jsx(DialogContent, { children: _jsxs("div", { className: "flex flex-row justify-center items-center space-x-2 flex-nowrap w-full", children: [_jsx("div", { children: _jsx(CustomList, { title: "Active", items: left, requiredAttributes: requiredAttributes, lazyResult: lazyResult, updateItems: setLeft, isDnD: true, startOver: startOver, handleToggleAll: generateHandleToggleAll({
                                    setState: setLeft,
                                    state: left,
                                    disabledAttributes: requiredAttributes,
                                }), totalPossible: totalPossible, mode: mode }) }), _jsx("div", { children: _jsxs("div", { className: "flex flex-col items-center", children: [_jsx(Button, { "data-id": "move-right-button", variant: "outlined", className: "m-1", onClick: moveRight, disabled: !hasLeftChecked, "aria-label": "move selected right", children: _jsx(RightArrowIcon, {}) }), _jsx(Button, { "data-id": "move-left-button", variant: "outlined", className: "m-1", onClick: moveLeft, disabled: !hasRightChecked, "aria-label": "move selected left", children: _jsx(LeftArrowIcon, {}) })] }) }), _jsx("div", { children: _jsx(CustomList, { title: "Hidden", items: right, lazyResult: lazyResult, updateItems: setRight, isDnD: false, startOver: startOver, handleToggleAll: generateHandleToggleAll({
                                    setState: setRight,
                                    state: right,
                                }), mode: mode, totalPossible: totalPossible }) })] }) }), _jsx(DarkDivider, { className: "w-full h-min" }), _jsxs(DialogActions, { children: [hideEmpty !== undefined && (_jsxs(_Fragment, { children: [_jsx(FormControlLabel, { control: _jsx(Switch, { checked: hideEmpty, onChange: function (e) { return setHideEmpty(e.target.checked); } }), label: "Hide empty attributes in inspector", style: { paddingLeft: '10px' } }), _jsx("div", { style: { flex: '1 0 0' } })] })), _jsx(Button, { "data-id": "dialog-save-button", disabled: mode === 'saving', onClick: function () {
                            dialogContext.setProps({
                                open: false,
                                children: null,
                            });
                        }, variant: "text", color: "secondary", className: "mr-2", children: "Cancel" }), _jsx(Button, { className: "ml-2", disabled: mode === 'saving', onClick: function () {
                            setMode('saving');
                            onSave(Object.keys(left), hideEmpty);
                            dialogContext.setProps({
                                open: false,
                                children: null,
                            });
                        }, variant: "contained", color: "primary", children: "Save" })] }), mode === 'saving' ? (_jsx(LinearProgress, { style: {
                    width: '100%',
                    height: '10px',
                    position: 'absolute',
                    left: '0px',
                    bottom: '0%',
                }, variant: "indeterminate" })) : null] }));
};
export default TransferList;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhbnNmZXItbGlzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3NyYy9tYWluL3dlYmFwcC9jb21wb25lbnQvdGFicy9tZXRhY2FyZC90cmFuc2Zlci1saXN0LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHVEQUF1RDtBQUV2RCxPQUFPLEtBQUssTUFBTSxPQUFPLENBQUE7QUFDekIsT0FBTyxJQUFJLE1BQU0sb0JBQW9CLENBQUE7QUFDckMsT0FBTyxJQUFJLE1BQU0sb0JBQW9CLENBQUE7QUFDckMsT0FBTyxNQUFNLE1BQU0sc0JBQXNCLENBQUE7QUFDekMsT0FBTyxhQUFhLE1BQU0sNkJBQTZCLENBQUE7QUFDdkQsT0FBTyxhQUFhLE1BQU0sNkJBQTZCLENBQUE7QUFDdkQsT0FBTyxTQUFTLE1BQU0seUJBQXlCLENBQUE7QUFDL0MsT0FBTyxPQUFPLE1BQU0sdUJBQXVCLENBQUE7QUFDM0MsT0FBTyxjQUFjLE1BQU0sOEJBQThCLENBQUE7QUFDekQsT0FBTyxnQkFBZ0IsTUFBTSxnQ0FBZ0MsQ0FBQTtBQUM3RCxPQUFPLEtBQUssTUFBTSxxQkFBcUIsQ0FBQTtBQUN2QyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sY0FBYyxDQUFBO0FBQ3hDLE9BQU8sUUFBUSxNQUFNLDBCQUEwQixDQUFBO0FBQy9DLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxXQUFXLENBQUE7QUFFbEMsT0FBTyxFQUVMLGVBQWUsRUFDZixTQUFTLEVBQ1QsU0FBUyxHQUNWLE1BQU0scUJBQXFCLENBQUE7QUFDNUIsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLG1CQUFtQixDQUFBO0FBQzlDLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQTtBQUM3RCxPQUFPLGFBQWEsTUFBTSxpQ0FBaUMsQ0FBQTtBQUMzRCxPQUFPLGNBQWMsTUFBTSxrQ0FBa0MsQ0FBQTtBQUM3RCxPQUFPLFNBQVMsTUFBTSwy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QkFDYixNQUFNLEVBQUUsTUFBTTtvQkFDZCxRQUFRLEVBQUUsVUFBVTtvQkFDcEIsSUFBSSxFQUFFLEtBQUs7b0JBQ1gsTUFBTSxFQUFFLElBQUk7aUJBQ2IsRUFDRCxPQUFPLEVBQUMsZUFBZSxHQUN2QixDQUNILENBQUMsQ0FBQyxDQUFDLElBQUksSUFDUCxDQUNKLENBQUE7QUFDSCxDQUFDLENBQUE7QUFDRCxlQUFlLFlBQVksQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIi8qIGh0dHBzOi8vbWF0ZXJpYWwtdWkuY29tL2NvbXBvbmVudHMvdHJhbnNmZXItbGlzdC8gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IEdyaWQgZnJvbSAnQG11aS9tYXRlcmlhbC9HcmlkJ1xuaW1wb3J0IExpc3QgZnJvbSAnQG11aS9tYXRlcmlhbC9MaXN0J1xuaW1wb3J0IEJ1dHRvbiBmcm9tICdAbXVpL21hdGVyaWFsL0J1dHRvbidcbmltcG9ydCBEaWFsb2dDb250ZW50IGZyb20gJ0BtdWkvbWF0ZXJpYWwvRGlhbG9nQ29udGVudCdcbmltcG9ydCBEaWFsb2dBY3Rpb25zIGZyb20gJ0BtdWkvbWF0ZXJpYWwvRGlhbG9nQWN0aW9ucydcbmltcG9ydCBUZXh0RmllbGQgZnJvbSAnQG11aS9tYXRlcmlhbC9UZXh0RmllbGQnXG5pbXBvcnQgVG9vbHRpcCBmcm9tICdAbXVpL21hdGVyaWFsL1Rvb2x0aXAnXG5pbXBvcnQgTGluZWFyUHJvZ3Jlc3MgZnJvbSAnQG11aS9tYXRlcmlhbC9MaW5lYXJQcm9ncmVzcydcbmltcG9ydCBDaXJjdWxhclByb2dyZXNzIGZyb20gJ0BtdWkvbWF0ZXJpYWwvQ2lyY3VsYXJQcm9ncmVzcydcbmltcG9ydCBQYXBlciBmcm9tICdAbXVpL21hdGVyaWFsL1BhcGVyJ1xuaW1wb3J0IHsgdXNlRGlhbG9nIH0gZnJvbSAnLi4vLi4vZGlhbG9nJ1xuaW1wb3J0IEVkaXRJY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvRWRpdCdcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gJy4vc3VtbWFyeSdcbmltcG9ydCB7IExhenlRdWVyeVJlc3VsdCB9IGZyb20gJy4uLy4uLy4uL2pzL21vZGVsL0xhenlRdWVyeVJlc3VsdC9MYXp5UXVlcnlSZXN1bHQnXG5pbXBvcnQge1xuICBEcm9wUmVzdWx0LFxuICBEcmFnRHJvcENvbnRleHQsXG4gIERyb3BwYWJsZSxcbiAgRHJhZ2dhYmxlLFxufSBmcm9tICdyZWFjdC1iZWF1dGlmdWwtZG5kJ1xuaW1wb3J0IHsgRWxldmF0aW9ucyB9IGZyb20gJy4uLy4uL3RoZW1lL3RoZW1lJ1xuaW1wb3J0IHsgRGFya0RpdmlkZXIgfSBmcm9tICcuLi8uLi9kYXJrLWRpdmlkZXIvZGFyay1kaXZpZGVyJ1xuaW1wb3J0IExlZnRBcnJvd0ljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9DaGV2cm9uTGVmdCdcbmltcG9ydCBSaWdodEFycm93SWNvbiBmcm9tICdAbXVpL2ljb25zLW1hdGVyaWFsL0NoZXZyb25SaWdodCdcbmltcG9ydCBDbG9zZUljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9DbG9zZSdcbmltcG9ydCBDaGVja0JveEljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9DaGVja0JveCdcbmltcG9ydCBDaGVja0JveE91dGxpbmVCbGFua0ljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9DaGVja0JveE91dGxpbmVCbGFuaydcbmltcG9ydCBJbmRldGVybWluYXRlQ2hlY2tCb3hJY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvSW5kZXRlcm1pbmF0ZUNoZWNrQm94J1xuaW1wb3J0IEZvcm1Db250cm9sTGFiZWwgZnJvbSAnQG11aS9tYXRlcmlhbC9Gb3JtQ29udHJvbExhYmVsJ1xuaW1wb3J0IFN3aXRjaCBmcm9tICdAbXVpL21hdGVyaWFsL1N3aXRjaCdcbmltcG9ydCB7IEF1dG9WYXJpYWJsZVNpemVMaXN0IH0gZnJvbSAncmVhY3Qtd2luZG93LWNvbXBvbmVudHMnXG5pbXBvcnQgZGVib3VuY2UgZnJvbSAnbG9kYXNoLmRlYm91bmNlJ1xuaW1wb3J0IHsgTWVtbyB9IGZyb20gJy4uLy4uL21lbW8vbWVtbydcbmltcG9ydCB7IFR5cGVkVXNlckluc3RhbmNlIH0gZnJvbSAnLi4vLi4vc2luZ2xldG9ucy9UeXBlZFVzZXInXG5pbXBvcnQgdXNlciBmcm9tICcuLi8uLi9zaW5nbGV0b25zL3VzZXItaW5zdGFuY2UnXG5pbXBvcnQgRXh0ZW5zaW9uUG9pbnRzIGZyb20gJy4uLy4uLy4uL2V4dGVuc2lvbi1wb2ludHMvZXh0ZW5zaW9uLXBvaW50cydcbmltcG9ydCB7IHVzZU1ldGFjYXJkRGVmaW5pdGlvbnMgfSBmcm9tICcuLi8uLi8uLi9qcy9tb2RlbC9TdGFydHVwL21ldGFjYXJkLWRlZmluaXRpb25zLmhvb2tzJ1xuaW1wb3J0IHsgU3RhcnR1cERhdGFTdG9yZSB9IGZyb20gJy4uLy4uLy4uL2pzL21vZGVsL1N0YXJ0dXAvc3RhcnR1cCdcbmltcG9ydCB7IHVzZUNvbmZpZ3VyYXRpb24gfSBmcm9tICcuLi8uLi8uLi9qcy9tb2RlbC9TdGFydHVwL2NvbmZpZ3VyYXRpb24uaG9va3MnXG5pbXBvcnQgeyB1c2VDYW5Xcml0ZVBlcm1pc3Npb24gfSBmcm9tICcuLi8uLi9vdmVycmlkYWJsZS9vdmVycmlkYWJsZS1jYW4td3JpdGUtcGVybWlzc2lvbidcbmltcG9ydCB7IHVzZUN1c3RvbUVkaXRhYmxlQXR0cmlidXRlcyB9IGZyb20gJy4uLy4uL292ZXJyaWRhYmxlL292ZXJyaWRhYmxlLWVkaXRhYmxlLWF0dHJpYnV0ZXMnXG5jb25zdCBnZXRBbW91bnRDaGVja2VkID0gKGl0ZW1zOiBDaGVja2VkVHlwZSkgPT4ge1xuICByZXR1cm4gT2JqZWN0LnZhbHVlcyhpdGVtcykuZmlsdGVyKChhKSA9PiBhKS5sZW5ndGhcbn1cbmNvbnN0IGhhbmRsZVNoaWZ0Q2xpY2sgPSAoe1xuICBpdGVtcyxcbiAgZmlsdGVyZWRJdGVtQXJyYXksXG4gIHNldEl0ZW1zLFxuICBpdGVtLFxufToge1xuICBpdGVtczogQ2hlY2tlZFR5cGVcbiAgaXRlbTogc3RyaW5nXG4gIGZpbHRlcmVkSXRlbUFycmF5OiBzdHJpbmdbXVxuICBzZXRJdGVtczogU2V0Q2hlY2tlZFR5cGVcbn0pID0+IHtcbiAgY29uc3QgZGVmYXVsdE1pbiA9IGZpbHRlcmVkSXRlbUFycmF5Lmxlbmd0aFxuICBjb25zdCBkZWZhdWx0TWF4ID0gLTFcbiAgY29uc3QgZmlyc3RJbmRleCA9IGZpbHRlcmVkSXRlbUFycmF5LnJlZHVjZSgobWluLCBmaWx0ZXJlZEl0ZW0sIGluZGV4KSA9PiB7XG4gICAgaWYgKGl0ZW1zW2ZpbHRlcmVkSXRlbV0pIHtcbiAgICAgIHJldHVybiBNYXRoLm1pbihtaW4sIGluZGV4KVxuICAgIH1cbiAgICByZXR1cm4gbWluXG4gIH0sIGRlZmF1bHRNaW4pXG4gIGNvbnN0IGxhc3RJbmRleCA9IGZpbHRlcmVkSXRlbUFycmF5LnJlZHVjZSgobWF4LCBmaWx0ZXJlZEl0ZW0sIGluZGV4KSA9PiB7XG4gICAgaWYgKGl0ZW1zW2ZpbHRlcmVkSXRlbV0pIHtcbiAgICAgIHJldHVybiBNYXRoLm1heChtYXgsIGluZGV4KVxuICAgIH1cbiAgICByZXR1cm4gbWF4XG4gIH0sIGRlZmF1bHRNYXgpXG4gIGNvbnN0IGluZGV4Q2xpY2tlZCA9IGZpbHRlcmVkSXRlbUFycmF5LmluZGV4T2YoaXRlbSlcbiAgaWYgKGZpcnN0SW5kZXggPT09IGRlZmF1bHRNaW4gJiYgbGFzdEluZGV4ID09PSBkZWZhdWx0TWF4KSB7XG4gICAgc2V0SXRlbXMoe1xuICAgICAgLi4uaXRlbXMsXG4gICAgICBbaXRlbV06IHRydWUsXG4gICAgfSlcbiAgfSBlbHNlIGlmIChpbmRleENsaWNrZWQgPD0gZmlyc3RJbmRleCkge1xuICAgIC8vIHRyYXZlcnNlIGZyb20gdGFyZ2V0IHRvIG5leHQgdW50aWwgZmlyc3RJbmRleFxuICAgIGNvbnN0IHVwZGF0ZXMgPSBmaWx0ZXJlZEl0ZW1BcnJheS5zbGljZShpbmRleENsaWNrZWQsIGZpcnN0SW5kZXggKyAxKVxuICAgIHNldEl0ZW1zKHtcbiAgICAgIC4uLml0ZW1zLFxuICAgICAgLi4udXBkYXRlcy5yZWR1Y2UoKGJsb2IsIGZpbHRlcmVkSXRlbSkgPT4ge1xuICAgICAgICBibG9iW2ZpbHRlcmVkSXRlbV0gPSB0cnVlXG4gICAgICAgIHJldHVybiBibG9iXG4gICAgICB9LCB7fSBhcyBDaGVja2VkVHlwZSksXG4gICAgfSlcbiAgfSBlbHNlIGlmIChpbmRleENsaWNrZWQgPj0gbGFzdEluZGV4KSB7XG4gICAgLy8gdHJhdmVyc2UgZnJvbSB0YXJnZXQgdG8gcHJldiB1bnRpbCBsYXN0SW5kZXhcbiAgICBjb25zdCB1cGRhdGVzID0gZmlsdGVyZWRJdGVtQXJyYXkuc2xpY2UobGFzdEluZGV4LCBpbmRleENsaWNrZWQgKyAxKVxuICAgIHNldEl0ZW1zKHtcbiAgICAgIC4uLml0ZW1zLFxuICAgICAgLi4udXBkYXRlcy5yZWR1Y2UoKGJsb2IsIGZpbHRlcmVkSXRlbSkgPT4ge1xuICAgICAgICBibG9iW2ZpbHRlcmVkSXRlbV0gPSB0cnVlXG4gICAgICAgIHJldHVybiBibG9iXG4gICAgICB9LCB7fSBhcyBDaGVja2VkVHlwZSksXG4gICAgfSlcbiAgfSBlbHNlIHtcbiAgICAvLyB0cmF2ZXJzZSBmcm9tIHRhcmdldCB0byBwcmV2IHVudGlsIHNvbWV0aGluZyBkb2Vzbid0IGNoYW5nZVxuICAgIGNvbnN0IGNsb3Nlc3RQcmV2aW91c0luZGV4ID0gZmlsdGVyZWRJdGVtQXJyYXlcbiAgICAgIC5zbGljZSgwLCBpbmRleENsaWNrZWQgLSAxKVxuICAgICAgLnJlZHVjZSgobWF4LCBmaWx0ZXJlZEl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgIGlmIChpdGVtc1tmaWx0ZXJlZEl0ZW1dKSB7XG4gICAgICAgICAgcmV0dXJuIE1hdGgubWF4KG1heCwgaW5kZXgpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heFxuICAgICAgfSwgZGVmYXVsdE1heClcbiAgICBjb25zdCB1cGRhdGVzID0gZmlsdGVyZWRJdGVtQXJyYXkuc2xpY2UoXG4gICAgICBjbG9zZXN0UHJldmlvdXNJbmRleCxcbiAgICAgIGluZGV4Q2xpY2tlZCArIDFcbiAgICApXG4gICAgc2V0SXRlbXMoe1xuICAgICAgLi4uaXRlbXMsXG4gICAgICAuLi51cGRhdGVzLnJlZHVjZSgoYmxvYiwgZmlsdGVyZWRJdGVtKSA9PiB7XG4gICAgICAgIGJsb2JbZmlsdGVyZWRJdGVtXSA9IHRydWVcbiAgICAgICAgcmV0dXJuIGJsb2JcbiAgICAgIH0sIHt9IGFzIENoZWNrZWRUeXBlKSxcbiAgICB9KVxuICB9XG59XG5jb25zdCBJdGVtUm93ID0gKHtcbiAgdmFsdWUsXG4gIHJlcXVpcmVkLFxuICBsYXp5UmVzdWx0LFxuICBzdGFydE92ZXIsXG4gIG1lYXN1cmUsXG4gIGZpbHRlcixcbn06IHtcbiAgdmFsdWU6IHN0cmluZ1xuICByZXF1aXJlZD86IGJvb2xlYW5cbiAgbGF6eVJlc3VsdD86IExhenlRdWVyeVJlc3VsdFxuICBzdGFydE92ZXI6ICgpID0+IHZvaWRcbiAgbWVhc3VyZT86ICgpID0+IHZvaWRcbiAgZmlsdGVyPzogc3RyaW5nXG59KSA9PiB7XG4gIGNvbnN0IFtzaG93LCBzZXRTaG93XSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBNZXRhY2FyZERlZmluaXRpb25zID0gdXNlTWV0YWNhcmREZWZpbml0aW9ucygpXG4gIGNvbnN0IGRpYWxvZ0NvbnRleHQgPSB1c2VEaWFsb2coKVxuICBjb25zdCB7IHNldEl0ZW1zLCBpdGVtcywgZmlsdGVyZWRJdGVtQXJyYXkgfSA9XG4gICAgUmVhY3QudXNlQ29udGV4dChDdXN0b21MaXN0Q29udGV4dClcbiAgY29uc3QgeyBpc1dyaXRhYmxlIH0gPSB1c2VDdXN0b21SZWFkT25seUNoZWNrKClcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAobWVhc3VyZSkgbWVhc3VyZSgpXG4gIH0sIFtdKVxuICBjb25zdCBhbGlhcyA9IE1ldGFjYXJkRGVmaW5pdGlvbnMuZ2V0QWxpYXModmFsdWUpXG4gIGNvbnN0IGlzUmVhZG9ubHkgPSAhbGF6eVJlc3VsdFxuICAgID8gdHJ1ZVxuICAgIDogaXNXcml0YWJsZSh7XG4gICAgICAgIGF0dHJpYnV0ZTogdmFsdWUsXG4gICAgICAgIGxhenlSZXN1bHQsXG4gICAgICB9KVxuICBpZiAoZmlsdGVyICYmICFhbGlhcy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGZpbHRlci50b0xvd2VyQ2FzZSgpKSkge1xuICAgIHJldHVybiBudWxsXG4gIH1cbiAgY29uc3QgQ3VzdG9tQXR0cmlidXRlRWRpdG9yID0gbGF6eVJlc3VsdFxuICAgID8gRXh0ZW5zaW9uUG9pbnRzLmF0dHJpYnV0ZUVkaXRvcihsYXp5UmVzdWx0LCB2YWx1ZSlcbiAgICA6IG51bGxcbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBkYXRhLWlkPVwiYXR0cmlidXRlLWNvbnRhaW5lclwiXG4gICAgICByb2xlPVwibGlzdGl0ZW1cIlxuICAgICAgY2xhc3NOYW1lPVwicC0wIGZsZXggdy1mdWxsXCJcbiAgICA+XG4gICAgICA8VG9vbHRpcFxuICAgICAgICB0aXRsZT1cIkF0dHJpYnV0ZXMgcmVxdWlyZWQgYnkgYWRtaW4gbXVzdCByZW1haW4gJ0FjdGl2ZScuXCJcbiAgICAgICAgb3Blbj17c2hvd31cbiAgICAgID5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIG9uTW91c2VFbnRlcj17KCkgPT4gcmVxdWlyZWQgJiYgc2V0U2hvdyh0cnVlKX1cbiAgICAgICAgICBvbk1vdXNlTGVhdmU9eygpID0+IHNldFNob3coZmFsc2UpfVxuICAgICAgICA+XG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgZGlzYWJsZWQ9e3JlcXVpcmVkfVxuICAgICAgICAgICAgb25DbGljaz17KGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgIGlmIChldmVudC5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgIGhhbmRsZVNoaWZ0Q2xpY2soe1xuICAgICAgICAgICAgICAgICAgaXRlbXMsXG4gICAgICAgICAgICAgICAgICBpdGVtOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgIHNldEl0ZW1zLFxuICAgICAgICAgICAgICAgICAgZmlsdGVyZWRJdGVtQXJyYXksXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkpIHtcbiAgICAgICAgICAgICAgICBzZXRJdGVtcyh7XG4gICAgICAgICAgICAgICAgICAuLi5pdGVtcyxcbiAgICAgICAgICAgICAgICAgIFt2YWx1ZV06ICFpdGVtc1t2YWx1ZV0sXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXRJdGVtcyh7XG4gICAgICAgICAgICAgICAgICAuLi5pdGVtcyxcbiAgICAgICAgICAgICAgICAgIFt2YWx1ZV06ICFpdGVtc1t2YWx1ZV0sXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIHNpemU9XCJtZWRpdW1cIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtpdGVtc1t2YWx1ZV0gPyA8Q2hlY2tCb3hJY29uIC8+IDogPENoZWNrQm94T3V0bGluZUJsYW5rSWNvbiAvPn1cbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L1Rvb2x0aXA+XG4gICAgICA8QnV0dG9uXG4gICAgICAgIGRpc2FibGVkPXtyZXF1aXJlZH1cbiAgICAgICAgZnVsbFdpZHRoXG4gICAgICAgIHNpemU9XCJtZWRpdW1cIlxuICAgICAgICBjbGFzc05hbWU9XCJqdXN0aWZ5LXN0YXJ0XCJcbiAgICAgICAgb25DbGljaz17KGV2ZW50KSA9PiB7XG4gICAgICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICBoYW5kbGVTaGlmdENsaWNrKHtcbiAgICAgICAgICAgICAgaXRlbXMsXG4gICAgICAgICAgICAgIGl0ZW06IHZhbHVlLFxuICAgICAgICAgICAgICBzZXRJdGVtcyxcbiAgICAgICAgICAgICAgZmlsdGVyZWRJdGVtQXJyYXksXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5KSB7XG4gICAgICAgICAgICBzZXRJdGVtcyh7XG4gICAgICAgICAgICAgIC4uLml0ZW1zLFxuICAgICAgICAgICAgICBbdmFsdWVdOiAhaXRlbXNbdmFsdWVdLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gcmVhbGx5IHRoZSBvbmx5IGRpZmZlcmVuY2UgZnJvbSB0aGUgY2hlY2tib3ggY2xpY2sgZXZlbnQsIHdoZXJlIHdlIHR1cm4gb2ZmIGV2ZXJ5dGhpbmcgYnV0IHRoaXMgb25lXG4gICAgICAgICAgICBzZXRJdGVtcyh7XG4gICAgICAgICAgICAgIC4uLk9iamVjdC5rZXlzKGl0ZW1zKS5yZWR1Y2UoKGJsb2IsIHZhbCkgPT4ge1xuICAgICAgICAgICAgICAgIGJsb2JbdmFsXSA9IGZhbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJsb2JcbiAgICAgICAgICAgICAgfSwge30gYXMgQ2hlY2tlZFR5cGUpLFxuICAgICAgICAgICAgICBbdmFsdWVdOiAhaXRlbXNbdmFsdWVdLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH19XG4gICAgICA+XG4gICAgICAgIHthbGlhc31cbiAgICAgIDwvQnV0dG9uPlxuICAgICAgeyFpc1JlYWRvbmx5ICYmIGxhenlSZXN1bHQgJiYgKFxuICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgZGF0YS1pZD1cImVkaXQtYnV0dG9uXCJcbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgcG9pbnRlckV2ZW50czogJ2FsbCcsXG4gICAgICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgICAgICB9fVxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgIGRpYWxvZ0NvbnRleHQuc2V0UHJvcHMoe1xuICAgICAgICAgICAgICBvcGVuOiB0cnVlLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogQ3VzdG9tQXR0cmlidXRlRWRpdG9yID8gKFxuICAgICAgICAgICAgICAgIDxDdXN0b21BdHRyaWJ1dGVFZGl0b3JcbiAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZT17dmFsdWV9XG4gICAgICAgICAgICAgICAgICByZXN1bHQ9e2xhenlSZXN1bHR9XG4gICAgICAgICAgICAgICAgICBvbkNhbmNlbD17c3RhcnRPdmVyfVxuICAgICAgICAgICAgICAgICAgb25TYXZlPXtzdGFydE92ZXJ9XG4gICAgICAgICAgICAgICAgICBnb0JhY2s9e3N0YXJ0T3Zlcn1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6ICcxMHB4JyxcbiAgICAgICAgICAgICAgICAgICAgbWluSGVpZ2h0OiAnMzBlbScsXG4gICAgICAgICAgICAgICAgICAgIG1pbldpZHRoOiAnNjB2aCcsXG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxFZGl0b3JcbiAgICAgICAgICAgICAgICAgICAgYXR0cj17dmFsdWV9XG4gICAgICAgICAgICAgICAgICAgIGxhenlSZXN1bHQ9e2xhenlSZXN1bHR9XG4gICAgICAgICAgICAgICAgICAgIC8qIFJlLW9wZW4gdGhpcyBtb2RhbCBhZ2FpbiBidXQgd2l0aCB0aGUgY3VycmVudCBzdGF0ZVxuICAgICAgICAgICAgICBUaGlzIG1haW50YWlucyB0aGUgc3RhdGUgc28gdGhhdCBpZiB3ZSBoYXZlbid0IHNhdmVkLFxuICAgICAgICAgICAgICB3ZSBjYW4gY29tZSBiYWNrIHRvIHdoZXJlIHdlIHdlcmUgd29ya2luZyAqL1xuICAgICAgICAgICAgICAgICAgICBnb0JhY2s9e3N0YXJ0T3Zlcn1cbiAgICAgICAgICAgICAgICAgICAgb25DYW5jZWw9e3N0YXJ0T3Zlcn1cbiAgICAgICAgICAgICAgICAgICAgb25TYXZlPXtzdGFydE92ZXJ9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgPEVkaXRJY29uIC8+XG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKVxufVxuY29uc3QgQ3VzdG9tTGlzdENvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0KHtcbiAgaXRlbXM6IHt9IGFzIENoZWNrZWRUeXBlLFxuICBzZXRJdGVtczogKCgpID0+IHt9KSBhcyBTZXRDaGVja2VkVHlwZSxcbiAgZmlsdGVyZWRJdGVtQXJyYXk6IFtdIGFzIHN0cmluZ1tdLFxufSlcbmNvbnN0IGZpbHRlclVwZGF0ZSA9ICh7XG4gIGZpbHRlcixcbiAgc2V0SXRlbUFycmF5LFxuICBpdGVtcyxcbn06IHtcbiAgaXRlbXM6IHtcbiAgICBba2V5OiBzdHJpbmddOiBib29sZWFuXG4gIH1cbiAgZmlsdGVyOiBzdHJpbmdcbiAgc2V0SXRlbUFycmF5OiAodmFsOiBzdHJpbmdbXSkgPT4gdm9pZFxufSkgPT4ge1xuICBzZXRJdGVtQXJyYXkoXG4gICAgT2JqZWN0LmtleXMoaXRlbXMpLmZpbHRlcigoYXR0cikgPT4ge1xuICAgICAgY29uc3QgYWxpYXMgPSBTdGFydHVwRGF0YVN0b3JlLk1ldGFjYXJkRGVmaW5pdGlvbnMuZ2V0QWxpYXMoYXR0cilcbiAgICAgIGNvbnN0IGlzRmlsdGVyZWQgPVxuICAgICAgICBmaWx0ZXIgIT09ICcnXG4gICAgICAgICAgPyAhYWxpYXMudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhmaWx0ZXIudG9Mb3dlckNhc2UoKSlcbiAgICAgICAgICA6IGZhbHNlXG4gICAgICByZXR1cm4gIWlzRmlsdGVyZWRcbiAgICB9KVxuICApXG59XG5jb25zdCBnZW5lcmF0ZURlYm91bmNlZEZpbHRlclVwZGF0ZSA9ICgpID0+IHtcbiAgcmV0dXJuIGRlYm91bmNlKGZpbHRlclVwZGF0ZSwgNTAwKVxufVxuLyoqXG4gKiBBdCB0aGUgbW9tZW50LCB3ZSBvbmx5IHZpcnR1YWxpemUgdGhlIHJpZ2h0IHNpZGUgc2luY2UgdGhhdCdzIGxpa2VseSB0byBiZSBodWdlIHdoZXJlYXMgdGhlIGxlZnQgaXNuJ3QgKGl0IGFsc28gaGFzIERORCBvbiBsZWZ0LCB3aGljaCBtYWtlcyB0aGluZ3MgZGlmZiB0byB2aXJ0dWFsaXplKVxuICovXG5jb25zdCBDdXN0b21MaXN0ID0gKHtcbiAgdGl0bGUsXG4gIGl0ZW1zLFxuICByZXF1aXJlZEF0dHJpYnV0ZXMsXG4gIGxhenlSZXN1bHQsXG4gIHVwZGF0ZUl0ZW1zLFxuICBpc0RuRCxcbiAgaGFuZGxlVG9nZ2xlQWxsLFxuICBtb2RlLFxuICBzdGFydE92ZXIsXG4gIHRvdGFsUG9zc2libGUsXG59OiB7XG4gIHRpdGxlOiBSZWFjdC5SZWFjdE5vZGVcbiAgaXRlbXM6IENoZWNrZWRUeXBlXG4gIHJlcXVpcmVkQXR0cmlidXRlcz86IHN0cmluZ1tdXG4gIGxhenlSZXN1bHQ/OiBMYXp5UXVlcnlSZXN1bHRcbiAgdXBkYXRlSXRlbXM6IFNldENoZWNrZWRUeXBlXG4gIGlzRG5EOiBib29sZWFuIC8vIGRyYWcgYW5kIGRyb3AgYWxsb3dlZD9cbiAgaGFuZGxlVG9nZ2xlQWxsOiAocHJvcHM6IGFueSkgPT4gKCkgPT4gdm9pZFxuICBtb2RlOiAnbG9hZGluZycgfCBzdHJpbmdcbiAgc3RhcnRPdmVyOiAoKSA9PiB2b2lkXG4gIHRvdGFsUG9zc2libGU6IG51bWJlclxufSkgPT4ge1xuICBjb25zdCBpdGVtc1JlZiA9IFJlYWN0LnVzZVJlZihpdGVtcylcbiAgaXRlbXNSZWYuY3VycmVudCA9IGl0ZW1zIC8vIGRvbid0IHNlZSBhIHBlcmZvcm1hbnQgd2F5IGJlc2lkZXMgdGhpcyB0byBhbGxvdyB1cyB0byBhdm9pZCByZXJlbmRlcmluZyBEbkQgYnV0IGFsbG93IGl0IHRvIHVwZGF0ZSB0aGUgaXRlbSBvcmRlcnMgY29ycmVjdGx5XG4gIGNvbnN0IFtmaWx0ZXIsIHNldEZpbHRlcl0gPSBSZWFjdC51c2VTdGF0ZSgnJylcbiAgY29uc3QgW3VuZmlsdGVyZWRJdGVtQXJyYXksIHNldFVuZmlsdGVyZWRJdGVtQXJyYXldID0gUmVhY3QudXNlU3RhdGUoXG4gICAgT2JqZWN0LmtleXMoaXRlbXMpXG4gIClcbiAgY29uc3QgW2ZpbHRlcmVkSXRlbUFycmF5LCBzZXRGaWx0ZXJlZEl0ZW1BcnJheV0gPSBSZWFjdC51c2VTdGF0ZShcbiAgICBPYmplY3Qua2V5cyhpdGVtcylcbiAgKVxuICBjb25zdCBbaXNGaWx0ZXJpbmcsIHNldElzRmlsdGVyaW5nXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBkZWJvdW5jZWRGaWx0ZXJVcGRhdGUgPSBSZWFjdC51c2VSZWYoZ2VuZXJhdGVEZWJvdW5jZWRGaWx0ZXJVcGRhdGUoKSlcbiAgY29uc3QgbnVtYmVyQ2hlY2tlZCA9IGdldEFtb3VudENoZWNrZWQoaXRlbXMpXG4gIGNvbnN0IHRvdGFsID0gT2JqZWN0LmtleXMoaXRlbXMpLmxlbmd0aFxuICBjb25zdCB0b3RhbENoZWNrYWJsZSA9IHJlcXVpcmVkQXR0cmlidXRlc1xuICAgID8gdG90YWwgLSByZXF1aXJlZEF0dHJpYnV0ZXMubGVuZ3RoXG4gICAgOiB0b3RhbFxuICBjb25zdCBpc0luZGV0ZXJtaW5hdGUgPVxuICAgIG51bWJlckNoZWNrZWQgIT09IHRvdGFsQ2hlY2thYmxlICYmIG51bWJlckNoZWNrZWQgIT09IDBcbiAgY29uc3QgaXNDb21wbGV0ZWx5U2VsZWN0ZWQgPVxuICAgIG51bWJlckNoZWNrZWQgPT09IHRvdGFsQ2hlY2thYmxlICYmIHRvdGFsQ2hlY2thYmxlICE9PSAwXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0VW5maWx0ZXJlZEl0ZW1BcnJheShPYmplY3Qua2V5cyhpdGVtcykpXG4gIH0sIFtPYmplY3Qua2V5cyhpdGVtcykudG9TdHJpbmcoKV0pXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0SXNGaWx0ZXJpbmcodHJ1ZSlcbiAgICBkZWJvdW5jZWRGaWx0ZXJVcGRhdGUuY3VycmVudCh7XG4gICAgICBpdGVtcyxcbiAgICAgIGZpbHRlcixcbiAgICAgIHNldEl0ZW1BcnJheTogc2V0RmlsdGVyZWRJdGVtQXJyYXksXG4gICAgfSlcbiAgfSwgW09iamVjdC5rZXlzKGl0ZW1zKS50b1N0cmluZygpLCBmaWx0ZXJdKVxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldElzRmlsdGVyaW5nKGZhbHNlKVxuICB9LCBbZmlsdGVyZWRJdGVtQXJyYXldKVxuICAvLyBtZW1vIHRoaXMsIG90aGVyIHdpc2UgdGhlIGNyZWF0aW9uIG9mIHRoZSBuZXcgb2JqZWN0IGVhY2ggdGltZSBpcyBzZWVuIGFzIGEgXCJjaGFuZ2VcIlxuICBjb25zdCBtZW1vUHJvdmlkZXJWYWx1ZSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiB7IGl0ZW1zLCBzZXRJdGVtczogdXBkYXRlSXRlbXMsIGZpbHRlcmVkSXRlbUFycmF5IH1cbiAgfSwgW2l0ZW1zLCB1cGRhdGVJdGVtc10pXG4gIHJldHVybiAoXG4gICAgPEN1c3RvbUxpc3RDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXttZW1vUHJvdmlkZXJWYWx1ZX0+XG4gICAgICA8UGFwZXJcbiAgICAgICAgZGF0YS1pZD17YCR7KHRpdGxlIGFzIGFueSkudG9Mb3dlckNhc2UoKX0tY29udGFpbmVyYH1cbiAgICAgICAgZWxldmF0aW9uPXtFbGV2YXRpb25zLnBhcGVyfVxuICAgICAgPlxuICAgICAgICA8R3JpZFxuICAgICAgICAgIGNvbnRhaW5lclxuICAgICAgICAgIGNsYXNzTmFtZT1cInAtMiB0ZXh0LXhsIGZvbnQtbm9ybWFsIHJlbGF0aXZlXCJcbiAgICAgICAgICBkaXJlY3Rpb249XCJyb3dcIlxuICAgICAgICAgIHdyYXA9XCJub3dyYXBcIlxuICAgICAgICAgIGFsaWduSXRlbXM9XCJjZW50ZXJcIlxuICAgICAgICA+XG4gICAgICAgICAgPEdyaWQgaXRlbSBjbGFzc05hbWU9XCJhYnNvbHV0ZSBsZWZ0LTAgdG9wLTAgbWwtMiBtdC1taW5cIj5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgZGF0YS1pZD17YCR7KHRpdGxlIGFzIGFueSkudG9Mb3dlckNhc2UoKX0tc2VsZWN0LWFsbC1jaGVja2JveGB9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXtPYmplY3Qua2V5cyhpdGVtcykubGVuZ3RoID09PSAwfVxuICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVUb2dnbGVBbGwoaXRlbXMpfVxuICAgICAgICAgICAgICBjb2xvcj1cInByaW1hcnlcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7KCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXNDb21wbGV0ZWx5U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgPENoZWNrQm94SWNvbiAvPlxuICAgICAgICAgICAgICAgICAgICAgIHtudW1iZXJDaGVja2VkfXsnICd9XG4gICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNJbmRldGVybWluYXRlKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgIDxJbmRldGVybWluYXRlQ2hlY2tCb3hJY29uIC8+XG4gICAgICAgICAgICAgICAgICAgICAge251bWJlckNoZWNrZWR9eycgJ31cbiAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiA8Q2hlY2tCb3hPdXRsaW5lQmxhbmtJY29uIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KSgpfVxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9HcmlkPlxuICAgICAgICAgIDxHcmlkIGl0ZW0gY2xhc3NOYW1lPVwibS1hdXRvIFwiPlxuICAgICAgICAgICAge3RpdGxlfSAoe3RvdGFsfS97dG90YWxQb3NzaWJsZX0pXG4gICAgICAgICAgPC9HcmlkPlxuICAgICAgICA8L0dyaWQ+XG4gICAgICAgIDxEYXJrRGl2aWRlciBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1taW5cIiAvPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtMlwiPlxuICAgICAgICAgIDxUZXh0RmllbGRcbiAgICAgICAgICAgIGRhdGEtaWQ9XCJmaWx0ZXItaW5wdXRcIlxuICAgICAgICAgICAgc2l6ZT1cInNtYWxsXCJcbiAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lZFwiXG4gICAgICAgICAgICBsYWJlbD1cIkZpbHRlciBieSBrZXl3b3JkXCJcbiAgICAgICAgICAgIGZ1bGxXaWR0aD17dHJ1ZX1cbiAgICAgICAgICAgIHZhbHVlPXtmaWx0ZXJ9XG4gICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgc2V0RmlsdGVyKGUudGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPERhcmtEaXZpZGVyIGNsYXNzTmFtZT1cInctZnVsbCBoLW1pblwiIC8+XG4gICAgICAgIHttb2RlID09PSAnbG9hZGluZycgPyAoXG4gICAgICAgICAgPENpcmN1bGFyUHJvZ3Jlc3MgLz5cbiAgICAgICAgKSA6IChcbiAgICAgICAgICA8TGlzdFxuICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1jb21tb24gaC1jb21tb24gb3ZlcmZsb3ctaGlkZGVuIHJlbGF0aXZlXCJcbiAgICAgICAgICAgIGRlbnNlXG4gICAgICAgICAgICBjb21wb25lbnQ9XCJkaXZcIlxuICAgICAgICAgICAgcm9sZT1cImxpc3RcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtpc0ZpbHRlcmluZyA/IChcbiAgICAgICAgICAgICAgPExpbmVhclByb2dyZXNzXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtMSBhYnNvbHV0ZSBsZWZ0LTAgdG9wLTBcIlxuICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJpbmRldGVybWluYXRlXCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAge2lzRG5EID8gKFxuICAgICAgICAgICAgICA8TWVtbyBkZXBlbmRlbmNpZXM9e1tmaWx0ZXJlZEl0ZW1BcnJheV19PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBmbGV4LW5vd3JhcCBoLWZ1bGwgdy1mdWxsIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpdGFsaWMgcHgtNCB0ZXh0LXhzIGZvbnQtbm9ybWFsXCI+XG4gICAgICAgICAgICAgICAgICAgIENsaWNrIGFuZCBkcmFnIGF0dHJpYnV0ZXMgdG8gcmVvcmRlci5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgIDxEcmFnRHJvcENvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdFbmQ9eyhyZXN1bHQ6IERyb3BSZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vUHV0IHRoZXNlIE5PLU9QcyB1cCBmcm9udCBmb3IgcGVyZm9ybWFuY2UgcmVhc29uczpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vMS4gSWYgdGhlIGl0ZW0gaXMgZHJvcHBlZCBvdXRzaWRlIHRoZSBsaXN0LCBkbyBub3RoaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAvLzIuIElmIHRoZSBpdGVtIGlzIG1vdmVkIGludG8gdGhlIHNhbWUgcGxhY2UsIGRvIG5vdGhpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LmRlc3RpbmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zb3VyY2UuaW5kZXggPT09IHJlc3VsdC5kZXN0aW5hdGlvbi5pbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbXBsaWNhdGVkIGJ5IHRoZSBmYWN0IHRoYXQgd2UgZmlsdGVyLCBzbyB3ZSBuZWVkIHRvIGZpbmQgdGhlIG9yaWdpbmFsIGFuZCBkZXN0IGluZGV4IG91cnNlbHZlcyA6KFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5yZWFzb24gPT09ICdEUk9QJyAmJiByZXN1bHQuZGVzdGluYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2hpZnRlZE9yaWdpbmFsSW5kZXggPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZmlsdGVyZWRJdGVtQXJyYXkuaW5kZXhPZihyZXN1bHQuZHJhZ2dhYmxlSWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNoaWZ0ZWREZXN0SW5kZXggPSB1bmZpbHRlcmVkSXRlbUFycmF5LmluZGV4T2YoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWRJdGVtQXJyYXlbcmVzdWx0LmRlc3RpbmF0aW9uLmluZGV4XVxuICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsb25lZExpc3QgPSB1bmZpbHRlcmVkSXRlbUFycmF5LnNsaWNlKDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lZExpc3Quc3BsaWNlKHNoaWZ0ZWRPcmlnaW5hbEluZGV4LCAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZWRMaXN0LnNwbGljZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGlmdGVkRGVzdEluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAsIC8vIGluc2VydCBXSVRIT1VUIHJlbW92aW5nIGFueXRoaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRyYWdnYWJsZUlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3TGlzdCA9IGNsb25lZExpc3QucmVkdWNlKChibG9iLCBhdHRyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvYlthdHRyXSA9IGl0ZW1zUmVmLmN1cnJlbnRbYXR0cl1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmxvYlxuICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7fSBhcyBDaGVja2VkVHlwZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlSXRlbXMobmV3TGlzdClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyVXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0SXRlbUFycmF5OiBzZXRGaWx0ZXJlZEl0ZW1BcnJheSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogbmV3TGlzdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSkgLy8gaW4gdGhpcyBjYXNlLCB3ZSBlYWdlcmx5IHNldCBpbiBvcmRlciB0byBhdm9pZCBmbGlja2VyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2hpbGRyZW4taC1mdWxsIGNoaWxkcmVuLXctZnVsbCBoLWZ1bGwgdy1mdWxsIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPERyb3BwYWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICBkcm9wcGFibGVJZD1cInRlc3RcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlPVwidmlydHVhbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckNsb25lPXsocHJvdmlkZWQsIF9zbmFwc2hvdCwgcnVicmljKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey4uLihwcm92aWRlZC5kcmFnZ2FibGVQcm9wcyBhcyBhbnkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Li4uKHByb3ZpZGVkLmRyYWdIYW5kbGVQcm9wcyBhcyBhbnkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9e3Byb3ZpZGVkLmlubmVyUmVmIGFzIGFueX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEl0ZW1Sb3dcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17ZmlsdGVyZWRJdGVtQXJyYXlbcnVicmljLnNvdXJjZS5pbmRleF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ9e3JlcXVpcmVkQXR0cmlidXRlcz8uaW5jbHVkZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZEl0ZW1BcnJheVtydWJyaWMuc291cmNlLmluZGV4XVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRPdmVyPXtzdGFydE92ZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF6eVJlc3VsdD17bGF6eVJlc3VsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXI9e2ZpbHRlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgeyhwcm92aWRlZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXV0b1ZhcmlhYmxlU2l6ZUxpc3Q8c3RyaW5nLCBIVE1MRGl2RWxlbWVudD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM9e2ZpbHRlcmVkSXRlbUFycmF5fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0U2l6ZT17MzkuNDJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZWRNZWFzdXJpbmc9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJzY2FuQ291bnQ9ezEwfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRlclJlZj17cHJvdmlkZWQuaW5uZXJSZWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEl0ZW09eyh7IGl0ZW1SZWYsIGl0ZW0sIG1lYXN1cmUsIGluZGV4IH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiByZWY9e2l0ZW1SZWZ9IGNsYXNzTmFtZT1cInJlbGF0aXZlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEcmFnZ2FibGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGVJZD17aXRlbX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleD17aW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpdGVtfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRHJhZ0Rpc2FibGVkPXshaXNEbkR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUludGVyYWN0aXZlRWxlbWVudEJsb2NraW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7KHByb3ZpZGVkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXtwcm92aWRlZC5pbm5lclJlZiBhcyBhbnl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey4uLihwcm92aWRlZC5kcmFnZ2FibGVQcm9wcyBhcyBhbnkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsuLi4ocHJvdmlkZWQuZHJhZ0hhbmRsZVByb3BzIGFzIGFueSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SXRlbVJvd1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2l0ZW19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZD17cmVxdWlyZWRBdHRyaWJ1dGVzPy5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0T3Zlcj17c3RhcnRPdmVyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF6eVJlc3VsdD17bGF6eVJlc3VsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpbHRlcj17ZmlsdGVyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVhc3VyZT17bWVhc3VyZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0RyYWdnYWJsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRW1wdHk9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gPGRpdj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Ecm9wcGFibGU+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvRHJhZ0Ryb3BDb250ZXh0PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvTWVtbz5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEF1dG9WYXJpYWJsZVNpemVMaXN0PHN0cmluZywgSFRNTERpdkVsZW1lbnQ+XG4gICAgICAgICAgICAgICAgICBpdGVtcz17ZmlsdGVyZWRJdGVtQXJyYXl9XG4gICAgICAgICAgICAgICAgICBkZWZhdWx0U2l6ZT17MzkuNDJ9XG4gICAgICAgICAgICAgICAgICBjb250cm9sbGVkTWVhc3VyaW5nPXt0cnVlfVxuICAgICAgICAgICAgICAgICAgb3ZlcnNjYW5Db3VudD17MTB9XG4gICAgICAgICAgICAgICAgICBJdGVtPXsoeyBpdGVtUmVmLCBpdGVtLCBtZWFzdXJlIH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHJlZj17aXRlbVJlZn0gY2xhc3NOYW1lPVwicmVsYXRpdmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxJdGVtUm93XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtpdGVtfVxuICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZD17cmVxdWlyZWRBdHRyaWJ1dGVzPy5pbmNsdWRlcyhpdGVtKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRPdmVyPXtzdGFydE92ZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxhenlSZXN1bHQ9e2xhenlSZXN1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1lYXN1cmU9e21lYXN1cmV9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgRW1wdHk9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDxkaXY+PC9kaXY+XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L0xpc3Q+XG4gICAgICAgICl9XG4gICAgICA8L1BhcGVyPlxuICAgIDwvQ3VzdG9tTGlzdENvbnRleHQuUHJvdmlkZXI+XG4gIClcbn1cblxuZXhwb3J0IGNvbnN0IHVzZUN1c3RvbVJlYWRPbmx5Q2hlY2sgPSAoKSA9PiB7XG4gIGNvbnN0IENvbmZpZ3VyYXRpb24gPSB1c2VDb25maWd1cmF0aW9uKClcbiAgY29uc3QgY2FuV3JpdGVQZXJtaXNzaW9uID0gdXNlQ2FuV3JpdGVQZXJtaXNzaW9uKClcbiAgY29uc3QgeyBsb2FkaW5nLCBjdXN0b21FZGl0YWJsZUF0dHJpYnV0ZXMgfSA9IHVzZUN1c3RvbUVkaXRhYmxlQXR0cmlidXRlcygpXG4gIHJldHVybiB7XG4gICAgbG9hZGluZyxcbiAgICBpc1dyaXRhYmxlOiAoe1xuICAgICAgYXR0cmlidXRlLFxuICAgICAgbGF6eVJlc3VsdCxcbiAgICB9OiB7XG4gICAgICBhdHRyaWJ1dGU6IHN0cmluZ1xuICAgICAgbGF6eVJlc3VsdDogTGF6eVF1ZXJ5UmVzdWx0XG4gICAgfSkgPT4ge1xuICAgICAgcmV0dXJuIGNhbldyaXRlUGVybWlzc2lvbih7XG4gICAgICAgIGF0dHJpYnV0ZSxcbiAgICAgICAgbGF6eVJlc3VsdCxcbiAgICAgICAgdXNlcixcbiAgICAgICAgZWRpdGFibGVBdHRyaWJ1dGVzOiBjdXN0b21FZGl0YWJsZUF0dHJpYnV0ZXMgfHwgW10sXG4gICAgICAgIHR5cGVkVXNlckluc3RhbmNlOiBUeXBlZFVzZXJJbnN0YW5jZSxcbiAgICAgICAgY29uZmlndXJhdGlvbjogQ29uZmlndXJhdGlvbixcbiAgICAgIH0pXG4gICAgfSxcbiAgfVxufVxuY29uc3QgY29udmVydEF0dHJMaXN0VG9NYXAgPSAoYXR0cnM6IHN0cmluZ1tdKSA9PiB7XG4gIHJldHVybiBhdHRycy5yZWR1Y2UoXG4gICAgKGJsb2IsIGF0dHIpID0+IHtcbiAgICAgIGJsb2JbYXR0cl0gPSBmYWxzZVxuICAgICAgcmV0dXJuIGJsb2JcbiAgICB9LFxuICAgIHt9IGFzIHtcbiAgICAgIFtrZXk6IHN0cmluZ106IGJvb2xlYW5cbiAgICB9XG4gIClcbn1cbnR5cGUgQ2hlY2tlZFR5cGUgPSB7XG4gIFtrZXk6IHN0cmluZ106IGJvb2xlYW5cbn1cbnR5cGUgU2V0Q2hlY2tlZFR5cGUgPSBSZWFjdC5EaXNwYXRjaDxSZWFjdC5TZXRTdGF0ZUFjdGlvbjxDaGVja2VkVHlwZT4+XG5jb25zdCBUcmFuc2Zlckxpc3QgPSAoe1xuICBzdGFydGluZ0xlZnQsXG4gIHJlcXVpcmVkQXR0cmlidXRlcyxcbiAgc3RhcnRpbmdSaWdodCxcbiAgc3RhcnRpbmdIaWRlRW1wdHksXG4gIGxhenlSZXN1bHQsXG4gIG9uU2F2ZSxcbn06IHtcbiAgc3RhcnRpbmdMZWZ0OiBzdHJpbmdbXVxuICByZXF1aXJlZEF0dHJpYnV0ZXM/OiBzdHJpbmdbXVxuICBzdGFydGluZ1JpZ2h0OiBzdHJpbmdbXVxuICBzdGFydGluZ0hpZGVFbXB0eT86IGJvb2xlYW5cbiAgbGF6eVJlc3VsdD86IExhenlRdWVyeVJlc3VsdFxuICBvblNhdmU6IChhcmc6IHN0cmluZ1tdLCBoaWRlRW1wdHk6IGJvb2xlYW4gfCB1bmRlZmluZWQpID0+IHZvaWRcbn0pID0+IHtcbiAgY29uc3QgZGlhbG9nQ29udGV4dCA9IHVzZURpYWxvZygpXG4gIGNvbnN0IFttb2RlLCBzZXRNb2RlXSA9IFJlYWN0LnVzZVN0YXRlKFxuICAgICdsb2FkaW5nJyBhcyAnbm9ybWFsJyB8ICdzYXZpbmcnIHwgJ2xvYWRpbmcnXG4gIClcbiAgY29uc3QgW2xlZnQsIHNldExlZnRdID0gUmVhY3QudXNlU3RhdGUoY29udmVydEF0dHJMaXN0VG9NYXAoc3RhcnRpbmdMZWZ0KSlcbiAgY29uc3QgW3JpZ2h0LCBzZXRSaWdodF0gPSBSZWFjdC51c2VTdGF0ZShjb252ZXJ0QXR0ckxpc3RUb01hcChzdGFydGluZ1JpZ2h0KSlcbiAgY29uc3QgW2hpZGVFbXB0eSwgc2V0SGlkZUVtcHR5XSA9IFJlYWN0LnVzZVN0YXRlKHN0YXJ0aW5nSGlkZUVtcHR5KVxuICBjb25zdCB7IGxvYWRpbmcgfSA9IHVzZUN1c3RvbVJlYWRPbmx5Q2hlY2soKVxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghbG9hZGluZykge1xuICAgICAgc2V0TW9kZSgnbm9ybWFsJylcbiAgICB9XG4gIH0sIFtsb2FkaW5nXSlcbiAgY29uc3QgZ2VuZXJhdGVIYW5kbGVUb2dnbGVBbGwgPSAoe1xuICAgIHNldFN0YXRlLFxuICAgIHN0YXRlLFxuICAgIGRpc2FibGVkQXR0cmlidXRlcyA9IFtdLFxuICB9OiB7XG4gICAgc2V0U3RhdGU6IFNldENoZWNrZWRUeXBlXG4gICAgc3RhdGU6IENoZWNrZWRUeXBlXG4gICAgZGlzYWJsZWRBdHRyaWJ1dGVzPzogc3RyaW5nW11cbiAgfSkgPT4ge1xuICAgIHJldHVybiAoKSA9PiAoKSA9PiB7XG4gICAgICBjb25zdCBhbGxWYWx1ZXMgPSBPYmplY3QudmFsdWVzKHN0YXRlKVxuICAgICAgY29uc3QgdG90YWxDaGVja2FibGUgPSBhbGxWYWx1ZXMubGVuZ3RoIC0gZGlzYWJsZWRBdHRyaWJ1dGVzLmxlbmd0aFxuICAgICAgY29uc3QgbnVtYmVyQ2hlY2tlZCA9IGFsbFZhbHVlcy5maWx0ZXIoKGNoZWNrZWQpID0+IGNoZWNrZWQpLmxlbmd0aFxuICAgICAgY29uc3QgYWxsU2VsZWN0ZWQgPVxuICAgICAgICBudW1iZXJDaGVja2VkID09PSB0b3RhbENoZWNrYWJsZSAmJiB0b3RhbENoZWNrYWJsZSAhPT0gMFxuXG4gICAgICBpZiAoIWFsbFNlbGVjdGVkKSB7XG4gICAgICAgIHNldFN0YXRlKFxuICAgICAgICAgIE9iamVjdC5rZXlzKHN0YXRlKS5yZWR1Y2UoKGJsb2IsIGF0dHIpID0+IHtcbiAgICAgICAgICAgIGlmIChkaXNhYmxlZEF0dHJpYnV0ZXMuaW5jbHVkZXMoYXR0cikpIGJsb2JbYXR0cl0gPSBmYWxzZVxuICAgICAgICAgICAgZWxzZSBibG9iW2F0dHJdID0gdHJ1ZVxuICAgICAgICAgICAgcmV0dXJuIGJsb2JcbiAgICAgICAgICB9LCB7fSBhcyBDaGVja2VkVHlwZSlcbiAgICAgICAgKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0U3RhdGUoXG4gICAgICAgICAgT2JqZWN0LmtleXMoc3RhdGUpLnJlZHVjZSgoYmxvYiwgYXR0cikgPT4ge1xuICAgICAgICAgICAgYmxvYlthdHRyXSA9IGZhbHNlXG4gICAgICAgICAgICByZXR1cm4gYmxvYlxuICAgICAgICAgIH0sIHt9IGFzIENoZWNrZWRUeXBlKVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuICB9XG4gIGNvbnN0IG1vdmVSaWdodCA9ICgpID0+IHtcbiAgICBjb25zdCBjaGVja2VkTGVmdCA9IE9iamVjdC5lbnRyaWVzKGxlZnQpXG4gICAgICAuZmlsdGVyKChhKSA9PiBhWzFdKVxuICAgICAgLnJlZHVjZSgoYmxvYiwgYSkgPT4ge1xuICAgICAgICBibG9iW2FbMF1dID0gZmFsc2VcbiAgICAgICAgcmV0dXJuIGJsb2JcbiAgICAgIH0sIHt9IGFzIENoZWNrZWRUeXBlKVxuICAgIGNvbnN0IG5vbkNoZWNrZWRMZWZ0ID0gT2JqZWN0LmVudHJpZXMobGVmdClcbiAgICAgIC5maWx0ZXIoKGEpID0+ICFhWzFdKVxuICAgICAgLnJlZHVjZSgoYmxvYiwgYSkgPT4ge1xuICAgICAgICBibG9iW2FbMF1dID0gYVsxXVxuICAgICAgICByZXR1cm4gYmxvYlxuICAgICAgfSwge30gYXMgQ2hlY2tlZFR5cGUpXG4gICAgc2V0UmlnaHQoe1xuICAgICAgLi4ucmlnaHQsXG4gICAgICAuLi5jaGVja2VkTGVmdCxcbiAgICB9KVxuICAgIHNldExlZnQobm9uQ2hlY2tlZExlZnQpXG4gIH1cbiAgY29uc3QgbW92ZUxlZnQgPSAoKSA9PiB7XG4gICAgY29uc3QgY2hlY2tlZFJpZ2h0ID0gT2JqZWN0LmVudHJpZXMocmlnaHQpXG4gICAgICAuZmlsdGVyKChhKSA9PiBhWzFdKVxuICAgICAgLnJlZHVjZSgoYmxvYiwgYSkgPT4ge1xuICAgICAgICBibG9iW2FbMF1dID0gZmFsc2VcbiAgICAgICAgcmV0dXJuIGJsb2JcbiAgICAgIH0sIHt9IGFzIENoZWNrZWRUeXBlKVxuICAgIGNvbnN0IG5vbkNoZWNrZWRSaWdodCA9IE9iamVjdC5lbnRyaWVzKHJpZ2h0KVxuICAgICAgLmZpbHRlcigoYSkgPT4gIWFbMV0pXG4gICAgICAucmVkdWNlKChibG9iLCBhKSA9PiB7XG4gICAgICAgIGJsb2JbYVswXV0gPSBhWzFdXG4gICAgICAgIHJldHVybiBibG9iXG4gICAgICB9LCB7fSBhcyBDaGVja2VkVHlwZSlcbiAgICBzZXRMZWZ0KHtcbiAgICAgIC4uLmxlZnQsXG4gICAgICAuLi5jaGVja2VkUmlnaHQsXG4gICAgfSlcbiAgICBzZXRSaWdodChub25DaGVja2VkUmlnaHQpXG4gIH1cbiAgY29uc3QgaGFzTGVmdENoZWNrZWQgPSBPYmplY3QuZW50cmllcyhsZWZ0KS5maW5kKChhKSA9PiBhWzFdKSAhPT0gdW5kZWZpbmVkXG4gIGNvbnN0IGhhc1JpZ2h0Q2hlY2tlZCA9IE9iamVjdC5lbnRyaWVzKHJpZ2h0KS5maW5kKChhKSA9PiBhWzFdKSAhPT0gdW5kZWZpbmVkXG4gIGNvbnN0IHN0YXJ0T3ZlciA9ICgpID0+IHtcbiAgICBkaWFsb2dDb250ZXh0LnNldFByb3BzKHtcbiAgICAgIG9wZW46IHRydWUsXG4gICAgICBjaGlsZHJlbjogKFxuICAgICAgICA8VHJhbnNmZXJMaXN0XG4gICAgICAgICAgc3RhcnRpbmdMZWZ0PXtPYmplY3Qua2V5cyhsZWZ0KX1cbiAgICAgICAgICBzdGFydGluZ1JpZ2h0PXtPYmplY3Qua2V5cyhyaWdodCl9XG4gICAgICAgICAgc3RhcnRpbmdIaWRlRW1wdHk9e2hpZGVFbXB0eX1cbiAgICAgICAgICBsYXp5UmVzdWx0PXtsYXp5UmVzdWx0fVxuICAgICAgICAgIG9uU2F2ZT17b25TYXZlfVxuICAgICAgICAvPlxuICAgICAgKSxcbiAgICB9KVxuICB9XG4gIGNvbnN0IHRvdGFsUG9zc2libGUgPSBzdGFydGluZ0xlZnQubGVuZ3RoICsgc3RhcnRpbmdSaWdodC5sZW5ndGhcbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCB0ZXh0LWNlbnRlciBweC0yIHBiLTIgcHQtNCBmb250LW5vcm1hbCByZWxhdGl2ZVwiPlxuICAgICAgICBNYW5hZ2UgQXR0cmlidXRlc1xuICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgZGF0YS1pZD1cImNsb3NlLWJ1dHRvblwiXG4gICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgcmlnaHQtMCB0b3AtMCBtci0xIG10LTFcIlxuICAgICAgICAgIHZhcmlhbnQ9XCJ0ZXh0XCJcbiAgICAgICAgICBzaXplPVwic21hbGxcIlxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgIGRpYWxvZ0NvbnRleHQuc2V0UHJvcHMoe1xuICAgICAgICAgICAgICBvcGVuOiBmYWxzZSxcbiAgICAgICAgICAgICAgY2hpbGRyZW46IG51bGwsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICA8Q2xvc2VJY29uIC8+XG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgICA8RGFya0RpdmlkZXIgY2xhc3NOYW1lPVwidy1mdWxsIGgtbWluXCIgLz5cbiAgICAgIDxEaWFsb2dDb250ZW50PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1yb3cganVzdGlmeS1jZW50ZXIgaXRlbXMtY2VudGVyIHNwYWNlLXgtMiBmbGV4LW5vd3JhcCB3LWZ1bGxcIj5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPEN1c3RvbUxpc3RcbiAgICAgICAgICAgICAgdGl0bGU9XCJBY3RpdmVcIlxuICAgICAgICAgICAgICBpdGVtcz17bGVmdH1cbiAgICAgICAgICAgICAgcmVxdWlyZWRBdHRyaWJ1dGVzPXtyZXF1aXJlZEF0dHJpYnV0ZXN9XG4gICAgICAgICAgICAgIGxhenlSZXN1bHQ9e2xhenlSZXN1bHR9XG4gICAgICAgICAgICAgIHVwZGF0ZUl0ZW1zPXtzZXRMZWZ0fVxuICAgICAgICAgICAgICBpc0RuRD17dHJ1ZX1cbiAgICAgICAgICAgICAgc3RhcnRPdmVyPXtzdGFydE92ZXJ9XG4gICAgICAgICAgICAgIGhhbmRsZVRvZ2dsZUFsbD17Z2VuZXJhdGVIYW5kbGVUb2dnbGVBbGwoe1xuICAgICAgICAgICAgICAgIHNldFN0YXRlOiBzZXRMZWZ0LFxuICAgICAgICAgICAgICAgIHN0YXRlOiBsZWZ0LFxuICAgICAgICAgICAgICAgIGRpc2FibGVkQXR0cmlidXRlczogcmVxdWlyZWRBdHRyaWJ1dGVzLFxuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgdG90YWxQb3NzaWJsZT17dG90YWxQb3NzaWJsZX1cbiAgICAgICAgICAgICAgbW9kZT17bW9kZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIGRhdGEtaWQ9XCJtb3ZlLXJpZ2h0LWJ1dHRvblwiXG4gICAgICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVkXCJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtLTFcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e21vdmVSaWdodH1cbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17IWhhc0xlZnRDaGVja2VkfVxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJtb3ZlIHNlbGVjdGVkIHJpZ2h0XCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxSaWdodEFycm93SWNvbiAvPlxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIGRhdGEtaWQ9XCJtb3ZlLWxlZnQtYnV0dG9uXCJcbiAgICAgICAgICAgICAgICB2YXJpYW50PVwib3V0bGluZWRcIlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm0tMVwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17bW92ZUxlZnR9XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFoYXNSaWdodENoZWNrZWR9XG4gICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIm1vdmUgc2VsZWN0ZWQgbGVmdFwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8TGVmdEFycm93SWNvbiAvPlxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8Q3VzdG9tTGlzdFxuICAgICAgICAgICAgICB0aXRsZT1cIkhpZGRlblwiXG4gICAgICAgICAgICAgIGl0ZW1zPXtyaWdodH1cbiAgICAgICAgICAgICAgbGF6eVJlc3VsdD17bGF6eVJlc3VsdH1cbiAgICAgICAgICAgICAgdXBkYXRlSXRlbXM9e3NldFJpZ2h0fVxuICAgICAgICAgICAgICBpc0RuRD17ZmFsc2V9XG4gICAgICAgICAgICAgIHN0YXJ0T3Zlcj17c3RhcnRPdmVyfVxuICAgICAgICAgICAgICBoYW5kbGVUb2dnbGVBbGw9e2dlbmVyYXRlSGFuZGxlVG9nZ2xlQWxsKHtcbiAgICAgICAgICAgICAgICBzZXRTdGF0ZTogc2V0UmlnaHQsXG4gICAgICAgICAgICAgICAgc3RhdGU6IHJpZ2h0LFxuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgbW9kZT17bW9kZX1cbiAgICAgICAgICAgICAgdG90YWxQb3NzaWJsZT17dG90YWxQb3NzaWJsZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9EaWFsb2dDb250ZW50PlxuICAgICAgPERhcmtEaXZpZGVyIGNsYXNzTmFtZT1cInctZnVsbCBoLW1pblwiIC8+XG4gICAgICA8RGlhbG9nQWN0aW9ucz5cbiAgICAgICAge2hpZGVFbXB0eSAhPT0gdW5kZWZpbmVkICYmIChcbiAgICAgICAgICA8PlxuICAgICAgICAgICAgPEZvcm1Db250cm9sTGFiZWxcbiAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgPFN3aXRjaFxuICAgICAgICAgICAgICAgICAgY2hlY2tlZD17aGlkZUVtcHR5fVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRIaWRlRW1wdHkoZS50YXJnZXQuY2hlY2tlZCl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBsYWJlbD1cIkhpZGUgZW1wdHkgYXR0cmlidXRlcyBpbiBpbnNwZWN0b3JcIlxuICAgICAgICAgICAgICBzdHlsZT17eyBwYWRkaW5nTGVmdDogJzEwcHgnIH19XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmbGV4OiAnMSAwIDAnIH19IC8+XG4gICAgICAgICAgPC8+XG4gICAgICAgICl9XG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICBkYXRhLWlkPVwiZGlhbG9nLXNhdmUtYnV0dG9uXCJcbiAgICAgICAgICBkaXNhYmxlZD17bW9kZSA9PT0gJ3NhdmluZyd9XG4gICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgZGlhbG9nQ29udGV4dC5zZXRQcm9wcyh7XG4gICAgICAgICAgICAgIG9wZW46IGZhbHNlLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogbnVsbCxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfX1cbiAgICAgICAgICB2YXJpYW50PVwidGV4dFwiXG4gICAgICAgICAgY29sb3I9XCJzZWNvbmRhcnlcIlxuICAgICAgICAgIGNsYXNzTmFtZT1cIm1yLTJcIlxuICAgICAgICA+XG4gICAgICAgICAgQ2FuY2VsXG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgY2xhc3NOYW1lPVwibWwtMlwiXG4gICAgICAgICAgZGlzYWJsZWQ9e21vZGUgPT09ICdzYXZpbmcnfVxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgIHNldE1vZGUoJ3NhdmluZycpXG4gICAgICAgICAgICBvblNhdmUoT2JqZWN0LmtleXMobGVmdCksIGhpZGVFbXB0eSlcbiAgICAgICAgICAgIGRpYWxvZ0NvbnRleHQuc2V0UHJvcHMoe1xuICAgICAgICAgICAgICBvcGVuOiBmYWxzZSxcbiAgICAgICAgICAgICAgY2hpbGRyZW46IG51bGwsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH19XG4gICAgICAgICAgdmFyaWFudD1cImNvbnRhaW5lZFwiXG4gICAgICAgICAgY29sb3I9XCJwcmltYXJ5XCJcbiAgICAgICAgPlxuICAgICAgICAgIFNhdmVcbiAgICAgICAgPC9CdXR0b24+XG4gICAgICA8L0RpYWxvZ0FjdGlvbnM+XG4gICAgICB7bW9kZSA9PT0gJ3NhdmluZycgPyAoXG4gICAgICAgIDxMaW5lYXJQcm9ncmVzc1xuICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICAgICAgaGVpZ2h0OiAnMTBweCcsXG4gICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgIGxlZnQ6ICcwcHgnLFxuICAgICAgICAgICAgYm90dG9tOiAnMCUnLFxuICAgICAgICAgIH19XG4gICAgICAgICAgdmFyaWFudD1cImluZGV0ZXJtaW5hdGVcIlxuICAgICAgICAvPlxuICAgICAgKSA6IG51bGx9XG4gICAgPC8+XG4gIClcbn1cbmV4cG9ydCBkZWZhdWx0IFRyYW5zZmVyTGlzdFxuIl19