import { __assign, __read } from "tslib";
import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import * as React from 'react';
import { Routes, Route, useLocation, useNavigate, } from 'react-router-dom';
import CssBaseline from '@mui/material/CssBaseline';
import $ from 'jquery';
import Paper from '@mui/material/Paper';
import Typography from '@mui/material/Typography';
import Button from '@mui/material/Button';
import ExpandingButton from '../button/expanding-button';
import Divider from '@mui/material/Divider';
import IconButton from '@mui/material/IconButton';
import ArrowBackIcon from '@mui/icons-material/ArrowBack';
import ArrowForwardIcon from '@mui/icons-material/ArrowForward';
import ChevronLeftIcon from '@mui/icons-material/ChevronLeft';
import MenuIcon from '@mui/icons-material/Menu';
import PersonIcon from '@mui/icons-material/Person';
import SettingsIcon from '@mui/icons-material/Settings';
import Drawer from '@mui/material/Drawer';
import queryString from 'query-string';
import { Link } from '../link/link';
import { Memo } from '../memo/memo';
import HelpIcon from '@mui/icons-material/Help';
import NotificationsIcon from '@mui/icons-material/Notifications';
import userInstance from '../singletons/user-instance';
import notifications from '../singletons/user-notifications';
import SystemUsageModal from '../system-usage/system-usage';
import UserView, { RoleDisplay } from '../../react-component/user/user';
import UserSettings from '../../react-component/user-settings/user-settings';
import scrollIntoView from 'scroll-into-view-if-needed';
import { Elevations } from '../theme/theme';
import { useBackbone, useListenTo, } from '../selection-checkbox/useBackbone.hook';
import { AsyncTasks, useRenderOnAsyncTasksAddOrRemove, } from '../../js/model/AsyncTask/async-task';
import useSnack from '../hooks/useSnack';
import LinearProgress from '@mui/material/LinearProgress';
import { useDialogState } from '../hooks/useDialogState';
import SessionTimeout from '../../react-component/session-timeout';
import { AjaxErrorHandling } from './ajax-error-handling';
import { WreqrSnacks } from './wreqr-snacks';
import sessionTimeoutModel from '../singletons/session-timeout';
import Extensions from '../../extension-points';
import { useConfiguration } from '../../js/model/Startup/configuration.hooks';
import { SuspenseWrapper } from './suspense';
import { SyncReactRouterContextToVariables } from './react-router.patches';
export var handleBase64EncodedImages = function (url) {
    if (url && url.startsWith('data:')) {
        return url;
    }
    return "data:image/png;base64,".concat(url);
};
var matchesRoute = function (_a) {
    var routeInfo = _a.routeInfo, pathname = _a.pathname;
    if (routeInfo.routeProps.path &&
        typeof routeInfo.routeProps.path === 'string') {
        return (pathname.startsWith("".concat(routeInfo.routeProps.path, "/")) ||
            pathname.endsWith("".concat(routeInfo.routeProps.path)));
    }
    else if (routeInfo.routeProps.path &&
        Array.isArray(routeInfo.routeProps.path)) {
        return routeInfo.routeProps.path.some(function (possibleRoute) {
            return pathname.startsWith("".concat(possibleRoute, "/")) ||
                pathname.endsWith("".concat(possibleRoute));
        });
    }
    return false;
};
function sidebarDataIdTag(name) {
    return "sidebar-".concat(name, "-button");
}
/**
 * If you're not using a custom loading screen,
 * this handles removing the default one for you on first render
 * of the app.
 */
export var useDefaultWelcome = function () {
    React.useEffect(function () {
        var loadingElement = document.querySelector('#loading');
        if (loadingElement) {
            loadingElement.classList.remove('is-open');
            setTimeout(function () {
                loadingElement.remove();
            }, 500);
        }
    }, []);
};
var scrollCurrentRouteIntoView = function () {
    setTimeout(function () {
        var currentroute = document.querySelector('[data-currentroute]');
        if (currentroute) {
            scrollIntoView(currentroute, {
                behavior: 'smooth',
                scrollMode: 'if-needed',
            });
        }
    }, 0);
};
var AsyncTasksComponent = function () {
    var _a = __read(React.useState(false), 2), showBar = _a[0], setShowBar = _a[1];
    useRenderOnAsyncTasksAddOrRemove();
    var addSnack = useSnack();
    var navigate = useNavigate();
    React.useEffect(function () {
        var timeoutid = undefined;
        timeoutid = window.setTimeout(function () {
            setShowBar(false);
        }, 1000);
        return function () {
            clearTimeout(timeoutid);
        };
    }, [showBar]);
    React.useEffect(function () {
        var timeoutid = undefined;
        if (AsyncTasks.hasShowableTasks()) {
            setShowBar(true);
            window.onbeforeunload = function () {
                setShowBar(true);
                return "Are you sure you want to leave? ".concat(AsyncTasks.list.length, " tasks are still running.");
            };
        }
        else {
            setShowBar(false);
        }
        timeoutid = window.setTimeout(function () {
            setShowBar(false);
        }, 1000);
        return function () {
            clearTimeout(timeoutid);
            window.onbeforeunload = null;
        };
    }, [AsyncTasks.list.length]);
    React.useEffect(function () {
        var unsubs = AsyncTasks.list.map(function (task) {
            return task.subscribeTo({
                subscribableThing: 'update',
                callback: function () {
                    AsyncTasks.remove(task);
                    if (AsyncTasks.isRestoreTask(task)) {
                        addSnack("Restore of ".concat(task.lazyResult.plain.metacard.properties.title, " complete."), {
                            timeout: 5000,
                            closeable: true,
                            alertProps: {
                                action: (_jsx(Button, { component: Link, to: "/search/".concat(task.lazyResult.plain.metacard.properties['metacard.deleted.id']), children: "Go to" })),
                            },
                        });
                    }
                    if (AsyncTasks.isDeleteTask(task)) {
                        addSnack("Delete of ".concat(task.lazyResult.plain.metacard.properties.title, " complete."), {
                            undo: function () {
                                navigate("/search/".concat(task.lazyResult.plain.id));
                                AsyncTasks.restore({ lazyResult: task.lazyResult });
                            },
                        });
                    }
                    if (AsyncTasks.isCreateSearchTask(task)) {
                        addSnack("Creation of ".concat(task.data.title, " complete."));
                    }
                },
            });
        });
        return function () {
            unsubs.forEach(function (unsub) {
                unsub();
            });
        };
    });
    if (AsyncTasks.list.length > 0) {
        return (_jsxs("div", { className: "".concat(showBar ? 'translate-y-0' : 'translate-y-full', " absolute left-0 bottom-0 w-full bg-black bg-opacity-75 h-16 z-50 transition transform ease-in-out duration-500 hover:translate-y-0"), children: [_jsx(LinearProgress, { className: "w-full absolute h-2 left-0 top-0 -mt-2", variant: "indeterminate" }), _jsx("div", { className: "flex flex-col overflow-auto h-full w-full items-center justify-center text-white", children: AsyncTasks.list.map(function (asyncTask) {
                        if (AsyncTasks.isRestoreTask(asyncTask)) {
                            return (_jsxs("div", { className: "bg-black p-2", children: ["Restoring '", asyncTask.lazyResult.plain.metacard.properties.title, "'"] }));
                        }
                        if (AsyncTasks.isDeleteTask(asyncTask)) {
                            return (_jsxs("div", { className: "bg-black p-2", children: ["Deleting '", asyncTask.lazyResult.plain.metacard.properties.title, "'"] }));
                        }
                        if (AsyncTasks.isCreateSearchTask(asyncTask)) {
                            return (_jsxs("div", { className: "bg-black p-2", children: ["Creating '", asyncTask.data.title, "'"] }));
                        }
                        if (AsyncTasks.isSaveSearchTask(asyncTask)) {
                            return (_jsxs("div", { className: "bg-black p-2", children: ["Saving '", asyncTask.data.title, "'"] }));
                        }
                        if (AsyncTasks.isCreateTask(asyncTask)) {
                            return (_jsxs("div", { className: "bg-black p-2", children: ["Creating '", asyncTask.data.title, "'"] }));
                        }
                        if (AsyncTasks.isSaveTask(asyncTask)) {
                            return (_jsxs("div", { className: "bg-black p-2", children: ["Saving '", asyncTask.data.title, "'"] }));
                        }
                        return null;
                    }) })] }));
    }
    return null;
};
/** The song and dance around 'a' vs Link has to do with react router not supporting these outside links */
var HelpButton = function () {
    var getHelpUrl = useConfiguration().getHelpUrl;
    var location = useLocation();
    var queryParams = queryString.parse(location.search);
    var navOpen = useNavContextProvider().navOpen;
    return (_jsx(ExpandingButton, { component: getHelpUrl() ? 'a' : Link, href: getHelpUrl(), to: getHelpUrl()
            ? getHelpUrl()
            : {
                pathname: "".concat(location.pathname),
                search: "".concat(queryString.stringify(__assign(__assign({}, queryParams), { 'global-help': 'Help' }))),
            }, target: getHelpUrl() ? '_blank' : undefined, className: "group-hover:opacity-100 opacity-25  hover:opacity-100 focus-visible:opacity-100 transition-opacity", Icon: HelpIcon, expandedLabel: "Help", unexpandedLabel: "", dataId: sidebarDataIdTag('help'), expanded: navOpen, focusVisibleClassName: "focus-visible" }));
};
function DrawerWrapperComponent(_a) {
    var children = _a.children;
    return (_jsx(SuspenseWrapper, { children: _jsxs("div", { className: "w-full h-full flex flex-col flex-nowrap overflow-hidden", children: [Extensions.includeNavigationButtons ? (_jsxs("div", { className: "w-full shrink-0 grow-0 overflow-hidden", children: [_jsx(SideBarNavigationButtons, { showText: true }), _jsx(Divider, {})] })) : null, _jsx("div", { className: "w-full h-full grow shrink overflow-auto", children: children })] }) }));
}
var SettingsButton = function () {
    var SettingsComponents = useTopLevelAppContext().SettingsComponents;
    var location = useLocation();
    var navigate = useNavigate();
    var queryParams = queryString.parse(location.search);
    var open = Boolean(queryParams['global-settings']);
    var navOpen = useNavContextProvider().navOpen;
    return (_jsxs(_Fragment, { children: [_jsx(ExpandingButton, { component: Link, to: {
                    pathname: "".concat(location.pathname),
                    search: "".concat(queryString.stringify(__assign(__assign({}, queryParams), { 'global-settings': 'Settings' }))),
                }, className: "group-hover:opacity-100 opacity-25 relative hover:opacity-100 focus-visible:opacity-100 transition-opacity", Icon: SettingsIcon, expandedLabel: "Settings", unexpandedLabel: "", dataId: sidebarDataIdTag('settings'), expanded: navOpen, focusVisibleClassName: "focus-visible" }), _jsx(Drawer, { anchor: "left", open: open, onClose: function () {
                    delete queryParams['global-settings'];
                    navigate("".concat(location.pathname, "?").concat(queryString.stringify(queryParams)));
                }, PaperProps: {
                    className: 'min-w-120 max-w-4/5 ',
                }, children: _jsx(DrawerWrapperComponent, { children: _jsx(UserSettings, { SettingsComponents: SettingsComponents }) }) })] }));
};
var NotificationsButton = function () {
    var hasUnseenNotifications = useIndicateHasUnseenNotifications();
    var NotificationsComponent = useTopLevelAppContext().NotificationsComponent;
    var location = useLocation();
    var navigate = useNavigate();
    var queryParams = queryString.parse(location.search);
    var open = Boolean(queryParams['global-notifications']);
    var navOpen = useNavContextProvider().navOpen;
    return (_jsxs(_Fragment, { children: [_jsx("div", { className: hasUnseenNotifications ? 'animate-wiggle Mui-text-warning' : '', children: _jsx(ExpandingButton, { component: Link, to: {
                        pathname: "".concat(location.pathname),
                        search: "".concat(queryString.stringify(__assign(__assign({}, queryParams), { 'global-notifications': 'Notifications' }))),
                    }, className: "".concat(!hasUnseenNotifications ? 'opacity-25' : '', " group-hover:opacity-100  relative hover:opacity-100 focus-visible:opacity-100 transition-opacity"), Icon: NotificationsIcon, expandedLabel: "Notifications", unexpandedLabel: "", dataId: sidebarDataIdTag('notifications'), expanded: navOpen, focusVisibleClassName: "focus-visible", orientation: "vertical" }) }), _jsx(Drawer, { anchor: "left", open: open, onClose: function () {
                    delete queryParams['global-notifications'];
                    navigate("".concat(location.pathname, "?").concat(queryString.stringify(queryParams)));
                    notifications.setSeen();
                    userInstance.savePreferences();
                }, PaperProps: {
                    className: 'min-w-120 max-w-4/5 ',
                }, children: _jsx(DrawerWrapperComponent, { children: _jsx(NotificationsComponent, {}) }) })] }));
};
var UserButton = function () {
    var location = useLocation();
    var navigate = useNavigate();
    var queryParams = queryString.parse(location.search);
    var open = Boolean(queryParams['global-user']);
    var navOpen = useNavContextProvider().navOpen;
    var getLabel = function () {
        return (_jsxs("div", { className: "w-full", children: [_jsx("div", { className: "w-full truncate", children: userInstance.getUserName() }), _jsx("div", { className: "text-xs truncate w-full", children: _jsx(RoleDisplay, {}) })] }));
    };
    return (_jsxs(_Fragment, { children: [_jsx(ExpandingButton, { component: Link, to: {
                    pathname: "".concat(location.pathname),
                    search: "".concat(queryString.stringify(__assign(__assign({}, queryParams), { 'global-user': 'User' }))),
                }, className: "group-hover:opacity-100 opacity-25 relative hover:opacity-100 focus-visible:opacity-100 transition-opacity", Icon: PersonIcon, expandedLabel: getLabel(), unexpandedLabel: getLabel(), dataId: sidebarDataIdTag('user-profile'), expanded: navOpen, focusVisibleClassName: "focus-visible" }), _jsx(Drawer, { anchor: "left", open: open, onClose: function () {
                    delete queryParams['global-user'];
                    navigate("".concat(location.pathname, "?").concat(queryString.stringify(queryParams)));
                }, PaperProps: {
                    className: 'min-w-120 max-w-4/5 ',
                }, children: _jsx(DrawerWrapperComponent, { children: _jsx(UserView, {}) }) })] }));
};
var RouteButton = function (_a) {
    var _b;
    var routeInfo = _a.routeInfo;
    var location = useLocation();
    var navOpen = useNavContextProvider().navOpen;
    var isSelected = matchesRoute({
        routeInfo: routeInfo,
        pathname: location.pathname,
    });
    return (_jsx(ExpandingButton, __assign({ component: Link, to: routeInfo.linkProps.to, className: "group-hover:opacity-100 ".concat(!isSelected ? 'opacity-25' : '', " focus-visible:opacity-100 hover:opacity-100 transition-opacity"), expanded: navOpen }, routeInfo.navButtonProps, { focusVisibleClassName: "focus-visible", dataId: sidebarDataIdTag(routeInfo.navButtonProps.dataId) }, (isSelected
        ? (_b = {},
            _b['data-currentroute'] = true,
            _b) : {})), routeInfo.linkProps.to.toString()));
};
var SideBarRoutes = function () {
    var RouteInformation = useTopLevelAppContext().RouteInformation;
    return (_jsxs("div", { className: "overflow-auto p-0 shrink-0 scrollbars-min", style: { maxHeight: "calc(100% - ".concat(7 * 4, "rem)") }, children: [RouteInformation.filter(function (routeInfo) { return routeInfo.showInNav; }).map(function (routeInfo) {
                var _a;
                return (_jsx(RouteButton, { routeInfo: routeInfo }, (_a = routeInfo.routeProps.path) === null || _a === void 0 ? void 0 : _a.toString()));
            }), _jsx(Extensions.extraRoutes, {})] }));
};
var SideBarNavigationButtons = function (_a) {
    var _b = _a === void 0 ? {} : _a, _c = _b.showText, showText = _c === void 0 ? false : _c;
    var navigate = useNavigate();
    var navOpen = useNavContextProvider().navOpen;
    var showExpandedText = navOpen || showText;
    return (_jsx(_Fragment, { children: _jsx("div", { className: "w-full p-2 shrink-0", children: _jsxs("div", { className: "w-full h-full overflow-hidden flex items-center flex-nowrap", children: [_jsx("div", { className: "mr-auto", children: _jsxs(Button, { onClick: function () { return navigate(-1); }, children: [_jsx(ArrowBackIcon, { fontSize: "small" }), showExpandedText && 'Back'] }) }), _jsx("div", { className: "ml-auto", children: _jsxs(Button, { onClick: function () { return navigate(1); }, children: [showExpandedText && 'Forward', _jsx(ArrowForwardIcon, { fontSize: "small" })] }) })] }) }) }));
};
var SideBarToggleButton = function () {
    var _a = useNavContextProvider(), navOpen = _a.navOpen, setNavOpen = _a.setNavOpen;
    var _b = useConfiguration(), getTopLeftLogoSrc = _b.getTopLeftLogoSrc, getCustomBranding = _b.getCustomBranding, getProduct = _b.getProduct, getMenuIconSrc = _b.getMenuIconSrc;
    return (_jsx(_Fragment, { children: _jsx("div", { className: "w-full h-16 shrink-0", children: navOpen ? (_jsx(_Fragment, { children: _jsxs("div", { className: "w-full h-full overflow-hidden flex items-center flex-nowrap", children: [_jsx("div", { className: "pl-3 py-1 pr-1 w-full relative h-full", children: getTopLeftLogoSrc() ? (_jsx("img", { className: "max-h-full max-w-full absolute left-1/2 transform -translate-x-1/2 -translate-y-1/2 top-1/2 p-4", src: handleBase64EncodedImages(getTopLeftLogoSrc()) })) : (_jsxs("div", { className: "pl-3 flex flex-col justify-center", children: [_jsx("div", { children: _jsx(Typography, { children: getCustomBranding() }) }), _jsx("div", { children: _jsx(Typography, { children: getProduct() }) })] })) }), _jsx("div", { className: "ml-auto", children: _jsx(IconButton, { className: "h-auto", onClick: function () { return setNavOpen(false); }, size: "large", children: _jsx(ChevronLeftIcon, {}) }) })] }) })) : (_jsx(Button, { color: "inherit", "aria-label": "open drawer", onClick: function () {
                    setNavOpen(true);
                }, className: "w-full h-full p-2", children: getMenuIconSrc() ? (_jsx(_Fragment, { children: _jsx("img", { src: handleBase64EncodedImages(getMenuIconSrc()), className: "max-h-16 max-w-full" }) })) : (_jsx(MenuIcon, {})) })) }) }));
};
var SideBar = function () {
    var navOpen = useNavContextProvider().navOpen;
    return (_jsx("div", { className: "".concat(navOpen ? 'w-64' : 'w-20', " transition-all duration-200 ease-in-out relative z-10 mr-2 shrink-0 pb-2 pt-2 pl-2 group"), onMouseLeave: function () {
            scrollCurrentRouteIntoView();
        }, children: _jsx(Paper, { elevation: Elevations.navbar, className: "h-full", children: _jsxs("div", { className: "h-full w-full flex flex-col flex-nowrap overflow-hidden", children: [Extensions.includeNavigationButtons && (_jsxs(_Fragment, { children: [_jsx(SideBarNavigationButtons, {}), _jsx(Divider, {})] })), _jsx(SideBarToggleButton, {}), _jsx(Divider, {}), _jsx(SideBarRoutes, {}), _jsx(Divider, {}), _jsx(SideBarBackground, {}), _jsx(Divider, {}), _jsxs("div", { className: "mt-auto overflow-hidden w-full shrink-0 grow-0", children: [Extensions.extraSidebarButtons && (_jsx(Extensions.extraSidebarButtons, {})), _jsx(HelpButton, {}), _jsx(SettingsButton, {}), _jsx(NotificationsButton, {}), _jsx(UserButton, {})] })] }) }) }));
};
var Header = function () {
    var _a = useConfiguration(), getPlatformBackground = _a.getPlatformBackground, getPlatformColor = _a.getPlatformColor, getPlatformHeader = _a.getPlatformHeader;
    return (_jsx("div", { className: "w-full", children: getPlatformHeader() ? (_jsx(Typography, { align: "center", style: {
                background: getPlatformBackground(),
                color: getPlatformColor(),
            }, children: getPlatformHeader() })) : null }));
};
var Footer = function () {
    var _a = useConfiguration(), getPlatformBackground = _a.getPlatformBackground, getPlatformColor = _a.getPlatformColor, getPlatformFooter = _a.getPlatformFooter;
    return (_jsx("div", { className: "w-full", children: getPlatformFooter() ? (_jsx(Typography, { align: "center", style: {
                background: getPlatformBackground(),
                color: getPlatformColor(),
            }, children: getPlatformFooter() })) : null }));
};
var SideBarBackground = function () {
    var getBottomLeftBackgroundSrc = useConfiguration().getBottomLeftBackgroundSrc;
    return (_jsx("div", { className: "relative overflow-hidden shrink-1 h-full min-w-full", children: getBottomLeftBackgroundSrc() ? (_jsx("img", { className: "group-hover:opacity-100 opacity-50 duration-200 ease-in-out transition-all w-auto h-full absolute max-w-none m-auto min-h-80", src: handleBase64EncodedImages(getBottomLeftBackgroundSrc()) })) : null }));
};
var RouteContents = function () {
    var RouteInformation = useTopLevelAppContext().RouteInformation;
    /**
     * So this is slightly annoying, but the grid won't properly resize without overflow hidden set.
     *
     * That makes handling padding / margins / spacing more complicated in our app, because with overflow hidden set
     * dropshadows on elements will get cut off.  So we have to let the contents instead dictate their padding, that way
     * their dropshadows can be seen.
     *
     * Folks will probably struggle a bit with it at first, but the css utilities actually make it pretty easy.
     * Just add pb-2 for the correct bottom spacing, pt-2 for correct top spacing, etc. etc.
     */
    return (_jsx("div", { className: "w-full h-full relative z-0 shrink-1 overflow-x-hidden", children: _jsx(Memo, { children: _jsx(Routes, { children: RouteInformation.map(function (routeInfo) {
                    var _a;
                    return (_jsx(Route, { path: routeInfo.routeProps.path, Component: function () {
                            // due to how Components work in v6 react router, we'll want to memo these to avoid unnecessary component rerenders
                            var Component = routeInfo.routeProps.Component;
                            if (!Component) {
                                return null;
                            }
                            return (_jsx(Memo, { children: _jsx(Component, {}) }));
                        } }, ((_a = routeInfo.routeProps.path) === null || _a === void 0 ? void 0 : _a.toString()) || Math.random()));
                }) }) }) }));
};
var NavContextProvider = React.createContext({
    setNavOpen: function (_navOpen) { },
    navOpen: false,
});
export var useNavContextProvider = function () {
    var navContext = React.useContext(NavContextProvider);
    return navContext;
};
/**
 * Keep the current route visible to the user since it's useful info.
 * This also ensures it's visible upon first load of the page.
 */
var ScrollCurrentRouteIntoViewOnLocationChange = function () {
    var location = useLocation();
    React.useEffect(function () {
        scrollCurrentRouteIntoView();
    }, [location]);
    return _jsx(_Fragment, {});
};
var useIndicateHasUnseenNotifications = function () {
    var listenTo = useBackbone().listenTo;
    var _a = __read(React.useState(notifications.hasUnseen()), 2), hasUnseenNotifications = _a[0], setHasUnseenNotifications = _a[1];
    React.useEffect(function () {
        listenTo(notifications, 'change add remove reset update', function () {
            setHasUnseenNotifications(notifications.hasUnseen());
        });
    }, []);
    return hasUnseenNotifications;
};
// @ts-ignore
var useFaviconBranding = function () {
    // todo favicon branding
    // $(window.document).ready(() => {
    //   window.document.title = properties.branding + ' ' + properties.product
    //   const favicon = document.querySelector('#favicon') as HTMLAnchorElement
    //   favicon.href = brandingInformation.topLeftLogoSrc
    //   favicon.remove()
    //   document.head.appendChild(favicon)
    // })
};
var useNavOpen = function () {
    var defaultOpen = localStorage.getItem('shell.drawer') === 'true' ? true : false;
    var _a = __read(React.useState(defaultOpen), 2), navOpen = _a[0], setNavOpen = _a[1];
    React.useEffect(function () {
        localStorage.setItem('shell.drawer', navOpen.toString());
        setTimeout(function () {
            $(window).resize(); // needed for golden layout to resize
        }, 250);
    }, [navOpen]);
    return {
        navOpen: navOpen,
        setNavOpen: setNavOpen,
    };
};
var TopLevelAppContext = React.createContext({
    RouteInformation: [],
    NotificationsComponent: function () { return null; },
    SettingsComponents: {},
});
var useTopLevelAppContext = function () {
    var topLevelAppContext = React.useContext(TopLevelAppContext);
    return topLevelAppContext;
};
var SessionTimeoutComponent = function () {
    var sessionTimeoutDialogState = useDialogState();
    useListenTo(sessionTimeoutModel, 'change:showPrompt', function () {
        if (sessionTimeoutModel.get('showPrompt')) {
            sessionTimeoutDialogState.handleClick();
        }
        else {
            sessionTimeoutDialogState.handleClose();
        }
    });
    return (_jsx(sessionTimeoutDialogState.MuiDialogComponents.Dialog, __assign({}, sessionTimeoutDialogState.MuiDialogProps, { disableEscapeKeyDown: true, onClose: function (event, reason) {
            if (reason === 'backdropClick') {
                return;
            }
            sessionTimeoutDialogState.MuiDialogProps.onClose(event, reason);
        }, children: _jsx(SessionTimeout, {}) })));
};
var App = function (_a) {
    var RouteInformation = _a.RouteInformation, NotificationsComponent = _a.NotificationsComponent, SettingsComponents = _a.SettingsComponents;
    var _b = useNavOpen(), navOpen = _b.navOpen, setNavOpen = _b.setNavOpen;
    return (_jsx(TopLevelAppContext.Provider, { value: { RouteInformation: RouteInformation, NotificationsComponent: NotificationsComponent, SettingsComponents: SettingsComponents }, children: _jsxs(NavContextProvider.Provider, { value: { navOpen: navOpen, setNavOpen: setNavOpen }, children: [_jsx(SyncReactRouterContextToVariables, {}), _jsx(ScrollCurrentRouteIntoViewOnLocationChange, {}), _jsx(CssBaseline, {}), _jsx(SystemUsageModal, {}), _jsx(SessionTimeoutComponent, {}), _jsx(AjaxErrorHandling, {}), _jsx(WreqrSnacks, {}), _jsx(Header, {}), _jsx(Extensions.extraHeader, {}), _jsxs("div", { className: "w-full h-full relative overflow-hidden", children: [_jsx(AsyncTasksComponent, {}), _jsxs("div", { className: "w-full h-full flex flex-row flex-nowrap items-stretch", children: [_jsx(SideBar, {}), _jsx(RouteContents, {})] })] }), _jsx(Extensions.extraFooter, {}), _jsx(Footer, {})] }) }));
};
export default App;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL21haW4vd2ViYXBwL2NvbXBvbmVudC9hcHAvYXBwLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU8sS0FBSyxLQUFLLE1BQU0sT0FBTyxDQUFBO0FBQzlCLE9BQU8sRUFDTCxNQUFNLEVBQ04sS0FBSyxFQUNMLFdBQVcsRUFDWCxXQUFXLEdBR1osTUFBTSxrQkFBa0IsQ0FBQTtBQUN6QixPQUFPLFdBQVcsTUFBTSwyQkFBMkIsQ0FBQTtBQUNuRCxPQUFPLENBQUMsTUFBTSxRQUFRLENBQUE7QUFDdEIsT0FBTyxLQUFLLE1BQU0scUJBQXFCLENBQUE7QUFDdkMsT0FBTyxVQUFVLE1BQU0sMEJBQTBCLENBQUE7QUFDakQsT0FBTyxNQUFNLE1BQU0sc0JBQXNCLENBQUE7QUFDekMsT0FBTyxlQUFlLE1BQU0sNEJBQTRCLENBQUE7QUFDeEQsT0FBTyxPQUFPLE1BQU0sdUJBQXVCLENBQUE7QUFDM0MsT0FBTyxVQUFVLE1BQU0sMEJBQTBCLENBQUE7QUFDakQsT0FBTyxhQUFhLE1BQU0sK0JBQStCLENBQUE7QUFDekQsT0FBTyxnQkFBZ0IsTUFBTSxrQ0FBa0MsQ0FBQTtBQUMvRCxPQUFPLGVBQWUsTUFBTSxpQ0FBaUMsQ0FBQTtBQUM3RCxPQUFPLFFBQVEsTUFBTSwwQkFBMEIsQ0FBQTtBQUMvQyxPQUFPLFVBQVUsTUFBTSw0QkFBNEIsQ0FBQTtBQUNuRCxPQUFPLFlBQVksTUFBTSw4QkFBOEIsQ0FBQTtBQUN2RCxPQUFPLE1BQU0sTUFBTSxzQkFBc0IsQ0FBQTtBQUN6QyxPQUFPLFdBQVcsTUFBTSxjQUFjLENBQUE7QUFDdEMsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLGNBQWMsQ0FBQTtBQUNuQyxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sY0FBYyxDQUFBO0FBQ25DLE9BQU8sUUFBUSxNQUFNLDBCQUEwQixDQUFBO0FBQy9DLE9BQU8s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LENBQUE7QUFDRCxlQUFlLEdBQUcsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHtcbiAgUm91dGVzLFxuICBSb3V0ZSxcbiAgdXNlTG9jYXRpb24sXG4gIHVzZU5hdmlnYXRlLFxuICBSb3V0ZVByb3BzLFxuICBMaW5rUHJvcHMsXG59IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nXG5pbXBvcnQgQ3NzQmFzZWxpbmUgZnJvbSAnQG11aS9tYXRlcmlhbC9Dc3NCYXNlbGluZSdcbmltcG9ydCAkIGZyb20gJ2pxdWVyeSdcbmltcG9ydCBQYXBlciBmcm9tICdAbXVpL21hdGVyaWFsL1BhcGVyJ1xuaW1wb3J0IFR5cG9ncmFwaHkgZnJvbSAnQG11aS9tYXRlcmlhbC9UeXBvZ3JhcGh5J1xuaW1wb3J0IEJ1dHRvbiBmcm9tICdAbXVpL21hdGVyaWFsL0J1dHRvbidcbmltcG9ydCBFeHBhbmRpbmdCdXR0b24gZnJvbSAnLi4vYnV0dG9uL2V4cGFuZGluZy1idXR0b24nXG5pbXBvcnQgRGl2aWRlciBmcm9tICdAbXVpL21hdGVyaWFsL0RpdmlkZXInXG5pbXBvcnQgSWNvbkJ1dHRvbiBmcm9tICdAbXVpL21hdGVyaWFsL0ljb25CdXR0b24nXG5pbXBvcnQgQXJyb3dCYWNrSWNvbiBmcm9tICdAbXVpL2ljb25zLW1hdGVyaWFsL0Fycm93QmFjaydcbmltcG9ydCBBcnJvd0ZvcndhcmRJY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvQXJyb3dGb3J3YXJkJ1xuaW1wb3J0IENoZXZyb25MZWZ0SWNvbiBmcm9tICdAbXVpL2ljb25zLW1hdGVyaWFsL0NoZXZyb25MZWZ0J1xuaW1wb3J0IE1lbnVJY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvTWVudSdcbmltcG9ydCBQZXJzb25JY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvUGVyc29uJ1xuaW1wb3J0IFNldHRpbmdzSWNvbiBmcm9tICdAbXVpL2ljb25zLW1hdGVyaWFsL1NldHRpbmdzJ1xuaW1wb3J0IERyYXdlciBmcm9tICdAbXVpL21hdGVyaWFsL0RyYXdlcidcbmltcG9ydCBxdWVyeVN0cmluZyBmcm9tICdxdWVyeS1zdHJpbmcnXG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAnLi4vbGluay9saW5rJ1xuaW1wb3J0IHsgTWVtbyB9IGZyb20gJy4uL21lbW8vbWVtbydcbmltcG9ydCBIZWxwSWNvbiBmcm9tICdAbXVpL2ljb25zLW1hdGVyaWFsL0hlbHAnXG5pbXBvcnQgTm90aWZpY2F0aW9uc0ljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9Ob3RpZmljYXRpb25zJ1xuaW1wb3J0IHVzZXJJbnN0YW5jZSBmcm9tICcuLi9zaW5nbGV0b25zL3VzZXItaW5zdGFuY2UnXG5pbXBvcnQgbm90aWZpY2F0aW9ucyBmcm9tICcuLi9zaW5nbGV0b25zL3VzZXItbm90aWZpY2F0aW9ucydcbmltcG9ydCBTeXN0ZW1Vc2FnZU1vZGFsIGZyb20gJy4uL3N5c3RlbS11c2FnZS9zeXN0ZW0tdXNhZ2UnXG5cbmltcG9ydCBVc2VyVmlldywgeyBSb2xlRGlzcGxheSB9IGZyb20gJy4uLy4uL3JlYWN0LWNvbXBvbmVudC91c2VyL3VzZXInXG5pbXBvcnQgVXNlclNldHRpbmdzLCB7XG4gIFNldHRpbmdzQ29tcG9uZW50VHlwZSxcbn0gZnJvbSAnLi4vLi4vcmVhY3QtY29tcG9uZW50L3VzZXItc2V0dGluZ3MvdXNlci1zZXR0aW5ncydcbmltcG9ydCB7IFBlcm1pc3NpdmVDb21wb25lbnRUeXBlIH0gZnJvbSAnLi4vLi4vdHlwZXNjcmlwdCdcbmltcG9ydCBzY3JvbGxJbnRvVmlldyBmcm9tICdzY3JvbGwtaW50by12aWV3LWlmLW5lZWRlZCdcbmltcG9ydCB7IEVsZXZhdGlvbnMgfSBmcm9tICcuLi90aGVtZS90aGVtZSdcbmltcG9ydCB7XG4gIHVzZUJhY2tib25lLFxuICB1c2VMaXN0ZW5Ubyxcbn0gZnJvbSAnLi4vc2VsZWN0aW9uLWNoZWNrYm94L3VzZUJhY2tib25lLmhvb2snXG5pbXBvcnQge1xuICBBc3luY1Rhc2tzLFxuICB1c2VSZW5kZXJPbkFzeW5jVGFza3NBZGRPclJlbW92ZSxcbn0gZnJvbSAnLi4vLi4vanMvbW9kZWwvQXN5bmNUYXNrL2FzeW5jLXRhc2snXG5pbXBvcnQgdXNlU25hY2sgZnJvbSAnLi4vaG9va3MvdXNlU25hY2snXG5pbXBvcnQgTGluZWFyUHJvZ3Jlc3MgZnJvbSAnQG11aS9tYXRlcmlhbC9MaW5lYXJQcm9ncmVzcydcbmltcG9ydCB7IEJhc2VQcm9wcyB9IGZyb20gJy4uL2J1dHRvbi9leHBhbmRpbmctYnV0dG9uJ1xuaW1wb3J0IHsgdXNlRGlhbG9nU3RhdGUgfSBmcm9tICcuLi9ob29rcy91c2VEaWFsb2dTdGF0ZSdcbmltcG9ydCBTZXNzaW9uVGltZW91dCBmcm9tICcuLi8uLi9yZWFjdC1jb21wb25lbnQvc2Vzc2lvbi10aW1lb3V0J1xuaW1wb3J0IHsgQWpheEVycm9ySGFuZGxpbmcgfSBmcm9tICcuL2FqYXgtZXJyb3ItaGFuZGxpbmcnXG5pbXBvcnQgeyBXcmVxclNuYWNrcyB9IGZyb20gJy4vd3JlcXItc25hY2tzJ1xuaW1wb3J0IHNlc3Npb25UaW1lb3V0TW9kZWwgZnJvbSAnLi4vc2luZ2xldG9ucy9zZXNzaW9uLXRpbWVvdXQnXG5pbXBvcnQgRXh0ZW5zaW9ucyBmcm9tICcuLi8uLi9leHRlbnNpb24tcG9pbnRzJ1xuaW1wb3J0IHsgdXNlQ29uZmlndXJhdGlvbiB9IGZyb20gJy4uLy4uL2pzL21vZGVsL1N0YXJ0dXAvY29uZmlndXJhdGlvbi5ob29rcydcbmltcG9ydCB7IFN1c3BlbnNlV3JhcHBlciB9IGZyb20gJy4vc3VzcGVuc2UnXG5pbXBvcnQgeyBTeW5jUmVhY3RSb3V0ZXJDb250ZXh0VG9WYXJpYWJsZXMgfSBmcm9tICcuL3JlYWN0LXJvdXRlci5wYXRjaGVzJ1xuZXhwb3J0IGNvbnN0IGhhbmRsZUJhc2U2NEVuY29kZWRJbWFnZXMgPSAodXJsOiBzdHJpbmcpID0+IHtcbiAgaWYgKHVybCAmJiB1cmwuc3RhcnRzV2l0aCgnZGF0YTonKSkge1xuICAgIHJldHVybiB1cmxcbiAgfVxuICByZXR1cm4gYGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwke3VybH1gXG59XG50eXBlIEZvck5hdkJ1dHRvblR5cGUgPSBPbWl0PEJhc2VQcm9wcywgJ2V4cGFuZGVkJz4gJlxuICBSZXF1aXJlZDxQaWNrPEJhc2VQcm9wcywgJ2RhdGFJZCc+PlxuXG50eXBlIEN1c3RvbVJvdXRlUHJvcHMgPSBPbWl0PFJvdXRlUHJvcHMsICdlbGVtZW50Jz5cblxuZXhwb3J0IHR5cGUgUm91dGVTaG93bkluTmF2VHlwZSA9IHtcbiAgcm91dGVQcm9wczogQ3VzdG9tUm91dGVQcm9wc1xuICBsaW5rUHJvcHM6IExpbmtQcm9wc1xuICBzaG93SW5OYXY6IHRydWVcbiAgbmF2QnV0dG9uUHJvcHM6IEZvck5hdkJ1dHRvblR5cGVcbn1cbmV4cG9ydCB0eXBlIFJvdXRlTm90U2hvd25Jbk5hdlR5cGUgPSB7XG4gIHJvdXRlUHJvcHM6IEN1c3RvbVJvdXRlUHJvcHNcbiAgc2hvd0luTmF2OiBmYWxzZVxufVxuZXhwb3J0IHR5cGUgSW5kaXZpZHVhbFJvdXRlVHlwZSA9IFJvdXRlU2hvd25Jbk5hdlR5cGUgfCBSb3V0ZU5vdFNob3duSW5OYXZUeXBlXG5jb25zdCBtYXRjaGVzUm91dGUgPSAoe1xuICByb3V0ZUluZm8sXG4gIHBhdGhuYW1lLFxufToge1xuICByb3V0ZUluZm86IEluZGl2aWR1YWxSb3V0ZVR5cGVcbiAgcGF0aG5hbWU6IHN0cmluZ1xufSkgPT4ge1xuICBpZiAoXG4gICAgcm91dGVJbmZvLnJvdXRlUHJvcHMucGF0aCAmJlxuICAgIHR5cGVvZiByb3V0ZUluZm8ucm91dGVQcm9wcy5wYXRoID09PSAnc3RyaW5nJ1xuICApIHtcbiAgICByZXR1cm4gKFxuICAgICAgcGF0aG5hbWUuc3RhcnRzV2l0aChgJHtyb3V0ZUluZm8ucm91dGVQcm9wcy5wYXRofS9gKSB8fFxuICAgICAgcGF0aG5hbWUuZW5kc1dpdGgoYCR7cm91dGVJbmZvLnJvdXRlUHJvcHMucGF0aH1gKVxuICAgIClcbiAgfSBlbHNlIGlmIChcbiAgICByb3V0ZUluZm8ucm91dGVQcm9wcy5wYXRoICYmXG4gICAgQXJyYXkuaXNBcnJheShyb3V0ZUluZm8ucm91dGVQcm9wcy5wYXRoKVxuICApIHtcbiAgICByZXR1cm4gcm91dGVJbmZvLnJvdXRlUHJvcHMucGF0aC5zb21lKFxuICAgICAgKHBvc3NpYmxlUm91dGU6IHN0cmluZykgPT5cbiAgICAgICAgcGF0aG5hbWUuc3RhcnRzV2l0aChgJHtwb3NzaWJsZVJvdXRlfS9gKSB8fFxuICAgICAgICBwYXRobmFtZS5lbmRzV2l0aChgJHtwb3NzaWJsZVJvdXRlfWApXG4gICAgKVxuICB9XG4gIHJldHVybiBmYWxzZVxufVxudHlwZSBBcHBQcm9wc1R5cGUgPSB7XG4gIFJvdXRlSW5mb3JtYXRpb246IEluZGl2aWR1YWxSb3V0ZVR5cGVbXVxuICBOb3RpZmljYXRpb25zQ29tcG9uZW50OiBQZXJtaXNzaXZlQ29tcG9uZW50VHlwZVxuICBTZXR0aW5nc0NvbXBvbmVudHM6IFNldHRpbmdzQ29tcG9uZW50VHlwZVxufVxuZnVuY3Rpb24gc2lkZWJhckRhdGFJZFRhZyhuYW1lOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGBzaWRlYmFyLSR7bmFtZX0tYnV0dG9uYFxufVxuLyoqXG4gKiBJZiB5b3UncmUgbm90IHVzaW5nIGEgY3VzdG9tIGxvYWRpbmcgc2NyZWVuLFxuICogdGhpcyBoYW5kbGVzIHJlbW92aW5nIHRoZSBkZWZhdWx0IG9uZSBmb3IgeW91IG9uIGZpcnN0IHJlbmRlclxuICogb2YgdGhlIGFwcC5cbiAqL1xuZXhwb3J0IGNvbnN0IHVzZURlZmF1bHRXZWxjb21lID0gKCkgPT4ge1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGxvYWRpbmdFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvYWRpbmcnKVxuICAgIGlmIChsb2FkaW5nRWxlbWVudCkge1xuICAgICAgbG9hZGluZ0VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaXMtb3BlbicpXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgbG9hZGluZ0VsZW1lbnQucmVtb3ZlKClcbiAgICAgIH0sIDUwMClcbiAgICB9XG4gIH0sIFtdKVxufVxuY29uc3Qgc2Nyb2xsQ3VycmVudFJvdXRlSW50b1ZpZXcgPSAoKSA9PiB7XG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnRyb3V0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWN1cnJlbnRyb3V0ZV0nKVxuICAgIGlmIChjdXJyZW50cm91dGUpIHtcbiAgICAgIHNjcm9sbEludG9WaWV3KGN1cnJlbnRyb3V0ZSwge1xuICAgICAgICBiZWhhdmlvcjogJ3Ntb290aCcsXG4gICAgICAgIHNjcm9sbE1vZGU6ICdpZi1uZWVkZWQnLFxuICAgICAgfSlcbiAgICB9XG4gIH0sIDApXG59XG5jb25zdCBBc3luY1Rhc2tzQ29tcG9uZW50ID0gKCkgPT4ge1xuICBjb25zdCBbc2hvd0Jhciwgc2V0U2hvd0Jhcl0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSlcbiAgdXNlUmVuZGVyT25Bc3luY1Rhc2tzQWRkT3JSZW1vdmUoKVxuICBjb25zdCBhZGRTbmFjayA9IHVzZVNuYWNrKClcbiAgY29uc3QgbmF2aWdhdGUgPSB1c2VOYXZpZ2F0ZSgpXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IHRpbWVvdXRpZCA9IHVuZGVmaW5lZCBhcyBudW1iZXIgfCB1bmRlZmluZWRcbiAgICB0aW1lb3V0aWQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBzZXRTaG93QmFyKGZhbHNlKVxuICAgIH0sIDEwMDApXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0aWQpXG4gICAgfVxuICB9LCBbc2hvd0Jhcl0pXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IHRpbWVvdXRpZCA9IHVuZGVmaW5lZCBhcyBudW1iZXIgfCB1bmRlZmluZWRcbiAgICBpZiAoQXN5bmNUYXNrcy5oYXNTaG93YWJsZVRhc2tzKCkpIHtcbiAgICAgIHNldFNob3dCYXIodHJ1ZSlcbiAgICAgIHdpbmRvdy5vbmJlZm9yZXVubG9hZCA9ICgpID0+IHtcbiAgICAgICAgc2V0U2hvd0Jhcih0cnVlKVxuICAgICAgICByZXR1cm4gYEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBsZWF2ZT8gJHtBc3luY1Rhc2tzLmxpc3QubGVuZ3RofSB0YXNrcyBhcmUgc3RpbGwgcnVubmluZy5gXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldFNob3dCYXIoZmFsc2UpXG4gICAgfVxuICAgIHRpbWVvdXRpZCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHNldFNob3dCYXIoZmFsc2UpXG4gICAgfSwgMTAwMClcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRpZClcbiAgICAgIHdpbmRvdy5vbmJlZm9yZXVubG9hZCA9IG51bGxcbiAgICB9XG4gIH0sIFtBc3luY1Rhc2tzLmxpc3QubGVuZ3RoXSlcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCB1bnN1YnMgPSBBc3luY1Rhc2tzLmxpc3QubWFwKCh0YXNrKSA9PiB7XG4gICAgICByZXR1cm4gdGFzay5zdWJzY3JpYmVUbyh7XG4gICAgICAgIHN1YnNjcmliYWJsZVRoaW5nOiAndXBkYXRlJyxcbiAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICBBc3luY1Rhc2tzLnJlbW92ZSh0YXNrKVxuICAgICAgICAgIGlmIChBc3luY1Rhc2tzLmlzUmVzdG9yZVRhc2sodGFzaykpIHtcbiAgICAgICAgICAgIGFkZFNuYWNrKFxuICAgICAgICAgICAgICBgUmVzdG9yZSBvZiAke3Rhc2subGF6eVJlc3VsdC5wbGFpbi5tZXRhY2FyZC5wcm9wZXJ0aWVzLnRpdGxlfSBjb21wbGV0ZS5gLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGltZW91dDogNTAwMCxcbiAgICAgICAgICAgICAgICBjbG9zZWFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgYWxlcnRQcm9wczoge1xuICAgICAgICAgICAgICAgICAgYWN0aW9uOiAoXG4gICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9e0xpbmt9XG4gICAgICAgICAgICAgICAgICAgICAgdG89e2Avc2VhcmNoLyR7dGFzay5sYXp5UmVzdWx0LnBsYWluLm1ldGFjYXJkLnByb3BlcnRpZXNbJ21ldGFjYXJkLmRlbGV0ZWQuaWQnXX1gfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgR28gdG9cbiAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKEFzeW5jVGFza3MuaXNEZWxldGVUYXNrKHRhc2spKSB7XG4gICAgICAgICAgICBhZGRTbmFjayhcbiAgICAgICAgICAgICAgYERlbGV0ZSBvZiAke3Rhc2subGF6eVJlc3VsdC5wbGFpbi5tZXRhY2FyZC5wcm9wZXJ0aWVzLnRpdGxlfSBjb21wbGV0ZS5gLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdW5kbzogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgbmF2aWdhdGUoYC9zZWFyY2gvJHt0YXNrLmxhenlSZXN1bHQucGxhaW4uaWR9YClcbiAgICAgICAgICAgICAgICAgIEFzeW5jVGFza3MucmVzdG9yZSh7IGxhenlSZXN1bHQ6IHRhc2subGF6eVJlc3VsdCB9KVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKEFzeW5jVGFza3MuaXNDcmVhdGVTZWFyY2hUYXNrKHRhc2spKSB7XG4gICAgICAgICAgICBhZGRTbmFjayhgQ3JlYXRpb24gb2YgJHt0YXNrLmRhdGEudGl0bGV9IGNvbXBsZXRlLmApXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICB9KVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB1bnN1YnMuZm9yRWFjaCgodW5zdWIpID0+IHtcbiAgICAgICAgdW5zdWIoKVxuICAgICAgfSlcbiAgICB9XG4gIH0pXG4gIGlmIChBc3luY1Rhc2tzLmxpc3QubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT17YCR7XG4gICAgICAgICAgc2hvd0JhciA/ICd0cmFuc2xhdGUteS0wJyA6ICd0cmFuc2xhdGUteS1mdWxsJ1xuICAgICAgICB9IGFic29sdXRlIGxlZnQtMCBib3R0b20tMCB3LWZ1bGwgYmctYmxhY2sgYmctb3BhY2l0eS03NSBoLTE2IHotNTAgdHJhbnNpdGlvbiB0cmFuc2Zvcm0gZWFzZS1pbi1vdXQgZHVyYXRpb24tNTAwIGhvdmVyOnRyYW5zbGF0ZS15LTBgfVxuICAgICAgPlxuICAgICAgICA8TGluZWFyUHJvZ3Jlc3NcbiAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYWJzb2x1dGUgaC0yIGxlZnQtMCB0b3AtMCAtbXQtMlwiXG4gICAgICAgICAgdmFyaWFudD1cImluZGV0ZXJtaW5hdGVcIlxuICAgICAgICAvPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgb3ZlcmZsb3ctYXV0byBoLWZ1bGwgdy1mdWxsIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXdoaXRlXCI+XG4gICAgICAgICAge0FzeW5jVGFza3MubGlzdC5tYXAoKGFzeW5jVGFzaykgPT4ge1xuICAgICAgICAgICAgaWYgKEFzeW5jVGFza3MuaXNSZXN0b3JlVGFzayhhc3luY1Rhc2spKSB7XG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1ibGFjayBwLTJcIj5cbiAgICAgICAgICAgICAgICAgIFJlc3RvcmluZyAnXG4gICAgICAgICAgICAgICAgICB7YXN5bmNUYXNrLmxhenlSZXN1bHQucGxhaW4ubWV0YWNhcmQucHJvcGVydGllcy50aXRsZX0nXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChBc3luY1Rhc2tzLmlzRGVsZXRlVGFzayhhc3luY1Rhc2spKSB7XG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1ibGFjayBwLTJcIj5cbiAgICAgICAgICAgICAgICAgIERlbGV0aW5nICdcbiAgICAgICAgICAgICAgICAgIHthc3luY1Rhc2subGF6eVJlc3VsdC5wbGFpbi5tZXRhY2FyZC5wcm9wZXJ0aWVzLnRpdGxlfSdcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKEFzeW5jVGFza3MuaXNDcmVhdGVTZWFyY2hUYXNrKGFzeW5jVGFzaykpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWJsYWNrIHAtMlwiPlxuICAgICAgICAgICAgICAgICAgQ3JlYXRpbmcgJ3thc3luY1Rhc2suZGF0YS50aXRsZX0nXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChBc3luY1Rhc2tzLmlzU2F2ZVNlYXJjaFRhc2soYXN5bmNUYXNrKSkge1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctYmxhY2sgcC0yXCI+XG4gICAgICAgICAgICAgICAgICBTYXZpbmcgJ3thc3luY1Rhc2suZGF0YS50aXRsZX0nXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChBc3luY1Rhc2tzLmlzQ3JlYXRlVGFzayhhc3luY1Rhc2spKSB7XG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1ibGFjayBwLTJcIj5cbiAgICAgICAgICAgICAgICAgIENyZWF0aW5nICd7YXN5bmNUYXNrLmRhdGEudGl0bGV9J1xuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoQXN5bmNUYXNrcy5pc1NhdmVUYXNrKGFzeW5jVGFzaykpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWJsYWNrIHAtMlwiPlxuICAgICAgICAgICAgICAgICAgU2F2aW5nICd7YXN5bmNUYXNrLmRhdGEudGl0bGV9J1xuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgIH0pfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxuICByZXR1cm4gbnVsbFxufVxuLyoqIFRoZSBzb25nIGFuZCBkYW5jZSBhcm91bmQgJ2EnIHZzIExpbmsgaGFzIHRvIGRvIHdpdGggcmVhY3Qgcm91dGVyIG5vdCBzdXBwb3J0aW5nIHRoZXNlIG91dHNpZGUgbGlua3MgKi9cbmNvbnN0IEhlbHBCdXR0b24gPSAoKSA9PiB7XG4gIGNvbnN0IHsgZ2V0SGVscFVybCB9ID0gdXNlQ29uZmlndXJhdGlvbigpXG4gIGNvbnN0IGxvY2F0aW9uID0gdXNlTG9jYXRpb24oKVxuICBjb25zdCBxdWVyeVBhcmFtcyA9IHF1ZXJ5U3RyaW5nLnBhcnNlKGxvY2F0aW9uLnNlYXJjaClcbiAgY29uc3QgeyBuYXZPcGVuIH0gPSB1c2VOYXZDb250ZXh0UHJvdmlkZXIoKVxuICByZXR1cm4gKFxuICAgIDxFeHBhbmRpbmdCdXR0b25cbiAgICAgIGNvbXBvbmVudD17Z2V0SGVscFVybCgpID8gJ2EnIDogKExpbmsgYXMgdW5rbm93biBhcyBhbnkpfVxuICAgICAgaHJlZj17Z2V0SGVscFVybCgpfVxuICAgICAgdG89e1xuICAgICAgICBnZXRIZWxwVXJsKClcbiAgICAgICAgICA/IGdldEhlbHBVcmwoKVxuICAgICAgICAgIDoge1xuICAgICAgICAgICAgICBwYXRobmFtZTogYCR7bG9jYXRpb24ucGF0aG5hbWV9YCxcbiAgICAgICAgICAgICAgc2VhcmNoOiBgJHtxdWVyeVN0cmluZy5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIC4uLnF1ZXJ5UGFyYW1zLFxuICAgICAgICAgICAgICAgICdnbG9iYWwtaGVscCc6ICdIZWxwJyxcbiAgICAgICAgICAgICAgfSl9YCxcbiAgICAgICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRhcmdldD17Z2V0SGVscFVybCgpID8gJ19ibGFuaycgOiB1bmRlZmluZWR9XG4gICAgICBjbGFzc05hbWU9e2Bncm91cC1ob3ZlcjpvcGFjaXR5LTEwMCBvcGFjaXR5LTI1ICBob3ZlcjpvcGFjaXR5LTEwMCBmb2N1cy12aXNpYmxlOm9wYWNpdHktMTAwIHRyYW5zaXRpb24tb3BhY2l0eWB9XG4gICAgICBJY29uPXtIZWxwSWNvbn1cbiAgICAgIGV4cGFuZGVkTGFiZWw9XCJIZWxwXCJcbiAgICAgIHVuZXhwYW5kZWRMYWJlbD1cIlwiXG4gICAgICBkYXRhSWQ9e3NpZGViYXJEYXRhSWRUYWcoJ2hlbHAnKX1cbiAgICAgIGV4cGFuZGVkPXtuYXZPcGVufVxuICAgICAgZm9jdXNWaXNpYmxlQ2xhc3NOYW1lPVwiZm9jdXMtdmlzaWJsZVwiXG4gICAgLz5cbiAgKVxufVxuXG5mdW5jdGlvbiBEcmF3ZXJXcmFwcGVyQ29tcG9uZW50KHsgY2hpbGRyZW4gfTogeyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0pIHtcbiAgcmV0dXJuIChcbiAgICA8U3VzcGVuc2VXcmFwcGVyPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1mdWxsIGZsZXggZmxleC1jb2wgZmxleC1ub3dyYXAgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgIHtFeHRlbnNpb25zLmluY2x1ZGVOYXZpZ2F0aW9uQnV0dG9ucyA/IChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBzaHJpbmstMCBncm93LTAgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgICAgICA8U2lkZUJhck5hdmlnYXRpb25CdXR0b25zIHNob3dUZXh0IC8+XG4gICAgICAgICAgICA8RGl2aWRlciAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApIDogbnVsbH1cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1mdWxsIGdyb3cgc2hyaW5rIG92ZXJmbG93LWF1dG9cIj5cbiAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9TdXNwZW5zZVdyYXBwZXI+XG4gIClcbn1cblxuY29uc3QgU2V0dGluZ3NCdXR0b24gPSAoKSA9PiB7XG4gIGNvbnN0IHsgU2V0dGluZ3NDb21wb25lbnRzIH0gPSB1c2VUb3BMZXZlbEFwcENvbnRleHQoKVxuICBjb25zdCBsb2NhdGlvbiA9IHVzZUxvY2F0aW9uKClcbiAgY29uc3QgbmF2aWdhdGUgPSB1c2VOYXZpZ2F0ZSgpXG4gIGNvbnN0IHF1ZXJ5UGFyYW1zID0gcXVlcnlTdHJpbmcucGFyc2UobG9jYXRpb24uc2VhcmNoKVxuICBjb25zdCBvcGVuID0gQm9vbGVhbihxdWVyeVBhcmFtc1snZ2xvYmFsLXNldHRpbmdzJ10pXG4gIGNvbnN0IHsgbmF2T3BlbiB9ID0gdXNlTmF2Q29udGV4dFByb3ZpZGVyKClcbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPEV4cGFuZGluZ0J1dHRvblxuICAgICAgICBjb21wb25lbnQ9e0xpbmsgYXMgYW55fVxuICAgICAgICB0bz17e1xuICAgICAgICAgIHBhdGhuYW1lOiBgJHtsb2NhdGlvbi5wYXRobmFtZX1gLFxuICAgICAgICAgIHNlYXJjaDogYCR7cXVlcnlTdHJpbmcuc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIC4uLnF1ZXJ5UGFyYW1zLFxuICAgICAgICAgICAgJ2dsb2JhbC1zZXR0aW5ncyc6ICdTZXR0aW5ncycsXG4gICAgICAgICAgfSl9YCxcbiAgICAgICAgfX1cbiAgICAgICAgY2xhc3NOYW1lPXtgZ3JvdXAtaG92ZXI6b3BhY2l0eS0xMDAgb3BhY2l0eS0yNSByZWxhdGl2ZSBob3ZlcjpvcGFjaXR5LTEwMCBmb2N1cy12aXNpYmxlOm9wYWNpdHktMTAwIHRyYW5zaXRpb24tb3BhY2l0eWB9XG4gICAgICAgIEljb249e1NldHRpbmdzSWNvbn1cbiAgICAgICAgZXhwYW5kZWRMYWJlbD1cIlNldHRpbmdzXCJcbiAgICAgICAgdW5leHBhbmRlZExhYmVsPVwiXCJcbiAgICAgICAgZGF0YUlkPXtzaWRlYmFyRGF0YUlkVGFnKCdzZXR0aW5ncycpfVxuICAgICAgICBleHBhbmRlZD17bmF2T3Blbn1cbiAgICAgICAgZm9jdXNWaXNpYmxlQ2xhc3NOYW1lPVwiZm9jdXMtdmlzaWJsZVwiXG4gICAgICAvPlxuICAgICAgPERyYXdlclxuICAgICAgICBhbmNob3I9XCJsZWZ0XCJcbiAgICAgICAgb3Blbj17b3Blbn1cbiAgICAgICAgb25DbG9zZT17KCkgPT4ge1xuICAgICAgICAgIGRlbGV0ZSBxdWVyeVBhcmFtc1snZ2xvYmFsLXNldHRpbmdzJ11cbiAgICAgICAgICBuYXZpZ2F0ZShgJHtsb2NhdGlvbi5wYXRobmFtZX0/JHtxdWVyeVN0cmluZy5zdHJpbmdpZnkocXVlcnlQYXJhbXMpfWApXG4gICAgICAgIH19XG4gICAgICAgIFBhcGVyUHJvcHM9e3tcbiAgICAgICAgICBjbGFzc05hbWU6ICdtaW4tdy0xMjAgbWF4LXctNC81ICcsXG4gICAgICAgIH19XG4gICAgICA+XG4gICAgICAgIDxEcmF3ZXJXcmFwcGVyQ29tcG9uZW50PlxuICAgICAgICAgIDxVc2VyU2V0dGluZ3MgU2V0dGluZ3NDb21wb25lbnRzPXtTZXR0aW5nc0NvbXBvbmVudHN9IC8+XG4gICAgICAgIDwvRHJhd2VyV3JhcHBlckNvbXBvbmVudD5cbiAgICAgIDwvRHJhd2VyPlxuICAgIDwvPlxuICApXG59XG5jb25zdCBOb3RpZmljYXRpb25zQnV0dG9uID0gKCkgPT4ge1xuICBjb25zdCBoYXNVbnNlZW5Ob3RpZmljYXRpb25zID0gdXNlSW5kaWNhdGVIYXNVbnNlZW5Ob3RpZmljYXRpb25zKClcbiAgY29uc3QgeyBOb3RpZmljYXRpb25zQ29tcG9uZW50IH0gPSB1c2VUb3BMZXZlbEFwcENvbnRleHQoKVxuICBjb25zdCBsb2NhdGlvbiA9IHVzZUxvY2F0aW9uKClcbiAgY29uc3QgbmF2aWdhdGUgPSB1c2VOYXZpZ2F0ZSgpXG4gIGNvbnN0IHF1ZXJ5UGFyYW1zID0gcXVlcnlTdHJpbmcucGFyc2UobG9jYXRpb24uc2VhcmNoKVxuICBjb25zdCBvcGVuID0gQm9vbGVhbihxdWVyeVBhcmFtc1snZ2xvYmFsLW5vdGlmaWNhdGlvbnMnXSlcbiAgY29uc3QgeyBuYXZPcGVuIH0gPSB1c2VOYXZDb250ZXh0UHJvdmlkZXIoKVxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT17XG4gICAgICAgICAgaGFzVW5zZWVuTm90aWZpY2F0aW9ucyA/ICdhbmltYXRlLXdpZ2dsZSBNdWktdGV4dC13YXJuaW5nJyA6ICcnXG4gICAgICAgIH1cbiAgICAgID5cbiAgICAgICAgPEV4cGFuZGluZ0J1dHRvblxuICAgICAgICAgIGNvbXBvbmVudD17TGluayBhcyBhbnl9XG4gICAgICAgICAgdG89e3tcbiAgICAgICAgICAgIHBhdGhuYW1lOiBgJHtsb2NhdGlvbi5wYXRobmFtZX1gLFxuICAgICAgICAgICAgc2VhcmNoOiBgJHtxdWVyeVN0cmluZy5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAuLi5xdWVyeVBhcmFtcyxcbiAgICAgICAgICAgICAgJ2dsb2JhbC1ub3RpZmljYXRpb25zJzogJ05vdGlmaWNhdGlvbnMnLFxuICAgICAgICAgICAgfSl9YCxcbiAgICAgICAgICB9fVxuICAgICAgICAgIGNsYXNzTmFtZT17YCR7XG4gICAgICAgICAgICAhaGFzVW5zZWVuTm90aWZpY2F0aW9ucyA/ICdvcGFjaXR5LTI1JyA6ICcnXG4gICAgICAgICAgfSBncm91cC1ob3ZlcjpvcGFjaXR5LTEwMCAgcmVsYXRpdmUgaG92ZXI6b3BhY2l0eS0xMDAgZm9jdXMtdmlzaWJsZTpvcGFjaXR5LTEwMCB0cmFuc2l0aW9uLW9wYWNpdHlgfVxuICAgICAgICAgIEljb249e05vdGlmaWNhdGlvbnNJY29ufVxuICAgICAgICAgIGV4cGFuZGVkTGFiZWw9XCJOb3RpZmljYXRpb25zXCJcbiAgICAgICAgICB1bmV4cGFuZGVkTGFiZWw9XCJcIlxuICAgICAgICAgIGRhdGFJZD17c2lkZWJhckRhdGFJZFRhZygnbm90aWZpY2F0aW9ucycpfVxuICAgICAgICAgIGV4cGFuZGVkPXtuYXZPcGVufVxuICAgICAgICAgIGZvY3VzVmlzaWJsZUNsYXNzTmFtZT1cImZvY3VzLXZpc2libGVcIlxuICAgICAgICAgIG9yaWVudGF0aW9uPVwidmVydGljYWxcIlxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG4gICAgICA8RHJhd2VyXG4gICAgICAgIGFuY2hvcj1cImxlZnRcIlxuICAgICAgICBvcGVuPXtvcGVufVxuICAgICAgICBvbkNsb3NlPXsoKSA9PiB7XG4gICAgICAgICAgZGVsZXRlIHF1ZXJ5UGFyYW1zWydnbG9iYWwtbm90aWZpY2F0aW9ucyddXG4gICAgICAgICAgbmF2aWdhdGUoYCR7bG9jYXRpb24ucGF0aG5hbWV9PyR7cXVlcnlTdHJpbmcuc3RyaW5naWZ5KHF1ZXJ5UGFyYW1zKX1gKVxuICAgICAgICAgIG5vdGlmaWNhdGlvbnMuc2V0U2VlbigpXG4gICAgICAgICAgdXNlckluc3RhbmNlLnNhdmVQcmVmZXJlbmNlcygpXG4gICAgICAgIH19XG4gICAgICAgIFBhcGVyUHJvcHM9e3tcbiAgICAgICAgICBjbGFzc05hbWU6ICdtaW4tdy0xMjAgbWF4LXctNC81ICcsXG4gICAgICAgIH19XG4gICAgICA+XG4gICAgICAgIDxEcmF3ZXJXcmFwcGVyQ29tcG9uZW50PlxuICAgICAgICAgIDxOb3RpZmljYXRpb25zQ29tcG9uZW50IC8+XG4gICAgICAgIDwvRHJhd2VyV3JhcHBlckNvbXBvbmVudD5cbiAgICAgIDwvRHJhd2VyPlxuICAgIDwvPlxuICApXG59XG5jb25zdCBVc2VyQnV0dG9uID0gKCkgPT4ge1xuICBjb25zdCBsb2NhdGlvbiA9IHVzZUxvY2F0aW9uKClcbiAgY29uc3QgbmF2aWdhdGUgPSB1c2VOYXZpZ2F0ZSgpXG4gIGNvbnN0IHF1ZXJ5UGFyYW1zID0gcXVlcnlTdHJpbmcucGFyc2UobG9jYXRpb24uc2VhcmNoKVxuICBjb25zdCBvcGVuID0gQm9vbGVhbihxdWVyeVBhcmFtc1snZ2xvYmFsLXVzZXInXSlcbiAgY29uc3QgeyBuYXZPcGVuIH0gPSB1c2VOYXZDb250ZXh0UHJvdmlkZXIoKVxuXG4gIGNvbnN0IGdldExhYmVsID0gKCkgPT4ge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCB0cnVuY2F0ZVwiPnt1c2VySW5zdGFuY2UuZ2V0VXNlck5hbWUoKX08L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRydW5jYXRlIHctZnVsbFwiPlxuICAgICAgICAgIDxSb2xlRGlzcGxheSAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxFeHBhbmRpbmdCdXR0b25cbiAgICAgICAgY29tcG9uZW50PXtMaW5rIGFzIGFueX1cbiAgICAgICAgdG89e3tcbiAgICAgICAgICBwYXRobmFtZTogYCR7bG9jYXRpb24ucGF0aG5hbWV9YCxcbiAgICAgICAgICBzZWFyY2g6IGAke3F1ZXJ5U3RyaW5nLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAuLi5xdWVyeVBhcmFtcyxcbiAgICAgICAgICAgICdnbG9iYWwtdXNlcic6ICdVc2VyJyxcbiAgICAgICAgICB9KX1gLFxuICAgICAgICB9fVxuICAgICAgICBjbGFzc05hbWU9e2Bncm91cC1ob3ZlcjpvcGFjaXR5LTEwMCBvcGFjaXR5LTI1IHJlbGF0aXZlIGhvdmVyOm9wYWNpdHktMTAwIGZvY3VzLXZpc2libGU6b3BhY2l0eS0xMDAgdHJhbnNpdGlvbi1vcGFjaXR5YH1cbiAgICAgICAgSWNvbj17UGVyc29uSWNvbn1cbiAgICAgICAgZXhwYW5kZWRMYWJlbD17Z2V0TGFiZWwoKX1cbiAgICAgICAgdW5leHBhbmRlZExhYmVsPXtnZXRMYWJlbCgpfVxuICAgICAgICBkYXRhSWQ9e3NpZGViYXJEYXRhSWRUYWcoJ3VzZXItcHJvZmlsZScpfVxuICAgICAgICBleHBhbmRlZD17bmF2T3Blbn1cbiAgICAgICAgZm9jdXNWaXNpYmxlQ2xhc3NOYW1lPVwiZm9jdXMtdmlzaWJsZVwiXG4gICAgICAvPlxuICAgICAgPERyYXdlclxuICAgICAgICBhbmNob3I9XCJsZWZ0XCJcbiAgICAgICAgb3Blbj17b3Blbn1cbiAgICAgICAgb25DbG9zZT17KCkgPT4ge1xuICAgICAgICAgIGRlbGV0ZSBxdWVyeVBhcmFtc1snZ2xvYmFsLXVzZXInXVxuICAgICAgICAgIG5hdmlnYXRlKGAke2xvY2F0aW9uLnBhdGhuYW1lfT8ke3F1ZXJ5U3RyaW5nLnN0cmluZ2lmeShxdWVyeVBhcmFtcyl9YClcbiAgICAgICAgfX1cbiAgICAgICAgUGFwZXJQcm9wcz17e1xuICAgICAgICAgIGNsYXNzTmFtZTogJ21pbi13LTEyMCBtYXgtdy00LzUgJyxcbiAgICAgICAgfX1cbiAgICAgID5cbiAgICAgICAgPERyYXdlcldyYXBwZXJDb21wb25lbnQ+XG4gICAgICAgICAgPFVzZXJWaWV3IC8+XG4gICAgICAgIDwvRHJhd2VyV3JhcHBlckNvbXBvbmVudD5cbiAgICAgIDwvRHJhd2VyPlxuICAgIDwvPlxuICApXG59XG5jb25zdCBSb3V0ZUJ1dHRvbiA9ICh7IHJvdXRlSW5mbyB9OiB7IHJvdXRlSW5mbzogUm91dGVTaG93bkluTmF2VHlwZSB9KSA9PiB7XG4gIGNvbnN0IGxvY2F0aW9uID0gdXNlTG9jYXRpb24oKVxuICBjb25zdCB7IG5hdk9wZW4gfSA9IHVzZU5hdkNvbnRleHRQcm92aWRlcigpXG4gIGNvbnN0IGlzU2VsZWN0ZWQgPSBtYXRjaGVzUm91dGUoe1xuICAgIHJvdXRlSW5mbyxcbiAgICBwYXRobmFtZTogbG9jYXRpb24ucGF0aG5hbWUsXG4gIH0pXG4gIHJldHVybiAoXG4gICAgPEV4cGFuZGluZ0J1dHRvblxuICAgICAga2V5PXtyb3V0ZUluZm8ubGlua1Byb3BzLnRvLnRvU3RyaW5nKCl9XG4gICAgICBjb21wb25lbnQ9e0xpbmsgYXMgYW55fVxuICAgICAgdG89e3JvdXRlSW5mby5saW5rUHJvcHMudG99XG4gICAgICBjbGFzc05hbWU9e2Bncm91cC1ob3ZlcjpvcGFjaXR5LTEwMCAke1xuICAgICAgICAhaXNTZWxlY3RlZCA/ICdvcGFjaXR5LTI1JyA6ICcnXG4gICAgICB9IGZvY3VzLXZpc2libGU6b3BhY2l0eS0xMDAgaG92ZXI6b3BhY2l0eS0xMDAgdHJhbnNpdGlvbi1vcGFjaXR5YH1cbiAgICAgIGV4cGFuZGVkPXtuYXZPcGVufVxuICAgICAgey4uLnJvdXRlSW5mby5uYXZCdXR0b25Qcm9wc31cbiAgICAgIGZvY3VzVmlzaWJsZUNsYXNzTmFtZT1cImZvY3VzLXZpc2libGVcIlxuICAgICAgZGF0YUlkPXtzaWRlYmFyRGF0YUlkVGFnKHJvdXRlSW5mby5uYXZCdXR0b25Qcm9wcy5kYXRhSWQpfVxuICAgICAgey4uLihpc1NlbGVjdGVkXG4gICAgICAgID8ge1xuICAgICAgICAgICAgWydkYXRhLWN1cnJlbnRyb3V0ZSddOiB0cnVlLFxuICAgICAgICAgIH1cbiAgICAgICAgOiB7fSl9XG4gICAgLz5cbiAgKVxufVxuY29uc3QgU2lkZUJhclJvdXRlcyA9ICgpID0+IHtcbiAgY29uc3QgeyBSb3V0ZUluZm9ybWF0aW9uIH0gPSB1c2VUb3BMZXZlbEFwcENvbnRleHQoKVxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT1cIm92ZXJmbG93LWF1dG8gcC0wIHNocmluay0wIHNjcm9sbGJhcnMtbWluXCJcbiAgICAgIHN0eWxlPXt7IG1heEhlaWdodDogYGNhbGMoMTAwJSAtICR7NyAqIDR9cmVtKWAgfX1cbiAgICA+XG4gICAgICB7Um91dGVJbmZvcm1hdGlvbi5maWx0ZXIoKHJvdXRlSW5mbykgPT4gcm91dGVJbmZvLnNob3dJbk5hdikubWFwKFxuICAgICAgICAocm91dGVJbmZvOiBSb3V0ZVNob3duSW5OYXZUeXBlKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxSb3V0ZUJ1dHRvblxuICAgICAgICAgICAgICByb3V0ZUluZm89e3JvdXRlSW5mb31cbiAgICAgICAgICAgICAga2V5PXtyb3V0ZUluZm8ucm91dGVQcm9wcy5wYXRoPy50b1N0cmluZygpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICl9XG4gICAgICB7PEV4dGVuc2lvbnMuZXh0cmFSb3V0ZXMgLz59XG4gICAgPC9kaXY+XG4gIClcbn1cbmNvbnN0IFNpZGVCYXJOYXZpZ2F0aW9uQnV0dG9ucyA9ICh7XG4gIHNob3dUZXh0ID0gZmFsc2UsXG59OiB7IHNob3dUZXh0PzogYm9vbGVhbiB9ID0ge30pID0+IHtcbiAgY29uc3QgbmF2aWdhdGUgPSB1c2VOYXZpZ2F0ZSgpXG4gIGNvbnN0IHsgbmF2T3BlbiB9ID0gdXNlTmF2Q29udGV4dFByb3ZpZGVyKClcbiAgY29uc3Qgc2hvd0V4cGFuZGVkVGV4dCA9IG5hdk9wZW4gfHwgc2hvd1RleHRcbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgcC0yIHNocmluay0wXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCBvdmVyZmxvdy1oaWRkZW4gZmxleCBpdGVtcy1jZW50ZXIgZmxleC1ub3dyYXBcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1yLWF1dG9cIj5cbiAgICAgICAgICAgIDxCdXR0b24gb25DbGljaz17KCkgPT4gbmF2aWdhdGUoLTEpfT5cbiAgICAgICAgICAgICAgPEFycm93QmFja0ljb24gZm9udFNpemU9XCJzbWFsbFwiIC8+XG4gICAgICAgICAgICAgIHtzaG93RXhwYW5kZWRUZXh0ICYmICdCYWNrJ31cbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWwtYXV0b1wiPlxuICAgICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBuYXZpZ2F0ZSgxKX0+XG4gICAgICAgICAgICAgIHtzaG93RXhwYW5kZWRUZXh0ICYmICdGb3J3YXJkJ31cbiAgICAgICAgICAgICAgPEFycm93Rm9yd2FyZEljb24gZm9udFNpemU9XCJzbWFsbFwiIC8+XG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8Lz5cbiAgKVxufVxuXG5jb25zdCBTaWRlQmFyVG9nZ2xlQnV0dG9uID0gKCkgPT4ge1xuICBjb25zdCB7IG5hdk9wZW4sIHNldE5hdk9wZW4gfSA9IHVzZU5hdkNvbnRleHRQcm92aWRlcigpXG4gIGNvbnN0IHsgZ2V0VG9wTGVmdExvZ29TcmMsIGdldEN1c3RvbUJyYW5kaW5nLCBnZXRQcm9kdWN0LCBnZXRNZW51SWNvblNyYyB9ID1cbiAgICB1c2VDb25maWd1cmF0aW9uKClcbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgaC0xNiBzaHJpbmstMFwiPlxuICAgICAgICB7bmF2T3BlbiA/IChcbiAgICAgICAgICA8PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1mdWxsIG92ZXJmbG93LWhpZGRlbiBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LW5vd3JhcFwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBsLTMgcHktMSBwci0xIHctZnVsbCByZWxhdGl2ZSBoLWZ1bGxcIj5cbiAgICAgICAgICAgICAgICB7Z2V0VG9wTGVmdExvZ29TcmMoKSA/IChcbiAgICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibWF4LWgtZnVsbCBtYXgtdy1mdWxsIGFic29sdXRlIGxlZnQtMS8yIHRyYW5zZm9ybSAtdHJhbnNsYXRlLXgtMS8yIC10cmFuc2xhdGUteS0xLzIgdG9wLTEvMiBwLTRcIlxuICAgICAgICAgICAgICAgICAgICBzcmM9e2hhbmRsZUJhc2U2NEVuY29kZWRJbWFnZXMoZ2V0VG9wTGVmdExvZ29TcmMoKSl9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBsLTMgZmxleCBmbGV4LWNvbCBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxUeXBvZ3JhcGh5PntnZXRDdXN0b21CcmFuZGluZygpfTwvVHlwb2dyYXBoeT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPFR5cG9ncmFwaHk+e2dldFByb2R1Y3QoKX08L1R5cG9ncmFwaHk+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWwtYXV0b1wiPlxuICAgICAgICAgICAgICAgIDxJY29uQnV0dG9uXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLWF1dG9cIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0TmF2T3BlbihmYWxzZSl9XG4gICAgICAgICAgICAgICAgICBzaXplPVwibGFyZ2VcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxDaGV2cm9uTGVmdEljb24gLz5cbiAgICAgICAgICAgICAgICA8L0ljb25CdXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC8+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgY29sb3I9XCJpbmhlcml0XCJcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJvcGVuIGRyYXdlclwiXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgIHNldE5hdk9wZW4odHJ1ZSlcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1mdWxsIHAtMlwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAge2dldE1lbnVJY29uU3JjKCkgPyAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgICAgc3JjPXtoYW5kbGVCYXNlNjRFbmNvZGVkSW1hZ2VzKGdldE1lbnVJY29uU3JjKCkpfVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibWF4LWgtMTYgbWF4LXctZnVsbFwiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8TWVudUljb24gLz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICA8Lz5cbiAgKVxufVxuY29uc3QgU2lkZUJhciA9ICgpID0+IHtcbiAgY29uc3QgeyBuYXZPcGVuIH0gPSB1c2VOYXZDb250ZXh0UHJvdmlkZXIoKVxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT17YCR7XG4gICAgICAgIG5hdk9wZW4gPyAndy02NCcgOiAndy0yMCdcbiAgICAgIH0gdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMjAwIGVhc2UtaW4tb3V0IHJlbGF0aXZlIHotMTAgbXItMiBzaHJpbmstMCBwYi0yIHB0LTIgcGwtMiBncm91cGB9XG4gICAgICBvbk1vdXNlTGVhdmU9eygpID0+IHtcbiAgICAgICAgc2Nyb2xsQ3VycmVudFJvdXRlSW50b1ZpZXcoKVxuICAgICAgfX1cbiAgICA+XG4gICAgICA8UGFwZXIgZWxldmF0aW9uPXtFbGV2YXRpb25zLm5hdmJhcn0gY2xhc3NOYW1lPVwiaC1mdWxsXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1mdWxsIHctZnVsbCBmbGV4IGZsZXgtY29sIGZsZXgtbm93cmFwIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICAgIHtFeHRlbnNpb25zLmluY2x1ZGVOYXZpZ2F0aW9uQnV0dG9ucyAmJiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICA8U2lkZUJhck5hdmlnYXRpb25CdXR0b25zIC8+XG4gICAgICAgICAgICAgIDxEaXZpZGVyIC8+XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApfVxuICAgICAgICAgIDxTaWRlQmFyVG9nZ2xlQnV0dG9uIC8+XG4gICAgICAgICAgPERpdmlkZXIgLz5cbiAgICAgICAgICA8U2lkZUJhclJvdXRlcyAvPlxuICAgICAgICAgIDxEaXZpZGVyIC8+XG4gICAgICAgICAgPFNpZGVCYXJCYWNrZ3JvdW5kIC8+XG4gICAgICAgICAgPERpdmlkZXIgLz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LWF1dG8gb3ZlcmZsb3ctaGlkZGVuIHctZnVsbCBzaHJpbmstMCBncm93LTBcIj5cbiAgICAgICAgICAgIHtFeHRlbnNpb25zLmV4dHJhU2lkZWJhckJ1dHRvbnMgJiYgKFxuICAgICAgICAgICAgICA8RXh0ZW5zaW9ucy5leHRyYVNpZGViYXJCdXR0b25zIC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgPEhlbHBCdXR0b24gLz5cbiAgICAgICAgICAgIDxTZXR0aW5nc0J1dHRvbiAvPlxuICAgICAgICAgICAgPE5vdGlmaWNhdGlvbnNCdXR0b24gLz5cbiAgICAgICAgICAgIDxVc2VyQnV0dG9uIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9QYXBlcj5cbiAgICA8L2Rpdj5cbiAgKVxufVxuY29uc3QgSGVhZGVyID0gKCkgPT4ge1xuICBjb25zdCB7IGdldFBsYXRmb3JtQmFja2dyb3VuZCwgZ2V0UGxhdGZvcm1Db2xvciwgZ2V0UGxhdGZvcm1IZWFkZXIgfSA9XG4gICAgdXNlQ29uZmlndXJhdGlvbigpXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGxcIj5cbiAgICAgIHtnZXRQbGF0Zm9ybUhlYWRlcigpID8gKFxuICAgICAgICA8VHlwb2dyYXBoeVxuICAgICAgICAgIGFsaWduPVwiY2VudGVyXCJcbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgYmFja2dyb3VuZDogZ2V0UGxhdGZvcm1CYWNrZ3JvdW5kKCksXG4gICAgICAgICAgICBjb2xvcjogZ2V0UGxhdGZvcm1Db2xvcigpLFxuICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICB7Z2V0UGxhdGZvcm1IZWFkZXIoKX1cbiAgICAgICAgPC9UeXBvZ3JhcGh5PlxuICAgICAgKSA6IG51bGx9XG4gICAgPC9kaXY+XG4gIClcbn1cbmNvbnN0IEZvb3RlciA9ICgpID0+IHtcbiAgY29uc3QgeyBnZXRQbGF0Zm9ybUJhY2tncm91bmQsIGdldFBsYXRmb3JtQ29sb3IsIGdldFBsYXRmb3JtRm9vdGVyIH0gPVxuICAgIHVzZUNvbmZpZ3VyYXRpb24oKVxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsXCI+XG4gICAgICB7Z2V0UGxhdGZvcm1Gb290ZXIoKSA/IChcbiAgICAgICAgPFR5cG9ncmFwaHlcbiAgICAgICAgICBhbGlnbj1cImNlbnRlclwiXG4gICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IGdldFBsYXRmb3JtQmFja2dyb3VuZCgpLFxuICAgICAgICAgICAgY29sb3I6IGdldFBsYXRmb3JtQ29sb3IoKSxcbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAge2dldFBsYXRmb3JtRm9vdGVyKCl9XG4gICAgICAgIDwvVHlwb2dyYXBoeT5cbiAgICAgICkgOiBudWxsfVxuICAgIDwvZGl2PlxuICApXG59XG5jb25zdCBTaWRlQmFyQmFja2dyb3VuZCA9ICgpID0+IHtcbiAgY29uc3QgeyBnZXRCb3R0b21MZWZ0QmFja2dyb3VuZFNyYyB9ID0gdXNlQ29uZmlndXJhdGlvbigpXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZSBvdmVyZmxvdy1oaWRkZW4gc2hyaW5rLTEgaC1mdWxsIG1pbi13LWZ1bGxcIj5cbiAgICAgIHtnZXRCb3R0b21MZWZ0QmFja2dyb3VuZFNyYygpID8gKFxuICAgICAgICA8aW1nXG4gICAgICAgICAgY2xhc3NOYW1lPXtgZ3JvdXAtaG92ZXI6b3BhY2l0eS0xMDAgb3BhY2l0eS01MCBkdXJhdGlvbi0yMDAgZWFzZS1pbi1vdXQgdHJhbnNpdGlvbi1hbGwgdy1hdXRvIGgtZnVsbCBhYnNvbHV0ZSBtYXgtdy1ub25lIG0tYXV0byBtaW4taC04MGB9XG4gICAgICAgICAgc3JjPXtoYW5kbGVCYXNlNjRFbmNvZGVkSW1hZ2VzKGdldEJvdHRvbUxlZnRCYWNrZ3JvdW5kU3JjKCkpfVxuICAgICAgICAvPlxuICAgICAgKSA6IG51bGx9XG4gICAgPC9kaXY+XG4gIClcbn1cbmNvbnN0IFJvdXRlQ29udGVudHMgPSAoKSA9PiB7XG4gIGNvbnN0IHsgUm91dGVJbmZvcm1hdGlvbiB9ID0gdXNlVG9wTGV2ZWxBcHBDb250ZXh0KClcbiAgLyoqXG4gICAqIFNvIHRoaXMgaXMgc2xpZ2h0bHkgYW5ub3lpbmcsIGJ1dCB0aGUgZ3JpZCB3b24ndCBwcm9wZXJseSByZXNpemUgd2l0aG91dCBvdmVyZmxvdyBoaWRkZW4gc2V0LlxuICAgKlxuICAgKiBUaGF0IG1ha2VzIGhhbmRsaW5nIHBhZGRpbmcgLyBtYXJnaW5zIC8gc3BhY2luZyBtb3JlIGNvbXBsaWNhdGVkIGluIG91ciBhcHAsIGJlY2F1c2Ugd2l0aCBvdmVyZmxvdyBoaWRkZW4gc2V0XG4gICAqIGRyb3BzaGFkb3dzIG9uIGVsZW1lbnRzIHdpbGwgZ2V0IGN1dCBvZmYuICBTbyB3ZSBoYXZlIHRvIGxldCB0aGUgY29udGVudHMgaW5zdGVhZCBkaWN0YXRlIHRoZWlyIHBhZGRpbmcsIHRoYXQgd2F5XG4gICAqIHRoZWlyIGRyb3BzaGFkb3dzIGNhbiBiZSBzZWVuLlxuICAgKlxuICAgKiBGb2xrcyB3aWxsIHByb2JhYmx5IHN0cnVnZ2xlIGEgYml0IHdpdGggaXQgYXQgZmlyc3QsIGJ1dCB0aGUgY3NzIHV0aWxpdGllcyBhY3R1YWxseSBtYWtlIGl0IHByZXR0eSBlYXN5LlxuICAgKiBKdXN0IGFkZCBwYi0yIGZvciB0aGUgY29ycmVjdCBib3R0b20gc3BhY2luZywgcHQtMiBmb3IgY29ycmVjdCB0b3Agc3BhY2luZywgZXRjLiBldGMuXG4gICAqL1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCByZWxhdGl2ZSB6LTAgc2hyaW5rLTEgb3ZlcmZsb3cteC1oaWRkZW5cIj5cbiAgICAgIDxNZW1vPlxuICAgICAgICA8Um91dGVzPlxuICAgICAgICAgIHtSb3V0ZUluZm9ybWF0aW9uLm1hcCgocm91dGVJbmZvOiBSb3V0ZU5vdFNob3duSW5OYXZUeXBlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8Um91dGVcbiAgICAgICAgICAgICAgICBrZXk9e3JvdXRlSW5mby5yb3V0ZVByb3BzLnBhdGg/LnRvU3RyaW5nKCkgfHwgTWF0aC5yYW5kb20oKX1cbiAgICAgICAgICAgICAgICBwYXRoPXtyb3V0ZUluZm8ucm91dGVQcm9wcy5wYXRofVxuICAgICAgICAgICAgICAgIENvbXBvbmVudD17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgLy8gZHVlIHRvIGhvdyBDb21wb25lbnRzIHdvcmsgaW4gdjYgcmVhY3Qgcm91dGVyLCB3ZSdsbCB3YW50IHRvIG1lbW8gdGhlc2UgdG8gYXZvaWQgdW5uZWNlc3NhcnkgY29tcG9uZW50IHJlcmVuZGVyc1xuICAgICAgICAgICAgICAgICAgY29uc3QgQ29tcG9uZW50ID0gcm91dGVJbmZvLnJvdXRlUHJvcHMuQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgICBpZiAoIUNvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPE1lbW8+XG4gICAgICAgICAgICAgICAgICAgICAgPENvbXBvbmVudCAvPlxuICAgICAgICAgICAgICAgICAgICA8L01lbW8+XG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9KX1cbiAgICAgICAgPC9Sb3V0ZXM+XG4gICAgICA8L01lbW8+XG4gICAgPC9kaXY+XG4gIClcbn1cbmNvbnN0IE5hdkNvbnRleHRQcm92aWRlciA9IFJlYWN0LmNyZWF0ZUNvbnRleHQoe1xuICBzZXROYXZPcGVuOiAoX25hdk9wZW46IGJvb2xlYW4pID0+IHt9LFxuICBuYXZPcGVuOiBmYWxzZSxcbn0pXG5leHBvcnQgY29uc3QgdXNlTmF2Q29udGV4dFByb3ZpZGVyID0gKCkgPT4ge1xuICBjb25zdCBuYXZDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChOYXZDb250ZXh0UHJvdmlkZXIpXG4gIHJldHVybiBuYXZDb250ZXh0XG59XG4vKipcbiAqIEtlZXAgdGhlIGN1cnJlbnQgcm91dGUgdmlzaWJsZSB0byB0aGUgdXNlciBzaW5jZSBpdCdzIHVzZWZ1bCBpbmZvLlxuICogVGhpcyBhbHNvIGVuc3VyZXMgaXQncyB2aXNpYmxlIHVwb24gZmlyc3QgbG9hZCBvZiB0aGUgcGFnZS5cbiAqL1xuY29uc3QgU2Nyb2xsQ3VycmVudFJvdXRlSW50b1ZpZXdPbkxvY2F0aW9uQ2hhbmdlID0gKCkgPT4ge1xuICBjb25zdCBsb2NhdGlvbiA9IHVzZUxvY2F0aW9uKClcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBzY3JvbGxDdXJyZW50Um91dGVJbnRvVmlldygpXG4gIH0sIFtsb2NhdGlvbl0pXG4gIHJldHVybiA8PjwvPlxufVxuY29uc3QgdXNlSW5kaWNhdGVIYXNVbnNlZW5Ob3RpZmljYXRpb25zID0gKCkgPT4ge1xuICBjb25zdCB7IGxpc3RlblRvIH0gPSB1c2VCYWNrYm9uZSgpXG4gIGNvbnN0IFtoYXNVbnNlZW5Ob3RpZmljYXRpb25zLCBzZXRIYXNVbnNlZW5Ob3RpZmljYXRpb25zXSA9IFJlYWN0LnVzZVN0YXRlKFxuICAgIG5vdGlmaWNhdGlvbnMuaGFzVW5zZWVuKCkgYXMgYm9vbGVhblxuICApXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGlzdGVuVG8obm90aWZpY2F0aW9ucywgJ2NoYW5nZSBhZGQgcmVtb3ZlIHJlc2V0IHVwZGF0ZScsICgpID0+IHtcbiAgICAgIHNldEhhc1Vuc2Vlbk5vdGlmaWNhdGlvbnMobm90aWZpY2F0aW9ucy5oYXNVbnNlZW4oKSBhcyBib29sZWFuKVxuICAgIH0pXG4gIH0sIFtdKVxuICByZXR1cm4gaGFzVW5zZWVuTm90aWZpY2F0aW9uc1xufVxuXG4vLyBAdHMtaWdub3JlXG5jb25zdCB1c2VGYXZpY29uQnJhbmRpbmcgPSAoKSA9PiB7XG4gIC8vIHRvZG8gZmF2aWNvbiBicmFuZGluZ1xuICAvLyAkKHdpbmRvdy5kb2N1bWVudCkucmVhZHkoKCkgPT4ge1xuICAvLyAgIHdpbmRvdy5kb2N1bWVudC50aXRsZSA9IHByb3BlcnRpZXMuYnJhbmRpbmcgKyAnICcgKyBwcm9wZXJ0aWVzLnByb2R1Y3RcbiAgLy8gICBjb25zdCBmYXZpY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Zhdmljb24nKSBhcyBIVE1MQW5jaG9yRWxlbWVudFxuICAvLyAgIGZhdmljb24uaHJlZiA9IGJyYW5kaW5nSW5mb3JtYXRpb24udG9wTGVmdExvZ29TcmNcbiAgLy8gICBmYXZpY29uLnJlbW92ZSgpXG4gIC8vICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChmYXZpY29uKVxuICAvLyB9KVxufVxuY29uc3QgdXNlTmF2T3BlbiA9ICgpID0+IHtcbiAgbGV0IGRlZmF1bHRPcGVuID1cbiAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2hlbGwuZHJhd2VyJykgPT09ICd0cnVlJyA/IHRydWUgOiBmYWxzZVxuICBjb25zdCBbbmF2T3Blbiwgc2V0TmF2T3Blbl0gPSBSZWFjdC51c2VTdGF0ZShkZWZhdWx0T3BlbilcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2hlbGwuZHJhd2VyJywgbmF2T3Blbi50b1N0cmluZygpKVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgJCh3aW5kb3cpLnJlc2l6ZSgpIC8vIG5lZWRlZCBmb3IgZ29sZGVuIGxheW91dCB0byByZXNpemVcbiAgICB9LCAyNTApXG4gIH0sIFtuYXZPcGVuXSlcbiAgcmV0dXJuIHtcbiAgICBuYXZPcGVuLFxuICAgIHNldE5hdk9wZW4sXG4gIH1cbn1cbmNvbnN0IFRvcExldmVsQXBwQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQoe1xuICBSb3V0ZUluZm9ybWF0aW9uOiBbXSxcbiAgTm90aWZpY2F0aW9uc0NvbXBvbmVudDogKCkgPT4gbnVsbCxcbiAgU2V0dGluZ3NDb21wb25lbnRzOiB7fSxcbn0gYXMgQXBwUHJvcHNUeXBlKVxuY29uc3QgdXNlVG9wTGV2ZWxBcHBDb250ZXh0ID0gKCkgPT4ge1xuICBjb25zdCB0b3BMZXZlbEFwcENvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KFRvcExldmVsQXBwQ29udGV4dClcbiAgcmV0dXJuIHRvcExldmVsQXBwQ29udGV4dFxufVxuY29uc3QgU2Vzc2lvblRpbWVvdXRDb21wb25lbnQgPSAoKSA9PiB7XG4gIGNvbnN0IHNlc3Npb25UaW1lb3V0RGlhbG9nU3RhdGUgPSB1c2VEaWFsb2dTdGF0ZSgpXG4gIHVzZUxpc3RlblRvKHNlc3Npb25UaW1lb3V0TW9kZWwsICdjaGFuZ2U6c2hvd1Byb21wdCcsICgpID0+IHtcbiAgICBpZiAoc2Vzc2lvblRpbWVvdXRNb2RlbC5nZXQoJ3Nob3dQcm9tcHQnKSkge1xuICAgICAgc2Vzc2lvblRpbWVvdXREaWFsb2dTdGF0ZS5oYW5kbGVDbGljaygpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNlc3Npb25UaW1lb3V0RGlhbG9nU3RhdGUuaGFuZGxlQ2xvc2UoKVxuICAgIH1cbiAgfSlcbiAgcmV0dXJuIChcbiAgICA8c2Vzc2lvblRpbWVvdXREaWFsb2dTdGF0ZS5NdWlEaWFsb2dDb21wb25lbnRzLkRpYWxvZ1xuICAgICAgey4uLnNlc3Npb25UaW1lb3V0RGlhbG9nU3RhdGUuTXVpRGlhbG9nUHJvcHN9XG4gICAgICBkaXNhYmxlRXNjYXBlS2V5RG93blxuICAgICAgb25DbG9zZT17KGV2ZW50LCByZWFzb24pID0+IHtcbiAgICAgICAgaWYgKHJlYXNvbiA9PT0gJ2JhY2tkcm9wQ2xpY2snKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgc2Vzc2lvblRpbWVvdXREaWFsb2dTdGF0ZS5NdWlEaWFsb2dQcm9wcy5vbkNsb3NlKGV2ZW50LCByZWFzb24pXG4gICAgICB9fVxuICAgID5cbiAgICAgIDxTZXNzaW9uVGltZW91dCAvPlxuICAgIDwvc2Vzc2lvblRpbWVvdXREaWFsb2dTdGF0ZS5NdWlEaWFsb2dDb21wb25lbnRzLkRpYWxvZz5cbiAgKVxufVxuXG5jb25zdCBBcHAgPSAoe1xuICBSb3V0ZUluZm9ybWF0aW9uLFxuICBOb3RpZmljYXRpb25zQ29tcG9uZW50LFxuICBTZXR0aW5nc0NvbXBvbmVudHMsXG59OiBBcHBQcm9wc1R5cGUpID0+IHtcbiAgY29uc3QgeyBuYXZPcGVuLCBzZXROYXZPcGVuIH0gPSB1c2VOYXZPcGVuKClcbiAgcmV0dXJuIChcbiAgICA8VG9wTGV2ZWxBcHBDb250ZXh0LlByb3ZpZGVyXG4gICAgICB2YWx1ZT17eyBSb3V0ZUluZm9ybWF0aW9uLCBOb3RpZmljYXRpb25zQ29tcG9uZW50LCBTZXR0aW5nc0NvbXBvbmVudHMgfX1cbiAgICA+XG4gICAgICA8TmF2Q29udGV4dFByb3ZpZGVyLlByb3ZpZGVyIHZhbHVlPXt7IG5hdk9wZW4sIHNldE5hdk9wZW4gfX0+XG4gICAgICAgIDxTeW5jUmVhY3RSb3V0ZXJDb250ZXh0VG9WYXJpYWJsZXMgLz5cbiAgICAgICAgPFNjcm9sbEN1cnJlbnRSb3V0ZUludG9WaWV3T25Mb2NhdGlvbkNoYW5nZSAvPlxuICAgICAgICA8Q3NzQmFzZWxpbmUgLz5cbiAgICAgICAgPFN5c3RlbVVzYWdlTW9kYWwgLz5cbiAgICAgICAgPFNlc3Npb25UaW1lb3V0Q29tcG9uZW50IC8+XG4gICAgICAgIDxBamF4RXJyb3JIYW5kbGluZyAvPlxuICAgICAgICA8V3JlcXJTbmFja3MgLz5cbiAgICAgICAgPEhlYWRlciAvPlxuICAgICAgICA8RXh0ZW5zaW9ucy5leHRyYUhlYWRlciAvPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGwgcmVsYXRpdmUgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgICAgPEFzeW5jVGFza3NDb21wb25lbnQgLz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGwgZmxleCBmbGV4LXJvdyBmbGV4LW5vd3JhcCBpdGVtcy1zdHJldGNoXCI+XG4gICAgICAgICAgICA8U2lkZUJhciAvPlxuICAgICAgICAgICAgPFJvdXRlQ29udGVudHMgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxFeHRlbnNpb25zLmV4dHJhRm9vdGVyIC8+XG4gICAgICAgIDxGb290ZXIgLz5cbiAgICAgIDwvTmF2Q29udGV4dFByb3ZpZGVyLlByb3ZpZGVyPlxuICAgIDwvVG9wTGV2ZWxBcHBDb250ZXh0LlByb3ZpZGVyPlxuICApXG59XG5leHBvcnQgZGVmYXVsdCBBcHBcbiJdfQ==