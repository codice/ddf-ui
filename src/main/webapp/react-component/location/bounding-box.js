import { __assign, __read } from "tslib";
import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
/**
 * Copyright (c) Codice Foundation
 *
 * This is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser
 * General Public License as published by the Free Software Foundation, either version 3 of the
 * License, or any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without
 * even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
 * Lesser General Public License for more details. A copy of the GNU Lesser General Public License
 * is distributed along with this program and can be found at
 * <http://www.gnu.org/licenses/lgpl.html>.
 *
 **/
import { useState, useEffect } from 'react';
import { validateGeo, ErrorComponent, initialErrorState, initialErrorStateWithDefault, } from '../utils/validation';
import Group from '../group';
import Label from './label';
import TextField from '../text-field';
import { Radio, RadioItem } from '../radio/radio';
import { Zone, Hemisphere, MinimumSpacing } from './common';
import { DmsLatitude, DmsLongitude, } from '../../component/location-new/geo-components/coordinates';
import DirectionInput from '../../component/location-new/geo-components/direction';
import { Direction } from '../../component/location-new/utils/dms-utils';
var clearValidationResults = function (errorListener) {
    errorListener &&
        errorListener({
            bbox: undefined,
            bboxUL: undefined,
            bboxLR: undefined,
        });
};
var BoundingBoxLatLonDd = function (props) {
    var north = props.north, east = props.east, south = props.south, west = props.west, setState = props.setState, errorListener = props.errorListener;
    var _a = __read(useState(initialErrorStateWithDefault), 2), ddError = _a[0], setDdError = _a[1];
    useEffect(function () {
        if (props.drawing) {
            setDdError(initialErrorStateWithDefault);
        }
        else {
            var validationResults = [
                validateGeo('lon', west),
                validateGeo('lon', east),
                validateGeo('lat', north),
                validateGeo('lat', south),
                validateGeo('bbox', { north: north, south: south, west: west, east: east }),
            ];
            var validationResult = validationResults.find(function (validation) { return validation === null || validation === void 0 ? void 0 : validation.error; });
            // @ts-expect-error ts-migrate(2345) FIXME: Argument of type '{ error: boolean; message: strin... Remove this comment to see the full error message
            setDdError(validationResult || initialErrorStateWithDefault);
            errorListener && errorListener({ bbox: validationResult });
        }
        return function () { return clearValidationResults(errorListener); };
    }, [props.east, props.west, props.south, props.north]);
    function clampDd(key, value) {
        var _a;
        var coordinateType = key.includes('east') || key.includes('west') ? 'lon' : 'lat';
        // @ts-expect-error ts-migrate(2339) FIXME: Property 'error' does not exist on type '{ error: ... Remove this comment to see the full error message
        var defaultValue = validateGeo(coordinateType, value).defaultValue;
        setState((_a = {}, _a[key] = defaultValue || value, _a));
    }
    return (_jsxs("div", { className: "input-location flex flex-col flex-nowrap space-y-2", children: [_jsx(TextField
            // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; value: any; onChange: (valu... Remove this comment to see the full error message
            , { 
                // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; value: any; onChange: (valu... Remove this comment to see the full error message
                label: "West", value: west !== undefined ? String(west) : west, onChange: function (value) { return clampDd('west', value); }, type: "number", step: "any", min: -180, max: 180, addon: "\u00B0" }), _jsx(TextField
            // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; value: any; onChange: (valu... Remove this comment to see the full error message
            , { 
                // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; value: any; onChange: (valu... Remove this comment to see the full error message
                label: "South", value: south !== undefined ? String(south) : south, onChange: function (value) { return clampDd('south', value); }, type: "number", step: "any", min: -90, max: 90, addon: "\u00B0" }), _jsx(TextField
            // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; value: any; onChange: (valu... Remove this comment to see the full error message
            , { 
                // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; value: any; onChange: (valu... Remove this comment to see the full error message
                label: "East", value: east !== undefined ? String(east) : east, onChange: function (value) { return clampDd('east', value); }, type: "number", step: "any", min: -180, max: 180, addon: "\u00B0" }), _jsx(TextField
            // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; value: any; onChange: (valu... Remove this comment to see the full error message
            , { 
                // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; value: any; onChange: (valu... Remove this comment to see the full error message
                label: "North", value: north !== undefined ? String(north) : north, onChange: function (value) { return clampDd('north', value); }, type: "number", step: "any", min: -90, max: 90, addon: "\u00B0" }), _jsx(ErrorComponent, { errorState: ddError })] }));
};
var BoundingBoxLatLonDms = function (props) {
    var dmsSouth = props.dmsSouth, dmsNorth = props.dmsNorth, dmsWest = props.dmsWest, dmsEast = props.dmsEast, dmsSouthDirection = props.dmsSouthDirection, dmsNorthDirection = props.dmsNorthDirection, dmsWestDirection = props.dmsWestDirection, dmsEastDirection = props.dmsEastDirection, setState = props.setState, errorListener = props.errorListener;
    var _a = __read(useState(initialErrorStateWithDefault), 2), dmsError = _a[0], setDmsError = _a[1];
    var latitudeDirections = [Direction.North, Direction.South];
    var longitudeDirections = [Direction.East, Direction.West];
    useEffect(function () {
        if (props.drawing) {
            setDmsError(initialErrorStateWithDefault);
        }
        else {
            var validationResults = [
                validateGeo('dmsLon', dmsWest),
                validateGeo('dmsLon', dmsEast),
                validateGeo('dmsLat', dmsNorth),
                validateGeo('dmsLat', dmsSouth),
                validateGeo('bbox', {
                    isDms: true,
                    dmsNorthDirection: dmsNorthDirection,
                    dmsSouthDirection: dmsSouthDirection,
                    dmsWestDirection: dmsWestDirection,
                    dmsEastDirection: dmsEastDirection,
                    north: dmsNorth,
                    south: dmsSouth,
                    west: dmsWest,
                    east: dmsEast,
                }),
            ];
            var validationResult = validationResults.find(function (validation) { return validation === null || validation === void 0 ? void 0 : validation.error; });
            // @ts-expect-error ts-migrate(2345) FIXME: Argument of type '{ error: boolean; message: strin... Remove this comment to see the full error message
            setDmsError(validationResult || initialErrorStateWithDefault);
            errorListener && errorListener({ bbox: validationResult });
        }
        return function () { return clearValidationResults(errorListener); };
    }, [props.dmsWest, props.dmsSouth, props.dmsEast, props.dmsNorth]);
    function clampDms(key, value) {
        var _a;
        var coordinateType = key.includes('East') || key.includes('West') ? 'dmsLon' : 'dmsLat';
        // @ts-expect-error ts-migrate(2339) FIXME: Property 'error' does not exist on type '{ error: ... Remove this comment to see the full error message
        var defaultValue = validateGeo(coordinateType, value).defaultValue;
        setState((_a = {}, _a[key] = defaultValue || value, _a));
    }
    return (_jsxs("div", { className: "input-location flex flex-col flex-nowrap space-y-2", children: [_jsx(DmsLongitude, { label: "West", value: dmsWest, onChange: function (value) { return clampDms('dmsWest', value); }, children: _jsx(DirectionInput
                // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
                , { 
                    // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
                    options: longitudeDirections, value: dmsWestDirection, onChange: function (value) {
                        var _a;
                        return setState((_a = {}, _a['dmsWestDirection'] = value, _a));
                    } }) }), _jsx(DmsLatitude, { label: "South", value: dmsSouth, onChange: function (value) { return clampDms('dmsSouth', value); }, children: _jsx(DirectionInput
                // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
                , { 
                    // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
                    options: latitudeDirections, value: dmsSouthDirection, onChange: function (value) {
                        var _a;
                        return setState((_a = {}, _a['dmsSouthDirection'] = value, _a));
                    } }) }), _jsx(DmsLongitude, { label: "East", value: dmsEast, onChange: function (value) { return clampDms('dmsEast', value); }, children: _jsx(DirectionInput
                // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
                , { 
                    // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
                    options: longitudeDirections, value: dmsEastDirection, onChange: function (value) {
                        var _a;
                        return setState((_a = {}, _a['dmsEastDirection'] = value, _a));
                    } }) }), _jsx(DmsLatitude, { label: "North", value: dmsNorth, onChange: function (value) { return clampDms('dmsNorth', value); }, children: _jsx(DirectionInput
                // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
                , { 
                    // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.
                    options: latitudeDirections, value: dmsNorthDirection, onChange: function (value) {
                        var _a;
                        return setState((_a = {}, _a['dmsNorthDirection'] = value, _a));
                    } }) }), _jsx(ErrorComponent, { errorState: dmsError })] }));
};
var BoundingBoxUsngMgrs = function (props) {
    var usngbbUpperLeft = props.usngbbUpperLeft, usngbbLowerRight = props.usngbbLowerRight, setState = props.setState, errorListener = props.errorListener;
    var _a = __read(useState(initialErrorState), 2), usngError = _a[0], setUsngError = _a[1];
    useEffect(function () {
        if (props.drawing) {
            setUsngError(initialErrorState);
        }
        else {
            var validationResult = [
                validateGeo('usng', usngbbUpperLeft),
                validateGeo('usng', usngbbLowerRight),
                validateGeo('bbox', {
                    isUsng: true,
                    upperLeft: usngbbUpperLeft,
                    lowerRight: usngbbLowerRight,
                }),
            ].find(function (validation) { return validation === null || validation === void 0 ? void 0 : validation.error; });
            // @ts-expect-error ts-migrate(2345) FIXME: Argument of type '{ error: boolean; message: strin... Remove this comment to see the full error message
            setUsngError(validationResult || initialErrorState);
            errorListener && errorListener({ bbox: validationResult });
        }
        return function () { return clearValidationResults(errorListener); };
    }, [props.usngbbUpperLeft, props.usngbbLowerRight]);
    return (_jsxs("div", { className: "input-location flex flex-col flex-nowrap space-y-2", children: [_jsx(TextField
            // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; style: { minWidth: number; ... Remove this comment to see the full error message
            , { 
                // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; style: { minWidth: number; ... Remove this comment to see the full error message
                label: "Upper Left", style: { minWidth: 200 }, value: usngbbUpperLeft, onChange: function (value) {
                    var _a;
                    return setState((_a = {}, _a['usngbbUpperLeft'] = value, _a));
                } }), _jsx(TextField
            // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; style: { minWidth: number; ... Remove this comment to see the full error message
            , { 
                // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; style: { minWidth: number; ... Remove this comment to see the full error message
                label: "Lower Right", style: { minWidth: 200 }, value: usngbbLowerRight, onChange: function (value) {
                    var _a;
                    return setState((_a = {}, _a['usngbbLowerRight'] = value, _a));
                } }), _jsx(ErrorComponent, { errorState: usngError })] }));
};
var BoundingBoxUtmUps = function (props) {
    var utmUpsUpperLeftEasting = props.utmUpsUpperLeftEasting, utmUpsUpperLeftNorthing = props.utmUpsUpperLeftNorthing, utmUpsUpperLeftZone = props.utmUpsUpperLeftZone, utmUpsUpperLeftHemisphere = props.utmUpsUpperLeftHemisphere, utmUpsLowerRightEasting = props.utmUpsLowerRightEasting, utmUpsLowerRightNorthing = props.utmUpsLowerRightNorthing, utmUpsLowerRightZone = props.utmUpsLowerRightZone, utmUpsLowerRightHemisphere = props.utmUpsLowerRightHemisphere, setState = props.setState, errorListener = props.errorListener;
    var upperLeft = {
        easting: utmUpsUpperLeftEasting,
        northing: utmUpsUpperLeftNorthing,
        zoneNumber: utmUpsUpperLeftZone,
        hemisphere: utmUpsUpperLeftHemisphere,
    };
    var lowerRight = {
        easting: utmUpsLowerRightEasting,
        northing: utmUpsLowerRightNorthing,
        zoneNumber: utmUpsLowerRightZone,
        hemisphere: utmUpsLowerRightHemisphere,
    };
    var _a = __read(useState(initialErrorState), 2), upperLeftError = _a[0], setUpperLeftError = _a[1];
    var _b = __read(useState(initialErrorState), 2), lowerRightError = _b[0], setLowerRightError = _b[1];
    useEffect(function () {
        if (props.drawing) {
            setUpperLeftError(initialErrorState);
            setLowerRightError(initialErrorState);
        }
        else {
            var upperLeftValidationResult = [
                validateGeo('easting', upperLeft),
                validateGeo('northing', upperLeft),
                validateGeo('zoneNumber', upperLeft),
                validateGeo('hemisphere', upperLeft),
            ].find(function (validation) { return validation === null || validation === void 0 ? void 0 : validation.error; });
            // @ts-expect-error ts-migrate(2345) FIXME: Argument of type '{ error: boolean; message: strin... Remove this comment to see the full error message
            setUpperLeftError(upperLeftValidationResult || initialErrorState);
            var lowerRightValidationResult = [
                validateGeo('easting', lowerRight),
                validateGeo('northing', lowerRight),
                validateGeo('zoneNumber', lowerRight),
                validateGeo('hemisphere', lowerRight),
                validateGeo('bbox', { isUtmUps: true, upperLeft: upperLeft, lowerRight: lowerRight }),
            ].find(function (validation) { return validation === null || validation === void 0 ? void 0 : validation.error; });
            // @ts-expect-error ts-migrate(2345) FIXME: Argument of type '{ error: boolean; message: strin... Remove this comment to see the full error message
            setLowerRightError(lowerRightValidationResult || initialErrorState);
            errorListener &&
                errorListener({
                    bboxUL: upperLeftValidationResult,
                    bboxLR: lowerRightValidationResult,
                });
        }
        return function () { return clearValidationResults(errorListener); };
    }, [
        props.utmUpsUpperLeftEasting,
        props.utmUpsUpperLeftNorthing,
        props.utmUpsUpperLeftZone,
        props.utmUpsUpperLeftHemisphere,
        props.utmUpsLowerRightEasting,
        props.utmUpsLowerRightNorthing,
        props.utmUpsLowerRightZone,
        props.utmUpsLowerRightHemisphere,
    ]);
    return (_jsxs("div", { children: [_jsxs("div", { className: "input-location mb-2", children: [_jsxs(Group, { children: [_jsx(Label, { children: "Upper Left" }), _jsxs("div", { className: "flex flex-col space-y-2", children: [_jsx(TextField
                                    // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; value: any; onChange: (valu... Remove this comment to see the full error message
                                    , { 
                                        // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; value: any; onChange: (valu... Remove this comment to see the full error message
                                        label: "Easting", value: utmUpsUpperLeftEasting !== undefined
                                            ? String(utmUpsUpperLeftEasting)
                                            : utmUpsUpperLeftEasting, onChange: function (value) {
                                            var _a;
                                            return setState((_a = {}, _a['utmUpsUpperLeftEasting'] = value, _a));
                                        }, addon: "m" }), _jsx(TextField
                                    // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; value: any; onChange: (valu... Remove this comment to see the full error message
                                    , { 
                                        // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; value: any; onChange: (valu... Remove this comment to see the full error message
                                        label: "Northing", value: utmUpsUpperLeftNorthing !== undefined
                                            ? String(utmUpsUpperLeftNorthing)
                                            : utmUpsUpperLeftNorthing, onChange: function (value) {
                                            var _a;
                                            return setState((_a = {}, _a['utmUpsUpperLeftNorthing'] = value, _a));
                                        }, addon: "m" }), _jsx(Zone, { value: utmUpsUpperLeftZone, onChange: function (value) {
                                            var _a;
                                            return setState((_a = {}, _a['utmUpsUpperLeftZone'] = value, _a));
                                        } }), _jsx(Hemisphere, { value: utmUpsUpperLeftHemisphere, onChange: function (value) {
                                            var _a;
                                            return setState((_a = {}, _a['utmUpsUpperLeftHemisphere'] = value, _a));
                                        } })] })] }), _jsx(ErrorComponent, { errorState: upperLeftError })] }), _jsxs("div", { className: "input-location", children: [_jsxs(Group, { children: [_jsx(Label, { children: "Lower Right" }), _jsxs("div", { className: "flex flex-col space-y-2", children: [_jsx(TextField
                                    // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; value: any; onChange: (valu... Remove this comment to see the full error message
                                    , { 
                                        // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; value: any; onChange: (valu... Remove this comment to see the full error message
                                        label: "Easting", value: utmUpsLowerRightEasting !== undefined
                                            ? String(utmUpsLowerRightEasting)
                                            : utmUpsLowerRightEasting, onChange: function (value) {
                                            var _a;
                                            return setState((_a = {}, _a['utmUpsLowerRightEasting'] = value, _a));
                                        }, addon: "m" }), _jsx(TextField
                                    // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; value: any; onChange: (valu... Remove this comment to see the full error message
                                    , { 
                                        // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; value: any; onChange: (valu... Remove this comment to see the full error message
                                        label: "Northing", value: utmUpsLowerRightNorthing !== undefined
                                            ? String(utmUpsLowerRightNorthing)
                                            : utmUpsLowerRightNorthing, onChange: function (value) {
                                            var _a;
                                            return setState((_a = {}, _a['utmUpsLowerRightNorthing'] = value, _a));
                                        }, addon: "m" }), _jsx(Zone, { value: utmUpsLowerRightZone, onChange: function (value) {
                                            var _a;
                                            return setState((_a = {}, _a['utmUpsLowerRightZone'] = value, _a));
                                        } }), _jsx(Hemisphere, { value: utmUpsLowerRightHemisphere, onChange: function (value) {
                                            var _a;
                                            return setState((_a = {}, _a['utmUpsLowerRightHemisphere'] = value, _a));
                                        } })] })] }), _jsx(ErrorComponent, { errorState: lowerRightError })] })] }));
};
var BoundingBox = function (props) {
    var setState = props.setState, locationType = props.locationType;
    var inputs = {
        dd: BoundingBoxLatLonDd,
        dms: BoundingBoxLatLonDms,
        usng: BoundingBoxUsngMgrs,
        utmUps: BoundingBoxUtmUps,
    };
    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message
    var Component = inputs[locationType] || null;
    return (_jsxs("div", { children: [_jsxs(Radio, { value: locationType, onChange: function (value) {
                    var _a;
                    return setState((_a = {}, _a['locationType'] = value, _a));
                }, children: [_jsx(RadioItem, { value: "dd", children: "Lat/Lon (DD)" }), _jsx(RadioItem, { value: "dms", children: "Lat/Lon (DMS)" }), _jsx(RadioItem, { value: "usng", children: "USNG / MGRS" }), _jsx(RadioItem, { value: "utmUps", children: "UTM / UPS" })] }), _jsx(MinimumSpacing, {}), Component !== null ? _jsx(Component, __assign({}, props)) : null] }));
};
export default BoundingBox;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYm91bmRpbmctYm94LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL21haW4vd2ViYXBwL3JlYWN0LWNvbXBvbmVudC9sb2NhdGlvbi9ib3VuZGluZy1ib3gudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7Ozs7Ozs7Ozs7SUFhSTtBQUNKLE9BQU8sRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLE1BQU0sT0FBTyxDQUFBO0FBQzNDLE9BQU8sRUFDTCxXQUFXLEVBQ1gsY0FBYyxFQUNkLGlCQUFpQixFQUNqQiw0QkFBNEIsR0FDN0IsTUFBTSxxQkFBcUIsQ0FBQTtBQUM1QixPQUFPLEtBQUssTUFBTSxVQUFVLENBQUE7QUFDNUIsT0FBTyxLQUFLLE1BQU0sU0FBUyxDQUFBO0FBQzNCLE9BQU8sU0FBUyxNQUFNLGVBQWUsQ0FBQTtBQUNyQyxPQUFPLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFBO0FBQ2pELE9BQU8sRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLGNBQWMsRUFBRSxNQUFNLFVBQVUsQ0FBQTtBQUMzRCxPQUFPLEVBQ0wsV0FBVyxFQUNYLFlBQVksR0FDYixNQUFNLHlEQUF5RCxDQUFBO0FBQ2hFLE9BQU8sY0FBYyxNQUFNLHVEQUF1RCxDQUFBO0FBQ2xGLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSw4Q0FBOEMsQ0FBQTtBQUV4RSxJQUFNLHNCQUFzQixHQUFHLFVBQUMsYUFBbUI7SUFDakQsYUFBYTtRQUNYLGFBQWEsQ0FBQztZQUNaLElBQUksRUFBRSxTQUFTO1lBQ2YsTUFBTSxFQUFFLFNBQVM7WUFDakIsTUFBTSxFQUFFLFNBQVM7U0FDbEIsQ0FBQyxDQUFBO0FBQ04sQ0FBQyxDQUFBO0FBRUQsSUFBTSxtQkFBbUIsR0FBRyxVQUFDLEtBQVU7SUFDN0IsSUFBQSxLQUFLLEdBQWlELEtBQUssTUFBdEQsRUFBRSxJQUFJLEdBQTJDLEtBQUssS0FBaEQs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O0lBRTlDLE9BQU8sQ0FDTCwwQkFDRSxNQUFDLEtBQUssSUFDSixLQUFLLEVBQUUsWUFBWSxFQUNuQixRQUFRLEVBQUUsVUFBQyxLQUFVOztvQkFBSyxPQUFBLFFBQVEsV0FBRyxHQUFDLGNBQWMsSUFBRyxLQUFLLE1BQUc7Z0JBQXJDLENBQXFDLGFBRS9ELEtBQUMsU0FBUyxJQUFDLEtBQUssRUFBQyxJQUFJLDZCQUF5QixFQUM5QyxLQUFDLFNBQVMsSUFBQyxLQUFLLEVBQUMsS0FBSyw4QkFBMEIsRUFDaEQsS0FBQyxTQUFTLElBQUMsS0FBSyxFQUFDLE1BQU0sNEJBQXdCLEVBQy9DLEtBQUMsU0FBUyxJQUFDLEtBQUssRUFBQyxRQUFRLDBCQUFzQixJQUN6QyxFQUNSLEtBQUMsY0FBYyxLQUFHLEVBQ2pCLFNBQVMsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUMsU0FBUyxlQUFLLEtBQUssRUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQ2pELENBQ1AsQ0FBQTtBQUNILENBQUMsQ0FBQTtBQUVELGVBQWUsV0FBVyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIENvZGljZSBGb3VuZGF0aW9uXG4gKlxuICogVGhpcyBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIExlc3NlclxuICogR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGVcbiAqIExpY2Vuc2UsIG9yIGFueSBsYXRlciB2ZXJzaW9uLlxuICpcbiAqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLCBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXRcbiAqIGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlIEdOVVxuICogTGVzc2VyIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4gQSBjb3B5IG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAqIGlzIGRpc3RyaWJ1dGVkIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtIGFuZCBjYW4gYmUgZm91bmQgYXRcbiAqIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvbGdwbC5odG1sPi5cbiAqXG4gKiovXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQge1xuICB2YWxpZGF0ZUdlbyxcbiAgRXJyb3JDb21wb25lbnQsXG4gIGluaXRpYWxFcnJvclN0YXRlLFxuICBpbml0aWFsRXJyb3JTdGF0ZVdpdGhEZWZhdWx0LFxufSBmcm9tICcuLi91dGlscy92YWxpZGF0aW9uJ1xuaW1wb3J0IEdyb3VwIGZyb20gJy4uL2dyb3VwJ1xuaW1wb3J0IExhYmVsIGZyb20gJy4vbGFiZWwnXG5pbXBvcnQgVGV4dEZpZWxkIGZyb20gJy4uL3RleHQtZmllbGQnXG5pbXBvcnQgeyBSYWRpbywgUmFkaW9JdGVtIH0gZnJvbSAnLi4vcmFkaW8vcmFkaW8nXG5pbXBvcnQgeyBab25lLCBIZW1pc3BoZXJlLCBNaW5pbXVtU3BhY2luZyB9IGZyb20gJy4vY29tbW9uJ1xuaW1wb3J0IHtcbiAgRG1zTGF0aXR1ZGUsXG4gIERtc0xvbmdpdHVkZSxcbn0gZnJvbSAnLi4vLi4vY29tcG9uZW50L2xvY2F0aW9uLW5ldy9nZW8tY29tcG9uZW50cy9jb29yZGluYXRlcydcbmltcG9ydCBEaXJlY3Rpb25JbnB1dCBmcm9tICcuLi8uLi9jb21wb25lbnQvbG9jYXRpb24tbmV3L2dlby1jb21wb25lbnRzL2RpcmVjdGlvbidcbmltcG9ydCB7IERpcmVjdGlvbiB9IGZyb20gJy4uLy4uL2NvbXBvbmVudC9sb2NhdGlvbi1uZXcvdXRpbHMvZG1zLXV0aWxzJ1xuXG5jb25zdCBjbGVhclZhbGlkYXRpb25SZXN1bHRzID0gKGVycm9yTGlzdGVuZXI/OiBhbnkpID0+IHtcbiAgZXJyb3JMaXN0ZW5lciAmJlxuICAgIGVycm9yTGlzdGVuZXIoe1xuICAgICAgYmJveDogdW5kZWZpbmVkLFxuICAgICAgYmJveFVMOiB1bmRlZmluZWQsXG4gICAgICBiYm94TFI6IHVuZGVmaW5lZCxcbiAgICB9KVxufVxuXG5jb25zdCBCb3VuZGluZ0JveExhdExvbkRkID0gKHByb3BzOiBhbnkpID0+IHtcbiAgY29uc3QgeyBub3J0aCwgZWFzdCwgc291dGgsIHdlc3QsIHNldFN0YXRlLCBlcnJvckxpc3RlbmVyIH0gPSBwcm9wc1xuICBjb25zdCBbZGRFcnJvciwgc2V0RGRFcnJvcl0gPSB1c2VTdGF0ZShpbml0aWFsRXJyb3JTdGF0ZVdpdGhEZWZhdWx0KVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHByb3BzLmRyYXdpbmcpIHtcbiAgICAgIHNldERkRXJyb3IoaW5pdGlhbEVycm9yU3RhdGVXaXRoRGVmYXVsdClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdmFsaWRhdGlvblJlc3VsdHMgPSBbXG4gICAgICAgIHZhbGlkYXRlR2VvKCdsb24nLCB3ZXN0KSxcbiAgICAgICAgdmFsaWRhdGVHZW8oJ2xvbicsIGVhc3QpLFxuICAgICAgICB2YWxpZGF0ZUdlbygnbGF0Jywgbm9ydGgpLFxuICAgICAgICB2YWxpZGF0ZUdlbygnbGF0Jywgc291dGgpLFxuICAgICAgICB2YWxpZGF0ZUdlbygnYmJveCcsIHsgbm9ydGgsIHNvdXRoLCB3ZXN0LCBlYXN0IH0pLFxuICAgICAgXVxuICAgICAgY29uc3QgdmFsaWRhdGlvblJlc3VsdCA9IHZhbGlkYXRpb25SZXN1bHRzLmZpbmQoXG4gICAgICAgICh2YWxpZGF0aW9uKSA9PiB2YWxpZGF0aW9uPy5lcnJvclxuICAgICAgKVxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciB0cy1taWdyYXRlKDIzNDUpIEZJWE1FOiBBcmd1bWVudCBvZiB0eXBlICd7IGVycm9yOiBib29sZWFuOyBtZXNzYWdlOiBzdHJpbi4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICBzZXREZEVycm9yKHZhbGlkYXRpb25SZXN1bHQgfHwgaW5pdGlhbEVycm9yU3RhdGVXaXRoRGVmYXVsdClcbiAgICAgIGVycm9yTGlzdGVuZXIgJiYgZXJyb3JMaXN0ZW5lcih7IGJib3g6IHZhbGlkYXRpb25SZXN1bHQgfSlcbiAgICB9XG4gICAgcmV0dXJuICgpID0+IGNsZWFyVmFsaWRhdGlvblJlc3VsdHMoZXJyb3JMaXN0ZW5lcilcbiAgfSwgW3Byb3BzLmVhc3QsIHByb3BzLndlc3QsIHByb3BzLnNvdXRoLCBwcm9wcy5ub3J0aF0pXG5cbiAgZnVuY3Rpb24gY2xhbXBEZChrZXk6IGFueSwgdmFsdWU6IGFueSkge1xuICAgIGNvbnN0IGNvb3JkaW5hdGVUeXBlID1cbiAgICAgIGtleS5pbmNsdWRlcygnZWFzdCcpIHx8IGtleS5pbmNsdWRlcygnd2VzdCcpID8gJ2xvbicgOiAnbGF0J1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgdHMtbWlncmF0ZSgyMzM5KSBGSVhNRTogUHJvcGVydHkgJ2Vycm9yJyBkb2VzIG5vdCBleGlzdCBvbiB0eXBlICd7IGVycm9yOiAuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgIGNvbnN0IHsgZGVmYXVsdFZhbHVlIH0gPSB2YWxpZGF0ZUdlbyhjb29yZGluYXRlVHlwZSwgdmFsdWUpXG4gICAgc2V0U3RhdGUoeyBba2V5XTogZGVmYXVsdFZhbHVlIHx8IHZhbHVlIH0pXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5wdXQtbG9jYXRpb24gZmxleCBmbGV4LWNvbCBmbGV4LW5vd3JhcCBzcGFjZS15LTJcIj5cbiAgICAgIDxUZXh0RmllbGRcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciB0cy1taWdyYXRlKDIzMjIpIEZJWE1FOiBUeXBlICd7IGxhYmVsOiBzdHJpbmc7IHZhbHVlOiBhbnk7IG9uQ2hhbmdlOiAodmFsdS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgIGxhYmVsPVwiV2VzdFwiXG4gICAgICAgIHZhbHVlPXt3ZXN0ICE9PSB1bmRlZmluZWQgPyBTdHJpbmcod2VzdCkgOiB3ZXN0fVxuICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiBjbGFtcERkKCd3ZXN0JywgdmFsdWUpfVxuICAgICAgICB0eXBlPVwibnVtYmVyXCJcbiAgICAgICAgc3RlcD1cImFueVwiXG4gICAgICAgIG1pbj17LTE4MH1cbiAgICAgICAgbWF4PXsxODB9XG4gICAgICAgIGFkZG9uPVwiwrBcIlxuICAgICAgLz5cbiAgICAgIDxUZXh0RmllbGRcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciB0cy1taWdyYXRlKDIzMjIpIEZJWE1FOiBUeXBlICd7IGxhYmVsOiBzdHJpbmc7IHZhbHVlOiBhbnk7IG9uQ2hhbmdlOiAodmFsdS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgIGxhYmVsPVwiU291dGhcIlxuICAgICAgICB2YWx1ZT17c291dGggIT09IHVuZGVmaW5lZCA/IFN0cmluZyhzb3V0aCkgOiBzb3V0aH1cbiAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4gY2xhbXBEZCgnc291dGgnLCB2YWx1ZSl9XG4gICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICBzdGVwPVwiYW55XCJcbiAgICAgICAgbWluPXstOTB9XG4gICAgICAgIG1heD17OTB9XG4gICAgICAgIGFkZG9uPVwiwrBcIlxuICAgICAgLz5cbiAgICAgIDxUZXh0RmllbGRcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciB0cy1taWdyYXRlKDIzMjIpIEZJWE1FOiBUeXBlICd7IGxhYmVsOiBzdHJpbmc7IHZhbHVlOiBhbnk7IG9uQ2hhbmdlOiAodmFsdS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgIGxhYmVsPVwiRWFzdFwiXG4gICAgICAgIHZhbHVlPXtlYXN0ICE9PSB1bmRlZmluZWQgPyBTdHJpbmcoZWFzdCkgOiBlYXN0fVxuICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiBjbGFtcERkKCdlYXN0JywgdmFsdWUpfVxuICAgICAgICB0eXBlPVwibnVtYmVyXCJcbiAgICAgICAgc3RlcD1cImFueVwiXG4gICAgICAgIG1pbj17LTE4MH1cbiAgICAgICAgbWF4PXsxODB9XG4gICAgICAgIGFkZG9uPVwiwrBcIlxuICAgICAgLz5cbiAgICAgIDxUZXh0RmllbGRcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciB0cy1taWdyYXRlKDIzMjIpIEZJWE1FOiBUeXBlICd7IGxhYmVsOiBzdHJpbmc7IHZhbHVlOiBhbnk7IG9uQ2hhbmdlOiAodmFsdS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgIGxhYmVsPVwiTm9ydGhcIlxuICAgICAgICB2YWx1ZT17bm9ydGggIT09IHVuZGVmaW5lZCA/IFN0cmluZyhub3J0aCkgOiBub3J0aH1cbiAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4gY2xhbXBEZCgnbm9ydGgnLCB2YWx1ZSl9XG4gICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICBzdGVwPVwiYW55XCJcbiAgICAgICAgbWluPXstOTB9XG4gICAgICAgIG1heD17OTB9XG4gICAgICAgIGFkZG9uPVwiwrBcIlxuICAgICAgLz5cbiAgICAgIDxFcnJvckNvbXBvbmVudCBlcnJvclN0YXRlPXtkZEVycm9yfSAvPlxuICAgIDwvZGl2PlxuICApXG59XG5cbmNvbnN0IEJvdW5kaW5nQm94TGF0TG9uRG1zID0gKHByb3BzOiBhbnkpID0+IHtcbiAgY29uc3Qge1xuICAgIGRtc1NvdXRoLFxuICAgIGRtc05vcnRoLFxuICAgIGRtc1dlc3QsXG4gICAgZG1zRWFzdCxcbiAgICBkbXNTb3V0aERpcmVjdGlvbixcbiAgICBkbXNOb3J0aERpcmVjdGlvbixcbiAgICBkbXNXZXN0RGlyZWN0aW9uLFxuICAgIGRtc0Vhc3REaXJlY3Rpb24sXG4gICAgc2V0U3RhdGUsXG4gICAgZXJyb3JMaXN0ZW5lcixcbiAgfSA9IHByb3BzXG4gIGNvbnN0IFtkbXNFcnJvciwgc2V0RG1zRXJyb3JdID0gdXNlU3RhdGUoaW5pdGlhbEVycm9yU3RhdGVXaXRoRGVmYXVsdClcbiAgY29uc3QgbGF0aXR1ZGVEaXJlY3Rpb25zID0gW0RpcmVjdGlvbi5Ob3J0aCwgRGlyZWN0aW9uLlNvdXRoXVxuICBjb25zdCBsb25naXR1ZGVEaXJlY3Rpb25zID0gW0RpcmVjdGlvbi5FYXN0LCBEaXJlY3Rpb24uV2VzdF1cblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChwcm9wcy5kcmF3aW5nKSB7XG4gICAgICBzZXREbXNFcnJvcihpbml0aWFsRXJyb3JTdGF0ZVdpdGhEZWZhdWx0KVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB2YWxpZGF0aW9uUmVzdWx0cyA9IFtcbiAgICAgICAgdmFsaWRhdGVHZW8oJ2Rtc0xvbicsIGRtc1dlc3QpLFxuICAgICAgICB2YWxpZGF0ZUdlbygnZG1zTG9uJywgZG1zRWFzdCksXG4gICAgICAgIHZhbGlkYXRlR2VvKCdkbXNMYXQnLCBkbXNOb3J0aCksXG4gICAgICAgIHZhbGlkYXRlR2VvKCdkbXNMYXQnLCBkbXNTb3V0aCksXG4gICAgICAgIHZhbGlkYXRlR2VvKCdiYm94Jywge1xuICAgICAgICAgIGlzRG1zOiB0cnVlLFxuICAgICAgICAgIGRtc05vcnRoRGlyZWN0aW9uLFxuICAgICAgICAgIGRtc1NvdXRoRGlyZWN0aW9uLFxuICAgICAgICAgIGRtc1dlc3REaXJlY3Rpb24sXG4gICAgICAgICAgZG1zRWFzdERpcmVjdGlvbixcbiAgICAgICAgICBub3J0aDogZG1zTm9ydGgsXG4gICAgICAgICAgc291dGg6IGRtc1NvdXRoLFxuICAgICAgICAgIHdlc3Q6IGRtc1dlc3QsXG4gICAgICAgICAgZWFzdDogZG1zRWFzdCxcbiAgICAgICAgfSksXG4gICAgICBdXG4gICAgICBjb25zdCB2YWxpZGF0aW9uUmVzdWx0ID0gdmFsaWRhdGlvblJlc3VsdHMuZmluZChcbiAgICAgICAgKHZhbGlkYXRpb24pID0+IHZhbGlkYXRpb24/LmVycm9yXG4gICAgICApXG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHRzLW1pZ3JhdGUoMjM0NSkgRklYTUU6IEFyZ3VtZW50IG9mIHR5cGUgJ3sgZXJyb3I6IGJvb2xlYW47IG1lc3NhZ2U6IHN0cmluLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgIHNldERtc0Vycm9yKHZhbGlkYXRpb25SZXN1bHQgfHwgaW5pdGlhbEVycm9yU3RhdGVXaXRoRGVmYXVsdClcbiAgICAgIGVycm9yTGlzdGVuZXIgJiYgZXJyb3JMaXN0ZW5lcih7IGJib3g6IHZhbGlkYXRpb25SZXN1bHQgfSlcbiAgICB9XG4gICAgcmV0dXJuICgpID0+IGNsZWFyVmFsaWRhdGlvblJlc3VsdHMoZXJyb3JMaXN0ZW5lcilcbiAgfSwgW3Byb3BzLmRtc1dlc3QsIHByb3BzLmRtc1NvdXRoLCBwcm9wcy5kbXNFYXN0LCBwcm9wcy5kbXNOb3J0aF0pXG5cbiAgZnVuY3Rpb24gY2xhbXBEbXMoa2V5OiBhbnksIHZhbHVlOiBhbnkpIHtcbiAgICBjb25zdCBjb29yZGluYXRlVHlwZSA9XG4gICAgICBrZXkuaW5jbHVkZXMoJ0Vhc3QnKSB8fCBrZXkuaW5jbHVkZXMoJ1dlc3QnKSA/ICdkbXNMb24nIDogJ2Rtc0xhdCdcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHRzLW1pZ3JhdGUoMjMzOSkgRklYTUU6IFByb3BlcnR5ICdlcnJvcicgZG9lcyBub3QgZXhpc3Qgb24gdHlwZSAneyBlcnJvcjogLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICBjb25zdCB7IGRlZmF1bHRWYWx1ZSB9ID0gdmFsaWRhdGVHZW8oY29vcmRpbmF0ZVR5cGUsIHZhbHVlKVxuICAgIHNldFN0YXRlKHsgW2tleV06IGRlZmF1bHRWYWx1ZSB8fCB2YWx1ZSB9KVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImlucHV0LWxvY2F0aW9uIGZsZXggZmxleC1jb2wgZmxleC1ub3dyYXAgc3BhY2UteS0yXCI+XG4gICAgICA8RG1zTG9uZ2l0dWRlXG4gICAgICAgIGxhYmVsPVwiV2VzdFwiXG4gICAgICAgIHZhbHVlPXtkbXNXZXN0fVxuICAgICAgICBvbkNoYW5nZT17KHZhbHVlOiBhbnkpID0+IGNsYW1wRG1zKCdkbXNXZXN0JywgdmFsdWUpfVxuICAgICAgPlxuICAgICAgICA8RGlyZWN0aW9uSW5wdXRcbiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHRzLW1pZ3JhdGUoMjc2OSkgRklYTUU6IE5vIG92ZXJsb2FkIG1hdGNoZXMgdGhpcyBjYWxsLlxuICAgICAgICAgIG9wdGlvbnM9e2xvbmdpdHVkZURpcmVjdGlvbnN9XG4gICAgICAgICAgdmFsdWU9e2Rtc1dlc3REaXJlY3Rpb259XG4gICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZTogYW55KSA9PiBzZXRTdGF0ZSh7IFsnZG1zV2VzdERpcmVjdGlvbiddOiB2YWx1ZSB9KX1cbiAgICAgICAgLz5cbiAgICAgIDwvRG1zTG9uZ2l0dWRlPlxuICAgICAgPERtc0xhdGl0dWRlXG4gICAgICAgIGxhYmVsPVwiU291dGhcIlxuICAgICAgICB2YWx1ZT17ZG1zU291dGh9XG4gICAgICAgIG9uQ2hhbmdlPXsodmFsdWU6IGFueSkgPT4gY2xhbXBEbXMoJ2Rtc1NvdXRoJywgdmFsdWUpfVxuICAgICAgPlxuICAgICAgICA8RGlyZWN0aW9uSW5wdXRcbiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHRzLW1pZ3JhdGUoMjc2OSkgRklYTUU6IE5vIG92ZXJsb2FkIG1hdGNoZXMgdGhpcyBjYWxsLlxuICAgICAgICAgIG9wdGlvbnM9e2xhdGl0dWRlRGlyZWN0aW9uc31cbiAgICAgICAgICB2YWx1ZT17ZG1zU291dGhEaXJlY3Rpb259XG4gICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZTogYW55KSA9PiBzZXRTdGF0ZSh7IFsnZG1zU291dGhEaXJlY3Rpb24nXTogdmFsdWUgfSl9XG4gICAgICAgIC8+XG4gICAgICA8L0Rtc0xhdGl0dWRlPlxuICAgICAgPERtc0xvbmdpdHVkZVxuICAgICAgICBsYWJlbD1cIkVhc3RcIlxuICAgICAgICB2YWx1ZT17ZG1zRWFzdH1cbiAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZTogYW55KSA9PiBjbGFtcERtcygnZG1zRWFzdCcsIHZhbHVlKX1cbiAgICAgID5cbiAgICAgICAgPERpcmVjdGlvbklucHV0XG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciB0cy1taWdyYXRlKDI3NjkpIEZJWE1FOiBObyBvdmVybG9hZCBtYXRjaGVzIHRoaXMgY2FsbC5cbiAgICAgICAgICBvcHRpb25zPXtsb25naXR1ZGVEaXJlY3Rpb25zfVxuICAgICAgICAgIHZhbHVlPXtkbXNFYXN0RGlyZWN0aW9ufVxuICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWU6IGFueSkgPT4gc2V0U3RhdGUoeyBbJ2Rtc0Vhc3REaXJlY3Rpb24nXTogdmFsdWUgfSl9XG4gICAgICAgIC8+XG4gICAgICA8L0Rtc0xvbmdpdHVkZT5cbiAgICAgIDxEbXNMYXRpdHVkZVxuICAgICAgICBsYWJlbD1cIk5vcnRoXCJcbiAgICAgICAgdmFsdWU9e2Rtc05vcnRofVxuICAgICAgICBvbkNoYW5nZT17KHZhbHVlOiBhbnkpID0+IGNsYW1wRG1zKCdkbXNOb3J0aCcsIHZhbHVlKX1cbiAgICAgID5cbiAgICAgICAgPERpcmVjdGlvbklucHV0XG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciB0cy1taWdyYXRlKDI3NjkpIEZJWE1FOiBObyBvdmVybG9hZCBtYXRjaGVzIHRoaXMgY2FsbC5cbiAgICAgICAgICBvcHRpb25zPXtsYXRpdHVkZURpcmVjdGlvbnN9XG4gICAgICAgICAgdmFsdWU9e2Rtc05vcnRoRGlyZWN0aW9ufVxuICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWU6IGFueSkgPT4gc2V0U3RhdGUoeyBbJ2Rtc05vcnRoRGlyZWN0aW9uJ106IHZhbHVlIH0pfVxuICAgICAgICAvPlxuICAgICAgPC9EbXNMYXRpdHVkZT5cbiAgICAgIDxFcnJvckNvbXBvbmVudCBlcnJvclN0YXRlPXtkbXNFcnJvcn0gLz5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5jb25zdCBCb3VuZGluZ0JveFVzbmdNZ3JzID0gKHByb3BzOiBhbnkpID0+IHtcbiAgY29uc3QgeyB1c25nYmJVcHBlckxlZnQsIHVzbmdiYkxvd2VyUmlnaHQsIHNldFN0YXRlLCBlcnJvckxpc3RlbmVyIH0gPSBwcm9wc1xuICBjb25zdCBbdXNuZ0Vycm9yLCBzZXRVc25nRXJyb3JdID0gdXNlU3RhdGUoaW5pdGlhbEVycm9yU3RhdGUpXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAocHJvcHMuZHJhd2luZykge1xuICAgICAgc2V0VXNuZ0Vycm9yKGluaXRpYWxFcnJvclN0YXRlKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB2YWxpZGF0aW9uUmVzdWx0ID0gW1xuICAgICAgICB2YWxpZGF0ZUdlbygndXNuZycsIHVzbmdiYlVwcGVyTGVmdCksXG4gICAgICAgIHZhbGlkYXRlR2VvKCd1c25nJywgdXNuZ2JiTG93ZXJSaWdodCksXG4gICAgICAgIHZhbGlkYXRlR2VvKCdiYm94Jywge1xuICAgICAgICAgIGlzVXNuZzogdHJ1ZSxcbiAgICAgICAgICB1cHBlckxlZnQ6IHVzbmdiYlVwcGVyTGVmdCxcbiAgICAgICAgICBsb3dlclJpZ2h0OiB1c25nYmJMb3dlclJpZ2h0LFxuICAgICAgICB9KSxcbiAgICAgIF0uZmluZCgodmFsaWRhdGlvbikgPT4gdmFsaWRhdGlvbj8uZXJyb3IpXG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHRzLW1pZ3JhdGUoMjM0NSkgRklYTUU6IEFyZ3VtZW50IG9mIHR5cGUgJ3sgZXJyb3I6IGJvb2xlYW47IG1lc3NhZ2U6IHN0cmluLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgIHNldFVzbmdFcnJvcih2YWxpZGF0aW9uUmVzdWx0IHx8IGluaXRpYWxFcnJvclN0YXRlKVxuICAgICAgZXJyb3JMaXN0ZW5lciAmJiBlcnJvckxpc3RlbmVyKHsgYmJveDogdmFsaWRhdGlvblJlc3VsdCB9KVxuICAgIH1cbiAgICByZXR1cm4gKCkgPT4gY2xlYXJWYWxpZGF0aW9uUmVzdWx0cyhlcnJvckxpc3RlbmVyKVxuICB9LCBbcHJvcHMudXNuZ2JiVXBwZXJMZWZ0LCBwcm9wcy51c25nYmJMb3dlclJpZ2h0XSlcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5wdXQtbG9jYXRpb24gZmxleCBmbGV4LWNvbCBmbGV4LW5vd3JhcCBzcGFjZS15LTJcIj5cbiAgICAgIDxUZXh0RmllbGRcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciB0cy1taWdyYXRlKDIzMjIpIEZJWE1FOiBUeXBlICd7IGxhYmVsOiBzdHJpbmc7IHN0eWxlOiB7IG1pbldpZHRoOiBudW1iZXI7IC4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgIGxhYmVsPVwiVXBwZXIgTGVmdFwiXG4gICAgICAgIHN0eWxlPXt7IG1pbldpZHRoOiAyMDAgfX1cbiAgICAgICAgdmFsdWU9e3VzbmdiYlVwcGVyTGVmdH1cbiAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4gc2V0U3RhdGUoeyBbJ3VzbmdiYlVwcGVyTGVmdCddOiB2YWx1ZSB9KX1cbiAgICAgIC8+XG4gICAgICA8VGV4dEZpZWxkXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgdHMtbWlncmF0ZSgyMzIyKSBGSVhNRTogVHlwZSAneyBsYWJlbDogc3RyaW5nOyBzdHlsZTogeyBtaW5XaWR0aDogbnVtYmVyOyAuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICBsYWJlbD1cIkxvd2VyIFJpZ2h0XCJcbiAgICAgICAgc3R5bGU9e3sgbWluV2lkdGg6IDIwMCB9fVxuICAgICAgICB2YWx1ZT17dXNuZ2JiTG93ZXJSaWdodH1cbiAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4gc2V0U3RhdGUoeyBbJ3VzbmdiYkxvd2VyUmlnaHQnXTogdmFsdWUgfSl9XG4gICAgICAvPlxuICAgICAgPEVycm9yQ29tcG9uZW50IGVycm9yU3RhdGU9e3VzbmdFcnJvcn0gLz5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5jb25zdCBCb3VuZGluZ0JveFV0bVVwcyA9IChwcm9wczogYW55KSA9PiB7XG4gIGNvbnN0IHtcbiAgICB1dG1VcHNVcHBlckxlZnRFYXN0aW5nLFxuICAgIHV0bVVwc1VwcGVyTGVmdE5vcnRoaW5nLFxuICAgIHV0bVVwc1VwcGVyTGVmdFpvbmUsXG4gICAgdXRtVXBzVXBwZXJMZWZ0SGVtaXNwaGVyZSxcbiAgICB1dG1VcHNMb3dlclJpZ2h0RWFzdGluZyxcbiAgICB1dG1VcHNMb3dlclJpZ2h0Tm9ydGhpbmcsXG4gICAgdXRtVXBzTG93ZXJSaWdodFpvbmUsXG4gICAgdXRtVXBzTG93ZXJSaWdodEhlbWlzcGhlcmUsXG4gICAgc2V0U3RhdGUsXG4gICAgZXJyb3JMaXN0ZW5lcixcbiAgfSA9IHByb3BzXG4gIGNvbnN0IHVwcGVyTGVmdCA9IHtcbiAgICBlYXN0aW5nOiB1dG1VcHNVcHBlckxlZnRFYXN0aW5nLFxuICAgIG5vcnRoaW5nOiB1dG1VcHNVcHBlckxlZnROb3J0aGluZyxcbiAgICB6b25lTnVtYmVyOiB1dG1VcHNVcHBlckxlZnRab25lLFxuICAgIGhlbWlzcGhlcmU6IHV0bVVwc1VwcGVyTGVmdEhlbWlzcGhlcmUsXG4gIH1cbiAgY29uc3QgbG93ZXJSaWdodCA9IHtcbiAgICBlYXN0aW5nOiB1dG1VcHNMb3dlclJpZ2h0RWFzdGluZyxcbiAgICBub3J0aGluZzogdXRtVXBzTG93ZXJSaWdodE5vcnRoaW5nLFxuICAgIHpvbmVOdW1iZXI6IHV0bVVwc0xvd2VyUmlnaHRab25lLFxuICAgIGhlbWlzcGhlcmU6IHV0bVVwc0xvd2VyUmlnaHRIZW1pc3BoZXJlLFxuICB9XG4gIGNvbnN0IFt1cHBlckxlZnRFcnJvciwgc2V0VXBwZXJMZWZ0RXJyb3JdID0gdXNlU3RhdGUoaW5pdGlhbEVycm9yU3RhdGUpXG4gIGNvbnN0IFtsb3dlclJpZ2h0RXJyb3IsIHNldExvd2VyUmlnaHRFcnJvcl0gPSB1c2VTdGF0ZShpbml0aWFsRXJyb3JTdGF0ZSlcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChwcm9wcy5kcmF3aW5nKSB7XG4gICAgICBzZXRVcHBlckxlZnRFcnJvcihpbml0aWFsRXJyb3JTdGF0ZSlcbiAgICAgIHNldExvd2VyUmlnaHRFcnJvcihpbml0aWFsRXJyb3JTdGF0ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdXBwZXJMZWZ0VmFsaWRhdGlvblJlc3VsdCA9IFtcbiAgICAgICAgdmFsaWRhdGVHZW8oJ2Vhc3RpbmcnLCB1cHBlckxlZnQpLFxuICAgICAgICB2YWxpZGF0ZUdlbygnbm9ydGhpbmcnLCB1cHBlckxlZnQpLFxuICAgICAgICB2YWxpZGF0ZUdlbygnem9uZU51bWJlcicsIHVwcGVyTGVmdCksXG4gICAgICAgIHZhbGlkYXRlR2VvKCdoZW1pc3BoZXJlJywgdXBwZXJMZWZ0KSxcbiAgICAgIF0uZmluZCgodmFsaWRhdGlvbikgPT4gdmFsaWRhdGlvbj8uZXJyb3IpXG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHRzLW1pZ3JhdGUoMjM0NSkgRklYTUU6IEFyZ3VtZW50IG9mIHR5cGUgJ3sgZXJyb3I6IGJvb2xlYW47IG1lc3NhZ2U6IHN0cmluLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgIHNldFVwcGVyTGVmdEVycm9yKHVwcGVyTGVmdFZhbGlkYXRpb25SZXN1bHQgfHwgaW5pdGlhbEVycm9yU3RhdGUpXG4gICAgICBjb25zdCBsb3dlclJpZ2h0VmFsaWRhdGlvblJlc3VsdCA9IFtcbiAgICAgICAgdmFsaWRhdGVHZW8oJ2Vhc3RpbmcnLCBsb3dlclJpZ2h0KSxcbiAgICAgICAgdmFsaWRhdGVHZW8oJ25vcnRoaW5nJywgbG93ZXJSaWdodCksXG4gICAgICAgIHZhbGlkYXRlR2VvKCd6b25lTnVtYmVyJywgbG93ZXJSaWdodCksXG4gICAgICAgIHZhbGlkYXRlR2VvKCdoZW1pc3BoZXJlJywgbG93ZXJSaWdodCksXG4gICAgICAgIHZhbGlkYXRlR2VvKCdiYm94JywgeyBpc1V0bVVwczogdHJ1ZSwgdXBwZXJMZWZ0LCBsb3dlclJpZ2h0IH0pLFxuICAgICAgXS5maW5kKCh2YWxpZGF0aW9uKSA9PiB2YWxpZGF0aW9uPy5lcnJvcilcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgdHMtbWlncmF0ZSgyMzQ1KSBGSVhNRTogQXJndW1lbnQgb2YgdHlwZSAneyBlcnJvcjogYm9vbGVhbjsgbWVzc2FnZTogc3RyaW4uLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgc2V0TG93ZXJSaWdodEVycm9yKGxvd2VyUmlnaHRWYWxpZGF0aW9uUmVzdWx0IHx8IGluaXRpYWxFcnJvclN0YXRlKVxuICAgICAgZXJyb3JMaXN0ZW5lciAmJlxuICAgICAgICBlcnJvckxpc3RlbmVyKHtcbiAgICAgICAgICBiYm94VUw6IHVwcGVyTGVmdFZhbGlkYXRpb25SZXN1bHQsXG4gICAgICAgICAgYmJveExSOiBsb3dlclJpZ2h0VmFsaWRhdGlvblJlc3VsdCxcbiAgICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuICgpID0+IGNsZWFyVmFsaWRhdGlvblJlc3VsdHMoZXJyb3JMaXN0ZW5lcilcbiAgfSwgW1xuICAgIHByb3BzLnV0bVVwc1VwcGVyTGVmdEVhc3RpbmcsXG4gICAgcHJvcHMudXRtVXBzVXBwZXJMZWZ0Tm9ydGhpbmcsXG4gICAgcHJvcHMudXRtVXBzVXBwZXJMZWZ0Wm9uZSxcbiAgICBwcm9wcy51dG1VcHNVcHBlckxlZnRIZW1pc3BoZXJlLFxuICAgIHByb3BzLnV0bVVwc0xvd2VyUmlnaHRFYXN0aW5nLFxuICAgIHByb3BzLnV0bVVwc0xvd2VyUmlnaHROb3J0aGluZyxcbiAgICBwcm9wcy51dG1VcHNMb3dlclJpZ2h0Wm9uZSxcbiAgICBwcm9wcy51dG1VcHNMb3dlclJpZ2h0SGVtaXNwaGVyZSxcbiAgXSlcblxuICByZXR1cm4gKFxuICAgIDxkaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImlucHV0LWxvY2F0aW9uIG1iLTJcIj5cbiAgICAgICAgPEdyb3VwPlxuICAgICAgICAgIDxMYWJlbD5VcHBlciBMZWZ0PC9MYWJlbD5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgc3BhY2UteS0yXCI+XG4gICAgICAgICAgICA8VGV4dEZpZWxkXG4gICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgdHMtbWlncmF0ZSgyMzIyKSBGSVhNRTogVHlwZSAneyBsYWJlbDogc3RyaW5nOyB2YWx1ZTogYW55OyBvbkNoYW5nZTogKHZhbHUuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgICAgICBsYWJlbD1cIkVhc3RpbmdcIlxuICAgICAgICAgICAgICB2YWx1ZT17XG4gICAgICAgICAgICAgICAgdXRtVXBzVXBwZXJMZWZ0RWFzdGluZyAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICA/IFN0cmluZyh1dG1VcHNVcHBlckxlZnRFYXN0aW5nKVxuICAgICAgICAgICAgICAgICAgOiB1dG1VcHNVcHBlckxlZnRFYXN0aW5nXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT5cbiAgICAgICAgICAgICAgICBzZXRTdGF0ZSh7IFsndXRtVXBzVXBwZXJMZWZ0RWFzdGluZyddOiB2YWx1ZSB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGFkZG9uPVwibVwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPFRleHRGaWVsZFxuICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHRzLW1pZ3JhdGUoMjMyMikgRklYTUU6IFR5cGUgJ3sgbGFiZWw6IHN0cmluZzsgdmFsdWU6IGFueTsgb25DaGFuZ2U6ICh2YWx1Li4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICAgICAgbGFiZWw9XCJOb3J0aGluZ1wiXG4gICAgICAgICAgICAgIHZhbHVlPXtcbiAgICAgICAgICAgICAgICB1dG1VcHNVcHBlckxlZnROb3J0aGluZyAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICA/IFN0cmluZyh1dG1VcHNVcHBlckxlZnROb3J0aGluZylcbiAgICAgICAgICAgICAgICAgIDogdXRtVXBzVXBwZXJMZWZ0Tm9ydGhpbmdcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PlxuICAgICAgICAgICAgICAgIHNldFN0YXRlKHsgWyd1dG1VcHNVcHBlckxlZnROb3J0aGluZyddOiB2YWx1ZSB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGFkZG9uPVwibVwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPFpvbmVcbiAgICAgICAgICAgICAgdmFsdWU9e3V0bVVwc1VwcGVyTGVmdFpvbmV9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWU6IGFueSkgPT5cbiAgICAgICAgICAgICAgICBzZXRTdGF0ZSh7IFsndXRtVXBzVXBwZXJMZWZ0Wm9uZSddOiB2YWx1ZSB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPEhlbWlzcGhlcmVcbiAgICAgICAgICAgICAgdmFsdWU9e3V0bVVwc1VwcGVyTGVmdEhlbWlzcGhlcmV9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWU6IGFueSkgPT5cbiAgICAgICAgICAgICAgICBzZXRTdGF0ZSh7IFsndXRtVXBzVXBwZXJMZWZ0SGVtaXNwaGVyZSddOiB2YWx1ZSB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L0dyb3VwPlxuICAgICAgICA8RXJyb3JDb21wb25lbnQgZXJyb3JTdGF0ZT17dXBwZXJMZWZ0RXJyb3J9IC8+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5wdXQtbG9jYXRpb25cIj5cbiAgICAgICAgPEdyb3VwPlxuICAgICAgICAgIDxMYWJlbD5Mb3dlciBSaWdodDwvTGFiZWw+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHNwYWNlLXktMlwiPlxuICAgICAgICAgICAgPFRleHRGaWVsZFxuICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHRzLW1pZ3JhdGUoMjMyMikgRklYTUU6IFR5cGUgJ3sgbGFiZWw6IHN0cmluZzsgdmFsdWU6IGFueTsgb25DaGFuZ2U6ICh2YWx1Li4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICAgICAgbGFiZWw9XCJFYXN0aW5nXCJcbiAgICAgICAgICAgICAgdmFsdWU9e1xuICAgICAgICAgICAgICAgIHV0bVVwc0xvd2VyUmlnaHRFYXN0aW5nICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgID8gU3RyaW5nKHV0bVVwc0xvd2VyUmlnaHRFYXN0aW5nKVxuICAgICAgICAgICAgICAgICAgOiB1dG1VcHNMb3dlclJpZ2h0RWFzdGluZ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+XG4gICAgICAgICAgICAgICAgc2V0U3RhdGUoeyBbJ3V0bVVwc0xvd2VyUmlnaHRFYXN0aW5nJ106IHZhbHVlIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYWRkb249XCJtXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8VGV4dEZpZWxkXG4gICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgdHMtbWlncmF0ZSgyMzIyKSBGSVhNRTogVHlwZSAneyBsYWJlbDogc3RyaW5nOyB2YWx1ZTogYW55OyBvbkNoYW5nZTogKHZhbHUuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgICAgICBsYWJlbD1cIk5vcnRoaW5nXCJcbiAgICAgICAgICAgICAgdmFsdWU9e1xuICAgICAgICAgICAgICAgIHV0bVVwc0xvd2VyUmlnaHROb3J0aGluZyAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICA/IFN0cmluZyh1dG1VcHNMb3dlclJpZ2h0Tm9ydGhpbmcpXG4gICAgICAgICAgICAgICAgICA6IHV0bVVwc0xvd2VyUmlnaHROb3J0aGluZ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+XG4gICAgICAgICAgICAgICAgc2V0U3RhdGUoeyBbJ3V0bVVwc0xvd2VyUmlnaHROb3J0aGluZyddOiB2YWx1ZSB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGFkZG9uPVwibVwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPFpvbmVcbiAgICAgICAgICAgICAgdmFsdWU9e3V0bVVwc0xvd2VyUmlnaHRab25lfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlOiBhbnkpID0+XG4gICAgICAgICAgICAgICAgc2V0U3RhdGUoeyBbJ3V0bVVwc0xvd2VyUmlnaHRab25lJ106IHZhbHVlIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8SGVtaXNwaGVyZVxuICAgICAgICAgICAgICB2YWx1ZT17dXRtVXBzTG93ZXJSaWdodEhlbWlzcGhlcmV9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWU6IGFueSkgPT5cbiAgICAgICAgICAgICAgICBzZXRTdGF0ZSh7IFsndXRtVXBzTG93ZXJSaWdodEhlbWlzcGhlcmUnXTogdmFsdWUgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9Hcm91cD5cbiAgICAgICAgPEVycm9yQ29tcG9uZW50IGVycm9yU3RhdGU9e2xvd2VyUmlnaHRFcnJvcn0gLz5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG5cbmNvbnN0IEJvdW5kaW5nQm94ID0gKHByb3BzOiBhbnkpID0+IHtcbiAgY29uc3QgeyBzZXRTdGF0ZSwgbG9jYXRpb25UeXBlIH0gPSBwcm9wc1xuXG4gIGNvbnN0IGlucHV0cyA9IHtcbiAgICBkZDogQm91bmRpbmdCb3hMYXRMb25EZCxcbiAgICBkbXM6IEJvdW5kaW5nQm94TGF0TG9uRG1zLFxuICAgIHVzbmc6IEJvdW5kaW5nQm94VXNuZ01ncnMsXG4gICAgdXRtVXBzOiBCb3VuZGluZ0JveFV0bVVwcyxcbiAgfVxuXG4gIC8vIEB0cy1leHBlY3QtZXJyb3IgdHMtbWlncmF0ZSg3MDUzKSBGSVhNRTogRWxlbWVudCBpbXBsaWNpdGx5IGhhcyBhbiAnYW55JyB0eXBlIGJlY2F1c2UgZXhwcmUuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICBjb25zdCBDb21wb25lbnQgPSBpbnB1dHNbbG9jYXRpb25UeXBlXSB8fCBudWxsXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2PlxuICAgICAgPFJhZGlvXG4gICAgICAgIHZhbHVlPXtsb2NhdGlvblR5cGV9XG4gICAgICAgIG9uQ2hhbmdlPXsodmFsdWU6IGFueSkgPT4gc2V0U3RhdGUoeyBbJ2xvY2F0aW9uVHlwZSddOiB2YWx1ZSB9KX1cbiAgICAgID5cbiAgICAgICAgPFJhZGlvSXRlbSB2YWx1ZT1cImRkXCI+TGF0L0xvbiAoREQpPC9SYWRpb0l0ZW0+XG4gICAgICAgIDxSYWRpb0l0ZW0gdmFsdWU9XCJkbXNcIj5MYXQvTG9uIChETVMpPC9SYWRpb0l0ZW0+XG4gICAgICAgIDxSYWRpb0l0ZW0gdmFsdWU9XCJ1c25nXCI+VVNORyAvIE1HUlM8L1JhZGlvSXRlbT5cbiAgICAgICAgPFJhZGlvSXRlbSB2YWx1ZT1cInV0bVVwc1wiPlVUTSAvIFVQUzwvUmFkaW9JdGVtPlxuICAgICAgPC9SYWRpbz5cbiAgICAgIDxNaW5pbXVtU3BhY2luZyAvPlxuICAgICAge0NvbXBvbmVudCAhPT0gbnVsbCA/IDxDb21wb25lbnQgey4uLnByb3BzfSAvPiA6IG51bGx9XG4gICAgPC9kaXY+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgQm91bmRpbmdCb3hcbiJdfQ==