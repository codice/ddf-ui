import { __assign } from "tslib";
import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
/**
 * Copyright (c) Codice Foundation
 *
 * This is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser
 * General Public License as published by the Free Software Foundation, either version 3 of the
 * License, or any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without
 * even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
 * Lesser General Public License for more details. A copy of the GNU Lesser General Public License
 * is distributed along with this program and can be found at
 * <http://www.gnu.org/licenses/lgpl.html>.
 *
 **/
import * as React from 'react';
import Button from '@mui/material/Button';
import Autocomplete from '@mui/material/Autocomplete';
import TextField from '@mui/material/TextField';
import SummaryManageAttributes from '../summary-manage-attributes/summary-manage-attributes';
import ProgressButton from '../progress-button';
import { DialogActions, DialogContent, LinearProgress } from '@mui/material';
import useSnack from '../../component/hooks/useSnack';
var ResultsExportComponent = function (_a) {
    var selectedFormat = _a.selectedFormat, exportFormats = _a.exportFormats, exportDisabled = _a.exportDisabled, onExportClick = _a.onExportClick, handleExportOptionChange = _a.handleExportOptionChange, exportSuccessful = _a.exportSuccessful, onClose = _a.onClose, loading = _a.loading;
    var addSnack = useSnack();
    React.useEffect(function () {
        var _a;
        handleExportOptionChange((_a = exportFormats[0]) === null || _a === void 0 ? void 0 : _a.displayName);
    }, [exportFormats]);
    if (exportSuccessful) {
        onClose();
    }
    return exportFormats.length === 0 ? (_jsx(LinearProgress, { className: "w-full h-2" })) : (_jsxs(_Fragment, { children: [_jsx(DialogContent, { children: _jsxs("div", { className: "p-4", style: { minWidth: '400px' }, children: [_jsx("div", { "data-id": "export-format-select", className: "export-option", children: _jsx(Autocomplete, { "data-id": "filter-type-autocomplete", fullWidth: true, size: "small", options: exportFormats, getOptionLabel: function (option) { return option.displayName; }, isOptionEqualToValue: function (option, value) {
                                    return option.displayName === value.displayName;
                                }, onChange: function (_e, newValue) {
                                    handleExportOptionChange(newValue.displayName);
                                }, disableClearable: true, value: exportFormats.find(function (format) { return format.displayName === selectedFormat; }) || exportFormats[0], renderInput: function (params) { return (_jsx(TextField, __assign({}, params, { variant: "outlined" }))); } }, JSON.stringify(exportFormats)) }), ['CSV', 'RTF', 'XLSX'].includes(selectedFormat) ? (_jsx(SummaryManageAttributes, { isExport: true })) : null] }) }), _jsx(DialogActions, { children: _jsxs("div", { className: "pt-2", style: { display: 'flex', justifyContent: 'flex-end' }, children: [_jsx(Button, { className: "mr-2", disabled: loading, variant: "text", onClick: function () {
                                onClose();
                            }, children: "Cancel" }), _jsx(ProgressButton, { variant: "contained", color: "primary", "data-id": "export-button", disabled: exportDisabled, onClick: function () {
                                onExportClick(addSnack);
                            }, loading: loading, children: "Export" })] }) })] }));
};
export default ResultsExportComponent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJlc2VudGF0aW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL21haW4vd2ViYXBwL3JlYWN0LWNvbXBvbmVudC9yZXN1bHRzLWV4cG9ydC9wcmVzZW50YXRpb24udHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7Ozs7Ozs7Ozs7SUFhSTtBQUNKLE9BQU8sS0FBSyxLQUFLLE1BQU0sT0FBTyxDQUFBO0FBRTlCLE9BQU8sTUFBTSxNQUFNLHNCQUFzQixDQUFBO0FBQ3pDLE9BQU8sWUFBWSxNQUFNLDRCQUE0QixDQUFBO0FBQ3JELE9BQU8sU0FBUyxNQUFNLHlCQUF5QixDQUFBO0FBQy9DLE9BQU8sdUJBQXVCLE1BQU0sd0RBQXdELENBQUE7QUFDNUYsT0FBTyxjQUFjLE1BQU0sb0JBQW9CLENBQUE7QUFDL0MsT0FBTyxFQUFFLGFBQWEsRUFBRSxhQUFhLEVBQUUsY0FBYyxFQUFFLE1BQU0sZUFBZSxDQUFBO0FBQzVFLE9BQU8sUUFBUSxNQUFNLGdDQUFnQyxDQUFBO0FBcUJyRCxJQUFNLHNCQUFzQixHQUFHLFVBQUMsRUFTeEI7UUFSTixjQUFjLG9CQUFBLEVBQ2QsYUFBYSxtQkFBQSxFQUNiLGNBQWMsb0JBQUEsRUFDZCxhQUFhLG1CQUFBLEVBQ2Isd0JBQXdCLDhCQUFBLEVBQ3hCLGdCQUFnQixzQkFBQSxFQUNoQixPQUFPLGFBQUEsRUFDUCxPQUFPLGFBQUE7SUFFUCxJQUFNLFFBQVEsR0FBRyxRQUFRLEVBQUUsQ0FBQTtJQUMzQixLQUFLLENBQUMsU0FBUyxDQUFDOztRQUNkLHdCQUF3QixDQUFDLE1BQUEsYUFBYSxDQUFDLENBQUMsQ0FBQywwQ0FBRSxXQUFXLENBQUMsQ0FBQTtJQUN6RCxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFBO0lBRW5CLElBQUksZ0JBQWdCLEVBQUUsQ0FBQztRQUNyQixPQUFPLEVBQUUsQ0FBQTtJQUNYLENBQUM7SUFFRCxPQUFPLGFBQWEsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUNsQyxLQUFDLGNBQWMsSUFBQyxTQUFTLEVBQUMsWUFBWSxHQUFHLENBQzFDLENBQUMsQ0FBQyxDQUFDLENBQ0YsOEJBQ0UsS0FBQyxhQUFhLGNBQ1osZUFBSyxTQUFTLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBRSxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsYUFDL0MseUJBQWEsc0JBQXNCLEVBQUMsU0FBUyxFQUFDLGVBQWUsWUFDM0QsS0FBQyxZQUFZLGVBRUgsMEJBQTBCLEVBQ2xDLFNBQVMsUUFDVCxJQUFJLEVBQUMsT0FBTyxFQUNaLE9BQU8sRUFBRSxhQUFhLEVBQ3RCLGNBQWMsRUFBRSxVQUFDLE1BQU0sSUFBSyxPQUFBLE1BQU0sQ0FBQyxXQUFXLEVBQWxCLENBQWtCLEVBQzlDLG9CQUFvQixFQUFFLFVBQUMsTUFBTSxFQUFFLEtBQUs7b0NBQ2xDLE9BQUEsTUFBTSxDQUFDLFdBQVcsS0FBSyxLQUFLLENBQUMsV0FBVztnQ0FBeEMsQ0FBd0MsRUFFMUMsUUFBUSxFQUFFLFVBQUMsRUFBRSxFQUFFLFFBQVE7b0NBQ3JCLHdCQUF3QixDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQTtnQ0FDaEQsQ0FBQyxFQUNELGdCQUFnQixRQUNoQixLQUFLLEVBQ0gsYUFBYSxDQUFDLElBQUksQ0FDaEIsVUFBQyxNQUFNLElBQUssT0FBQSxNQUFNLENBQUMsV0FBVyxLQUFLLGNBQWMsRUFBckMsQ0FBcUMsQ0FDbEQsSUFBSSxhQUFhLENBQUMsQ0FBQyxDQUFDLEVBRXZCLFdBQVcsRUFBRSxVQUFDLE1BQU0sSUFBSyxPQUFBLENBQ3ZCLEtBQUMsU0FBUyxlQUFLLE1BQU0sSUFBRSxPQUFPLEVBQUMsVUFBVSxJQUFHLENBQzdDLEVBRndCLENBRXhCLElBcEJJLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDLENBcUJsQyxHQUNFLEVBRUwsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FDakQsS0FBQyx1QkFBdUIsSUFBQyxRQUFRLEVBQUUsSUFBSSxHQUFJLENBQzVDLENBQUMsQ0FBQyxDQUFDLElBQUksSUFDSixHQUNRLEVBQ2hCLEtBQUMsYUFBYSxjQUNaLGVBQ0UsU0FBUyxFQUFDLE1BQU0sRUFDaEIsS0FBSyxFQUFFLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxjQUFjLEVBQUUsVUFBVSxFQUFFLGFBRXRELEtBQUMsTUFBTSxJQUNMLFNBQVMsRUFBQyxNQUFNLEVBQ2hCLFFBQVEsRUFBRSxPQUFPLEVBQ2pCLE9BQU8sRUFBQyxNQUFNLEVBQ2QsT0FBTyxFQUFFO2dDQUNQLE9BQU8sRUFBRSxDQUFBOzRCQUNYLENBQUMsdUJBR00sRUFDVCxLQUFDLGNBQWMsSUFDYixPQUFPLEVBQUMsV0FBVyxFQUNuQixLQUFLLEVBQUMsU0FBUyxhQUNQLGVBQWUsRUFDdkIsUUFBUSxFQUFFLGNBQWMsRUFDeEIsT0FBTyxFQUFFO2dDQUNQLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQTs0QkFDekIsQ0FBQyxFQUNELE9BQU8sRUFBRSxPQUFPLHVCQUdELElBQ2IsR0FDUSxJQUNmLENBQ0osQ0FBQTtBQUNILENBQUMsQ0FBQTtBQUVELGVBQWUsc0JBQXNCLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgQ29kaWNlIEZvdW5kYXRpb25cbiAqXG4gKiBUaGlzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgTGVzc2VyXG4gKiBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZVxuICogTGljZW5zZSwgb3IgYW55IGxhdGVyIHZlcnNpb24uXG4gKlxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dFxuICogZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGUgR05VXG4gKiBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLiBBIGNvcHkgb2YgdGhlIEdOVSBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICogaXMgZGlzdHJpYnV0ZWQgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0gYW5kIGNhbiBiZSBmb3VuZCBhdFxuICogPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9sZ3BsLmh0bWw+LlxuICpcbiAqKi9cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0J1xuXG5pbXBvcnQgQnV0dG9uIGZyb20gJ0BtdWkvbWF0ZXJpYWwvQnV0dG9uJ1xuaW1wb3J0IEF1dG9jb21wbGV0ZSBmcm9tICdAbXVpL21hdGVyaWFsL0F1dG9jb21wbGV0ZSdcbmltcG9ydCBUZXh0RmllbGQgZnJvbSAnQG11aS9tYXRlcmlhbC9UZXh0RmllbGQnXG5pbXBvcnQgU3VtbWFyeU1hbmFnZUF0dHJpYnV0ZXMgZnJvbSAnLi4vc3VtbWFyeS1tYW5hZ2UtYXR0cmlidXRlcy9zdW1tYXJ5LW1hbmFnZS1hdHRyaWJ1dGVzJ1xuaW1wb3J0IFByb2dyZXNzQnV0dG9uIGZyb20gJy4uL3Byb2dyZXNzLWJ1dHRvbidcbmltcG9ydCB7IERpYWxvZ0FjdGlvbnMsIERpYWxvZ0NvbnRlbnQsIExpbmVhclByb2dyZXNzIH0gZnJvbSAnQG11aS9tYXRlcmlhbCdcbmltcG9ydCB1c2VTbmFjayBmcm9tICcuLi8uLi9jb21wb25lbnQvaG9va3MvdXNlU25hY2snXG5pbXBvcnQgeyBBZGRTbmFjayB9IGZyb20gJy4uLy4uL2NvbXBvbmVudC9zbmFjay9zbmFjay5wcm92aWRlcidcblxudHlwZSBFeHBvcnRGb3JtYXQgPSB7XG4gIGlkOiBzdHJpbmdcbiAgZGlzcGxheU5hbWU6IHN0cmluZ1xufVxuXG5leHBvcnQgdHlwZSBQcm9wcyA9IHtcbiAgc2VsZWN0ZWRGb3JtYXQ6IHN0cmluZ1xuICBleHBvcnRGb3JtYXRzOiBFeHBvcnRGb3JtYXRbXVxuICBleHBvcnREaXNhYmxlZDogYm9vbGVhblxuICBvbkV4cG9ydENsaWNrOiAoYWRkU25hY2s6IEFkZFNuYWNrKSA9PiB2b2lkXG4gIGhhbmRsZUV4cG9ydE9wdGlvbkNoYW5nZTogKHZhbDogc3RyaW5nKSA9PiB2b2lkXG4gIGxvYWRpbmc/OiBib29sZWFuXG4gIHNldExvYWRpbmc/OiBhbnlcbiAgb25DbG9zZT86IGFueVxuICBleHBvcnRTdWNjZXNzZnVsPzogYm9vbGVhblxuICBzZXRFeHBvcnRTdWNjZXNzZnVsPzogYW55XG59XG5cbmNvbnN0IFJlc3VsdHNFeHBvcnRDb21wb25lbnQgPSAoe1xuICBzZWxlY3RlZEZvcm1hdCxcbiAgZXhwb3J0Rm9ybWF0cyxcbiAgZXhwb3J0RGlzYWJsZWQsXG4gIG9uRXhwb3J0Q2xpY2ssXG4gIGhhbmRsZUV4cG9ydE9wdGlvbkNoYW5nZSxcbiAgZXhwb3J0U3VjY2Vzc2Z1bCxcbiAgb25DbG9zZSxcbiAgbG9hZGluZyxcbn06IFByb3BzKSA9PiB7XG4gIGNvbnN0IGFkZFNuYWNrID0gdXNlU25hY2soKVxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGhhbmRsZUV4cG9ydE9wdGlvbkNoYW5nZShleHBvcnRGb3JtYXRzWzBdPy5kaXNwbGF5TmFtZSlcbiAgfSwgW2V4cG9ydEZvcm1hdHNdKVxuXG4gIGlmIChleHBvcnRTdWNjZXNzZnVsKSB7XG4gICAgb25DbG9zZSgpXG4gIH1cblxuICByZXR1cm4gZXhwb3J0Rm9ybWF0cy5sZW5ndGggPT09IDAgPyAoXG4gICAgPExpbmVhclByb2dyZXNzIGNsYXNzTmFtZT1cInctZnVsbCBoLTJcIiAvPlxuICApIDogKFxuICAgIDw+XG4gICAgICA8RGlhbG9nQ29udGVudD5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTRcIiBzdHlsZT17eyBtaW5XaWR0aDogJzQwMHB4JyB9fT5cbiAgICAgICAgICA8ZGl2IGRhdGEtaWQ9XCJleHBvcnQtZm9ybWF0LXNlbGVjdFwiIGNsYXNzTmFtZT1cImV4cG9ydC1vcHRpb25cIj5cbiAgICAgICAgICAgIDxBdXRvY29tcGxldGVcbiAgICAgICAgICAgICAga2V5PXtKU09OLnN0cmluZ2lmeShleHBvcnRGb3JtYXRzKX1cbiAgICAgICAgICAgICAgZGF0YS1pZD1cImZpbHRlci10eXBlLWF1dG9jb21wbGV0ZVwiXG4gICAgICAgICAgICAgIGZ1bGxXaWR0aFxuICAgICAgICAgICAgICBzaXplPVwic21hbGxcIlxuICAgICAgICAgICAgICBvcHRpb25zPXtleHBvcnRGb3JtYXRzfVxuICAgICAgICAgICAgICBnZXRPcHRpb25MYWJlbD17KG9wdGlvbikgPT4gb3B0aW9uLmRpc3BsYXlOYW1lfVxuICAgICAgICAgICAgICBpc09wdGlvbkVxdWFsVG9WYWx1ZT17KG9wdGlvbiwgdmFsdWUpID0+XG4gICAgICAgICAgICAgICAgb3B0aW9uLmRpc3BsYXlOYW1lID09PSB2YWx1ZS5kaXNwbGF5TmFtZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoX2UsIG5ld1ZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgaGFuZGxlRXhwb3J0T3B0aW9uQ2hhbmdlKG5ld1ZhbHVlLmRpc3BsYXlOYW1lKVxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICBkaXNhYmxlQ2xlYXJhYmxlXG4gICAgICAgICAgICAgIHZhbHVlPXtcbiAgICAgICAgICAgICAgICBleHBvcnRGb3JtYXRzLmZpbmQoXG4gICAgICAgICAgICAgICAgICAoZm9ybWF0KSA9PiBmb3JtYXQuZGlzcGxheU5hbWUgPT09IHNlbGVjdGVkRm9ybWF0XG4gICAgICAgICAgICAgICAgKSB8fCBleHBvcnRGb3JtYXRzWzBdXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmVuZGVySW5wdXQ9eyhwYXJhbXMpID0+IChcbiAgICAgICAgICAgICAgICA8VGV4dEZpZWxkIHsuLi5wYXJhbXN9IHZhcmlhbnQ9XCJvdXRsaW5lZFwiIC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAge1snQ1NWJywgJ1JURicsICdYTFNYJ10uaW5jbHVkZXMoc2VsZWN0ZWRGb3JtYXQpID8gKFxuICAgICAgICAgICAgPFN1bW1hcnlNYW5hZ2VBdHRyaWJ1dGVzIGlzRXhwb3J0PXt0cnVlfSAvPlxuICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvRGlhbG9nQ29udGVudD5cbiAgICAgIDxEaWFsb2dBY3Rpb25zPlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3NOYW1lPVwicHQtMlwiXG4gICAgICAgICAgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBqdXN0aWZ5Q29udGVudDogJ2ZsZXgtZW5kJyB9fVxuICAgICAgICA+XG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgY2xhc3NOYW1lPVwibXItMlwiXG4gICAgICAgICAgICBkaXNhYmxlZD17bG9hZGluZ31cbiAgICAgICAgICAgIHZhcmlhbnQ9XCJ0ZXh0XCJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgb25DbG9zZSgpXG4gICAgICAgICAgICB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIENhbmNlbFxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDxQcm9ncmVzc0J1dHRvblxuICAgICAgICAgICAgdmFyaWFudD1cImNvbnRhaW5lZFwiXG4gICAgICAgICAgICBjb2xvcj1cInByaW1hcnlcIlxuICAgICAgICAgICAgZGF0YS1pZD1cImV4cG9ydC1idXR0b25cIlxuICAgICAgICAgICAgZGlzYWJsZWQ9e2V4cG9ydERpc2FibGVkfVxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICBvbkV4cG9ydENsaWNrKGFkZFNuYWNrKVxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmd9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgRXhwb3J0XG4gICAgICAgICAgPC9Qcm9ncmVzc0J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L0RpYWxvZ0FjdGlvbnM+XG4gICAgPC8+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgUmVzdWx0c0V4cG9ydENvbXBvbmVudFxuIl19