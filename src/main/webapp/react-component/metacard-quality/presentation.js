/**
 * Copyright (c) Codice Foundation
 *
 * This is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser
 * General Public License as published by the Free Software Foundation, either version 3 of the
 * License, or any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without
 * even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
 * Lesser General Public License for more details. A copy of the GNU Lesser General Public License
 * is distributed along with this program and can be found at
 * <http://www.gnu.org/licenses/lgpl.html>.
 *
 **/
import { __makeTemplateObject } from "tslib";
import { hot } from 'react-hot-loader';
import * as React from 'react';
import styled from 'styled-components';
import LinearProgress from '@mui/material/LinearProgress';
var Header = styled.h4(templateObject_1 || (templateObject_1 = __makeTemplateObject(["\n  text-align: left;\n  padding: ", ";\n"], ["\n  text-align: left;\n  padding: ", ";\n"])), function (props) { return props.theme.minimumSpacing; });
var Root = styled.div(templateObject_2 || (templateObject_2 = __makeTemplateObject(["\n  overflow: auto;\n\n  table {\n    width: 100%;\n    text-align: center;\n    margin-bottom: 40px;\n  }\n\n  th {\n    width: 33%;\n    text-align: center;\n  }\n\n  tr:nth-of-type(even) {\n    background: rgba(0, 0, 0, 0.1);\n  }\n\n  th,\n  td {\n    padding: 10px;\n  }\n\n  td + td {\n    border-left: 1px solid rgba(100, 100, 100, 0.3);\n  }\n\n  tbody {\n    border-top: 1px solid rgba(100, 100, 100, 0.3);\n  }\n"], ["\n  overflow: auto;\n\n  table {\n    width: 100%;\n    text-align: center;\n    margin-bottom: 40px;\n  }\n\n  th {\n    width: 33%;\n    text-align: center;\n  }\n\n  tr:nth-of-type(even) {\n    background: rgba(0, 0, 0, 0.1);\n  }\n\n  th,\n  td {\n    padding: 10px;\n  }\n\n  td + td {\n    border-left: 1px solid rgba(100, 100, 100, 0.3);\n  }\n\n  tbody {\n    border-top: 1px solid rgba(100, 100, 100, 0.3);\n  }\n"])));
var MetacardValidation = function (props) {
    var metacardValidation = props.metacardValidation;
    return (React.createElement(React.Fragment, null,
        React.createElement(Header, null, "Metacard Validation Issues"),
        React.createElement("table", null,
            React.createElement("thead", null,
                React.createElement("th", null, "Attribute"),
                React.createElement("th", null, "Severity"),
                React.createElement("th", null, "Message")),
            React.createElement("tbody", null, metacardValidation.map(function (validation, i) {
                return (React.createElement("tr", { "data-id": "metacard-validation-issue-container", key: i },
                    React.createElement("td", { "data-id": "attribute-value" }, validation.attributes.map(function (attribute, j) {
                        return React.createElement("div", { key: attribute + j }, attribute);
                    })),
                    React.createElement("td", { "data-id": "severity-value" }, validation.severity),
                    validation.duplicate ? (React.createElement("td", { "data-id": "message-value" },
                        validation.duplicate.message[0],
                        validation.duplicate.ids.map(function (id, index) {
                            return (React.createElement(React.Fragment, { key: id },
                                React.createElement("a", { href: "#metacards/".concat(id) }, id),
                                index !== validation.duplicate.ids.length - 1
                                    ? ', '
                                    : ''));
                        }),
                        validation.duplicate.message[1])) : (React.createElement("td", { "data-id": "message-value" }, validation.message))));
            })))));
};
var AttributeValidation = function (props) {
    var attributeValidation = props.attributeValidation;
    return (React.createElement(React.Fragment, null,
        React.createElement(Header, null, "Attribute Validation Issues"),
        React.createElement("table", null,
            React.createElement("thead", null,
                React.createElement("th", null, "Attribute"),
                React.createElement("th", null, "Warnings"),
                React.createElement("th", null, "Errors")),
            React.createElement("tbody", null, attributeValidation.map(function (validation, i) {
                return (React.createElement("tr", { "data-id": "attribute-validation-issue-container", key: i },
                    React.createElement("td", { "data-id": "attribute-value" }, validation.attribute),
                    React.createElement("td", { "data-id": "warnings-value" }, validation.warnings.map(function (warning, j) {
                        return React.createElement("div", { key: warning + j }, warning);
                    })),
                    React.createElement("td", { "data-id": "errors-value" }, validation.errors.map(function (error, j) {
                        return React.createElement("div", { key: error + j }, error);
                    }))));
            })))));
};
var render = function (props) {
    var metacardValidation = props.metacardValidation, attributeValidation = props.attributeValidation, loading = props.loading;
    return loading ? (React.createElement(React.Fragment, null,
        React.createElement(LinearProgress, { className: "w-full h-2" }))) : (React.createElement(React.Fragment, null,
        React.createElement(Root, null,
            metacardValidation.length > 0 ? (React.createElement(MetacardValidation, { metacardValidation: metacardValidation })) : (React.createElement(Header, null, "No Metacard Validation Issues to Report")),
            attributeValidation.length > 0 ? (React.createElement(AttributeValidation, { attributeValidation: attributeValidation })) : (React.createElement(Header, null, "No Attribute Validation Issues to Report")))));
};
export default hot(module)(render);
var templateObject_1, templateObject_2;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJlc2VudGF0aW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL21haW4vd2ViYXBwL3JlYWN0LWNvbXBvbmVudC9tZXRhY2FyZC1xdWFsaXR5L3ByZXNlbnRhdGlvbi50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7SUFhSTs7QUFFSixPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sa0JBQWtCLENBQUE7QUFDdEMsT0FBTyxLQUFLLEtBQUssTUFBTSxPQUFPLENBQUE7QUFDOUIsT0FBTyxNQUFNLE1BQU0sbUJBQW1CLENBQUE7QUFDdEMsT0FBTyxjQUFjLE1BQU0sOEJBQThCLENBQUE7QUFRekQsSUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLEVBQUUsOEdBQUEsb0NBRVgsRUFBcUMsS0FDakQsS0FEWSxVQUFDLEtBQUssSUFBSyxPQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMsY0FBYyxFQUExQixDQUEwQixDQUNqRCxDQUFBO0FBRUQsSUFBTSxJQUFJLEdBQUcsTUFBTSxDQUFDLEdBQUcsMmVBQUEsd2FBOEJ0QixJQUFBLENBQUE7QUFFRCxJQUFNLGtCQUFrQixHQUFHLFVBQUMsS0FBVTtJQUNwQyxJQUFNLGtCQUFrQixHQUFHLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQTtJQUNuRCxPQUFPLENBQ0w7UUFDRSxvQkFBQyxNQUFNLHFDQUFvQztRQUMzQztZQUNFO2dCQUNFLDRDQUFrQjtnQkFDbEIsMkNBQWlCO2dCQUNqQiwwQ0FBZ0IsQ0FDVjtZQUNSLG1DQUNHLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxVQUFDLFVBQWUsRUFBRSxDQUFTO2dCQUNqRCxPQUFPLENBQ0wsdUNBQVkscUNBQXFDLEVBQUMsR0FBRyxFQUFFLENBQUM7b0JBQ3RELHVDQUFZLGlCQUFpQixJQUMxQixVQUFVLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxVQUFDLFNBQWlCLEVBQUUsQ0FBUzt3QkFDdEQsT0FBTyw2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LG9CQUFDLE1BQU0sa0RBQWlELENBQ3pEO1lBRUEsbUJBQW1CLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FDaEMsb0JBQUMsbUJBQW1CLElBQUMsbUJBQW1CLEVBQUUsbUJBQW1CLEdBQUksQ0FDbEUsQ0FBQyxDQUFDLENBQUMsQ0FDRixvQkFBQyxNQUFNLG1EQUFrRCxDQUMxRCxDQUNJLENBQ04sQ0FDSixDQUFBO0FBQ0gsQ0FBQyxDQUFBO0FBRUQsZUFBZSxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgQ29kaWNlIEZvdW5kYXRpb25cbiAqXG4gKiBUaGlzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgTGVzc2VyXG4gKiBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZVxuICogTGljZW5zZSwgb3IgYW55IGxhdGVyIHZlcnNpb24uXG4gKlxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dFxuICogZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGUgR05VXG4gKiBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLiBBIGNvcHkgb2YgdGhlIEdOVSBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICogaXMgZGlzdHJpYnV0ZWQgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0gYW5kIGNhbiBiZSBmb3VuZCBhdFxuICogPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9sZ3BsLmh0bWw+LlxuICpcbiAqKi9cblxuaW1wb3J0IHsgaG90IH0gZnJvbSAncmVhY3QtaG90LWxvYWRlcidcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cydcbmltcG9ydCBMaW5lYXJQcm9ncmVzcyBmcm9tICdAbXVpL21hdGVyaWFsL0xpbmVhclByb2dyZXNzJ1xuXG50eXBlIFByb3BzID0ge1xuICBtZXRhY2FyZFZhbGlkYXRpb246IGFueVxuICBhdHRyaWJ1dGVWYWxpZGF0aW9uOiBhbnlcbiAgbG9hZGluZzogYm9vbGVhblxufVxuXG5jb25zdCBIZWFkZXIgPSBzdHlsZWQuaDRgXG4gIHRleHQtYWxpZ246IGxlZnQ7XG4gIHBhZGRpbmc6ICR7KHByb3BzKSA9PiBwcm9wcy50aGVtZS5taW5pbXVtU3BhY2luZ307XG5gXG5cbmNvbnN0IFJvb3QgPSBzdHlsZWQuZGl2YFxuICBvdmVyZmxvdzogYXV0bztcblxuICB0YWJsZSB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIG1hcmdpbi1ib3R0b206IDQwcHg7XG4gIH1cblxuICB0aCB7XG4gICAgd2lkdGg6IDMzJTtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIH1cblxuICB0cjpudGgtb2YtdHlwZShldmVuKSB7XG4gICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjEpO1xuICB9XG5cbiAgdGgsXG4gIHRkIHtcbiAgICBwYWRkaW5nOiAxMHB4O1xuICB9XG5cbiAgdGQgKyB0ZCB7XG4gICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCByZ2JhKDEwMCwgMTAwLCAxMDAsIDAuMyk7XG4gIH1cblxuICB0Ym9keSB7XG4gICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHJnYmEoMTAwLCAxMDAsIDEwMCwgMC4zKTtcbiAgfVxuYFxuXG5jb25zdCBNZXRhY2FyZFZhbGlkYXRpb24gPSAocHJvcHM6IGFueSkgPT4ge1xuICBjb25zdCBtZXRhY2FyZFZhbGlkYXRpb24gPSBwcm9wcy5tZXRhY2FyZFZhbGlkYXRpb25cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPEhlYWRlcj5NZXRhY2FyZCBWYWxpZGF0aW9uIElzc3VlczwvSGVhZGVyPlxuICAgICAgPHRhYmxlPlxuICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgPHRoPkF0dHJpYnV0ZTwvdGg+XG4gICAgICAgICAgPHRoPlNldmVyaXR5PC90aD5cbiAgICAgICAgICA8dGg+TWVzc2FnZTwvdGg+XG4gICAgICAgIDwvdGhlYWQ+XG4gICAgICAgIDx0Ym9keT5cbiAgICAgICAgICB7bWV0YWNhcmRWYWxpZGF0aW9uLm1hcCgodmFsaWRhdGlvbjogYW55LCBpOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDx0ciBkYXRhLWlkPVwibWV0YWNhcmQtdmFsaWRhdGlvbi1pc3N1ZS1jb250YWluZXJcIiBrZXk9e2l9PlxuICAgICAgICAgICAgICAgIDx0ZCBkYXRhLWlkPVwiYXR0cmlidXRlLXZhbHVlXCI+XG4gICAgICAgICAgICAgICAgICB7dmFsaWRhdGlvbi5hdHRyaWJ1dGVzLm1hcCgoYXR0cmlidXRlOiBzdHJpbmcsIGo6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gPGRpdiBrZXk9e2F0dHJpYnV0ZSArIGp9PnthdHRyaWJ1dGV9PC9kaXY+XG4gICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgIDx0ZCBkYXRhLWlkPVwic2V2ZXJpdHktdmFsdWVcIj57dmFsaWRhdGlvbi5zZXZlcml0eX08L3RkPlxuICAgICAgICAgICAgICAgIHt2YWxpZGF0aW9uLmR1cGxpY2F0ZSA/IChcbiAgICAgICAgICAgICAgICAgIDx0ZCBkYXRhLWlkPVwibWVzc2FnZS12YWx1ZVwiPlxuICAgICAgICAgICAgICAgICAgICB7dmFsaWRhdGlvbi5kdXBsaWNhdGUubWVzc2FnZVswXX1cbiAgICAgICAgICAgICAgICAgICAge3ZhbGlkYXRpb24uZHVwbGljYXRlLmlkcy5tYXAoKGlkOiBhbnksIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFJlYWN0LkZyYWdtZW50IGtleT17aWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPXtgI21ldGFjYXJkcy8ke2lkfWB9PntpZH08L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtpbmRleCAhPT0gdmFsaWRhdGlvbi5kdXBsaWNhdGUuaWRzLmxlbmd0aCAtIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICcsICdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICcnfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICB7dmFsaWRhdGlvbi5kdXBsaWNhdGUubWVzc2FnZVsxXX1cbiAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDx0ZCBkYXRhLWlkPVwibWVzc2FnZS12YWx1ZVwiPnt2YWxpZGF0aW9uLm1lc3NhZ2V9PC90ZD5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0pfVxuICAgICAgICA8L3Rib2R5PlxuICAgICAgPC90YWJsZT5cbiAgICA8Lz5cbiAgKVxufVxuXG5jb25zdCBBdHRyaWJ1dGVWYWxpZGF0aW9uID0gKHByb3BzOiBhbnkpID0+IHtcbiAgY29uc3QgYXR0cmlidXRlVmFsaWRhdGlvbiA9IHByb3BzLmF0dHJpYnV0ZVZhbGlkYXRpb25cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPEhlYWRlcj5BdHRyaWJ1dGUgVmFsaWRhdGlvbiBJc3N1ZXM8L0hlYWRlcj5cbiAgICAgIDx0YWJsZT5cbiAgICAgICAgPHRoZWFkPlxuICAgICAgICAgIDx0aD5BdHRyaWJ1dGU8L3RoPlxuICAgICAgICAgIDx0aD5XYXJuaW5nczwvdGg+XG4gICAgICAgICAgPHRoPkVycm9yczwvdGg+XG4gICAgICAgIDwvdGhlYWQ+XG4gICAgICAgIDx0Ym9keT5cbiAgICAgICAgICB7YXR0cmlidXRlVmFsaWRhdGlvbi5tYXAoKHZhbGlkYXRpb246IGFueSwgaTogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8dHIgZGF0YS1pZD1cImF0dHJpYnV0ZS12YWxpZGF0aW9uLWlzc3VlLWNvbnRhaW5lclwiIGtleT17aX0+XG4gICAgICAgICAgICAgICAgPHRkIGRhdGEtaWQ9XCJhdHRyaWJ1dGUtdmFsdWVcIj57dmFsaWRhdGlvbi5hdHRyaWJ1dGV9PC90ZD5cbiAgICAgICAgICAgICAgICA8dGQgZGF0YS1pZD1cIndhcm5pbmdzLXZhbHVlXCI+XG4gICAgICAgICAgICAgICAgICB7dmFsaWRhdGlvbi53YXJuaW5ncy5tYXAoKHdhcm5pbmc6IHN0cmluZywgajogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA8ZGl2IGtleT17d2FybmluZyArIGp9Pnt3YXJuaW5nfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICA8dGQgZGF0YS1pZD1cImVycm9ycy12YWx1ZVwiPlxuICAgICAgICAgICAgICAgICAge3ZhbGlkYXRpb24uZXJyb3JzLm1hcCgoZXJyb3I6IHN0cmluZywgajogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA8ZGl2IGtleT17ZXJyb3IgKyBqfT57ZXJyb3J9PC9kaXY+XG4gICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0pfVxuICAgICAgICA8L3Rib2R5PlxuICAgICAgPC90YWJsZT5cbiAgICA8Lz5cbiAgKVxufVxuXG5jb25zdCByZW5kZXIgPSAocHJvcHM6IFByb3BzKSA9PiB7XG4gIGNvbnN0IHsgbWV0YWNhcmRWYWxpZGF0aW9uLCBhdHRyaWJ1dGVWYWxpZGF0aW9uLCBsb2FkaW5nIH0gPSBwcm9wc1xuICByZXR1cm4gbG9hZGluZyA/IChcbiAgICA8PlxuICAgICAgPExpbmVhclByb2dyZXNzIGNsYXNzTmFtZT1cInctZnVsbCBoLTJcIiAvPlxuICAgIDwvPlxuICApIDogKFxuICAgIDw+XG4gICAgICA8Um9vdD5cbiAgICAgICAge21ldGFjYXJkVmFsaWRhdGlvbi5sZW5ndGggPiAwID8gKFxuICAgICAgICAgIDxNZXRhY2FyZFZhbGlkYXRpb24gbWV0YWNhcmRWYWxpZGF0aW9uPXttZXRhY2FyZFZhbGlkYXRpb259IC8+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPEhlYWRlcj5ObyBNZXRhY2FyZCBWYWxpZGF0aW9uIElzc3VlcyB0byBSZXBvcnQ8L0hlYWRlcj5cbiAgICAgICAgKX1cblxuICAgICAgICB7YXR0cmlidXRlVmFsaWRhdGlvbi5sZW5ndGggPiAwID8gKFxuICAgICAgICAgIDxBdHRyaWJ1dGVWYWxpZGF0aW9uIGF0dHJpYnV0ZVZhbGlkYXRpb249e2F0dHJpYnV0ZVZhbGlkYXRpb259IC8+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPEhlYWRlcj5ObyBBdHRyaWJ1dGUgVmFsaWRhdGlvbiBJc3N1ZXMgdG8gUmVwb3J0PC9IZWFkZXI+XG4gICAgICAgICl9XG4gICAgICA8L1Jvb3Q+XG4gICAgPC8+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgaG90KG1vZHVsZSkocmVuZGVyKVxuIl19